
-- =============================================
-- This stored procedure is generated by BuildProject
-- Author:	ThangNM
-- Create date:	16/03/2014 16:44
-- Description:	
-- Revise History:	
-- =============================================
CREATE PROCEDURE tblPhanCongCongTac_Update
		@PK_sMaPCCT	varchar(50)
		,@FK_sMaGV	varchar(50)
		,@FK_sMaMonhoc	varchar(50)
		,@tNgayBatDau	datetime
		,@tNgayKetThuc	datetime
		,@iTrangThai	smallint
AS
BEGIN
	SET NOCOUNT ON;
		
	UPDATE [tblPhanCongCongTac]	SET
		 [FK_sMaGV] 	= @FK_sMaGV
		,[FK_sMaMonhoc] 	= @FK_sMaMonhoc
		,[tNgayBatDau] 	= @tNgayBatDau
		,[tNgayKetThuc] 	= @tNgayKetThuc
		,[iTrangThai] 	= @iTrangThai
	WHERE 
		[PK_sMaPCCT] 	= @PK_sMaPCCT
		
END

GO

-- =============================================
-- This stored procedure is generated by BuildProject 
-- Author:	ThangNM
-- Create date:	16/03/2014 16:44
-- Description:	
-- Revise History:	
-- =============================================
CREATE PROCEDURE tblPhanCongCongTac_Delete
		@PK_sMaPCCT	varchar(50)
AS
BEGIN
	SET NOCOUNT ON;
		
	Delete [tblPhanCongCongTac]
	Where
		[PK_sMaPCCT] 	= @PK_sMaPCCT
		
END

GO

-- =============================================
-- This stored procedure is generated by BuildProject
-- Author:	ThangNM
-- Create date:	16/03/2014 16:44
-- Description:	
-- Revise History:	
-- =============================================
CREATE PROCEDURE tblPhanCongCongTac_Insert
			@PK_sMaPCCT	varchar(50)
			,@FK_sMaGV	varchar(50)
			,@FK_sMaMonhoc	varchar(50)
			,@tNgayBatDau	datetime
			,@tNgayKetThuc	datetime
			,@iTrangThai	smallint
AS
BEGIN
	SET NOCOUNT ON;
		
	Insert Into [tblPhanCongCongTac]( [PK_sMaPCCT]
				,[FK_sMaGV]
				,[FK_sMaMonhoc]
				,[tNgayBatDau]
				,[tNgayKetThuc]
				,[iTrangThai]
				)
		
	Values	( @PK_sMaPCCT
				,@FK_sMaGV
				,@FK_sMaMonhoc
				,@tNgayBatDau
				,@tNgayKetThuc
				,@iTrangThai
				)

END

GO

-- =============================================
-- This stored procedure is generated by BuildProject
-- Author:	ThangNM
-- Create date:	16/03/2014 16:44
-- Description:	
-- Revise History:	
-- =============================================
CREATE PROCEDURE tblPhanCongCongTac_SelectItem
		@PK_sMaPCCT	varchar(50)
AS
BEGIN
	SET NOCOUNT ON;
		
	Select 		[PK_sMaPCCT]
				, [FK_sMaGV]
				, [FK_sMaMonhoc]
				, [tNgayBatDau]
				, [tNgayKetThuc]
				, [iTrangThai]
	From	[tblPhanCongCongTac]
	Where
		[PK_sMaPCCT] 	= @PK_sMaPCCT
		
END

GO

-- =============================================
-- This stored procedure is generated by BuildProject
-- Author:	ThangNM
-- Create date:	16/03/2014 16:44
-- Description:	
-- Revise History:	
-- =============================================
CREATE PROCEDURE tblPhanCongCongTac_SelectList
AS
BEGIN
	SET NOCOUNT ON;
		
	Select 		[PK_sMaPCCT]
				, [FK_sMaGV]
				, [FK_sMaMonhoc]
				, [tNgayBatDau]
				, [tNgayKetThuc]
				, [iTrangThai]
	From	[tblPhanCongCongTac]
	Order by [PK_sMaPCCT]
		
END

GO

-- =============================================
-- This stored procedure is generated by BuildProject
-- Author:	ThangNM
-- Create date:	16/03/2014 16:44
-- Description:	
-- Revise History:	
-- =============================================
CREATE PROCEDURE tblPhanCongCongTac_Search
			@PK_sMaPCCT	varchar(50)
			,@FK_sMaGV	varchar(50)
			,@FK_sMaMonhoc	varchar(50)
			,@tNgayBatDau	datetime
			,@tNgayKetThuc	datetime
			,@iTrangThai	smallint
AS
BEGIN
	SET NOCOUNT ON;
		
	Select 		[PK_sMaPCCT]
				, [FK_sMaGV]
				, [FK_sMaMonhoc]
				, [tNgayBatDau]
				, [tNgayKetThuc]
				, [iTrangThai]
	From	[tblPhanCongCongTac]
	Where
		(@PK_sMaPCCT is null or [PK_sMaPCCT] 	like '%' + @PK_sMaPCCT+ '%')
		AND (@FK_sMaGV is null or [FK_sMaGV] 	like '%' + @FK_sMaGV+ '%')
		AND (@FK_sMaMonhoc is null or [FK_sMaMonhoc] 	like '%' + @FK_sMaMonhoc+ '%')
		AND (@tNgayBatDau is null or [tNgayBatDau] 	= @tNgayBatDau)
		AND (@tNgayKetThuc is null or [tNgayKetThuc] 	= @tNgayKetThuc)
		AND (@iTrangThai is null or [iTrangThai] 	like '%' + @iTrangThai+ '%')
		
END

GO

	
CREATE PROCEDURE tblPhanCongCongTac_SelectByFK_sMaGV
		@FK_sMaGV	varchar
AS
BEGIN
	SET NOCOUNT ON;

	Select 		[PK_sMaPCCT]
				, [FK_sMaGV]
				, [FK_sMaMonhoc]
				, [tNgayBatDau]
				, [tNgayKetThuc]
				, [iTrangThai]
	From	[tblPhanCongCongTac]
	Where	FK_sMaGV	= @FK_sMaGV
END

GO
	
CREATE PROCEDURE tblPhanCongCongTac_SelectByFK_sMaMonhoc
		@FK_sMaMonhoc	varchar
AS
BEGIN
	SET NOCOUNT ON;

	Select 		[PK_sMaPCCT]
				, [FK_sMaGV]
				, [FK_sMaMonhoc]
				, [tNgayBatDau]
				, [tNgayKetThuc]
				, [iTrangThai]
	From	[tblPhanCongCongTac]
	Where	FK_sMaMonhoc	= @FK_sMaMonhoc
END

GO
	