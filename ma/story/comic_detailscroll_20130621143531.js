var fc_isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var fc_isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;var fc_isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;function makeFlashText(_swfURL_,_flashID_,_width_,_height_,_wmode_,_flashVars_,_bgColor_,_allowFullScreen_,_menu_){_wmode_=(_wmode_==undefined)?"transparent":_wmode_;_bgColor_=(_bgColor_==undefined)?"#FFFFFF":_bgColor_;_allowFullScreen_=(_allowFullScreen_==undefined)?true:_allowFullScreen_;_menu_=(_menu_==undefined)?false:_menu_;var str='<object width="'+_width_+'" height="'+_height_+'" id="'+_flashID_+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" >';str=str+'<param name="allowScriptAccess" value="always" />';str=str+'<param name="allowScriptAccess" value="always" />';str=str+'<param name="quality" value="high" />';str=str+'<param name="menu" value="'+_menu_+'" />';str=str+'<param name="movie" value="'+_swfURL_+'" />';str=str+'<param name="wmode" value="'+_wmode_+'" />';str=str+'<param name="bgcolor" value="'+_bgColor_+'" />';str=str+'<param name="FlashVars" value="'+_flashVars_+'">';str=str+'<param name="allowFullScreen" value="'+_allowFullScreen_+'">';return str}function makeFlashObj(_swfURL_,_flashID_,_width_,_height_,_wmode_,_flashVars_,_bgColor_,_allowFullScreen_,_menu_){_wmode_=(_wmode_==undefined)?"transparent":_wmode_;_bgColor_=(_bgColor_==undefined)?"#FFFFFF":_bgColor_;_allowFullScreen_=(_allowFullScreen_==undefined)?true:_allowFullScreen_;_menu_=(_menu_==undefined)?false:_menu_;var _object_;if(fc_isIE&&fc_isWin&&!fc_isOpera){var arr_obj=[];arr_obj.push('<object width="'+_width_+'" height="'+_height_+'" id="'+_flashID_+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" >');arr_obj.push('<param name="allowScriptAccess" value="always" />');arr_obj.push('<param name="quality" value="high" />');arr_obj.push('<param name="menu" value="'+_menu_+'" />');arr_obj.push('<param name="movie" value="'+_swfURL_+'" />');arr_obj.push('<param name="wmode" value="'+_wmode_+'" />');arr_obj.push('<param name="bgcolor" value="'+_bgColor_+'" />');arr_obj.push('<param name="FlashVars" value="'+_flashVars_+'">');arr_obj.push('<param name="allowFullScreen" value="'+_allowFullScreen_+'">');arr_obj.push("</object>");_object_=arr_obj.join("")}else{_object_='<embed src="'+_swfURL_+'" quality="high" wmode="'+_wmode_+'" menu= "'+_menu_+'" FlashVars="'+_flashVars_+'" bgcolor="'+_bgColor_+'" width="'+_width_+'" height="'+_height_+'" name="'+_flashID_+'" allowFullScreen="'+_allowFullScreen_+'" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />'}return _object_}function showFlash(_swfURL_,_flashID_,_width_,_height_,_wmode_,_flashVars_,_bgColor_,_allowFullScreen_,_menu_){document.write(makeFlashObj(_swfURL_,_flashID_,_width_,_height_,_wmode_,_flashVars_,_bgColor_,_allowFullScreen_,_menu_))}function showFlash2layer(target,_swfURL_,_flashID_,_width_,_height_,_wmode_,_flashVars_,_bgColor_,_allowFullScreen_,_menu_){target.innerHTML=makeFlashObj(_swfURL_,_flashID_,_width_,_height_,_wmode_,_flashVars_,_bgColor_,_allowFullScreen_,_menu_)}function findFlashObj(_flashID_){var tarObj=fc_isIE?document.all[_flashID_]:document[_flashID_];return tarObj}function fc_checkFlashPlayerVersion(){var _version;var _e;try{var _axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.5");_version=_axo.GetVariable("$version")}catch(_e){_version=-1}return _version}function flashExternalCleanup(){__flash_unloadHandler=function(){externalProbSet=true;obj=document.getElementsByTagName("OBJECT");for(i=0;i<obj.length;i++){var theObj=eval(obj[i]);theObj.style.display="none";for(var prop in theObj){if(typeof(theObj[prop])=="function"){theObj[prop]=null}}}};if(window.onunload!=__flash_unloadHandler){__flash_savedUnloadHandler=window.onunload;window.onunload=__flash_unloadHandler}}window.onbeforeunload=flashExternalCleanup;if(typeof nclk=="undefined"){nclk={}}if(typeof nclkMaxDepth=="undefined"){var nclkMaxDepth=8}if(typeof ccsrv=="undefined"){var ccsrv="cc.naver.com"}if(typeof nclkModule=="undefined"){var nclkModule="cc"}if(typeof nsc=="undefined"){var nsc="decide.me"}if(typeof g_pid=="undefined"){var g_pid=""}if(typeof g_sid=="undefined"){var g_sid=""}var nclkImg=[];nclk.version="1.2.11";nclk.getScrollBarWidth=function(){var e=document.createElement("p");e.style.width="200px";e.style.height="200px";var f=document.createElement("div");f.style.position="absolute";f.style.top="0px";f.style.left="0px";f.style.visibility="hidden";f.style.width="200px";f.style.height="150px";f.style.overflow="hidden";f.appendChild(e);document.body.appendChild(f);var b=e.offsetWidth;f.style.overflow="scroll";var a=e.offsetWidth;if(b==a){a=f.clientWidth}document.body.removeChild(f);return(b-a)};nclk.findPos=function(b){var f=curtop=0;try{if(b.offsetParent){do{f+=b.offsetLeft;curtop+=b.offsetTop}while(b=b.offsetParent)}else{if(b.x||b.y){if(b.x){f+=b.x}if(b.y){curtop+=b.y}}}}catch(a){}return[f,curtop]};nclk.windowSize=function(e){if(!e){e=window}var a=0;if(e.innerWidth){a=e.innerWidth;if(typeof(e.innerWidth)=="number"){var b=nclk.getScrollBarWidth();a=e.innerWidth-b}}else{if(document.documentElement&&document.documentElement.clientWidth){a=document.documentElement.clientWidth}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){a=document.body.clientWidth}}}return a};nclk.checkIframe=function(i){var f=document.URL;var h=i.parentNode;var a;var b;if(h==null||h==undefined){return false}while(1){if(h.nodeName.toLowerCase()=="#document"){if(h.parentWindow){a=h.parentWindow}else{a=h.defaultView}try{if(a.frameElement!=null&&a.frameElement!=undefined){if(a.frameElement.nodeName.toLowerCase()=="iframe"){b=a.frameElement.id;if(!b){return false}return b}else{return false}}else{return false}}catch(g){return false}}else{h=h.parentNode;if(h==null||h==undefined){return false}}}};nclk.absPath=function(a){var e=window.location;var f=e.href;var b=e.protocol+"//"+e.host;if(a.charAt(0)=="/"){if(a.charAt(1)=="/"){return e.protocol+a}else{return b+a}}if(/^\.\//.test(a)){a=a.substring(2)}while(/^\.\./.test(a)){if(b!=f){f=f.substring(0,f.lastIndexOf("/"))}a=a.substring(3)}if(b!=f){if(a.charAt(0)!="?"&&a.charAt(0)!="#"){f=f.substring(0,f.lastIndexOf("/"))}}if(a.charAt(0)=="/"){return f+a}else{if(a.charAt(0)=="?"){f=f.split("?")[0];return f+a}else{if(a.charAt(0)=="#"){f=f.split("#")[0];return f+a}else{return f+"/"+a}}}};function clickcr(g,I,u,E,F,B,z){if(arguments.length==1){if(typeof nclk.generateCC!="undefined"){nclk.generateCC(arguments[0])}return}var G=navigator.userAgent.toLowerCase();var k=(G.indexOf("safari")!=-1?true:false);var D=/msie/.test(G)&&!/opera/.test(G);var l=(window.location.protocol=="https:")?"https:":"http:";var a=ccsrv.substring(ccsrv.indexOf(".")+1);var t=window.event?window.event:F;var s=-1;var q=-1;var p=-1;var n=-1;var S,f,i;var r,j,m;var N,K,J,M,A,C,w;var P;var H=0;if(!B){B="0"}else{B=String(B)}if(!z){z=""}if(B.indexOf("n")==0){H=0}else{if(window.g_ssc!=undefined&&window.g_query!=undefined){H=1}else{H=0}}try{M=nclk.windowSize(window);i=nclk.checkIframe(g);if(i){var v=nclk.findPos(document.getElementById(i));if(t.clientX&&t.clientX!=undefined){S=document.body;if(S.clientLeft&&S.clientTop){ifrSx=t.clientX-S.clientLeft;ifrSy=t.clientY-S.clientTop}else{ifrSx=t.clientX;ifrSy=t.clientY}}p=v[0]+ifrSx;n=v[1]+ifrSy;if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){S=document.body;s=p-S.scrollLeft;q=n-S.scrollTop}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){f=document.documentElement;s=p-f.scrollLeft;q=n-f.scrollTop}else{s=p;q=n}}}else{if(t.clientX&&t.clientX!=undefined){S=document.body;if(S.clientLeft&&S.clientTop){s=t.clientX-S.clientLeft;q=t.clientY-S.clientTop}else{s=t.clientX;q=t.clientY}}if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){p=document.body.scrollLeft+(s<0?0:s);n=document.body.scrollTop+(q<0?0:q)}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){f=document.documentElement;if(f.scrollLeft!=undefined){p=f.scrollLeft+(s<0?0:s)}if(f.scrollTop!=undefined){n=f.scrollTop+(q<0?0:q)}}else{p=(s<0?0:s);n=(q<0?0:q)}}if(t.pageX){p=t.pageX}if(t.pageY){n=t.pageY}}}catch(Q){}if(I==""||typeof I=="undefined"){return}if(B.indexOf("1")!=-1){r=0}else{if(g.href){A=g.nodeName.toLowerCase();C=g.href.toLowerCase();if((g.target&&g.target!="_self"&&g.target!="_top"&&g.target!="_parent")||(C.indexOf("javascript:")!=-1)||(g.getAttribute("href",2)&&g.getAttribute("href",2).charAt(0)=="#")||(C.indexOf("#")!=-1&&(C.substr(0,C.indexOf("#"))==document.URL))||A.toLowerCase()=="img"||D&&window.location.host.indexOf(a)==-1){r=0}else{r=1}}else{r=0}}if(g.href&&g.href.indexOf(l+"//"+ccsrv)==0){j=g.href}else{j=l+"//"+ccsrv+"/"+nclkModule+"?a="+I+"&r="+E+"&i="+u;j+="&bw="+M+"&px="+p+"&py="+n+"&sx="+s+"&sy="+q+"&m="+r;if(H==0){j+="&nsc="+nsc}else{if(H==1){j+="&ssc="+g_ssc+"&q="+encodeURIComponent(g_query)+"&s="+g_sid+"&p="+g_pid+"&g="+z}}if(C&&C.indexOf(l+"//"+ccsrv)!=0&&A.toLowerCase()!="img"){var O=g.href;if(g.outerHTML&&!window.XMLHttpRequest){O=(/\shref=\"([^\"]+)\"/i.test(g.outerHTML)&&RegExp.$1).replace(/\\/g,"\\\\").replace(/%([A-Z0-9]{2})/ig,"\\$1");(d=document.createElement("div")).innerHTML=O;O=d.innerText.replace(/\\([A-Z0-9]{2})/gi,"%$1").replace(/\\\\/g,"\\")}C=O.toLowerCase();if(C.indexOf("http:")==0||C.indexOf("https:")==0||C.indexOf("javascript:")==0){j+="&u="+encodeURIComponent(O)}else{w=nclk.absPath(O);j+="&u="+encodeURIComponent(w)}}else{if(g.href){if(g.href.length>0){j+="&u="+encodeURIComponent(g.href)}else{j+="&u=about%3Ablank"}}else{j+="&u=about%3Ablank"}}}if(r==1){P=g.innerHTML;g.href=j;if(g.innerHTML!=P){g.innerHTML=P}}else{if(document.images){var L=new Date().getTime();j+="&time="+L;if(k&&!g.href){var R=c=new Date();while((R.getTime()-c.getTime())<100){R=new Date()}var N=new Image();nclkImg.push(N);N.src=j}else{var N=new Image();nclkImg.push(N);N.src=j}}}return true};var play_status="play";var comicOS=navigator.userAgent;var browser=detectBrowser();var musicUrl="";var isInit=false;function detectBrowser(){var browser_name=navigator.userAgent;if(browser_name.indexOf("MSIE")>-1){browser_name="MSIE"}else{if(browser_name.indexOf("Firefox")>-1){browser_name="Firefox"}else{if(browser_name.indexOf("Opera")>-1){browser_name="Opera"}else{if(browser_name.indexOf("Chrome")>-1){browser_name="Chrome"}else{if(browser_name.indexOf("Safari")>-1){browser_name="Safari"}else{if(browser_name.indexOf("Netscape")>-1){browser_name="Netsacpe"}}}}}}return browser_name}var chromeAudio;function toggle_play_pause(status){var obj=document.getElementById("player_obj");if(comicOS.indexOf("Macintosh")>0){if(status==0){loadMusicPlayer();play_status="stop"}else{if(status==1){if(play_status=="play"){obj.Stop();play_status="pause"}else{obj.Play();play_status="play"}}}}else{if(status==0){if(browser=="MSIE"||browser=="Netscape"){obj.controls.stop()}else{if(browser=="Chrome"){chromeAudio.pause();chromeAudio.currentTime=0}else{loadMusicPlayer()}}play_status="stop"}else{if(status==1){if(play_status=="play"){if(browser=="MSIE"||browser=="Netscape"){obj.controls.pause()}else{if(browser=="Chrome"){chromeAudio.pause()}else{document.embeds.player_obj.Stop()}}play_status="pause"}else{if(browser=="MSIE"||browser=="Netscape"){obj.controls.play()}else{if(browser=="Chrome"){chromeAudio.play()}else{document.embeds.player_obj.Play()}}play_status="play"}}}}}function showMusicPlayer(fileUrl){musicUrl=fileUrl;if(browser=="MSIE"||browser=="Netscape"){document.write('<div id="box_player_obj" style="display:none;"></div>')}else{document.write('<div id="box_player_obj" style="position:absolute; left:-10000px; top:-10000px; width:0px; height:0px;"></div>')}isInit=true;setTimeout("loadMusicPlayer()","500")}function loadMusicPlayer(){var player=document.getElementById("box_player_obj");var autoStart=false;if(typeof player!=undefined){if(isInit==true){autoStart=true}if(browser=="MSIE"||browser=="Netscape"){player.innerHTML='<object id="player_obj" CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" width="0" height="0"><param name="url" value="'+musicUrl+'"><param name="uiMode" value="none"><param name="StretchToFit" value="1"><param name="invokeURLs" value="false"><param name="WindowlessVideo" value="1"><embed src="'+musicUrl+'" type="application/x-mplayer2" pluginspage = "http://www.microsoft.com/Windows/MediaPlayer/" autoStart="'+autoStart+'"><noembed>네이버캐스트 음원 재생기</noembed></embed></object>'}else{if(browser=="Chrome"){chromeAudio=new Audio(musicUrl);chromeAudio.play()}else{player.innerHTML='<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" width="0" height="0"><param name="src" value="'+musicUrl+'"><param name="controller" value="false"><param name="enablejavascript" value="true"><param name="type" value="audio/wav"><param name="hidden" value="true"><embed classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" name="player_obj" id="player_obj" src="'+musicUrl+'" pluginspage="http://www.apple.com/quicktime/download/" enablejavascript="true" type="audio/wav" autoStart="'+autoStart+'"><noembed>네이버캐스트 음원 재생기</noembed></embed></object>'}}isInit=false}};function nhn_naver_commcast_feed_popup(){return{popupFeedWindow:function(feedParams,options){var targetForm=document.getElementById("__feed_popup_form");if(this.isNotNull(targetForm)){this.removePopupForm(targetForm)}targetForm=this.createTargetForm(feedParams,options);targetForm.submit()},createTargetForm:function(feedParams,options){var targetForm=document.createElement("form");targetForm.setAttribute("id","__feed_popup_form");if(this.usePopup(options)){var targetName="applyFeedRelation";window.open("",targetName,"width=380,height=400,location=no");targetForm.setAttribute("target",targetName)}var submitUrl=this.getSubmitUrl(options);targetForm.setAttribute("action",submitUrl);targetForm.setAttribute("method","post");document.body.appendChild(targetForm);var serviceIdInput=this.createInputElement("hidden","serviceId",feedParams.serviceId);var userIdInput=this.createInputElement("hidden","userId",feedParams.userId);var popupTypeInput=this.createInputElement("hidden","popupType",feedParams.popupType);var callbackUrlInput=this.createInputElement("hidden","callbackUrl",feedParams.callbackUrl);var feedGroupIdInput=this.createInputElement("hidden","feedGroupId",feedParams.feedGroupId);var feedGroupNameInput=this.createInputElement("hidden","feedGroupName",feedParams.feedGroupName);var feedIdArr=this.createInputElementArr("hidden","feedId",feedParams.feedId);var feedNameArr=this.createInputElementArr("hidden","feedName",feedParams.feedName);var feedUrlArr=this.createInputElementArr("hidden","feedUrl",feedParams.feedUrl);var selectedArr=this.createInputElementArr("hidden","selected",feedParams.selected);var feedTypeArr=this.createInputElementArr("hidden","feedType",feedParams.feedType);this.appendChildsTo(targetForm,[serviceIdInput,userIdInput,popupTypeInput,callbackUrlInput,feedGroupIdInput,feedGroupNameInput]);this.appendChildsTo(targetForm,feedIdArr);this.appendChildsTo(targetForm,feedNameArr);this.appendChildsTo(targetForm,feedUrlArr);this.appendChildsTo(targetForm,selectedArr);this.appendChildsTo(targetForm,feedTypeArr);return targetForm},usePopup:function(options){return(options&&options.usePopup==false)?false:true},getSubmitUrl:function(options){var host=options.feedPopupHost;var url;if(options&&options.charEnc&&"EUC-KR"==options.charEnc.toUpperCase()){url="http://"+host+"/euckr/subscribe/applyFeedRelation.nhn"}else{url="http://"+host+"/subscribe/applyFeedRelation.nhn"}return url},appendChildsTo:function(targetForm,elementsArr){if(this.isNotNull(elementsArr)){for(var i=0;i<elementsArr.length;i++){targetForm.appendChild(elementsArr[i])}}},createInputElementArr:function(type,name,values){if(this.isNotNull(values)){try{var elemArr=[];for(var i=0;i<values.length;i++){elemArr[i]=this.createInputElement(type,name,values[i])}return elemArr}catch(e){throw e}}},createInputElement:function(type,name,value){var newInputElement=document.createElement("input");newInputElement.setAttribute("type",type);newInputElement.setAttribute("name",name);newInputElement.setAttribute("value",value);return newInputElement},isNotNull:function(targetForm){return(targetForm==null||targetForm=="undefined"||targetForm=="null")?false:true},removePopupForm:function(targetForm){targetForm.parentNode.removeChild(targetForm)}}};if(typeof window!="undefined"&&typeof window.nhn=="undefined"){window.nhn={}}if(typeof window!="undefined"){if(typeof window.jindo=="undefined"){window.jindo={}}}else{if(!jindo){jindo={}}}jindo.$Jindo=function(){var cl=arguments.callee;var cc=cl._cached;if(cc){return cc}if(!(this instanceof cl)){return new cl()}if(!cc){cl._cached=this}this.version="1.4.7"};jindo.$=function(sID){var ret=[],arg=arguments,lastArgument=arg[arg.length-1],doc=document,el=null;var reg=/^<([a-z]+|h[1-5])>$/i;var reg2=/^<([a-z]+|h[1-5])(\s+[^>]+)?>/i;if(arg.length>1&&typeof lastArgument!="string"&&lastArgument.body){arg=Array.prototype.slice.apply(arg,[0,arg.length-1]);doc=lastArgument}for(var i=0;i<arg.length;i++){el=arg[i];if(typeof el=="string"){el=el.replace(/^\s+|\s+$/g,"");if(reg.test(el)){el=doc.createElement(RegExp.$1)}else{if(reg2.test(el)){var p={thead:"table",tbody:"table",tr:"tbody",td:"tr",dt:"dl",dd:"dl",li:"ul",legend:"fieldset",option:"select"};var tag=RegExp.$1.toLowerCase();var ele=jindo._createEle(p[tag],el,doc);for(var i=0,leng=ele.length;i<leng;i++){ret.push(ele[i])}el=null}else{el=doc.getElementById(el)}}}if(el){ret[ret.length]=el}}return ret.length>1?ret:(ret[0]||null)};jindo._createEle=function(sParentTag,sHTML,oDoc,bWantParent){var sId="R"+new Date().getTime()+parseInt(Math.random()*100000);var oDummy=oDoc.createElement("div");switch(sParentTag){case"select":case"table":case"dl":case"ul":case"fieldset":oDummy.innerHTML="<"+sParentTag+' class="'+sId+'">'+sHTML+"</"+sParentTag+">";break;case"thead":case"tbody":oDummy.innerHTML="<table><"+sParentTag+' class="'+sId+'">'+sHTML+"</"+sParentTag+"></table>";break;case"tr":oDummy.innerHTML='<table><tbody><tr class="'+sId+'">'+sHTML+"</tr></tbody></table>";break;default:oDummy.innerHTML='<div class="'+sId+'">'+sHTML+"</div>";break}var oFound;for(oFound=oDummy.firstChild;oFound;oFound=oFound.firstChild){if(oFound.className==sId){break}}return bWantParent?oFound:oFound.childNodes};jindo.$Class=function(oDef){function typeClass(){var t=this;var a=[];var superFunc=function(m,superClass,func){if(m!="constructor"&&func.toString().indexOf("$super")>-1){var funcArg=func.toString().replace(/function\s*\(([^\)]*)[\w\W]*/g,"$1").split(",");var funcStr=func.toString().replace(/function[^{]*{/,"").replace(/(\w|\.?)(this\.\$super|this)/g,function(m,m2,m3){if(!m2){return m3+".$super"}return m});funcStr=funcStr.substr(0,funcStr.length-1);func=superClass[m]=eval("false||function("+funcArg.join(",")+"){"+funcStr+"}")}return function(){var f=this.$this[m];var t=this.$this;var r=(t[m]=func).apply(t,arguments);t[m]=f;return r}};while(typeof t._$superClass!="undefined"){t.$super=new Object;t.$super.$this=this;for(var x in t._$superClass.prototype){if(t._$superClass.prototype.hasOwnProperty(x)){if(typeof this[x]=="undefined"&&x!="$init"){this[x]=t._$superClass.prototype[x]}if(x!="constructor"&&x!="_$superClass"&&typeof t._$superClass.prototype[x]=="function"){t.$super[x]=superFunc(x,t._$superClass,t._$superClass.prototype[x])}else{t.$super[x]=t._$superClass.prototype[x]}}}if(typeof t.$super.$init=="function"){a[a.length]=t}t=t.$super}for(var i=a.length-1;i>-1;i--){a[i].$super.$init.apply(a[i].$super,arguments)}if(typeof this.$init=="function"){this.$init.apply(this,arguments)}}if(typeof oDef.$static!="undefined"){var i=0,x;for(x in oDef){if(oDef.hasOwnProperty(x)){x=="$static"||i++}}for(x in oDef.$static){if(oDef.$static.hasOwnProperty(x)){typeClass[x]=oDef.$static[x]}}if(!i){return oDef.$static}delete oDef.$static}typeClass.prototype=oDef;typeClass.prototype.constructor=typeClass;typeClass.extend=jindo.$Class.extend;return typeClass};jindo.$Class.extend=function(superClass){if(typeof superClass=="undefined"||superClass===null||!superClass.extend){throw new Error("extend시 슈퍼 클래스는 Class여야 합니디.")}this.prototype._$superClass=superClass;for(var x in superClass){if(superClass.hasOwnProperty(x)){if(x=="prototype"){continue}this[x]=superClass[x]}}return this};jindo.$$=jindo.cssquery=(function(){var sVersion="3.0";var debugOption={repeat:1};var UID=1;var cost=0;var validUID={};var bSupportByClassName=document.getElementsByClassName?true:false;var safeHTML=false;var getUID4HTML=function(oEl){var nUID=safeHTML?(oEl._cssquery_UID&&oEl._cssquery_UID[0]):oEl._cssquery_UID;if(nUID&&validUID[nUID]==oEl){return nUID}nUID=UID++;oEl._cssquery_UID=safeHTML?[nUID]:nUID;validUID[nUID]=oEl;return nUID};var getUID4XML=function(oEl){var oAttr=oEl.getAttribute("_cssquery_UID");var nUID=safeHTML?(oAttr&&oAttr[0]):oAttr;if(!nUID){nUID=UID++;oEl.setAttribute("_cssquery_UID",safeHTML?[nUID]:nUID)}return nUID};var getUID=getUID4HTML;var uniqid=function(sPrefix){return(sPrefix||"")+new Date().getTime()+parseInt(Math.random()*100000000)};function getElementsByClass(searchClass,node,tag){var classElements=new Array();if(node==null){node=document}if(tag==null){tag="*"}var els=node.getElementsByTagName(tag);var elsLen=els.length;var pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");for(i=0,j=0;i<elsLen;i++){if(pattern.test(els[i].className)){classElements[j]=els[i];j++}}return classElements}var getChilds_dontShrink=function(oEl,sTagName,sClassName){if(bSupportByClassName&&sClassName){if(oEl.getElementsByClassName){return oEl.getElementsByClassName(sClassName)}if(oEl.querySelectorAll){return oEl.querySelectorAll(sClassName)}return getElementsByClass(sClassName,oEl,sTagName)}else{if(sTagName=="*"){return oEl.all||oEl.getElementsByTagName(sTagName)}}return oEl.getElementsByTagName(sTagName)};var clearKeys=function(){backupKeys._keys={}};var oDocument_dontShrink=document;var bXMLDocument=false;var backupKeys=function(sQuery){var oKeys=backupKeys._keys;sQuery=sQuery.replace(/'(\\'|[^'])*'/g,function(sAll){var uid=uniqid("QUOT");oKeys[uid]=sAll;return uid});sQuery=sQuery.replace(/"(\\"|[^"])*"/g,function(sAll){var uid=uniqid("QUOT");oKeys[uid]=sAll;return uid});sQuery=sQuery.replace(/\[(.*?)\]/g,function(sAll,sBody){if(sBody.indexOf("ATTR")==0){return sAll}var uid="["+uniqid("ATTR")+"]";oKeys[uid]=sAll;return uid});var bChanged;do{bChanged=false;sQuery=sQuery.replace(/\(((\\\)|[^)|^(])*)\)/g,function(sAll,sBody){if(sBody.indexOf("BRCE")==0){return sAll}var uid="_"+uniqid("BRCE");oKeys[uid]=sAll;bChanged=true;return uid})}while(bChanged);return sQuery};var restoreKeys=function(sQuery,bOnlyAttrBrace){var oKeys=backupKeys._keys;var bChanged;var rRegex=bOnlyAttrBrace?/(\[ATTR[0-9]+\])/g:/(QUOT[0-9]+|\[ATTR[0-9]+\])/g;do{bChanged=false;sQuery=sQuery.replace(rRegex,function(sKey){if(oKeys[sKey]){bChanged=true;return oKeys[sKey]}return sKey})}while(bChanged);sQuery=sQuery.replace(/_BRCE[0-9]+/g,function(sKey){return oKeys[sKey]?oKeys[sKey]:sKey});return sQuery};var restoreString=function(sKey){var oKeys=backupKeys._keys;var sOrg=oKeys[sKey];if(!sOrg){return sKey}return eval(sOrg)};var wrapQuot=function(sStr){return'"'+sStr.replace(/"/g,'\\"')+'"'};var getStyleKey=function(sKey){if(/^@/.test(sKey)){return sKey.substr(1)}return null};var getCSS=function(oEl,sKey){if(oEl.currentStyle){if(sKey=="float"){sKey="styleFloat"}return oEl.currentStyle[sKey]||oEl.style[sKey]}else{if(window.getComputedStyle){return oDocument_dontShrink.defaultView.getComputedStyle(oEl,null).getPropertyValue(sKey.replace(/([A-Z])/g,"-$1").toLowerCase())||oEl.style[sKey]}}if(sKey=="float"&&/MSIE/.test(window.navigator.userAgent)){sKey="styleFloat"}return oEl.style[sKey]};var oCamels={accesskey:"accessKey",cellspacing:"cellSpacing",cellpadding:"cellPadding","class":"className",colspan:"colSpan","for":"htmlFor",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",valign:"vAlign"};var getDefineCode=function(sKey){var sVal;var sStyleKey;if(bXMLDocument){sVal='oEl.getAttribute("'+sKey+'",2)'}else{if(sStyleKey=getStyleKey(sKey)){sKey="$$"+sStyleKey;sVal='getCSS(oEl, "'+sStyleKey+'")'}else{switch(sKey){case"checked":sVal='oEl.checked + ""';break;case"disabled":sVal='oEl.disabled + ""';break;case"enabled":sVal='!oEl.disabled + ""';break;case"readonly":sVal='oEl.readOnly + ""';break;case"selected":sVal='oEl.selected + ""';break;default:if(oCamels[sKey]){sVal="oEl."+oCamels[sKey]}else{sVal='oEl.getAttribute("'+sKey+'",2)'}}}}return"_"+sKey+" = "+sVal};var getReturnCode=function(oExpr){var sStyleKey=getStyleKey(oExpr.key);var sVar="_"+(sStyleKey?"$$"+sStyleKey:oExpr.key);var sVal=oExpr.val?wrapQuot(oExpr.val):"";switch(oExpr.op){case"~=":return"("+sVar+' && (" " + '+sVar+' + " ").indexOf(" " + '+sVal+' + " ") > -1)';case"^=":return"("+sVar+" && "+sVar+".indexOf("+sVal+") == 0)";case"$=":return"("+sVar+" && "+sVar+".substr("+sVar+".length - "+oExpr.val.length+") == "+sVal+")";case"*=":return"("+sVar+" && "+sVar+".indexOf("+sVal+") > -1)";case"!=":return"("+sVar+" != "+sVal+")";case"=":return"("+sVar+" == "+sVal+")"}return"("+sVar+")"};var getNodeIndex=function(oEl){var nUID=getUID(oEl);var nIndex=oNodeIndexes[nUID]||0;if(nIndex==0){for(var oSib=(oEl.parentNode||oEl._IE5_parentNode).firstChild;oSib;oSib=oSib.nextSibling){if(oSib.nodeType!=1){continue}nIndex++;setNodeIndex(oSib,nIndex)}nIndex=oNodeIndexes[nUID]}return nIndex};var oNodeIndexes={};var setNodeIndex=function(oEl,nIndex){var nUID=getUID(oEl);oNodeIndexes[nUID]=nIndex};var unsetNodeIndexes=function(){setTimeout(function(){oNodeIndexes={}},0)};var oPseudoes_dontShrink={contains:function(oEl,sOption){return(oEl.innerText||oEl.textContent||"").indexOf(sOption)>-1},"last-child":function(oEl,sOption){for(oEl=oEl.nextSibling;oEl;oEl=oEl.nextSibling){if(oEl.nodeType==1){return false}}return true},"first-child":function(oEl,sOption){for(oEl=oEl.previousSibling;oEl;oEl=oEl.previousSibling){if(oEl.nodeType==1){return false}}return true},"only-child":function(oEl,sOption){var nChild=0;for(var oChild=(oEl.parentNode||oEl._IE5_parentNode).firstChild;oChild;oChild=oChild.nextSibling){if(oChild.nodeType==1){nChild++}if(nChild>1){return false}}return nChild?true:false},empty:function(oEl,_){return oEl.firstChild?false:true},"nth-child":function(oEl,nMul,nAdd){var nIndex=getNodeIndex(oEl);return nIndex%nMul==nAdd},"nth-last-child":function(oEl,nMul,nAdd){var oLast=(oEl.parentNode||oEl._IE5_parentNode).lastChild;for(;oLast;oLast=oLast.previousSibling){if(oLast.nodeType==1){break}}var nTotal=getNodeIndex(oLast);var nIndex=getNodeIndex(oEl);var nLastIndex=nTotal-nIndex+1;return nLastIndex%nMul==nAdd},checked:function(oEl){return !!oEl.checked},selected:function(oEl){return !!oEl.selected},enabled:function(oEl){return !oEl.disabled},disabled:function(oEl){return !!oEl.disabled}};var getExpression=function(sBody){var oRet={defines:"",returns:"true"};var sBody=restoreKeys(sBody,true);var aExprs=[];var aDefineCode=[],aReturnCode=[];var sId,sTagName;var sBody=sBody.replace(/:([\w-]+)(\(([^)]*)\))?/g,function(_1,sType,_2,sOption){switch(sType){case"not":var oInner=getExpression(sOption);var sFuncDefines=oInner.defines;var sFuncReturns=oInner.returnsID+oInner.returnsTAG+oInner.returns;aReturnCode.push("!(function() { "+sFuncDefines+" return "+sFuncReturns+" })()");break;case"nth-child":case"nth-last-child":sOption=restoreString(sOption);if(sOption=="even"){sOption="2n"}else{if(sOption=="odd"){sOption="2n+1"}}var nMul,nAdd;var matchstr=sOption.match(/([0-9]*)n([+-][0-9]+)*/);if(matchstr){nMul=matchstr[1]||1;nAdd=matchstr[2]||0}else{nMul=Infinity;nAdd=parseInt(sOption)}aReturnCode.push("oPseudoes_dontShrink["+wrapQuot(sType)+"](oEl, "+nMul+", "+nAdd+")");break;case"first-of-type":case"last-of-type":sType=(sType=="first-of-type"?"nth-of-type":"nth-last-of-type");sOption=1;case"nth-of-type":case"nth-last-of-type":sOption=restoreString(sOption);if(sOption=="even"){sOption="2n"}else{if(sOption=="odd"){sOption="2n+1"}}var nMul,nAdd;if(/([0-9]*)n([+-][0-9]+)*/.test(sOption)){nMul=parseInt(RegExp.$1)||1;nAdd=parseInt(RegExp.$2)||0}else{nMul=Infinity;nAdd=parseInt(sOption)}oRet.nth=[nMul,nAdd,sType];break;default:sOption=sOption?restoreString(sOption):"";aReturnCode.push("oPseudoes_dontShrink["+wrapQuot(sType)+"](oEl, "+wrapQuot(sOption)+")");break}return""});var sBody=sBody.replace(/\[(@?[\w-]+)(([!^~$*]?=)([^\]]*))?\]/g,function(_1,sKey,_2,sOp,sVal){sKey=restoreString(sKey);sVal=restoreString(sVal);if(sKey=="checked"||sKey=="disabled"||sKey=="enabled"||sKey=="readonly"||sKey=="selected"){if(!sVal){sOp="=";sVal="true"}}aExprs.push({key:sKey,op:sOp,val:sVal});return""});var sClassName=null;var sBody=sBody.replace(/\.([\w-]+)/g,function(_,sClass){aExprs.push({key:"class",op:"~=",val:sClass});if(!sClassName){sClassName=sClass}return""});var sBody=sBody.replace(/#([\w-]+)/g,function(_,sIdValue){if(bXMLDocument){aExprs.push({key:"id",op:"=",val:sIdValue})}else{sId=sIdValue}return""});sTagName=sBody=="*"?"":sBody;var oVars={};for(var i=0,oExpr;oExpr=aExprs[i];i++){var sKey=oExpr.key;if(!oVars[sKey]){aDefineCode.push(getDefineCode(sKey))}aReturnCode.unshift(getReturnCode(oExpr));oVars[sKey]=true}if(aDefineCode.length){oRet.defines="var "+aDefineCode.join(",")+";"}if(aReturnCode.length){oRet.returns=aReturnCode.join("&&")}oRet.quotID=sId?wrapQuot(sId):"";oRet.quotTAG=sTagName?wrapQuot(bXMLDocument?sTagName:sTagName.toUpperCase()):"";if(bSupportByClassName){oRet.quotCLASS=sClassName?wrapQuot(sClassName):""}oRet.returnsID=sId?"oEl.id == "+oRet.quotID+" && ":"";oRet.returnsTAG=sTagName&&sTagName!="*"?"oEl.tagName == "+oRet.quotTAG+" && ":"";return oRet};var splitToParts=function(sQuery){var aParts=[];var sRel=" ";var sBody=sQuery.replace(/(.*?)\s*(!?[+>~ ]|!)\s*/g,function(_,sBody,sRelative){if(sBody){aParts.push({rel:sRel,body:sBody})}sRel=sRelative.replace(/\s+$/g,"")||" ";return""});if(sBody){aParts.push({rel:sRel,body:sBody})}return aParts};var isNth_dontShrink=function(oEl,sTagName,nMul,nAdd,sDirection){var nIndex=0;for(var oSib=oEl;oSib;oSib=oSib[sDirection]){if(oSib.nodeType==1&&(!sTagName||sTagName==oSib.tagName)){nIndex++}}return nIndex%nMul==nAdd};var compileParts=function(aParts){var aPartExprs=[];for(var i=0,oPart;oPart=aParts[i];i++){aPartExprs.push(getExpression(oPart.body))}var sFunc="";var sPushCode="aRet.push(oEl); if (oOptions.single) { bStop = true; }";for(var i=aParts.length-1,oPart;oPart=aParts[i];i--){var oExpr=aPartExprs[i];var sPush=(debugOption.callback?"cost++;":"")+oExpr.defines;var sReturn="if (bStop) {"+(i==0?"return aRet;":"return;")+"}";if(oExpr.returns=="true"){sPush+=(sFunc?sFunc+"(oEl);":sPushCode)+sReturn}else{sPush+="if ("+oExpr.returns+") {"+(sFunc?sFunc+"(oEl);":sPushCode)+sReturn+"}"}var sCheckTag="oEl.nodeType != 1";if(oExpr.quotTAG){sCheckTag="oEl.tagName != "+oExpr.quotTAG}var sTmpFunc="(function(oBase"+(i==0?", oOptions) { var bStop = false; var aRet = [];":") {");if(oExpr.nth){sPush="if (isNth_dontShrink(oEl, "+(oExpr.quotTAG?oExpr.quotTAG:"false")+","+oExpr.nth[0]+","+oExpr.nth[1]+',"'+(oExpr.nth[2]=="nth-of-type"?"previousSibling":"nextSibling")+'")) {'+sPush+"}"}switch(oPart.rel){case" ":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oCandi = oEl;for (; oCandi; oCandi = (oCandi.parentNode || oCandi._IE5_parentNode)) {if (oCandi == oBase) break;}if (!oCandi || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="var aCandi = getChilds_dontShrink(oBase, "+(oExpr.quotTAG||'"*"')+", "+(oExpr.quotCLASS||"null")+");for (var i = 0, oEl; oEl = aCandi[i]; i++) {"+(oExpr.quotCLASS?"if ("+sCheckTag+") continue;":"")+sPush+"}"}break;case">":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");if ((oEl.parentNode || oEl._IE5_parentNode) != oBase || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="for (var oEl = oBase.firstChild; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }"+sPush+"}"}break;case"+":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oPrev;for (oPrev = oEl.previousSibling; oPrev; oPrev = oPrev.previousSibling) { if (oPrev.nodeType == 1) break; }if (!oPrev || oPrev != oBase || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush}break;case"~":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oCandi = oEl;for (; oCandi; oCandi = oCandi.previousSibling) { if (oCandi == oBase) break; }if (!oCandi || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}"}break;case"!":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");for (; oBase; oBase = (oBase.parentNode || oBase._IE5_parentNode)) { if (oBase == oEl) break; }if (!oBase || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="for (var oEl = (oBase.parentNode || oBase._IE5_parentNode); oEl; oEl = (oEl.parentNode || oEl._IE5_parentNode)) {if ("+sCheckTag+") { continue; }"+sPush+"}"}break;case"!>":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel = (oBase.parentNode || oBase._IE5_parentNode);if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush}else{sTmpFunc+="var oEl = (oBase.parentNode || oBase._IE5_parentNode);if (!oEl || "+sCheckTag+") { return aRet; }"+sPush}break;case"!+":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType == 1) break; }if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush}else{sTmpFunc+="for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush}break;case"!~":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType != 1) { continue; }if (oRel == oEl) { break; }}if (!oRel || ("+sCheckTag+")) return aRet;"+sPush}else{sTmpFunc+="for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}"}break}sTmpFunc+=(i==0?"return aRet;":"")+"})";sFunc=sTmpFunc}eval("var fpCompiled = "+sFunc+";");return fpCompiled};var parseQuery=function(sQuery){var sCacheKey=sQuery;var fpSelf=arguments.callee;var fpFunction=fpSelf._cache[sCacheKey];if(!fpFunction){sQuery=backupKeys(sQuery);var aParts=splitToParts(sQuery);fpFunction=fpSelf._cache[sCacheKey]=compileParts(aParts);fpFunction.depth=aParts.length}return fpFunction};parseQuery._cache={};var parseTestQuery=function(sQuery){var fpSelf=arguments.callee;var aSplitQuery=backupKeys(sQuery).split(/\s*,\s*/);var aResult=[];var nLen=aSplitQuery.length;var aFunc=[];for(var i=0;i<nLen;i++){aFunc.push((function(sQuery){var sCacheKey=sQuery;var fpFunction=fpSelf._cache[sCacheKey];if(!fpFunction){sQuery=backupKeys(sQuery);var oExpr=getExpression(sQuery);eval("fpFunction = function(oEl) { "+oExpr.defines+"return ("+oExpr.returnsID+oExpr.returnsTAG+oExpr.returns+"); };")}return fpFunction})(restoreKeys(aSplitQuery[i])))}return aFunc};parseTestQuery._cache={};var distinct=function(aList){var aDistinct=[];var oDummy={};for(var i=0,oEl;oEl=aList[i];i++){var nUID=getUID(oEl);if(oDummy[nUID]){continue}aDistinct.push(oEl);oDummy[nUID]=true}return aDistinct};var markElement_dontShrink=function(oEl,nDepth){var nUID=getUID(oEl);if(cssquery._marked[nDepth][nUID]){return false}cssquery._marked[nDepth][nUID]=true;return true};var oResultCache=null;var bUseResultCache=false;var bExtremeMode=false;var old_cssquery=function(sQuery,oParent,oOptions){if(typeof sQuery=="object"){var oResult={};for(var k in sQuery){if(sQuery.hasOwnProperty(k)){oResult[k]=arguments.callee(sQuery[k],oParent,oOptions)}}return oResult}cost=0;var executeTime=new Date().getTime();var aRet;for(var r=0,rp=debugOption.repeat;r<rp;r++){aRet=(function(sQuery,oParent,oOptions){if(oOptions){if(!oOptions.oneTimeOffCache){oOptions.oneTimeOffCache=false}}else{oOptions={oneTimeOffCache:false}}cssquery.safeHTML(oOptions.oneTimeOffCache);if(!oParent){oParent=document}oDocument_dontShrink=oParent.ownerDocument||oParent.document||oParent;if(/\bMSIE\s([0-9]+(\.[0-9]+)*);/.test(navigator.userAgent)&&parseFloat(RegExp.$1)<6){try{oDocument_dontShrink.location}catch(e){oDocument_dontShrink=document}oDocument_dontShrink.firstChild=oDocument_dontShrink.getElementsByTagName("html")[0];oDocument_dontShrink.firstChild._IE5_parentNode=oDocument_dontShrink}bXMLDocument=(typeof XMLDocument!="undefined")?(oDocument_dontShrink.constructor===XMLDocument):(!oDocument_dontShrink.location);getUID=bXMLDocument?getUID4XML:getUID4HTML;clearKeys();var aSplitQuery=backupKeys(sQuery).split(/\s*,\s*/);var aResult=[];var nLen=aSplitQuery.length;for(var i=0;i<nLen;i++){aSplitQuery[i]=restoreKeys(aSplitQuery[i])}for(var i=0;i<nLen;i++){var sSingleQuery=aSplitQuery[i];var aSingleQueryResult=null;var sResultCacheKey=sSingleQuery+(oOptions.single?"_single":"");var aCache=bUseResultCache?oResultCache[sResultCacheKey]:null;if(aCache){for(var j=0,oCache;oCache=aCache[j];j++){if(oCache.parent==oParent){aSingleQueryResult=oCache.result;break}}}if(!aSingleQueryResult){var fpFunction=parseQuery(sSingleQuery);cssquery._marked=[];for(var j=0,nDepth=fpFunction.depth;j<nDepth;j++){cssquery._marked.push({})}aSingleQueryResult=distinct(fpFunction(oParent,oOptions));if(bUseResultCache&&!oOptions.oneTimeOffCache){if(!(oResultCache[sResultCacheKey] instanceof Array)){oResultCache[sResultCacheKey]=[]}oResultCache[sResultCacheKey].push({parent:oParent,result:aSingleQueryResult})}}aResult=aResult.concat(aSingleQueryResult)}unsetNodeIndexes();return aResult})(sQuery,oParent,oOptions)}executeTime=new Date().getTime()-executeTime;if(debugOption.callback){debugOption.callback(sQuery,cost,executeTime)}return aRet};var cssquery;if(document.querySelectorAll){function _isNonStandardQueryButNotException(sQuery){return/\[\s*(?:checked|selected|disabled)/.test(sQuery)}function _commaRevise(sQuery,sChange){return sQuery.replace(/\,/gi,sChange)}cssquery=function(sQuery,oParent,oOptions){oParent=oParent||document;try{if(_isNonStandardQueryButNotException(sQuery)){throw Error("None Standard Query")}else{var sReviseQuery=sQuery;var oReviseParent=oParent;if(oParent.nodeType!=9){if(bExtremeMode){if(!oParent.id){oParent.id="p"+new Date().getTime()+parseInt(Math.random()*100000000)}}else{throw Error("Parent Element has not ID.or It is not document.or None Extreme Mode.")}sReviseQuery=_commaRevise("#"+oParent.id+" "+sQuery,", #"+oParent.id);oReviseParent=oParent.ownerDocument||oParent.document||document}if(oOptions&&oOptions.single){return[oReviseParent.querySelector(sReviseQuery)]}else{return Array.prototype.slice.apply(oReviseParent.querySelectorAll(sReviseQuery))}}}catch(e){return old_cssquery(sQuery,oParent,oOptions)}}}else{cssquery=old_cssquery}cssquery.test=function(oEl,sQuery){clearKeys();var aFunc=parseTestQuery(sQuery);for(var i=0,nLen=aFunc.length;i<nLen;i++){if(aFunc[i](oEl)){return true}}return false};cssquery.useCache=function(bFlag){if(typeof bFlag!="undefined"){bUseResultCache=bFlag;cssquery.clearCache()}return bUseResultCache};cssquery.clearCache=function(){oResultCache={}};cssquery.getSingle=function(sQuery,oParent,oOptions){return cssquery(sQuery,oParent,{single:true,oneTimeOffCache:oOptions?(!!oOptions.oneTimeOffCache):false})[0]||null};cssquery.xpath=function(sXPath,oParent){var sXPath=sXPath.replace(/\/(\w+)(\[([0-9]+)\])?/g,function(_1,sTag,_2,sTh){sTh=sTh||"1";return">"+sTag+":nth-of-type("+sTh+")"});return old_cssquery(sXPath,oParent)};cssquery.debug=function(fpCallback,nRepeat){debugOption.callback=fpCallback;debugOption.repeat=nRepeat||1};cssquery.safeHTML=function(bFlag){var bIE=/MSIE/.test(window.navigator.userAgent);if(arguments.length>0){safeHTML=bFlag&&bIE}return safeHTML||!bIE};cssquery.version=sVersion;cssquery.release=function(){if(/MSIE/.test(window.navigator.userAgent)){delete validUID;validUID={};if(bUseResultCache){cssquery.clearCache()}}};cssquery._getCacheInfo=function(){return{uidCache:validUID,eleCache:oResultCache}};cssquery._resetUID=function(){UID=0};cssquery.extreme=function(bExtreme){if(arguments.length==0){bExtreme=true}bExtremeMode=bExtreme};return cssquery})();jindo.$Agent=function(){var cl=arguments.callee;var cc=cl._cached;if(cc){return cc}if(!(this instanceof cl)){return new cl}if(!cc){cl._cached=this}this._navigator=navigator};jindo.$Agent.prototype.navigator=function(){var info=new Object;var ver=-1;var nativeVersion=-1;var u=this._navigator.userAgent;var v=this._navigator.vendor||"";function f(s,h){return((h||"").indexOf(s)>-1)}info.getName=function(){var name="";for(x in info){if(typeof info[x]=="boolean"&&info[x]&&info.hasOwnProperty(x)){name=x}}return name};info.webkit=f("WebKit",u);info.opera=(typeof window.opera!="undefined")||f("Opera",u);info.ie=!info.opera&&f("MSIE",u);info.chrome=info.webkit&&f("Chrome",u);info.safari=info.webkit&&!info.chrome&&f("Apple",v);info.firefox=f("Firefox",u);info.mozilla=f("Gecko",u)&&!info.safari&&!info.chrome&&!info.firefox;info.camino=f("Camino",v);info.netscape=f("Netscape",u);info.omniweb=f("OmniWeb",u);info.icab=f("iCab",v);info.konqueror=f("KDE",v);info.mobile=(f("Mobile",u)||f("Android",u)||f("Nokia",u)||f("webOS",u)||f("Opera Mini",u)||f("BlackBerry",u)||f("PPC",u)||f("Smartphone",u)||f("IEMobile",u))&&!f("iPad",u);info.msafari=(!f("IEMobile",u)&&f("Mobile",u))||(f("iPad",u)&&f("Safari",u));info.mopera=f("Opera Mini",u);info.mie=f("PPC",u)||f("Smartphone",u)||f("IEMobile",u);try{if(info.ie){ver=u.match(/(?:MSIE) ([0-9.]+)/)[1];if(u.match(/(?:Trident)\/([0-9.]+)/)&&u.match(/(?:Trident)\/([0-9.]+)/)[1]==4){nativeVersion=8}}else{if(info.safari||info.msafari){ver=parseFloat(u.match(/Safari\/([0-9.]+)/)[1]);if(ver==100){ver=1.1}else{ver=[1,1.2,-1,1.3,2,3][Math.floor(ver/100)]}}else{if(info.mopera){ver=u.match(/(?:Opera\sMini)\/([0-9.]+)/)[1]}else{if(info.firefox||info.opera||info.omniweb){ver=u.match(/(?:Firefox|Opera|OmniWeb)\/([0-9.]+)/)[1]}else{if(info.mozilla){ver=u.match(/rv:([0-9.]+)/)[1]}else{if(info.icab){ver=u.match(/iCab[ \/]([0-9.]+)/)[1]}else{if(info.chrome){ver=u.match(/Chrome[ \/]([0-9.]+)/)[1]}}}}}}}info.version=parseFloat(ver);info.nativeVersion=parseFloat(nativeVersion);if(isNaN(info.version)){info.version=-1}}catch(e){info.version=-1}this.navigator=function(){return info};return info};jindo.$Agent.prototype.os=function(){var info=new Object;var u=this._navigator.userAgent;var p=this._navigator.platform;var f=function(s,h){return(h.indexOf(s)>-1)};info.getName=function(){var name="";for(x in info){if(typeof info[x]=="boolean"&&info[x]&&info.hasOwnProperty(x)){name=x}}return name};info.win=f("Win",p);info.mac=f("Mac",p);info.linux=f("Linux",p);info.win2000=info.win&&(f("NT 5.0",u)||f("2000",u));info.winxp=info.win&&f("NT 5.1",u);info.xpsp2=info.winxp&&f("SV1",u);info.vista=info.win&&f("NT 6.0",u);info.win7=info.win&&f("NT 6.1",u);info.ipad=f("iPad",u);info.iphone=f("iPhone",u)&&!info.ipad;info.android=f("Android",u);info.nokia=f("Nokia",u);info.webos=f("webOS",u);info.blackberry=f("BlackBerry",u);info.mwin=f("PPC",u)||f("Smartphone",u)||f("IEMobile",u);this.os=function(){return info};return info};jindo.$Agent.prototype.flash=function(){var info=new Object;var p=this._navigator.plugins;var m=this._navigator.mimeTypes;var f=null;info.installed=false;info.version=-1;if(typeof p!="undefined"&&p.length){f=p["Shockwave Flash"];if(f){info.installed=true;if(f.description){info.version=parseFloat(f.description.match(/[0-9.]+/)[0])}}if(p["Shockwave Flash 2.0"]){info.installed=true;info.version=2}}else{if(typeof m!="undefined"&&m.length){f=m["application/x-shockwave-flash"];info.installed=(f&&f.enabledPlugin)}else{for(var i=10;i>1;i--){try{f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+i);info.installed=true;info.version=i;break}catch(e){}}}}this.flash=function(){return info};this.info=this.flash;return info};jindo.$Agent.prototype.silverlight=function(){var info=new Object;var p=this._navigator.plugins;var s=null;info.installed=false;info.version=-1;if(typeof p!="undefined"&&p.length){s=p["Silverlight Plug-In"];if(s){info.installed=true;info.version=parseInt(s.description.split(".")[0]);if(s.description=="1.0.30226.2"){info.version=2}}}else{try{s=new ActiveXObject("AgControl.AgControl");info.installed=true;if(s.isVersionSupported("3.0")){info.version=3}else{if(s.isVersionSupported("2.0")){info.version=2}else{if(s.isVersionSupported("1.0")){info.version=1}}}}catch(e){}}this.silverlight=function(){return info};return info};jindo.$A=function(array){var cl=arguments.callee;if(typeof array=="undefined"||array==null){array=[]}if(array instanceof cl){return array}if(!(this instanceof cl)){return new cl(array)}this._array=[];if(array.constructor!=String){this._array=[];for(var i=0;i<array.length;i++){this._array[this._array.length]=array[i]}}};jindo.$A.prototype.toString=function(){return this._array.toString()};jindo.$A.prototype.get=function(nIndex){return this._array[nIndex]};jindo.$A.prototype.length=function(nLen,oValue){if(typeof nLen=="number"){var l=this._array.length;this._array.length=nLen;if(typeof oValue!="undefined"){for(var i=l;i<nLen;i++){this._array[i]=oValue}}return this}else{return this._array.length}};jindo.$A.prototype.has=function(oValue){return(this.indexOf(oValue)>-1)};jindo.$A.prototype.indexOf=function(oValue){if(typeof this._array.indexOf!="undefined"){return this._array.indexOf(oValue)}for(var i=0;i<this._array.length;i++){if(this._array[i]==oValue){return i}}return -1};jindo.$A.prototype.$value=function(){return this._array};jindo.$A.prototype.push=function(oValue1){return this._array.push.apply(this._array,Array.prototype.slice.apply(arguments))};jindo.$A.prototype.pop=function(){return this._array.pop()};jindo.$A.prototype.shift=function(){return this._array.shift()};jindo.$A.prototype.unshift=function(oValue1){this._array.unshift.apply(this._array,Array.prototype.slice.apply(arguments));return this._array.length};jindo.$A.prototype.forEach=function(fCallback,oThis){var arr=this._array;var errBreak=this.constructor.Break;var errContinue=this.constructor.Continue;function f(v,i,a){try{fCallback.call(oThis,v,i,a)}catch(e){if(!(e instanceof errContinue)){throw e}}}if(typeof this._array.forEach=="function"){try{this._array.forEach(f)}catch(e){if(!(e instanceof errBreak)){throw e}}return this}for(var i=0;i<arr.length;i++){try{f(arr[i],i,arr)}catch(e){if(e instanceof errBreak){break}throw e}}return this};jindo.$A.prototype.slice=function(nStart,nEnd){var a=this._array.slice.call(this._array,nStart,nEnd);return jindo.$A(a)};jindo.$A.prototype.splice=function(nIndex,nHowMany){var a=this._array.splice.apply(this._array,Array.prototype.slice.apply(arguments));return jindo.$A(a)};jindo.$A.prototype.shuffle=function(){this._array.sort(function(a,b){return Math.random()>Math.random()?1:-1});return this};jindo.$A.prototype.reverse=function(){this._array.reverse();return this};jindo.$A.prototype.empty=function(){return this.length(0)};jindo.$A.Break=function(){if(!(this instanceof arguments.callee)){throw new arguments.callee}};jindo.$A.Continue=function(){if(!(this instanceof arguments.callee)){throw new arguments.callee}};jindo.$A.prototype.map=function(fCallback,oThis){var arr=this._array;var errBreak=this.constructor.Break;var errContinue=this.constructor.Continue;function f(v,i,a){try{return fCallback.call(oThis,v,i,a)}catch(e){if(e instanceof errContinue){return v}else{throw e}}}if(typeof this._array.map=="function"){try{this._array=this._array.map(f)}catch(e){if(!(e instanceof errBreak)){throw e}}return this}for(var i=0;i<this._array.length;i++){try{arr[i]=f(arr[i],i,arr)}catch(e){if(e instanceof errBreak){break}throw e}}return this};jindo.$A.prototype.filter=function(fCallback,oThis){var ar=new Array;this.forEach(function(v,i,a){if(fCallback.call(oThis,v,i,a)===true){ar[ar.length]=v}});return jindo.$A(ar)};jindo.$A.prototype.every=function(fCallback,oThis){if(typeof this._array.every!="undefined"){return this._array.every(fCallback,oThis)}var result=true;this.forEach(function(v,i,a){if(fCallback.call(oThis,v,i,a)===false){result=false;jindo.$A.Break()}});return result};jindo.$A.prototype.some=function(fCallback,oThis){if(typeof this._array.some!="undefined"){return this._array.some(fCallback,oThis)}var result=false;this.forEach(function(v,i,a){if(fCallback.call(oThis,v,i,a)===true){result=true;jindo.$A.Break()}});return result};jindo.$A.prototype.refuse=function(oValue1){var a=jindo.$A(Array.prototype.slice.apply(arguments));return this.filter(function(v,i){return !a.has(v)})};jindo.$A.prototype.unique=function(){var a=this._array,b=[],l=a.length;var i,j;for(i=0;i<l;i++){for(j=0;j<b.length;j++){if(a[i]==b[j]){break}}if(j>=b.length){b[j]=a[i]}}this._array=b;return this};jindo.$Ajax=function(url,option){var cl=arguments.callee;if(!(this instanceof cl)){return new cl(url,option)}function _getXHR(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{if(ActiveXObject){try{return new ActiveXObject("MSXML2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}return null}}}var loc=location.toString();var domain="";try{domain=loc.match(/^https?:\/\/([a-z0-9_\-\.]+)/i)[1]}catch(e){}this._status=0;this._url=url;this._options=new Object;this._headers=new Object;this._options={type:"xhr",method:"post",proxy:"",timeout:0,onload:function(req){},onerror:null,ontimeout:function(req){},jsonp_charset:"utf-8",callbackid:"",callbackname:"",sendheader:true,async:true,decode:true,postBody:false};this.option(option);if(jindo.$Ajax.CONFIG){this.option(jindo.$Ajax.CONFIG)}var _opt=this._options;_opt.type=_opt.type.toLowerCase();_opt.method=_opt.method.toLowerCase();if(typeof window.__jindo2_callback=="undefined"){window.__jindo2_callback=new Array()}switch(_opt.type){case"put":case"delete":case"get":case"post":_opt.method=_opt.type;_opt.type="xhr";case"xhr":this._request=_getXHR();break;case"flash":if(!jindo.$Ajax.SWFRequest){throw Error("Require jindo.$Ajax.SWFRequest")}this._request=new jindo.$Ajax.SWFRequest();this._request._decode=_opt.decode;break;case"jsonp":if(!jindo.$Ajax.JSONPRequest){throw Error("Require jindo.$Ajax.JSONPRequest")}_opt.method="get";this._request=new jindo.$Ajax.JSONPRequest();this._request.charset=_opt.jsonp_charset;this._request.callbackid=_opt.callbackid;this._request.callbackname=_opt.callbackname;break;case"iframe":if(!jindo.$Ajax.FrameRequest){throw Error("Require jindo.$Ajax.FrameRequest")}this._request=new jindo.$Ajax.FrameRequest();this._request._proxy=_opt.proxy;break}};jindo.$Ajax.prototype._onload=(function(isIE){if(isIE){return function(){var bSuccess=this._request.readyState==4&&this._request.status==200;var oResult;if(this._request.readyState==4){try{if(this._request.status!=200&&typeof this._options.onerror=="function"){if(!this._request.status==0){this._options.onerror(jindo.$Ajax.Response(this._request))}}else{oResult=this._options.onload(jindo.$Ajax.Response(this._request))}}finally{if(typeof this._oncompleted=="function"){this._oncompleted(bSuccess,oResult)}if(this._options.type!="jsonp"){this.abort();try{delete this._request.onload}catch(e){this._request.onload=undefined}}delete this._request.onreadystatechange}}}}else{return function(){var bSuccess=this._request.readyState==4&&this._request.status==200;var oResult;if(this._request.readyState==4){try{if(this._request.status!=200&&typeof this._options.onerror=="function"){this._options.onerror(jindo.$Ajax.Response(this._request))}else{oResult=this._options.onload(jindo.$Ajax.Response(this._request))}}finally{this._status--;if(typeof this._oncompleted=="function"){this._oncompleted(bSuccess,oResult)}}}}}})(/MSIE/.test(window.navigator.userAgent));jindo.$Ajax.prototype.request=function(oData){this._status++;var t=this;var req=this._request;var opt=this._options;var data,v,a=[],data="";var _timer=null;var url=this._url;this._is_abort=false;if(opt.postBody&&opt.type.toUpperCase()=="XHR"&&opt.method.toUpperCase()!="GET"){if(typeof oData=="string"){data=oData}else{data=jindo.$Json(oData).toString()}}else{if(typeof oData=="undefined"||!oData){data=null}else{for(var k in oData){if(oData.hasOwnProperty(k)){v=oData[k];if(typeof v=="function"){v=v()}if(v instanceof Array||v instanceof jindo.$A){jindo.$A(v).forEach(function(value,index,array){a[a.length]=k+"="+encodeURIComponent(value)})}else{a[a.length]=k+"="+encodeURIComponent(v)}}}data=a.join("&")}}if(data&&opt.type.toUpperCase()=="XHR"&&opt.method.toUpperCase()=="GET"){if(url.indexOf("?")==-1){url+="?"}else{url+="&"}url+=data;data=null}req.open(opt.method.toUpperCase(),url,opt.async);if(opt.type.toUpperCase()=="XHR"&&opt.method.toUpperCase()=="GET"&&/MSIE/.test(window.navigator.userAgent)){req.setRequestHeader("If-Modified-Since","Thu, 1 Jan 1970 00:00:00 GMT")}if(opt.sendheader){req.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");req.setRequestHeader("charset","utf-8");for(var x in this._headers){if(this._headers.hasOwnProperty(x)){if(typeof this._headers[x]=="function"){continue}req.setRequestHeader(x,String(this._headers[x]))}}}var navi=navigator.userAgent;if(req.addEventListener&&!(navi.indexOf("Opera")>-1)&&!(navi.indexOf("MSIE")>-1)){if(this._loadFunc){req.removeEventListener("load",this._loadFunc,false)}this._loadFunc=function(rq){clearTimeout(_timer);t._onload(rq)};req.addEventListener("load",this._loadFunc,false)}else{if(typeof req.onload!="undefined"){req.onload=function(rq){if(req.readyState==4&&!t._is_abort){clearTimeout(_timer);t._onload(rq)}}}else{if(window.navigator.userAgent.match(/(?:MSIE) ([0-9.]+)/)[1]==6&&opt.async){var onreadystatechange=function(rq){if(req.readyState==4&&!t._is_abort){if(_timer){clearTimeout(_timer)}t._onload(rq);clearInterval(t._interval)}};this._interval=setInterval(onreadystatechange,300)}else{req.onreadystatechange=function(rq){if(req.readyState==4){clearTimeout(_timer);t._onload(rq)}}}}}if(opt.timeout>0){_timer=setTimeout(function(){t._is_abort=true;if(t._interval){clearInterval(t._interval)}try{req.abort()}catch(e){}opt.ontimeout(req);if(typeof t._oncompleted=="function"){t._oncompleted(false)}},opt.timeout*1000)}this._test_url=url;req.send(data);return this};jindo.$Ajax.prototype.isIdle=function(){return this._status==0};jindo.$Ajax.prototype.abort=function(){try{if(this._interval){clearInterval(this._interval)}this._is_abort=true;this._request.abort()}finally{this._status--}return this};jindo.$Ajax.prototype.option=function(name,value){if(typeof name=="undefined"){return""}if(typeof name=="string"){if(typeof value=="undefined"){return this._options[name]}this._options[name]=value;return this}try{for(var x in name){if(name.hasOwnProperty(x)){this._options[x]=name[x]}}}catch(e){}return this};jindo.$Ajax.prototype.header=function(name,value){if(typeof name=="undefined"){return""}if(typeof name=="string"){if(typeof value=="undefined"){return this._headers[name]}this._headers[name]=value;return this}try{for(var x in name){if(name.hasOwnProperty(x)){this._headers[x]=name[x]}}}catch(e){}return this};jindo.$Ajax.Response=function(req){if(this===jindo.$Ajax){return new jindo.$Ajax.Response(req)}this._response=req};jindo.$Ajax.Response.prototype.xml=function(){return this._response.responseXML};jindo.$Ajax.Response.prototype.text=function(){return this._response.responseText};jindo.$Ajax.Response.prototype.status=function(){return this._response.status};jindo.$Ajax.Response.prototype.readyState=function(){return this._response.readyState};jindo.$Ajax.Response.prototype.json=function(){if(this._response.responseJSON){return this._response.responseJSON}else{if(this._response.responseText){try{return eval("("+this._response.responseText+")")}catch(e){return{}}}}return{}};jindo.$Ajax.Response.prototype.header=function(name){if(typeof name=="string"){return this._response.getResponseHeader(name)}return this._response.getAllResponseHeaders()};jindo.$Ajax.RequestBase=jindo.$Class({_respHeaderString:"",callbackid:"",callbackname:"",responseXML:null,responseJSON:null,responseText:"",status:404,readyState:0,$init:function(){},onload:function(){},abort:function(){},open:function(){},send:function(){},setRequestHeader:function(sName,sValue){this._headers[sName]=sValue},getResponseHeader:function(sName){return this._respHeaders[sName]||""},getAllResponseHeaders:function(){return this._respHeaderString},_getCallbackInfo:function(){var id="";if(this.callbackid!=""){var idx=0;do{id="_"+this.callbackid+"_"+idx;idx++}while(window.__jindo2_callback[id])}else{do{id="_"+Math.floor(Math.random()*10000)}while(window.__jindo2_callback[id])}if(this.callbackname==""){this.callbackname="_callback"}return{callbackname:this.callbackname,id:id,name:"window.__jindo2_callback."+id}}});jindo.$Ajax.JSONPRequest=jindo.$Class({_headers:{},_respHeaders:{},charset:"utf-8",_script:null,_onerror:null,_callback:function(data){if(this._onerror){clearTimeout(this._onerror);this._onerror=null}var self=this;this.responseJSON=data;this.onload(this);setTimeout(function(){self.abort()},10)},abort:function(){if(this._script){try{this._script.parentNode.removeChild(this._script)}catch(e){}}},open:function(method,url){this.responseJSON=null;this._url=url},send:function(data){var t=this;var info=this._getCallbackInfo();var head=document.getElementsByTagName("head")[0];this._script=jindo.$("<script>");this._script.type="text/javascript";this._script.charset=this.charset;if(head){head.appendChild(this._script)}else{if(document.body){document.body.appendChild(this._script)}}window.__jindo2_callback[info.id]=function(data){try{t.readyState=4;t.status=200;t._callback(data)}finally{delete window.__jindo2_callback[info.id]}};var agent=jindo.$Agent();if(agent.navigator().ie||agent.navigator().opera){this._script.onreadystatechange=function(){if(this.readyState=="loaded"){if(!t.responseJSON){t.readyState=4;t.status=500;t._onerror=setTimeout(function(){t._callback(null)},200)}this.onreadystatechange=null}}}else{this._script.onload=function(){if(!t.responseJSON){t.readyState=4;t.status=500;t._onerror=setTimeout(function(){t._callback(null)},200)}this.onload=null;this.onerror=null};this._script.onerror=function(){if(!t.responseJSON){t.readyState=4;t.status=404;t._onerror=setTimeout(function(){t._callback(null)},200)}this.onerror=null;this.onload=null}}var delimiter="&";if(this._url.indexOf("?")==-1){delimiter="?"}if(data){data="&"+data}else{data=""}this._test_url=this._url+delimiter+info.callbackname+"="+info.name+data;this._script.src=this._url+delimiter+info.callbackname+"="+info.name+data}}).extend(jindo.$Ajax.RequestBase);jindo.$Ajax.SWFRequest=jindo.$Class({_decode:true,_headers:{},_respHeaders:{},_getFlashObj:function(){var navi=jindo.$Agent().navigator();var obj;if(navi.ie&&navi.version==9){obj=document.getElementById(jindo.$Ajax.SWFRequest._tmpId)}else{obj=window.document[jindo.$Ajax.SWFRequest._tmpId]}return(this._getFlashObj=function(){return obj})()},_callback:function(status,data,headers){this.readyState=4;if((typeof status).toLowerCase()=="number"){this.status=status}else{if(status==true){this.status=200}}if(this.status==200){if(typeof data=="string"){try{this.responseText=this._decode?decodeURIComponent(data):data;if(!this.responseText||this.responseText==""){this.responseText=data}}catch(e){if(e.name=="URIError"){this.responseText=data;if(!this.responseText||this.responseText==""){this.responseText=data}}}}if(typeof headers=="object"){this._respHeaders=headers}}this.onload(this)},open:function(method,url){var re=/https?:\/\/([a-z0-9_\-\.]+)/i;this._url=url;this._method=method},send:function(data){this.responseXML=false;this.responseText="";var t=this;var dat={};var info=this._getCallbackInfo();var swf=this._getFlashObj();function f(arg){switch(typeof arg){case"string":return'"'+arg.replace(/\"/g,'\\"')+'"';break;case"number":return arg;break;case"object":var ret="",arr=[];if(arg instanceof Array){for(var i=0;i<arg.length;i++){arr[i]=f(arg[i])}ret="["+arr.join(",")+"]"}else{for(var x in arg){if(arg.hasOwnProperty(x)){arr[arr.length]=f(x)+":"+f(arg[x])}}ret="{"+arr.join(",")+"}"}return ret;default:return'""'}}data=(data||"").split("&");for(var i=0;i<data.length;i++){pos=data[i].indexOf("=");key=data[i].substring(0,pos);val=data[i].substring(pos+1);dat[key]=decodeURIComponent(val)}window.__jindo2_callback[info.id]=function(success,data){try{t._callback(success,data)}finally{delete window.__jindo2_callback[info.id]}};var oData={url:this._url,type:this._method,data:dat,charset:"UTF-8",callback:info.name,header_json:this._headers};swf.requestViaFlash(f(oData))}}).extend(jindo.$Ajax.RequestBase);jindo.$Ajax.SWFRequest.write=function(swf_path){if(typeof swf_path=="undefined"){swf_path="./ajax.swf"}jindo.$Ajax.SWFRequest._tmpId="tmpSwf"+(new Date).getMilliseconds()+Math.floor(Math.random()*100000);document.write('<div style="position:absolute;top:-1000px;left:-1000px"><object id="'+jindo.$Ajax.SWFRequest._tmpId+'" width="1" height="1" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"><param name="movie" value="'+swf_path+'"><param name = "allowScriptAccess" value = "always" /><embed name="'+jindo.$Ajax.SWFRequest._tmpId+'" src="'+swf_path+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" width="1" height="1" allowScriptAccess="always" swLiveConnect="true"></embed></object></div>')};jindo.$Ajax.SWFRequest.activeFlash=false;jindo.$Ajax.SWFRequest.loaded=function(){jindo.$Ajax.SWFRequest.activeFlash=true};jindo.$Ajax.FrameRequest=jindo.$Class({_headers:{},_respHeaders:{},_frame:null,_proxy:"",_domain:"",_callback:function(id,data,header){var self=this;this.readyState=4;this.status=200;this.responseText=data;this._respHeaderString=header;header.replace(/^([\w\-]+)\s*:\s*(.+)$/m,function($0,$1,$2){self._respHeaders[$1]=$2});this.onload(this);setTimeout(function(){self.abort()},10)},abort:function(){if(this._frame){try{this._frame.parentNode.removeChild(this._frame)}catch(e){}}},open:function(method,url){var re=/https?:\/\/([a-z0-9_\-\.]+)/i;var dom=document.location.toString().match(re);this._method=method;this._url=url;this._remote=String(url).match(/(https?:\/\/[a-z0-9_\-\.]+)(:[0-9]+)?/i)[0];this._frame=null;this._domain=(dom[1]!=document.domain)?document.domain:""},send:function(data){this.responseXML="";this.responseText="";var t=this;var re=/https?:\/\/([a-z0-9_\-\.]+)/i;var info=this._getCallbackInfo();var url;var _aStr=[];_aStr.push(this._remote+"/ajax_remote_callback.html?method="+this._method);var header=new Array;window.__jindo2_callback[info.id]=function(id,data,header){try{t._callback(id,data,header)}finally{delete window.__jindo2_callback[info.id]}};for(var x in this._headers){if(this._headers.hasOwnProperty(x)){header[header.length]="'"+x+"':'"+this._headers[x]+"'"}}header="{"+header.join(",")+"}";_aStr.push("&id="+info.id);_aStr.push("&header="+encodeURIComponent(header));_aStr.push("&proxy="+encodeURIComponent(this._proxy));_aStr.push("&domain="+this._domain);_aStr.push("&url="+encodeURIComponent(this._url.replace(re,"")));_aStr.push("#"+encodeURIComponent(data));var fr=this._frame=jindo.$("<iframe>");fr.style.position="absolute";fr.style.visibility="hidden";fr.style.width="1px";fr.style.height="1px";var body=document.body||document.documentElement;if(body.firstChild){body.insertBefore(fr,body.firstChild)}else{body.appendChild(fr)}fr.src=_aStr.join("")}}).extend(jindo.$Ajax.RequestBase);jindo.$Ajax.Queue=function(option){var cl=arguments.callee;if(!(this instanceof cl)){return new cl(option)}this._options={async:false,useResultAsParam:false,stopOnFailure:false};this.option(option);this._queue=[]};jindo.$Ajax.Queue.prototype.option=function(name,value){if(typeof name=="undefined"){return""}if(typeof name=="string"){if(typeof value=="undefined"){return this._options[name]}this._options[name]=value;return this}try{for(var x in name){if(name.hasOwnProperty(x)){this._options[x]=name[x]}}}catch(e){}return this};jindo.$Ajax.Queue.prototype.add=function(oAjax,oParam){this._queue.push({obj:oAjax,param:oParam})};jindo.$Ajax.Queue.prototype.request=function(){if(this.option("async")){this._requestAsync()}else{this._requestSync(0)}};jindo.$Ajax.Queue.prototype._requestSync=function(nIdx,oParam){var t=this;if(this._queue.length>nIdx+1){this._queue[nIdx].obj._oncompleted=function(bSuccess,oResult){if(!t.option("stopOnFailure")||bSuccess){t._requestSync(nIdx+1,oResult)}}}var _oParam=this._queue[nIdx].param||{};if(this.option("useResultAsParam")&&oParam){try{for(var x in oParam){if(typeof _oParam[x]=="undefined"&&oParam.hasOwnProperty(x)){_oParam[x]=oParam[x]}}}catch(e){}}this._queue[nIdx].obj.request(_oParam)};jindo.$Ajax.Queue.prototype._requestAsync=function(){for(var i=0;i<this._queue.length;i++){this._queue[i].obj.request(this._queue[i].param)}};jindo.$H=function(hashObject){var cl=arguments.callee;if(typeof hashObject=="undefined"){hashObject=new Object}if(hashObject instanceof cl){return hashObject}if(!(this instanceof cl)){return new cl(hashObject)}this._table={};for(var k in hashObject){if(hashObject.hasOwnProperty(k)){this._table[k]=hashObject[k]}}};jindo.$H.prototype.$value=function(){return this._table};jindo.$H.prototype.$=function(key,value){if(typeof value=="undefined"){return this._table[key]}this._table[key]=value;return this};jindo.$H.prototype.length=function(){var i=0;for(var k in this._table){if(this._table.hasOwnProperty(k)){if(typeof Object.prototype[k]!="undeifned"&&Object.prototype[k]===this._table[k]){continue}i++}}return i};jindo.$H.prototype.forEach=function(callback,thisObject){var t=this._table;var h=this.constructor;for(var k in t){if(t.hasOwnProperty(k)){if(!t.propertyIsEnumerable(k)){continue}try{callback.call(thisObject,t[k],k,t)}catch(e){if(e instanceof h.Break){break}if(e instanceof h.Continue){continue}throw e}}}return this};jindo.$H.prototype.filter=function(callback,thisObject){var h=jindo.$H();this.forEach(function(v,k,o){if(callback.call(thisObject,v,k,o)===true){h.add(k,v)}});return h};jindo.$H.prototype.map=function(callback,thisObject){var t=this._table;this.forEach(function(v,k,o){t[k]=callback.call(thisObject,v,k,o)});return this};jindo.$H.prototype.add=function(key,value){this._table[key]=value;return this};jindo.$H.prototype.remove=function(key){if(typeof this._table[key]=="undefined"){return null}var val=this._table[key];delete this._table[key];return val};jindo.$H.prototype.search=function(value){var result=false;this.forEach(function(v,k,o){if(v===value){result=k;jindo.$H.Break()}});return result};jindo.$H.prototype.hasKey=function(key){var result=false;return(typeof this._table[key]!="undefined")};jindo.$H.prototype.hasValue=function(value){return(this.search(value)!==false)};jindo.$H.prototype.sort=function(){var o=new Object;var a=this.values();var k=false;a.sort();for(var i=0;i<a.length;i++){k=this.search(a[i]);o[k]=a[i];delete this._table[k]}this._table=o;return this};jindo.$H.prototype.ksort=function(){var o=new Object;var a=this.keys();a.sort();for(var i=0;i<a.length;i++){o[a[i]]=this._table[a[i]]}this._table=o;return this};jindo.$H.prototype.keys=function(){var keys=new Array;for(var k in this._table){if(this._table.hasOwnProperty(k)){keys.push(k)}}return keys};jindo.$H.prototype.values=function(){var values=[];for(var k in this._table){if(this._table.hasOwnProperty(k)){values[values.length]=this._table[k]}}return values};jindo.$H.prototype.toQueryString=function(){var buf=[],val=null,idx=0;for(var k in this._table){if(this._table.hasOwnProperty(k)){if(typeof(val=this._table[k])=="object"&&val.constructor==Array){for(i=0;i<val.length;i++){buf[buf.length]=encodeURIComponent(k)+"[]="+encodeURIComponent(val[i]+"")}}else{buf[buf.length]=encodeURIComponent(k)+"="+encodeURIComponent(this._table[k]+"")}}}return buf.join("&")};jindo.$H.prototype.empty=function(){var keys=this.keys();for(var i=0;i<keys.length;i++){delete this._table[keys[i]]}return this};jindo.$H.Break=function(){if(!(this instanceof arguments.callee)){throw new arguments.callee}};jindo.$H.Continue=function(){if(!(this instanceof arguments.callee)){throw new arguments.callee}};jindo.$Json=function(sObject){var cl=arguments.callee;if(typeof sObject=="undefined"){sObject=new Object}if(sObject instanceof cl){return sObject}if(!(this instanceof cl)){return new cl(sObject)}if(typeof sObject=="string"){try{if(/^(?:\s*)[\{\[]/.test(sObject)){sObject=eval("("+sObject+")")}else{sObject=sObject}}catch(e){sObject=new Object}}this._object=sObject};jindo.$Json.fromXML=function(sXML){var o=new Object;var re=/\s*<(\/?[\w:\-]+)((?:\s+[\w:\-]+\s*=\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'))*)\s*((?:\/>)|(?:><\/\1>|\s*))|\s*<!\[CDATA\[([\w\W]*?)\]\]>\s*|\s*>?([^<]*)/ig;var re2=/^[0-9]+(?:\.[0-9]+)?$/;var ec={"&amp;":"&","&nbsp;":" ","&quot;":'"',"&lt;":"<","&gt;":">"};var fg={tags:["/"],stack:[o]};var es=function(s){if(typeof s=="undefined"){return""}return s.replace(/&[a-z]+;/g,function(m){return(typeof ec[m]=="string")?ec[m]:m})};var at=function(s,c){s.replace(/([\w\:\-]+)\s*=\s*(?:"((?:\\"|[^"])*)"|'((?:\\'|[^'])*)')/g,function($0,$1,$2,$3){c[$1]=es(($2?$2.replace(/\\"/g,'"'):undefined)||($3?$3.replace(/\\'/g,"'"):undefined))})};var em=function(o){for(var x in o){if(o.hasOwnProperty(x)){if(Object.prototype[x]){continue}return false}}return true};var cb=function($0,$1,$2,$3,$4,$5){var cur,cdata="";var idx=fg.stack.length-1;if(typeof $1=="string"&&$1){if($1.substr(0,1)!="/"){var has_attr=(typeof $2=="string"&&$2);var closed=(typeof $3=="string"&&$3);var newobj=(!has_attr&&closed)?"":{};cur=fg.stack[idx];if(typeof cur[$1]=="undefined"){cur[$1]=newobj;cur=fg.stack[idx+1]=cur[$1]}else{if(cur[$1] instanceof Array){var len=cur[$1].length;cur[$1][len]=newobj;cur=fg.stack[idx+1]=cur[$1][len]}else{cur[$1]=[cur[$1],newobj];cur=fg.stack[idx+1]=cur[$1][1]}}if(has_attr){at($2,cur)}fg.tags[idx+1]=$1;if(closed){fg.tags.length--;fg.stack.length--}}else{fg.tags.length--;fg.stack.length--}}else{if(typeof $4=="string"&&$4){cdata=$4}else{if(typeof $5=="string"&&$5){cdata=es($5)}}}if(cdata.replace(/^\s+/g,"").length>0){var par=fg.stack[idx-1];var tag=fg.tags[idx];if(re2.test(cdata)){cdata=parseFloat(cdata)}else{if(cdata=="true"||cdata=="false"){cdata=new Boolean(cdata)}}if(typeof par=="undefined"){return}if(par[tag] instanceof Array){var o=par[tag];if(typeof o[o.length-1]=="object"&&!em(o[o.length-1])){o[o.length-1].$cdata=cdata;o[o.length-1].toString=function(){return cdata}}else{o[o.length-1]=cdata}}else{if(typeof par[tag]=="object"&&!em(par[tag])){par[tag].$cdata=cdata;par[tag].toString=function(){return cdata}}else{par[tag]=cdata}}}};sXML=sXML.replace(/<(\?|\!-)[^>]*>/g,"");sXML.replace(re,cb);return jindo.$Json(o)};jindo.$Json.prototype.get=function(sPath){var o=this._object;var p=sPath.split("/");var re=/^([\w:\-]+)\[([0-9]+)\]$/;var stack=[[o]],cur=stack[0];var len=p.length,c_len,idx,buf,j,e;for(var i=0;i<len;i++){if(p[i]=="."||p[i]==""){continue}if(p[i]==".."){stack.length--}else{buf=[];idx=-1;c_len=cur.length;if(c_len==0){return[]}if(re.test(p[i])){idx=+RegExp.$2}for(j=0;j<c_len;j++){e=cur[j][p[i]];if(typeof e=="undefined"){continue}if(e instanceof Array){if(idx>-1){if(idx<e.length){buf[buf.length]=e[idx]}}else{buf=buf.concat(e)}}else{if(idx==-1){buf[buf.length]=e}}}stack[stack.length]=buf}cur=stack[stack.length-1]}return cur};jindo.$Json.prototype.toString=function(){var func={$:function($){if(typeof $=="object"&&$==null){return"null"}if(typeof $=="undefined"){return'""'}if(typeof $=="boolean"){return $?"true":"false"}if(typeof $=="string"){return this.s($)}if(typeof $=="number"){return $}if($ instanceof Array){return this.a($)}if($ instanceof Object){return this.o($)}},s:function(s){var e={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t"};var c=function(m){return(typeof e[m]!="undefined")?e[m]:m};return'"'+s.replace(/[\\"'\n\r\t]/g,c)+'"'},a:function(a){var s="[",c="",n=a.length;for(var i=0;i<n;i++){if(typeof a[i]=="function"){continue}s+=c+this.$(a[i]);if(!c){c=","}}return s+"]"},o:function(o){o=jindo.$H(o).ksort().$value();var s="{",c="";for(var x in o){if(o.hasOwnProperty(x)){if(typeof o[x]=="function"){continue}s+=c+this.s(x)+":"+this.$(o[x]);if(!c){c=","}}}return s+"}"}};return func.$(this._object)};jindo.$Json.prototype.toXML=function(){var f=function($,tag){var t=function(s,at){return"<"+tag+(at||"")+">"+s+"</"+tag+">"};switch(typeof $){case"undefined":case"null":return t("");case"number":return t($);case"string":if($.indexOf("<")<0){return t($.replace(/&/g,"&amp;"))}else{return t("<![CDATA["+$+"]]>")}case"boolean":return t(String($));case"object":var ret="";if($ instanceof Array){var len=$.length;for(var i=0;i<len;i++){ret+=f($[i],tag)}}else{var at="";for(var x in $){if($.hasOwnProperty(x)){if(x=="$cdata"||typeof $[x]=="function"){continue}ret+=f($[x],x)}}if(tag){ret=t(ret,at)}}return ret}};return f(this._object,"")};jindo.$Json.prototype.toObject=function(){return this._object};jindo.$Json.prototype.compare=function(oData){return this.toString()==jindo.$Json(oData).toString()};jindo.$Json.prototype.$value=jindo.$Json.prototype.toObject;jindo.$Cookie=function(){var cl=arguments.callee;var cached=cl._cached;if(cl._cached){return cl._cached}if(!(this instanceof cl)){return new cl}if(typeof cl._cached=="undefined"){cl._cached=this}};jindo.$Cookie.prototype.keys=function(){var ca=document.cookie.split(";");var re=/^\s+|\s+$/g;var a=new Array;for(var i=0;i<ca.length;i++){a[a.length]=ca[i].substr(0,ca[i].indexOf("=")).replace(re,"")}return a};jindo.$Cookie.prototype.get=function(sName){var ca=document.cookie.split(/\s*;\s*/);var re=new RegExp("^(\\s*"+sName+"\\s*=)");for(var i=0;i<ca.length;i++){if(re.test(ca[i])){return unescape(ca[i].substr(RegExp.$1.length))}}return null};jindo.$Cookie.prototype.set=function(sName,sValue,nDays,sDomain,sPath){var sExpire="";if(typeof nDays=="number"){sExpire=";expires="+(new Date((new Date()).getTime()+nDays*1000*60*60*24)).toGMTString()}if(typeof sDomain=="undefined"){sDomain=""}if(typeof sPath=="undefined"){sPath="/"}document.cookie=sName+"="+escape(sValue)+sExpire+"; path="+sPath+(sDomain?"; domain="+sDomain:"");return this};jindo.$Cookie.prototype.remove=function(sName,sDomain,sPath){if(this.get(sName)!=null){this.set(sName,"",-1,sDomain,sPath)}return this};jindo.$Element=function(el){var cl=arguments.callee;if(el&&el instanceof cl){return el}if(el===null||typeof el=="undefined"){return null}if(!(this instanceof cl)){return new cl(el)}this._element=(typeof el=="string")?jindo.$(el):el;var tag=this._element.tagName;this.tag=(typeof tag!="undefined")?tag.toLowerCase():""};var _j_ag=navigator.userAgent;var IS_IE=_j_ag.indexOf("MSIE")>-1;var IS_FF=_j_ag.indexOf("Firefox")>-1;var IS_OP=_j_ag.indexOf("Opera")>-1;var IS_SF=_j_ag.indexOf("Apple")>-1;var IS_CH=_j_ag.indexOf("Chrome")>-1;jindo.$Element.prototype.$value=function(){return this._element};jindo.$Element.prototype.visible=function(bVisible,sDisplay){if(typeof bVisible!="undefined"){this[bVisible?"show":"hide"](sDisplay);return this}return(this.css("display")!="none")};jindo.$Element.prototype.show=function(sDisplay){var s=this._element.style;var b="block";var c={p:b,div:b,form:b,h1:b,h2:b,h3:b,h4:b,ol:b,ul:b,fieldset:b,td:"table-cell",th:"table-cell",li:"list-item",table:"table",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",col:"table-column",colgroup:"table-column-group",caption:"table-caption",dl:b,dt:b,dd:b};try{if(sDisplay){s.display=sDisplay}else{var type=c[this.tag];s.display=type||"inline"}}catch(e){s.display="block"}return this};jindo.$Element.prototype.hide=function(){this._element.style.display="none";return this};jindo.$Element.prototype.toggle=function(sDisplay){this[this.visible()?"hide":"show"](sDisplay);return this};jindo.$Element.prototype.opacity=function(value){var v,e=this._element,b=this.visible();value=parseFloat(value);if(!isNaN(value)){value=Math.max(Math.min(value,1),0);if(typeof e.filters!="undefined"){value=Math.ceil(value*100);if(typeof e.filters!="unknown"&&typeof e.filters.alpha!="undefined"){e.filters.alpha.opacity=value}else{e.style.filter=(e.style.filter+" alpha(opacity="+value+")")}}else{e.style.opacity=value}return value}if(typeof e.filters!="undefined"){v=(typeof e.filters.alpha=="undefined")?(b?100:0):e.filters.alpha.opacity;v=v/100}else{v=parseFloat(e.style.opacity);if(isNaN(v)){v=b?1:0}}return v};jindo.$Element.prototype.css=function(sName,sValue){var e=this._element;var type_v=(typeof sValue);if(sName=="opacity"){return type_v=="undefined"?this.opacity():this.opacity(sValue)}var type_n=(typeof sName);if(type_n=="string"){var view;if(type_v=="string"||type_v=="number"){var obj={};obj[sName]=sValue;sName=obj}else{var _getCss=this._getCss;if((IS_FF||IS_OP)&&(sName=="backgroundPositionX"||sName=="backgroundPositionY")){var bp=_getCss(e,"backgroundPosition").split(/\s+/);return(sName=="backgroundPositionX")?bp[0]:bp[1]}if(IS_IE&&sName=="backgroundPosition"){return _getCss(e,"backgroundPositionX")+" "+_getCss(e,"backgroundPositionY")}if((IS_FF||IS_SF||IS_CH)&&(sName=="padding"||sName=="margin")){var top=_getCss(e,sName+"Top");var right=_getCss(e,sName+"Right");var bottom=_getCss(e,sName+"Bottom");var left=_getCss(e,sName+"Left");if((top==right)&&(bottom==left)){return top}else{if(top==bottom){if(right==left){return top+" "+right}else{return top+" "+right+" "+bottom+" "+left}}else{return top+" "+right+" "+bottom+" "+left}}}return _getCss(e,sName)}}var h=jindo.$H;if(typeof h!="undefined"&&sName instanceof h){sName=sName._table}if(typeof sName=="object"){var v,type;for(var k in sName){if(sName.hasOwnProperty(k)){v=sName[k];type=(typeof v);if(type!="string"&&type!="number"){continue}if(k=="opacity"){type=="undefined"?this.opacity():this.opacity(v);continue}if(k=="cssFloat"&&IS_IE){k="styleFloat"}if((IS_FF||IS_OP)&&(k=="backgroundPositionX"||k=="backgroundPositionY")){var bp=this.css("backgroundPosition").split(/\s+/);v=k=="backgroundPositionX"?v+" "+bp[1]:bp[0]+" "+v;this._setCss(e,"backgroundPosition",v)}else{this._setCss(e,k,v)}}}}return this};jindo.$Element.prototype._getCss=function(e,sName){var fpGetCss;if(e.currentStyle){fpGetCss=function(e,sName){try{if(sName=="cssFloat"){sName="styleFloat"}return e.style[sName]||e.currentStyle[sName]}catch(ex){throw new Error(e.tagName||"document는 css를 사용 할수 없습니다.")}}}else{if(window.getComputedStyle){fpGetCss=function(e,sName){try{if(sName=="cssFloat"){sName="float"}var d=e.ownerDocument||e.document||document;var sVal=(e.style[sName]||d.defaultView.getComputedStyle(e,null).getPropertyValue(sName.replace(/([A-Z])/g,"-$1").toLowerCase()));if(sName=="textDecoration"){sVal=sVal.replace(",","")}return sVal}catch(ex){throw new Error(e.tagName||"document는 css를 사용 할수 없습니다.")}}}else{fpGetCss=function(e,sName){try{if(sName=="cssFloat"&&IS_IE){sName="styleFloat"}return e.style[sName]}catch(ex){throw new Error(e.tagName||"document는 css를 사용 할수 없습니다.")}}}}jindo.$Element.prototype._getCss=fpGetCss;return fpGetCss(e,sName)};jindo.$Element.prototype._setCss=function(e,k,v){if(("#top#left#right#bottom#").indexOf(k+"#")>0&&(typeof v=="number"||(/\d$/.test(v)))){e.style[k]=parseInt(v)+"px"}else{e.style[k]=v}};jindo.$Element.prototype.attr=function(sName,sValue){var e=this._element;if(typeof sName=="string"){if(typeof sValue!="undefined"){var obj={};obj[sName]=sValue;sName=obj}else{if(sName=="class"||sName=="className"){return e.className}else{if(sName=="style"){return e.style.cssText}else{if(sName=="checked"||sName=="disabled"){return !!e[sName]}}}return e.getAttribute(sName)}}if(typeof jindo.$H!="undefined"&&sName instanceof jindo.$H){sName=sName.$value()}if(typeof sName=="object"){for(var k in sName){if(sName.hasOwnProperty(k)){if(typeof(sValue)!="undefined"&&sValue===null){e.removeAttribute(k)}else{if(k=="class"||k=="className"){e.className=sName[k]}else{if(k=="style"){e.style.cssText=sName[k]}else{if(k=="checked"||k=="disabled"){e[k]=sName[k]}else{e.setAttribute(k,sName[k])}}}}}}}return this};jindo.$Element.prototype.width=function(width){if(typeof width=="number"){var e=this._element;e.style.width=width+"px";var off=e.offsetWidth;if(off!=width){e.style.width=(width*2-off)+"px"}return this}return this._element.offsetWidth};jindo.$Element.prototype.height=function(height){if(typeof height=="number"){var e=this._element;e.style.height=height+"px";var off=e.offsetHeight;if(off!=height){var height=(height*2-off);if(height>0){e.style.height=height+"px"}}return this}return this._element.offsetHeight};jindo.$Element.prototype.className=function(sClass){var e=this._element;if(typeof sClass=="undefined"){return e.className}e.className=sClass;return this};jindo.$Element.prototype.hasClass=function(sClass){if(this._element.classList){jindo.$Element.prototype.hasClass=function(sClass){return this._element.classList.contains(sClass)}}else{jindo.$Element.prototype.hasClass=function(sClass){return(" "+this._element.className+" ").indexOf(" "+sClass+" ")>-1}}return this.hasClass(sClass)};jindo.$Element.prototype.addClass=function(sClass){if(this._element.classList){jindo.$Element.prototype.addClass=function(sClass){var aClass=sClass.split(" ");var flistApi=this._element.classList;for(var i=aClass.length;i--;){flistApi.add(aClass[i])}return this}}else{jindo.$Element.prototype.addClass=function(sClass){var e=this._element;if(this.hasClass(sClass)){return this}e.className=(e.className+" "+sClass).replace(/^\s+/,"");return this}}return this.addClass(sClass)};jindo.$Element.prototype.removeClass=function(sClass){if(this._element.classList){jindo.$Element.prototype.removeClass=function(sClass){var flistApi=this._element.classList;var aClass=sClass.split(" ");for(var i=aClass.length;i--;){flistApi.remove(aClass[i])}return this}}else{jindo.$Element.prototype.removeClass=function(sClass){var e=this._element;e.className=(" "+e.className+" ").replace(" "+sClass+" "," ").replace(/\s+$/,"").replace(/^\s+/,"");return this}}return this.removeClass(sClass)};jindo.$Element.prototype.toggleClass=function(sClass,sClass2){if(this._element.classList){jindo.$Element.prototype.toggleClass=function(sClass,sClass2){if(typeof sClass2=="undefined"){this._element.classList.toggle(sClass)}else{if(this.hasClass(sClass)){this.removeClass(sClass);this.addClass(sClass2)}else{this.addClass(sClass);this.removeClass(sClass2)}}return this}}else{jindo.$Element.prototype.toggleClass=function(sClass,sClass2){sClass2=sClass2||"";if(this.hasClass(sClass)){this.removeClass(sClass);if(sClass2){this.addClass(sClass2)}}else{this.addClass(sClass);if(sClass2){this.removeClass(sClass2)}}return this}}return this.toggleClass(sClass,sClass2)};jindo.$Element.prototype.text=function(sText){var ele=this._element;var tag=this.tag;var prop=(typeof ele.textContent!="undefined")?"textContent":"innerText";if(tag=="textarea"||tag=="input"){prop="value"}var type=(typeof sText);if(type!="undefined"&&(type=="string"||type=="number"||type=="boolean")){sText+="";try{ele[prop]=sText}catch(e){return this.html(sText.replace(/&/g,"&amp;").replace(/</g,"&lt;"))}return this}return ele[prop]};jindo.$Element.prototype.html=function(sHTML){var isIe=IS_IE;var isFF=IS_FF;if(isIe){jindo.$Element.prototype.html=function(sHTML){if(typeof sHTML!="undefined"&&arguments.length){sHTML+="";jindo.$$.release();var oEl=this._element;while(oEl.firstChild){oEl.removeChild(oEl.firstChild)}var sId="R"+new Date().getTime()+parseInt(Math.random()*100000);var oDoc=oEl.ownerDocument||oEl.document||document;var oDummy;var sTag=oEl.tagName.toLowerCase();switch(sTag){case"select":case"table":oDummy=oDoc.createElement("div");oDummy.innerHTML="<"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+">";break;case"tr":case"thead":case"tbody":oDummy=oDoc.createElement("div");oDummy.innerHTML="<table><"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+"></table>";break;default:oEl.innerHTML=sHTML;break}if(oDummy){var oFound;for(oFound=oDummy.firstChild;oFound;oFound=oFound.firstChild){if(oFound.className==sId){break}}if(oFound){var notYetSelected=true;for(var oChild;oChild=oEl.firstChild;){oChild.removeNode(true)}for(var oChild=oFound.firstChild;oChild;oChild=oFound.firstChild){if(sTag=="select"){var cloneNode=oChild.cloneNode(true);if(oChild.selected&&notYetSelected){notYetSelected=false;cloneNode.selected=true}oEl.appendChild(cloneNode);oChild.removeNode(true)}else{oEl.appendChild(oChild)}}oDummy.removeNode&&oDummy.removeNode(true)}oDummy=null}return this}return this._element.innerHTML}}else{if(isFF){jindo.$Element.prototype.html=function(sHTML){if(typeof sHTML!="undefined"&&arguments.length){sHTML+="";var oEl=this._element;if(!oEl.parentNode){var sId="R"+new Date().getTime()+parseInt(Math.random()*100000);var oDoc=oEl.ownerDocument||oEl.document||document;var oDummy;var sTag=oEl.tagName.toLowerCase();switch(sTag){case"select":case"table":oDummy=oDoc.createElement("div");oDummy.innerHTML="<"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+">";break;case"tr":case"thead":case"tbody":oDummy=oDoc.createElement("div");oDummy.innerHTML="<table><"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+"></table>";break;default:oEl.innerHTML=sHTML;break}if(oDummy){var oFound;for(oFound=oDummy.firstChild;oFound;oFound=oFound.firstChild){if(oFound.className==sId){break}}if(oFound){for(var oChild;oChild=oEl.firstChild;){oChild.removeNode(true)}for(var oChild=oFound.firstChild;oChild;oChild=oFound.firstChild){oEl.appendChild(oChild)}oDummy.removeNode&&oDummy.removeNode(true)}oDummy=null}}else{oEl.innerHTML=sHTML}return this}return this._element.innerHTML}}else{jindo.$Element.prototype.html=function(sHTML){if(typeof sHTML!="undefined"&&arguments.length){sHTML+="";var oEl=this._element;oEl.innerHTML=sHTML;return this}return this._element.innerHTML}}}return this.html(sHTML)};jindo.$Element.prototype.outerHTML=function(){var e=this._element;if(typeof e.outerHTML!="undefined"){return e.outerHTML}var oDoc=e.ownerDocument||e.document||document;var div=oDoc.createElement("div");var par=e.parentNode;if(!par){return e.innerHTML}par.insertBefore(div,e);div.style.display="none";div.appendChild(e);var s=div.innerHTML;par.insertBefore(e,div);par.removeChild(div);return s};jindo.$Element.prototype.toString=jindo.$Element.prototype.outerHTML;jindo.$Element._getTransition=function(){var hasTransition=false,sTransitionName="";if(typeof document.body.style.trasition!="undefined"){hasTransition=true;sTransitionName="trasition"}else{if(typeof document.body.style.webkitTransition!=="undefined"){hasTransition=true;sTransitionName="webkitTransition"}else{if(typeof document.body.style.OTransition!=="undefined"){hasTransition=true;sTransitionName="OTransition"}}}return(jindo.$Element._getTransition=function(){return{hasTransition:hasTransition,name:sTransitionName}})()};jindo.$Element.prototype.appear=function(duration,callback){var oTransition=jindo.$Element._getTransition();if(oTransition.hasTransition){jindo.$Element.prototype.appear=function(duration,callback){var bindFunc=function(){callback();this.removeEventListener(oTransition.name+"End",arguments.callee,false)};this._element.addEventListener(oTransition.name+"End",bindFunc,false);this._element.style[oTransition.name+"Property"]="opacity";this._element.style[oTransition.name+"Duration"]=duration+"s";this._element.style[oTransition.name+"TimingFunction"]="linear";var self=this;setTimeout(function(){self._element.style.opacity="1"},1);return this}}else{jindo.$Element.prototype.appear=function(duration,callback){var self=this;var op=this.opacity();if(!this.visible()){op=0}if(op==1){return this}try{clearTimeout(this._fade_timer)}catch(e){}callback=callback||function(){};var step=(1-op)/((duration||0.3)*100);var func=function(){op+=step;self.opacity(op);if(op>=1){callback(self)}else{self._fade_timer=setTimeout(func,10)}};this.show();func();return this}}return this.appear(duration,callback)};jindo.$Element.prototype.disappear=function(duration,callback){var oTransition=jindo.$Element._getTransition();if(oTransition.hasTransition){jindo.$Element.prototype.disappear=function(duration,callback){var self=this;var bindFunc=function(){callback();this.removeEventListener(oTransition.name+"End",arguments.callee,false)};this._element.addEventListener(oTransition.name+"End",bindFunc,false);this._element.style[oTransition.name+"Property"]="opacity";this._element.style[oTransition.name+"Duration"]=duration+"s";this._element.style[oTransition.name+"TimingFunction"]="linear";var self=this;setTimeout(function(){self._element.style.opacity="0"},1);return this}}else{jindo.$Element.prototype.disappear=function(duration,callback){var self=this;var op=this.opacity();if(op==0){return this}try{clearTimeout(this._fade_timer)}catch(e){}callback=callback||function(){};var step=op/((duration||0.3)*100);var func=function(){op-=step;self.opacity(op);if(op<=0){self.hide();self.opacity(1);callback(self)}else{self._fade_timer=setTimeout(func,10)}};func();return this}}return this.disappear(duration,callback)};jindo.$Element.prototype.offset=function(nTop,nLeft){var oEl=this._element;var oPhantom=null;if(typeof nTop=="number"&&typeof nLeft=="number"){if(isNaN(parseInt())){this.css("top",0)}if(isNaN(parseInt(this.css("left")))){this.css("left",0)}var oPos=this.offset();var oGap={top:nTop-oPos.top,left:nLeft-oPos.left};oEl.style.top=parseInt(this.css("top"))+oGap.top+"px";oEl.style.left=parseInt(this.css("left"))+oGap.left+"px";return this}var bSafari=/Safari/.test(navigator.userAgent);var bIE=/MSIE/.test(navigator.userAgent);var nVer=bIE?navigator.userAgent.match(/(?:MSIE) ([0-9.]+)/)[1]:0;var fpSafari=function(oEl){var oPos={left:0,top:0};for(var oParent=oEl,oOffsetParent=oParent.offsetParent;oParent=oParent.parentNode;){if(oParent.offsetParent){oPos.left-=oParent.scrollLeft;oPos.top-=oParent.scrollTop}if(oParent==oOffsetParent){oPos.left+=oEl.offsetLeft+oParent.clientLeft;oPos.top+=oEl.offsetTop+oParent.clientTop;if(!oParent.offsetParent){oPos.left+=oParent.offsetLeft;oPos.top+=oParent.offsetTop}oOffsetParent=oParent.offsetParent;oEl=oParent}}return oPos};var fpOthers=function(oEl){var oPos={left:0,top:0};var oDoc=oEl.ownerDocument||oEl.document||document;var oHtml=oDoc.documentElement;var oBody=oDoc.body;if(oEl.getBoundingClientRect){if(!oPhantom){var bHasFrameBorder=(window==top);if(!bHasFrameBorder){try{bHasFrameBorder=(window.frameElement&&window.frameElement.frameBorder==1)}catch(e){}}if((bIE&&nVer<8&&window.external)&&bHasFrameBorder){oPhantom={left:2,top:2};oBase=null}else{oPhantom={left:0,top:0}}}var box=oEl.getBoundingClientRect();if(oEl!==oHtml&&oEl!==oBody){oPos.left=box.left-oPhantom.left;oPos.top=box.top-oPhantom.top;oPos.left+=oHtml.scrollLeft||oBody.scrollLeft;oPos.top+=oHtml.scrollTop||oBody.scrollTop}}else{if(oDoc.getBoxObjectFor){var box=oDoc.getBoxObjectFor(oEl);var vpBox=oDoc.getBoxObjectFor(oHtml||oBody);oPos.left=box.screenX-vpBox.screenX;oPos.top=box.screenY-vpBox.screenY}else{for(var o=oEl;o;o=o.offsetParent){oPos.left+=o.offsetLeft;oPos.top+=o.offsetTop}for(var o=oEl.parentNode;o;o=o.parentNode){if(o.tagName=="BODY"){break}if(o.tagName=="TR"){oPos.top+=2}oPos.left-=o.scrollLeft;oPos.top-=o.scrollTop}}}return oPos};return(bSafari?fpSafari:fpOthers)(oEl)};jindo.$Element.prototype.evalScripts=function(sHTML){var aJS=[];sHTML=sHTML.replace(new RegExp("<script(\\s[^>]+)*>(.*?)<\/script>","gi"),function(_1,_2,sPart){aJS.push(sPart);return""});eval(aJS.join("\n"));return this};jindo.$Element._append=function(oParent,oChild){if(typeof oChild=="string"){oChild=jindo.$(oChild)}else{if(oChild instanceof jindo.$Element){oChild=oChild.$value()}}oParent._element.appendChild(oChild);return oParent};jindo.$Element._prepend=function(oParent,oChild){if(typeof oParent=="string"){oParent=jindo.$(oParent)}else{if(oParent instanceof jindo.$Element){oParent=oParent.$value()}}var nodes=oParent.childNodes;if(nodes.length>0){oParent.insertBefore(oChild._element,nodes[0])}else{oParent.appendChild(oChild._element)}return oChild};jindo.$Element.prototype.append=function(oElement){return jindo.$Element._append(this,oElement)};jindo.$Element.prototype.prepend=function(oElement){return jindo.$Element._prepend(this._element,jindo.$Element(oElement))};jindo.$Element.prototype.replace=function(oElement){jindo.$$.release();var e=this._element;var oParentNode=e.parentNode;var o=jindo.$Element(oElement);if(oParentNode&&oParentNode.replaceChild){oParentNode.replaceChild(o.$value(),e);return o}var o=o.$value();oParentNode.insertBefore(o,e);oParentNode.removeChild(e);return o};jindo.$Element.prototype.appendTo=function(oElement){var ele=jindo.$Element(oElement);jindo.$Element._append(ele,this._element);return ele};jindo.$Element.prototype.prependTo=function(oElement){jindo.$Element._prepend(oElement,this);return jindo.$Element(oElement)};jindo.$Element.prototype.before=function(oElement){var oRich=jindo.$Element(oElement);var o=oRich.$value();this._element.parentNode.insertBefore(o,this._element);return oRich};jindo.$Element.prototype.after=function(oElement){var o=this.before(oElement);o.before(this);return o};jindo.$Element.prototype.parent=function(pFunc,limit){var e=this._element;var a=[],p=null;if(typeof pFunc=="undefined"){return jindo.$Element(e.parentNode)}if(typeof limit=="undefined"||limit==0){limit=-1}while(e.parentNode&&limit--!=0){p=jindo.$Element(e.parentNode);if(e.parentNode==document.documentElement){break}if(!pFunc||(pFunc&&pFunc(p))){a[a.length]=p}e=e.parentNode}return a};jindo.$Element.prototype.child=function(pFunc,limit){var e=this._element;var a=[],c=null,f=null;if(typeof pFunc=="undefined"){return jindo.$A(e.childNodes).filter(function(v){return v.nodeType==1}).map(function(v){return jindo.$Element(v)}).$value()}if(typeof limit=="undefined"||limit==0){limit=-1}(f=function(el,lim){var ch=null,o=null;for(var i=0;i<el.childNodes.length;i++){ch=el.childNodes[i];if(ch.nodeType!=1){continue}o=jindo.$Element(el.childNodes[i]);if(!pFunc||(pFunc&&pFunc(o))){a[a.length]=o}if(lim!=0){f(el.childNodes[i],lim-1)}}})(e,limit-1);return a};jindo.$Element.prototype.prev=function(pFunc){var e=this._element;var a=[];var b=(typeof pFunc=="undefined");if(!e){return b?jindo.$Element(null):a}do{e=e.previousSibling;if(!e||e.nodeType!=1){continue}if(b){return jindo.$Element(e)}if(!pFunc||pFunc(e)){a[a.length]=jindo.$Element(e)}}while(e);return b?jindo.$Element(e):a};jindo.$Element.prototype.next=function(pFunc){var e=this._element;var a=[];var b=(typeof pFunc=="undefined");if(!e){return b?jindo.$Element(null):a}do{e=e.nextSibling;if(!e||e.nodeType!=1){continue}if(b){return jindo.$Element(e)}if(!pFunc||pFunc(e)){a[a.length]=jindo.$Element(e)}}while(e);return b?jindo.$Element(e):a};jindo.$Element.prototype.first=function(){var el=this._element.firstElementChild||this._element.firstChild;if(!el){return null}while(el&&el.nodeType!=1){el=el.nextSibling}return el?jindo.$Element(el):null};jindo.$Element.prototype.last=function(){var el=this._element.lastElementChild||this._element.lastChild;if(!el){return null}while(el&&el.nodeType!=1){el=el.previousSibling}return el?jindo.$Element(el):null};jindo.$Element.prototype.isChildOf=function(element){return jindo.$Element._contain(jindo.$Element(element).$value(),this._element)};jindo.$Element.prototype.isParentOf=function(element){return jindo.$Element._contain(this._element,jindo.$Element(element).$value())};jindo.$Element._contain=function(eParent,eChild){if(document.compareDocumentPosition){jindo.$Element._contain=function(eParent,eChild){return !!(eParent.compareDocumentPosition(eChild)&16)}}else{if(document.body.contains){jindo.$Element._contain=function(eParent,eChild){return(eParent!==eChild)&&(eParent.contains?eParent.contains(eChild):true)}}else{jindo.$Element._contain=function(eParent,eChild){var e=eParent;var el=eChild;while(e&&e.parentNode){e=e.parentNode;if(e==el){return true}}return false}}}return jindo.$Element._contain(eParent,eChild)};jindo.$Element.prototype.isEqual=function(element){try{return(this._element===jindo.$Element(element).$value())}catch(e){return false}};jindo.$Element.prototype.fireEvent=function(sEvent,oProps){function IE(sEvent,oProps){sEvent=(sEvent+"").toLowerCase();var oEvent=document.createEventObject();if(oProps){for(k in oProps){if(oProps.hasOwnProperty(k)){oEvent[k]=oProps[k]}}oEvent.button=(oProps.left?1:0)+(oProps.middle?4:0)+(oProps.right?2:0);oEvent.relatedTarget=oProps.relatedElement||null}this._element.fireEvent("on"+sEvent,oEvent);return this}function DOM2(sEvent,oProps){var sType="HTMLEvents";sEvent=(sEvent+"").toLowerCase();if(sEvent=="click"||sEvent.indexOf("mouse")==0){sType="MouseEvent";if(sEvent=="mousewheel"){sEvent="dommousescroll"}}else{if(sEvent.indexOf("key")==0){sType="KeyboardEvent"}}var evt;if(oProps){oProps.button=0+(oProps.middle?1:0)+(oProps.right?2:0);oProps.ctrl=oProps.ctrl||false;oProps.alt=oProps.alt||false;oProps.shift=oProps.shift||false;oProps.meta=oProps.meta||false;switch(sType){case"MouseEvent":evt=document.createEvent(sType);evt.initMouseEvent(sEvent,true,true,null,oProps.detail||0,oProps.screenX||0,oProps.screenY||0,oProps.clientX||0,oProps.clientY||0,oProps.ctrl,oProps.alt,oProps.shift,oProps.meta,oProps.button,oProps.relatedElement||null);break;case"KeyboardEvent":if(window.KeyEvent){evt=document.createEvent("KeyEvents");evt.initKeyEvent(sEvent,true,true,window,oProps.ctrl,oProps.alt,oProps.shift,oProps.meta,oProps.keyCode,oProps.keyCode)}else{try{evt=document.createEvent("Events")}catch(e){evt=document.createEvent("UIEvents")}finally{evt.initEvent(sEvent,true,true);evt.ctrlKey=oProps.ctrl;evt.altKey=oProps.alt;evt.shiftKey=oProps.shift;evt.metaKey=oProps.meta;evt.keyCode=oProps.keyCode;evt.which=oProps.keyCode}}break;default:evt=document.createEvent(sType);evt.initEvent(sEvent,true,true)}}else{evt=document.createEvent(sType);evt.initEvent(sEvent,true,true)}this._element.dispatchEvent(evt);return this}jindo.$Element.prototype.fireEvent=(typeof this._element.dispatchEvent!="undefined")?DOM2:IE;return this.fireEvent(sEvent,oProps)};jindo.$Element.prototype.empty=function(){jindo.$$.release();this.html("");return this};jindo.$Element.prototype.remove=function(oChild){jindo.$$.release();jindo.$Element(oChild).leave();return this};jindo.$Element.prototype.leave=function(){var e=this._element;if(e.parentNode){jindo.$$.release();e.parentNode.removeChild(e)}jindo.$Fn.freeElement(this._element);return this};jindo.$Element.prototype.wrap=function(wrapper){var e=this._element;wrapper=jindo.$Element(wrapper).$value();if(e.parentNode){e.parentNode.insertBefore(wrapper,e)}wrapper.appendChild(e);return this};jindo.$Element.prototype.ellipsis=function(stringTail){stringTail=stringTail||"...";var txt=this.text();var len=txt.length;var cur_h=this.height();var i=0;var h=this.text("A").height();if(cur_h<h*1.5){return this.text(txt)}cur_h=h;while(cur_h<h*1.5){i+=Math.max(Math.ceil((len-i)/2),1);cur_h=this.text(txt.substring(0,i)+stringTail).height()}while(cur_h>h*1.5){i--;cur_h=this.text(txt.substring(0,i)+stringTail).height()}};jindo.$Element.prototype.indexOf=function(element){try{var e=jindo.$Element(element).$value();var n=this._element.childNodes;var c=0;var l=n.length;for(var i=0;i<l;i++){if(n[i].nodeType!=1){continue}if(n[i]===e){return c}c++}}catch(e){}return -1};jindo.$Element.prototype.queryAll=function(sSelector){return jindo.$$(sSelector,this._element)};jindo.$Element.prototype.query=function(sSelector){return jindo.$$.getSingle(sSelector,this._element)};jindo.$Element.prototype.test=function(sSelector){return jindo.$$.test(this._element,sSelector)};jindo.$Element.prototype.xpathAll=function(sXPath){return jindo.$$.xpath(sSelector,this._element)};jindo.$Element.insertAdjacentHTML=function(_ele,html,insertType,type,fn){if(_ele.insertAdjacentHTML&&!(/^<(option|tr|td|th)>/.test(html.replace(/^(\s|　)+|(\s|　)+$/g,"").toLowerCase()))){_ele.insertAdjacentHTML(insertType,html)}else{var oDoc=_ele.ownerDocument||_ele.document||document;var fragment=oDoc.createDocumentFragment();var defaultElement;var sTag=html.replace(/^(\s|　)+|(\s|　)+$/g,"").toLowerCase();var oParentTag={option:"select",tr:"tbody",thead:"table",tbody:"table",td:"tr",th:"tr",div:"div"};var aMatch=/^\<(option|tr|thead|tbody|td|th)\>/.exec(sTag);var sChild=aMatch===null?"div":aMatch[1];var sParent=oParentTag[sChild];defaultElement=jindo._createEle(sParent,sTag,oDoc,true);var scripts=defaultElement.getElementsByTagName("script");for(var i=0,l=scripts.length;i<l;i++){scripts[i].parentNode.removeChild(scripts[i])}while(defaultElement[type]){fragment.appendChild(defaultElement[type])}fn(fragment.cloneNode(true))}return this};jindo.$Element.prototype.appendHTML=function(sHTML){return jindo.$Element.insertAdjacentHTML(this._element,sHTML,"beforeEnd","firstChild",jindo.$Fn(function(oEle){this.append(oEle)},this).bind())};jindo.$Element.prototype.prependHTML=function(sHTML){return jindo.$Element.insertAdjacentHTML(this._element,sHTML,"afterBegin","lastChild",jindo.$Fn(function(oEle){this.prepend(oEle)},this).bind())};jindo.$Element.prototype.beforeHTML=function(sHTML){return jindo.$Element.insertAdjacentHTML(this._element,sHTML,"beforeBegin","firstChild",jindo.$Fn(function(oEle){this.before(oEle)},this).bind())};jindo.$Element.prototype.afterHTML=function(sHTML){return jindo.$Element.insertAdjacentHTML(this._element,sHTML,"afterEnd","lastChild",jindo.$Fn(function(oEle){this._element.parentNode.insertBefore(oEle,this._element.nextSibling)},this).bind())};jindo.$Element.prototype.delegate=function(sEvent,vFilter,fpCallback){if(!this._element["_delegate_"+sEvent]){this._element["_delegate_"+sEvent]={};var fAroundFunc=jindo.$Fn(function(sEvent,wEvent){wEvent=wEvent||window.event;if(typeof wEvent.currentTarget=="undefined"){wEvent.currentTarget=this._element}var oEle=wEvent.target||wEvent.srcElement;var aData=this._element["_delegate_"+sEvent];var data,func,event;for(var i in aData){data=aData[i];if(data.checker(oEle)){func=data.func;event=jindo.$Event(wEvent);for(var j=0,l=func.length;j<l;j++){func[j](event)}}}},this).bind(sEvent);jindo.$Element._eventBind(this._element,sEvent,fAroundFunc);var oEle=this._element;oEle["_delegate_"+sEvent+"_func"]=fAroundFunc;if(this._element._delegate_events){this._element._delegate_events.push(sEvent)}else{this._element._delegate_events=[sEvent]}oEle=null}this._bind(sEvent,vFilter,fpCallback);return this};jindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc){if(oEle.addEventListener){jindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc){oEle.addEventListener(sEvent,fAroundFunc,false)}}else{jindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc){oEle.attachEvent("on"+sEvent,fAroundFunc)}}jindo.$Element._eventBind(oEle,sEvent,fAroundFunc)};jindo.$Element.prototype.undelegate=function(sEvent,vFilter,fpCallback){this._unbind(sEvent,vFilter,fpCallback);return this};jindo.$Element.prototype._bind=function(sEvent,vFilter,fpCallback){var _aDataOfEvent=this._element["_delegate_"+sEvent];if(_aDataOfEvent){var fpCheck;if(typeof vFilter=="string"){fpCheck=jindo.$Fn(function(sCssquery,oEle){return jindo.$$.test(oEle,sCssquery)},this).bind(vFilter)}else{if(typeof vFilter=="function"){fpCheck=jindo.$Fn(function(fpFilter,oEle){return fpFilter(this._element,oEle)},this).bind(vFilter)}}this._element["_delegate_"+sEvent]=jindo.$Element._addBind(_aDataOfEvent,vFilter,fpCallback,fpCheck)}else{alert("check your delegate event.")}};jindo.$Element._addBind=function(aDataOfEvent,vFilter,fpCallback,fpCheck){var aEvent=aDataOfEvent[vFilter];if(aEvent){var fpFuncs=aEvent.func;fpFuncs.push(fpCallback);aEvent.func=fpFuncs}else{aEvent={checker:fpCheck,func:[fpCallback]}}aDataOfEvent[vFilter]=aEvent;return aDataOfEvent};jindo.$Element.prototype._unbind=function(sEvent,vFilter,fpCallback){var oEle=this._element;if(sEvent&&vFilter&&fpCallback){var oEventInfo=oEle["_delegate_"+sEvent];if(oEventInfo&&oEventInfo[vFilter]){var fpFuncs=oEventInfo[vFilter].func;fpFuncs=oEventInfo[vFilter].func=jindo.$A(fpFuncs).refuse(fpCallback).$value();if(!fpFuncs.length){jindo.$Element._deleteFilter(oEle,sEvent,vFilter)}}}else{if(sEvent&&vFilter){jindo.$Element._deleteFilter(oEle,sEvent,vFilter)}else{if(sEvent){jindo.$Element._deleteEvent(oEle,sEvent,vFilter)}else{var aEvents=oEle._delegate_events;var sEachEvent;for(var i=0,l=aEvents.length;i<l;i++){sEachEvent=aEvents[i];jindo.$Element._unEventBind(oEle,sEachEvent,oEle["_delegate_"+sEachEvent+"_func"]);jindo.$Element._delDelegateInfo(oEle,"_delegate_"+sEachEvent);jindo.$Element._delDelegateInfo(oEle,"_delegate_"+sEachEvent+"_func")}jindo.$Element._delDelegateInfo(oEle,"_delegate_events")}}}return this};jindo.$Element._delDelegateInfo=function(oObj,sType){try{oObj[sType]=null;delete oObj[sType]}catch(e){}return oObj};jindo.$Element._deleteFilter=function(oEle,sEvent,vFilter){var oEventInfo=oEle["_delegate_"+sEvent];if(oEventInfo&&oEventInfo[vFilter]){if(jindo.$H(oEventInfo).keys().length==1){jindo.$Element._deleteEvent(oEle,sEvent,vFilter)}else{jindo.$Element._delDelegateInfo(oEventInfo,vFilter)}}};jindo.$Element._deleteEvent=function(oEle,sEvent,vFilter){var aEvents=oEle._delegate_events;jindo.$Element._unEventBind(oEle,sEvent,oEle["_delegate_"+sEvent+"_func"]);jindo.$Element._delDelegateInfo(oEle,"_delegate_"+sEvent);jindo.$Element._delDelegateInfo(oEle,"_delegate_"+sEvent+"_func");aEvents=jindo.$A(aEvents).refuse(sEvent).$value();if(!aEvents.length){jindo.$Element._delDelegateInfo(oEle,"_delegate_events")}else{oEle._delegate_events=jindo.$A(aEvents).refuse(sEvent).$value()}};jindo.$Element._unEventBind=function(oEle,sType,fAroundFunc){if(oEle.removeEventListener){jindo.$Element._unEventBind=function(oEle,sType,fAroundFunc){oEle.removeEventListener(sType,fAroundFunc,false)}}else{jindo.$Element._unEventBind=function(oEle,sType,fAroundFunc){oEle.detachEvent("on"+sType,fAroundFunc)}}jindo.$Element._unEventBind(oEle,sType,fAroundFunc)};jindo.$Fn=function(func,thisObject){var cl=arguments.callee;if(func instanceof cl){return func}if(!(this instanceof cl)){return new cl(func,thisObject)}this._events=[];this._tmpElm=null;this._key=null;if(typeof func=="function"){this._func=func;this._this=thisObject}else{if(typeof func=="string"&&typeof thisObject=="string"){this._func=eval("false||function("+func+"){"+thisObject+"}")}}};var _ua=navigator.userAgent;jindo.$Fn.prototype.$value=function(){return this._func};jindo.$Fn.prototype.bind=function(){var a=jindo.$A(arguments).$value();var f=this._func;var t=this._this;var b=function(){var args=jindo.$A(arguments).$value();if(a.length){args=a.concat(args)}return f.apply(t,args)};return b};jindo.$Fn.prototype.bindForEvent=function(){var a=arguments;var f=this._func;var t=this._this;var m=this._tmpElm||null;var b=function(e){var args=Array.prototype.slice.apply(a);if(typeof e=="undefined"){e=window.event}if(typeof e.currentTarget=="undefined"){e.currentTarget=m}var oEvent=jindo.$Event(e);args.unshift(oEvent);var returnValue=f.apply(t,args);if(typeof returnValue!="undefined"&&oEvent.type=="beforeunload"){e.returnValue=returnValue}return returnValue};return b};jindo.$Fn.prototype.attach=function(oElement,sEvent,bUseCapture){var fn=null,l,ev=sEvent,el=oElement,ua=_ua;if(typeof bUseCapture=="undefined"){bUseCapture=false}this._bUseCapture=bUseCapture;if((el instanceof Array)||(jindo.$A&&(el instanceof jindo.$A)&&(el=el.$value()))){for(var i=0;i<el.length;i++){this.attach(el[i],ev,bUseCapture)}return this}if(!el||!ev){return this}if(typeof el.$value=="function"){el=el.$value()}el=jindo.$(el);ev=ev.toLowerCase();this._tmpElm=el;fn=this.bindForEvent();this._tmpElm=null;var bIsIE=ua.indexOf("MSIE")>-1;if(typeof el.addEventListener!="undefined"){if(ev=="domready"){ev="DOMContentLoaded"}else{if(ev=="mousewheel"&&ua.indexOf("WebKit")<0&&!/Opera/.test(ua)&&!bIsIE){ev="DOMMouseScroll"}else{if(ev=="mouseenter"&&!bIsIE){ev="mouseover";fn=jindo.$Fn._fireWhenElementBoundary(el,fn)}else{if(ev=="mouseleave"&&!bIsIE){ev="mouseout";fn=jindo.$Fn._fireWhenElementBoundary(el,fn)}}}}el.addEventListener(ev,fn,bUseCapture)}else{if(typeof el.attachEvent!="undefined"){if(ev=="domready"){if(window.top!=window){throw new Error("Domready Event doesn't work in the iframe.")}jindo.$Fn._domready(el,fn);return this}else{el.attachEvent("on"+ev,fn)}}}if(!this._key){this._key="$"+jindo.$Fn.gc.count++;jindo.$Fn.gc.pool[this._key]=this}this._events[this._events.length]={element:el,event:sEvent.toLowerCase(),func:fn};return this};jindo.$Fn.prototype.detach=function(oElement,sEvent){var fn=null,l,el=oElement,ev=sEvent,ua=_ua;if((el instanceof Array)||(jindo.$A&&(el instanceof jindo.$A)&&(el=el.$value()))){for(var i=0;i<el.length;i++){this.detach(el[i],ev)}return this}if(!el||!ev){return this}if(jindo.$Element&&el instanceof jindo.$Element){el=el.$value()}el=jindo.$(el);ev=ev.toLowerCase();var e=this._events;for(var i=0;i<e.length;i++){if(e[i].element!==el||e[i].event!==ev){continue}fn=e[i].func;this._events=jindo.$A(this._events).refuse(e[i]).$value();break}if(typeof el.removeEventListener!="undefined"){if(ev=="domready"){ev="DOMContentLoaded"}else{if(ev=="mousewheel"&&ua.indexOf("WebKit")<0){ev="DOMMouseScroll"}else{if(ev=="mouseenter"){ev="mouseover"}else{if(ev=="mouseleave"){ev="mouseout"}}}}el.removeEventListener(ev,fn,false)}else{if(typeof el.detachEvent!="undefined"){if(ev=="domready"){jindo.$Fn._domready.list=jindo.$Fn._domready.list.refuse(fn);return this}else{el.detachEvent("on"+ev,fn)}}}return this};jindo.$Fn.prototype.delay=function(nSec,args){if(typeof args=="undefined"){args=[]}this._delayKey=setTimeout(this.bind.apply(this,args),nSec*1000);return this};jindo.$Fn.prototype.setInterval=function(nSec,args){if(typeof args=="undefined"){args=[]}this._repeatKey=setInterval(this.bind.apply(this,args),nSec*1000);return this._repeatKey};jindo.$Fn.prototype.repeat=jindo.$Fn.prototype.setInterval;jindo.$Fn.prototype.stopDelay=function(){if(typeof this._delayKey!="undefined"){window.clearTimeout(this._delayKey);delete this._delayKey}return this};jindo.$Fn.prototype.stopRepeat=function(){if(typeof this._repeatKey!="undefined"){window.clearInterval(this._repeatKey);delete this._repeatKey}return this};jindo.$Fn.prototype.free=function(oElement){var len=this._events.length;while(len>0){var el=this._events[--len].element;var sEvent=this._events[len].event;if(oElement&&el!==oElement){continue}this.detach(el,sEvent);var isGCCall=!oElement;if(isGCCall&&window===el&&sEvent=="unload"){this.$value()()}delete this._events[len]}if(this._events.length==0){try{delete jindo.$Fn.gc.pool[this._key]}catch(e){}}};jindo.$Fn._domready=function(doc,func){if(typeof jindo.$Fn._domready.list=="undefined"){var f=null,l=jindo.$Fn._domready.list=jindo.$A([func]);var done=false,execFuncs=function(){if(!done){done=true;var evt={type:"domready",target:doc,currentTarget:doc};while(f=l.shift()){f(evt)}}};(function(){try{doc.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,50);return}execFuncs()})();doc.onreadystatechange=function(){if(doc.readyState=="complete"){doc.onreadystatechange=null;execFuncs()}}}else{jindo.$Fn._domready.list.push(func)}};jindo.$Fn._fireWhenElementBoundary=function(doc,func){return function(evt){var oEvent=jindo.$Event(evt);var relatedElement=jindo.$Element(oEvent.relatedElement);if(relatedElement&&(relatedElement.isEqual(this)||relatedElement.isChildOf(this))){return}func.call(this,evt)}};jindo.$Fn.gc=function(){var p=jindo.$Fn.gc.pool;for(var key in p){if(p.hasOwnProperty(key)){try{p[key].free()}catch(e){}}}jindo.$Fn.gc.pool=p={}};jindo.$Fn.freeElement=function(oElement){var p=jindo.$Fn.gc.pool;for(var key in p){if(p.hasOwnProperty(key)){try{p[key].free(oElement)}catch(e){}}}};jindo.$Fn.gc.count=0;jindo.$Fn.gc.pool={};function isUnCacheAgent(){var isIPad=(_ua.indexOf("iPad")>-1);var isAndroid=(_ua.indexOf("Android")>-1);var isMSafari=(!(_ua.indexOf("IEMobile")>-1)&&(_ua.indexOf("Mobile")>-1))||(isIPad&&(_ua.indexOf("Safari")>-1));return isMSafari&&!isIPad&&!isAndroid}if(typeof window!="undefined"&&!isUnCacheAgent()){jindo.$Fn(jindo.$Fn.gc).attach(window,"unload")}jindo.$Event=function(e){var cl=arguments.callee;if(e instanceof cl){return e}if(!(this instanceof cl)){return new cl(e)}if(typeof e=="undefined"){e=window.event}if(e===window.event&&document.createEventObject){e=document.createEventObject(e)}this._event=e;this._globalEvent=window.event;this.type=e.type.toLowerCase();if(this.type=="dommousescroll"){this.type="mousewheel"}else{if(this.type=="DOMContentLoaded"){this.type="domready"}}this.canceled=false;this.element=e.target||e.srcElement;this.currentElement=e.currentTarget;this.relatedElement=null;if(typeof e.relatedTarget!="undefined"){this.relatedElement=e.relatedTarget}else{if(e.fromElement&&e.toElement){this.relatedElement=e[(this.type=="mouseout")?"toElement":"fromElement"]}}};jindo.$Event.prototype.mouse=function(){var e=this._event;var delta=0;var left=false,mid=false,right=false;var left=e.which?e.button==0:!!(e.button&1);var mid=e.which?e.button==1:!!(e.button&4);var right=e.which?e.button==2:!!(e.button&2);var ret={};if(e.wheelDelta){delta=e.wheelDelta/120}else{if(e.detail){delta=-e.detail/3}}ret={delta:delta,left:left,middle:mid,right:right};this.mouse=function(){return ret};return ret};jindo.$Event.prototype.key=function(){var e=this._event;var k=e.keyCode||e.charCode;var ret={keyCode:k,alt:e.altKey,ctrl:e.ctrlKey,meta:e.metaKey,shift:e.shiftKey,up:(k==38),down:(k==40),left:(k==37),right:(k==39),enter:(k==13),esc:(k==27)};this.key=function(){return ret};return ret};jindo.$Event.prototype.pos=function(bGetOffset){var e=this._event;var b=(this.element.ownerDocument||document).body;var de=(this.element.ownerDocument||document).documentElement;var pos=[b.scrollLeft||de.scrollLeft,b.scrollTop||de.scrollTop];var ret={clientX:e.clientX,clientY:e.clientY,pageX:"pageX" in e?e.pageX:e.clientX+pos[0]-b.clientLeft,pageY:"pageY" in e?e.pageY:e.clientY+pos[1]-b.clientTop,layerX:"offsetX" in e?e.offsetX:e.layerX-1,layerY:"offsetY" in e?e.offsetY:e.layerY-1};if(bGetOffset&&jindo.$Element){var offset=jindo.$Element(this.element).offset();ret.offsetX=ret.pageX-offset.left;ret.offsetY=ret.pageY-offset.top}return ret};jindo.$Event.prototype.stop=function(nCancel){nCancel=nCancel||jindo.$Event.CANCEL_ALL;var e=(window.event&&window.event==this._globalEvent)?this._globalEvent:this._event;var b=!!(nCancel&jindo.$Event.CANCEL_BUBBLE);var d=!!(nCancel&jindo.$Event.CANCEL_DEFAULT);this.canceled=true;if(typeof e.preventDefault!="undefined"&&d){e.preventDefault()}if(typeof e.stopPropagation!="undefined"&&b){e.stopPropagation()}if(d){e.returnValue=false}if(b){e.cancelBubble=true}return this};jindo.$Event.prototype.stopDefault=function(){return this.stop(jindo.$Event.CANCEL_DEFAULT)};jindo.$Event.prototype.stopBubble=function(){return this.stop(jindo.$Event.CANCEL_BUBBLE)};jindo.$Event.prototype.$value=function(){return this._event};jindo.$Event.CANCEL_BUBBLE=1;jindo.$Event.CANCEL_DEFAULT=2;jindo.$Event.CANCEL_ALL=3;jindo.$ElementList=function(els){var cl=arguments.callee;if(els instanceof cl){return els}if(!(this instanceof cl)){return new cl(els)}if(els instanceof Array){els=jindo.$A(els)}else{if(jindo.$A&&els instanceof jindo.$A){els=jindo.$A(els.$value())}else{if(typeof els=="string"&&jindo.cssquery){els=jindo.$A(jindo.cssquery(els))}else{els=jindo.$A()}}}this._elements=els.map(function(v,i,a){return jindo.$Element(v)})};jindo.$ElementList.prototype.get=function(idx){return this._elements.$value()[idx]};jindo.$ElementList.prototype.getFirst=function(){return this.get(0)};jindo.$ElementList.prototype.length=function(nLen,oValue){return this._elements.length(nLen,oValue)};jindo.$ElementList.prototype.getLast=function(){return this.get(Math.Max(this._elements.length-1,0))};jindo.$ElementList.prototype.$value=function(){return this._elements.$value()};(function(proto){var setters="show,hide,toggle,addClass,removeClass,toggleClass,fireEvent,leave,";setters+="empty,appear,disappear,className,width,height,text,html,css,attr";jindo.$A(setters.split(",")).forEach(function(name){proto[name]=function(){var args=jindo.$A(arguments).$value();this._elements.forEach(function(el){el[name].apply(el,args)});return this}});jindo.$A(["appear","disappear"]).forEach(function(name){proto[name]=function(duration,callback){var len=this._elements.length;var self=this;this._elements.forEach(function(el,idx){if(idx==len-1){el[name](duration,function(){callback(self)})}else{el[name](duration)}});return this}})})(jindo.$ElementList.prototype);jindo.$S=function(str){var cl=arguments.callee;if(typeof str=="undefined"){str=""}if(str instanceof cl){return str}if(!(this instanceof cl)){return new cl(str)}this._str=str+""};jindo.$S.prototype.$value=function(){return this._str};jindo.$S.prototype.toString=jindo.$S.prototype.$value;jindo.$S.prototype.trim=function(){return jindo.$S(this._str.replace(/^(\s|　)+|(\s|　)+$/g,""))};jindo.$S.prototype.escapeHTML=function(){var entities={'"':"quot","&":"amp","<":"lt",">":"gt","'":"#39"};var s=this._str.replace(/[<>&"']/g,function(m0){return entities[m0]?"&"+entities[m0]+";":m0});return jindo.$S(s)};jindo.$S.prototype.stripTags=function(){return jindo.$S(this._str.replace(/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig,""))};jindo.$S.prototype.times=function(nTimes){var buf=[];for(var i=0;i<nTimes;i++){buf[buf.length]=this._str}return jindo.$S(buf.join(""))};jindo.$S.prototype.unescapeHTML=function(){var entities={quot:'"',amp:"&",lt:"<",gt:">","#39":"'"};var s=this._str.replace(/&([a-z]+|#[0-9]+);/g,function(m0,m1){return entities[m1]?entities[m1]:m0});return jindo.$S(s)};jindo.$S.prototype.escape=function(){var s=this._str.replace(/([\u0080-\uFFFF]+)|[\n\r\t"'\\]/g,function(m0,m1,_){if(m1){return escape(m1).replace(/%/g,"\\")}return(_={"\n":"\\n","\r":"\\r","\t":"\\t"})[m0]?_[m0]:"\\"+m0});return jindo.$S(s)};jindo.$S.prototype.bytes=function(vConfig){var code=0,bytes=0,i=0,len=this._str.length;var charset=((document.charset||document.characterSet||document.defaultCharset)+"");var cut,nBytes;if(typeof vConfig=="undefined"){cut=false}else{if(vConfig.constructor==Number){cut=true;nBytes=vConfig}else{if(vConfig.constructor==Object){charset=vConfig.charset||charset;nBytes=vConfig.size||false;cut=!!nBytes}else{cut=false}}}if(charset.toLowerCase()=="utf-8"){for(i=0;i<len;i++){code=this._str.charCodeAt(i);if(code<128){bytes+=1}else{if(code<2048){bytes+=2}else{if(code<65536){bytes+=3}else{bytes+=4}}}if(cut&&bytes>nBytes){this._str=this._str.substr(0,i);break}}}else{for(i=0;i<len;i++){bytes+=(this._str.charCodeAt(i)>128)?2:1;if(cut&&bytes>nBytes){this._str=this._str.substr(0,i);break}}}return cut?this:bytes};jindo.$S.prototype.parseString=function(){var str=this._str.split(/&/g),pos,key,val,buf={},isescape=false;for(var i=0;i<str.length;i++){key=str[i].substring(0,pos=str[i].indexOf("=")),isescape=false;try{val=decodeURIComponent(str[i].substring(pos+1))}catch(e){isescape=true;val=decodeURIComponent(unescape(str[i].substring(pos+1)))}if(key.substr(key.length-2,2)=="[]"){key=key.substring(0,key.length-2);if(typeof buf[key]=="undefined"){buf[key]=[]}buf[key][buf[key].length]=isescape?escape(val):val}else{buf[key]=isescape?escape(val):val}}return buf};jindo.$S.prototype.escapeRegex=function(){var s=this._str;var r=/([\?\.\*\+\-\/\(\)\{\}\[\]\:\!\^\$\\\|])/g;return jindo.$S(s.replace(r,"\\$1"))};jindo.$S.prototype.format=function(){var args=arguments;var idx=0;var s=this._str.replace(/%([ 0])?(-)?([1-9][0-9]*)?([bcdsoxX])/g,function(m0,m1,m2,m3,m4){var a=args[idx++];var ret="",pad="";m3=m3?+m3:0;if(m4=="s"){ret=a+""}else{if(" bcdoxX".indexOf(m4)>0){if(typeof a!="number"){return""}ret=(m4=="c")?String.fromCharCode(a):a.toString(({b:2,d:10,o:8,x:16,X:16})[m4]);if(" X".indexOf(m4)>0){ret=ret.toUpperCase()}}}if(ret.length<m3){pad=jindo.$S(m1||" ").times(m3-ret.length).toString()}(m2=="-")?(ret+=pad):(ret=pad+ret);return ret});return jindo.$S(s)};jindo.$Document=function(el){var cl=arguments.callee;if(el instanceof cl){return el}if(!(this instanceof cl)){return new cl(el)}this._doc=el||document;this._docKey=this.renderingMode()=="Standards"?"documentElement":"body"};jindo.$Document.prototype.$value=function(){return this._doc};jindo.$Document.prototype.scrollSize=function(){var isWebkit=navigator.userAgent.indexOf("WebKit")>-1;var oDoc=this._doc[isWebkit?"body":this._docKey];return{width:Math.max(oDoc.scrollWidth,oDoc.clientWidth),height:Math.max(oDoc.scrollHeight,oDoc.clientHeight)}};jindo.$Document.prototype.scrollPosition=function(){var isWebkit=navigator.userAgent.indexOf("WebKit")>-1;var oDoc=this._doc[isWebkit?"body":this._docKey];return{left:oDoc.scrollLeft||window.pageXOffset||window.scrollX||0,top:oDoc.scrollTop||window.pageYOffset||window.scrollY||0}};jindo.$Document.prototype.clientSize=function(){var oDoc=this._doc[this._docKey];var isSafari=navigator.userAgent.indexOf("WebKit")>-1&&navigator.userAgent.indexOf("Chrome")==-1;return(isSafari)?{width:window.innerWidth,height:window.innerHeight}:{width:oDoc.clientWidth,height:oDoc.clientHeight}};jindo.$Document.prototype.renderingMode=function(){var isIe=(typeof window.opera=="undefined"&&navigator.userAgent.indexOf("MSIE")>-1);var isSafari=(navigator.userAgent.indexOf("WebKit")>-1&&navigator.userAgent.indexOf("Chrome")<0&&navigator.vendor.indexOf("Apple")>-1);var sRet;if("compatMode" in this._doc){sRet=this._doc.compatMode=="CSS1Compat"?"Standards":(isIe?"Quirks":"Almost")}else{sRet=isSafari?"Standards":"Quirks"}return sRet};jindo.$Document.prototype.queryAll=function(sSelector){return jindo.$$(sSelector,this._doc)};jindo.$Document.prototype.query=function(sSelector){return jindo.$$.getSingle(sSelector,this._doc)};jindo.$Document.prototype.xpathAll=function(sXPath){return jindo.$$.xpath(sSelector,this._doc)};jindo.$Form=function(el){var cl=arguments.callee;if(el instanceof cl){return el}if(!(this instanceof cl)){return new cl(el)}el=jindo.$(el);if(!el.tagName||el.tagName.toUpperCase()!="FORM"){throw new Error("The element should be a FORM element")}this._form=el};jindo.$Form.prototype.$value=function(){return this._form};jindo.$Form.prototype.serialize=function(){var self=this;var oRet={};var nLen=arguments.length;var fpInsert=function(sKey){var sVal=self.value(sKey);if(typeof sVal!="undefined"){oRet[sKey]=sVal}};if(nLen==0){jindo.$A(this.element()).forEach(function(o){if(o.name){fpInsert(o.name)}})}else{for(var i=0;i<nLen;i++){fpInsert(arguments[i])}}return jindo.$H(oRet).toQueryString()};jindo.$Form.prototype.element=function(sKey){if(arguments.length>0){return this._form[sKey]}return this._form.elements};jindo.$Form.prototype.enable=function(){var sKey=arguments[0];if(typeof sKey=="object"){var self=this;jindo.$H(sKey).forEach(function(bFlag,sKey){self.enable(sKey,bFlag)});return this}var aEls=this.element(sKey);if(!aEls){return this}aEls=aEls.nodeType==1?[aEls]:aEls;if(arguments.length<2){var bEnabled=true;jindo.$A(aEls).forEach(function(o){if(o.disabled){bEnabled=false;jindo.$A.Break()}});return bEnabled}else{var sFlag=arguments[1];jindo.$A(aEls).forEach(function(o){o.disabled=!sFlag});return this}};jindo.$Form.prototype.value=function(sKey){if(typeof sKey=="object"){var self=this;jindo.$H(sKey).forEach(function(bFlag,sKey){self.value(sKey,bFlag)});return this}var aEls=this.element(sKey);if(!aEls){throw new Error("The element is not exist")}aEls=aEls.nodeType==1?[aEls]:aEls;if(arguments.length>1){var sVal=arguments[1];jindo.$A(aEls).forEach(function(o){switch(o.type){case"radio":case"checkbox":o.checked=(o.value==sVal);break;case"select-one":var nIndex=-1;for(var i=0,len=o.options.length;i<len;i++){if(o.options[i].value==sVal){nIndex=i}}o.selectedIndex=nIndex;break;default:o.value=sVal;break}});return this}var aRet=[];jindo.$A(aEls).forEach(function(o){switch(o.type){case"radio":case"checkbox":if(o.checked){aRet.push(o.value)}break;case"select-one":if(o.selectedIndex!=-1){aRet.push(o.options[o.selectedIndex].value)}break;default:aRet.push(o.value);break}});return aRet.length>1?aRet:aRet[0]};jindo.$Form.prototype.submit=function(sTargetName,fValidation){var sOrgTarget=null;if(typeof sTargetName=="string"){sOrgTarget=this._form.target;this._form.target=sTargetName}if(typeof sTargetName=="function"){fValidation=sTargetName}if(typeof fValidation!="undefined"){if(!fValidation(this._form)){return this}}this._form.submit();if(sOrgTarget!==null){this._form.target=sOrgTarget}return this};jindo.$Form.prototype.reset=function(fValidation){if(typeof fValidation!="undefined"){if(!fValidation(this._form)){return this}}this._form.reset();return this};jindo.$Template=function(str){var obj=null,tag="";var cl=arguments.callee;if(str instanceof cl){return str}if(!(this instanceof cl)){return new cl(str)}if(typeof str=="undefined"){str=""}else{if((obj=document.getElementById(str)||str)&&obj.tagName&&(tag=obj.tagName.toUpperCase())&&(tag=="TEXTAREA"||(tag=="SCRIPT"&&obj.getAttribute("type")=="text/template"))){str=(obj.value||obj.innerHTML).replace(/^\s+|\s+$/g,"")}}this._str=str+""};jindo.$Template.splitter=/(?!\\)[\{\}]/g;jindo.$Template.pattern=/^(?:if (.+)|elseif (.+)|for (?:(.+)\:)?(.+) in (.+)|(else)|\/(if|for)|=(.+)|js (.+)|set (.+))$/;jindo.$Template.prototype.process=function(data){var key="\x01";var leftBrace="\x02";var rightBrace="\x03";var tpl=(" "+this._str+" ").replace(/\\{/g,leftBrace).replace(/\\}/g,rightBrace).replace(/(?!\\)\}\{/g,"}"+key+"{").split(jindo.$Template.splitter),i=tpl.length;var map={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t","\f":"\\f"};var reg=[/(["'](?:(?:\\.)+|[^\\["']+)*["']|[a-zA-Z_][\w\.]*)/g,/[\n\r\t\f"\\]/g,/^\s+/,/\s+$/,/#/g];var cb=[function(m){return(m.substring(0,1)=='"'||m.substring(0,1)=="'"||m=="null")?m:"d."+m},function(m){return map[m]||m},"",""];var stm=[];var lev=0;tpl[0]=tpl[0].substr(1);tpl[i-1]=tpl[i-1].substr(0,tpl[i-1].length-1);if(i<2){return tpl[0]}tpl=jindo.$A(tpl).reverse().$value();var delete_info;while(i--){if(i%2){tpl[i]=tpl[i].replace(jindo.$Template.pattern,function(){var m=arguments;if(m[10]){return m[10].replace(/(\w+)(?:\s*)=(?:\s*)(?:([a-zA-Z0-9_]+)|(.+))$/g,function(){var mm=arguments;var str="d."+mm[1]+"=";if(mm[2]){str+="d."+mm[2]}else{str+=mm[3].replace(/(=(?:[a-zA-Z_][\w\.]*)+)/g,function(m){return(m.substring(0,1)=="=")?"d."+m.replace("=",""):m})}return str})+";"}if(m[9]){return"s[i++]="+m[9].replace(/(=(?:[a-zA-Z_][\w\.]*)+)/g,function(m){return(m.substring(0,1)=="=")?"d."+m.replace("=",""):m})+";"}if(m[8]){return"s[i++]= d."+m[8]+";"}if(m[1]){return"if("+m[1].replace(reg[0],cb[0]).replace(/d\.(typeof) /,"$1 ").replace(/ d\.(instanceof) d\./," $1 ")+"){"}if(m[2]){return"}else if("+m[2].replace(reg[0],cb[0]).replace(/d\.(typeof) /,"$1 ").replace(/ d\.(instanceof) d\./," $1 ")+"){"}if(m[5]){delete_info=m[4];var _aStr=[];_aStr.push("var t#=d."+m[5]+"||{},p#=isArray(t#),i#=0;");_aStr.push("for(var x# in t#){");_aStr.push("if(!t#.hasOwnProperty(x#)){continue;}");_aStr.push("	if( (p# && isNaN(i#=parseInt(x#))) || (!p# && !t#.propertyIsEnumerable(x#)) ) continue;");_aStr.push("	d."+m[4]+"=t#[x#];");_aStr.push(m[3]?"d."+m[3]+"=p#?i#:x#;":"");return _aStr.join("").replace(reg[4],lev++)}if(m[6]){return"}else{"}if(m[7]){if(m[7]=="for"){return"delete d."+delete_info+"; };"}else{return"};"}}return m[0]})}else{if(tpl[i]==key){tpl[i]=""}else{if(tpl[i]){tpl[i]='s[i++]="'+tpl[i].replace(reg[1],cb[1])+'";'}}}}tpl=jindo.$A(tpl).reverse().$value().join("").replace(new RegExp(leftBrace,"g"),"{").replace(new RegExp(rightBrace,"g"),"}");var _aStr=[];_aStr.push("var s=[],i=0;");_aStr.push('function isArray(o){ return Object.prototype.toString.call(o) == "[object Array]" };');_aStr.push(tpl);_aStr.push('return s.join("");');tpl=eval("false||function(d){"+_aStr.join("")+"}");tpl=tpl(data);return tpl};jindo.$Date=function(src){var a=arguments,t="";var cl=arguments.callee;if(src&&src instanceof cl){return src}if(!(this instanceof cl)){return new cl(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}if((t=typeof src)=="string"){if(/(\d\d\d\d)(?:-?(\d\d)(?:-?(\d\d)))/.test(src)){var match=src.match(/(\d\d\d\d)(?:-?(\d\d)(?:-?(\d\d)(?:[T ](\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(?:Z|(?:([-+])(\d\d)(?::?(\d\d))?)?)?)?)?)?/);this._date=new Date(match[1]||0,parseInt(match[2]||0)-1,match[3]||0,match[4]||0,match[5]||0,match[6]||0,match[7]||0)}else{this._date=cl.parse(src)}}else{if(t=="number"){if(typeof a[1]=="undefined"){this._date=new Date(src)}else{for(var i=0;i<7;i++){if(typeof a[i]!="number"){a[i]=1}}this._date=new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}}else{if(t=="object"&&src.constructor==Date){(this._date=new Date).setTime(src.getTime());this._date.setMilliseconds(src.getMilliseconds())}else{this._date=new Date}}}this._names={};for(var i in jindo.$Date.names){if(jindo.$Date.names.hasOwnProperty(i)){this._names[i]=jindo.$Date.names[i]}}};jindo.$Date.names={month:["January","Febrary","March","April","May","June","July","August","September","October","Novermber","December"],s_month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s_day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampm:["AM","PM"]};jindo.$Date.now=function(){return Date.now()};jindo.$Date.prototype.name=function(oNames){if(arguments.length){for(var i in oNames){if(oNames.hasOwnProperty(i)){this._names[i]=oNames[i]}}}else{return this._names}};jindo.$Date.parse=function(strDate){return new Date(Date.parse(strDate))};jindo.$Date.prototype.$value=function(){return this._date};jindo.$Date.prototype.format=function(strFormat){var o={};var d=this._date;var name=this.name();return(strFormat||"").replace(/[a-z]/ig,function callback(m){if(typeof o[m]!="undefined"){return o[m]}switch(m){case"d":case"j":o.j=d.getDate();o.d=(o.j>9?"":"0")+o.j;return o[m];case"l":case"D":case"w":case"N":o.w=d.getDay();o.N=o.w?o.w:7;o.D=name.s_day[o.w];o.l=name.day[o.w];return o[m];case"S":return(!!(o.S=["st","nd","rd"][d.getDate()]))?o.S:(o.S="th");case"z":o.z=Math.floor((d.getTime()-(new Date(d.getFullYear(),0,1)).getTime())/(3600*24*1000));return o.z;case"m":case"n":o.n=d.getMonth()+1;o.m=(o.n>9?"":"0")+o.n;return o[m];case"L":o.L=this.isLeapYear();return o.L;case"o":case"Y":case"y":o.o=o.Y=d.getFullYear();o.y=(o.o+"").substr(2);return o[m];case"a":case"A":case"g":case"G":case"h":case"H":o.G=d.getHours();o.g=(o.g=o.G%12)?o.g:12;o.A=o.G<12?name.ampm[0]:name.ampm[1];o.a=o.A.toLowerCase();o.H=(o.G>9?"":"0")+o.G;o.h=(o.g>9?"":"0")+o.g;return o[m];case"i":o.i=(((o.i=d.getMinutes())>9)?"":"0")+o.i;return o.i;case"s":o.s=(((o.s=d.getSeconds())>9)?"":"0")+o.s;return o.s;case"u":o.u=d.getMilliseconds();return o.u;case"U":o.U=this.time();return o.U;default:return m}})};jindo.$Date.prototype.time=function(nTime){if(typeof nTime=="number"){this._date.setTime(nTime);return this}return this._date.getTime()};jindo.$Date.prototype.year=function(nYear){if(typeof nYear=="number"){this._date.setFullYear(nYear);return this}return this._date.getFullYear()};jindo.$Date.prototype.month=function(nMon){if(typeof nMon=="number"){this._date.setMonth(nMon);return this}return this._date.getMonth()};jindo.$Date.prototype.date=function(nDate){if(typeof nDate=="number"){this._date.setDate(nDate);return this}return this._date.getDate()};jindo.$Date.prototype.day=function(){return this._date.getDay()};jindo.$Date.prototype.hours=function(nHour){if(typeof nHour=="number"){this._date.setHours(nHour);return this}return this._date.getHours()};jindo.$Date.prototype.minutes=function(nMin){if(typeof nMin=="number"){this._date.setMinutes(nMin);return this}return this._date.getMinutes()};jindo.$Date.prototype.seconds=function(nSec){if(typeof nSec=="number"){this._date.setSeconds(nSec);return this}return this._date.getSeconds()};jindo.$Date.prototype.isLeapYear=function(){var y=this._date.getFullYear();return !(y%4)&&!!(y%100)||!(y%400)};jindo.$Window=function(el){var cl=arguments.callee;if(el instanceof cl){return el}if(!(this instanceof cl)){return new cl(el)}this._win=el||window};jindo.$Window.prototype.$value=function(){return this._win};jindo.$Window.prototype.resizeTo=function(nWidth,nHeight){this._win.resizeTo(nWidth,nHeight);return this};jindo.$Window.prototype.resizeBy=function(nWidth,nHeight){this._win.resizeBy(nWidth,nHeight);return this};jindo.$Window.prototype.moveTo=function(nLeft,nTop){this._win.moveTo(nLeft,nTop);return this};jindo.$Window.prototype.moveBy=function(nLeft,nTop){this._win.moveBy(nLeft,nTop);return this};jindo.$Window.prototype.sizeToContent=function(nWidth,nHeight){if(typeof this._win.sizeToContent=="function"){this._win.sizeToContent()}else{if(arguments.length!=2){var innerX,innerY;var self=this._win;var doc=this._win.document;if(self.innerHeight){innerX=self.innerWidth;innerY=self.innerHeight}else{if(doc.documentElement&&doc.documentElement.clientHeight){innerX=doc.documentElement.clientWidth;innerY=doc.documentElement.clientHeight}else{if(doc.body){innerX=doc.body.clientWidth;innerY=doc.body.clientHeight}}}var pageX,pageY;var test1=doc.body.scrollHeight;var test2=doc.body.offsetHeight;if(test1>test2){pageX=doc.body.scrollWidth;pageY=doc.body.scrollHeight}else{pageX=doc.body.offsetWidth;pageY=doc.body.offsetHeight}nWidth=pageX-innerX;nHeight=pageY-innerY}this.resizeBy(nWidth,nHeight)}return this};if(typeof window!="undefined"){for(prop in jindo){if(jindo.hasOwnProperty(prop)){window[prop]=jindo[prop]}}};jindo.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){var aInstance=this.constructor.getInstance();aInstance.push(this);this._htEventHandler={};this._htOption={};this._htOption._htSetter={}},option:function(sName,vValue){switch(typeof sName){case"undefined":return this._htOption;case"string":if(typeof vValue!="undefined"){if(sName=="htCustomEventHandler"){if(typeof this._htOption[sName]=="undefined"){this.attach(vValue)}else{return this}}this._htOption[sName]=vValue;if(typeof this._htOption._htSetter[sName]=="function"){this._htOption._htSetter[sName](vValue)}}else{return this._htOption[sName]}break;case"object":for(var sKey in sName){if(sKey=="htCustomEventHandler"){if(typeof this._htOption[sKey]=="undefined"){this.attach(sName[sKey])}else{continue}}this._htOption[sKey]=sName[sKey];if(typeof this._htOption._htSetter[sKey]=="function"){this._htOption._htSetter[sKey](sName[sKey])}}break}return this},optionSetter:function(sName,fSetter){switch(typeof sName){case"undefined":return this._htOption._htSetter;case"string":if(typeof fSetter!="undefined"){this._htOption._htSetter[sName]=jindo.$Fn(fSetter,this).bind()}else{return this._htOption._htSetter[sName]}break;case"object":for(var sKey in sName){this._htOption._htSetter[sKey]=jindo.$Fn(sName[sKey],this).bind()}break}return this},fireEvent:function(sEvent,oEvent){oEvent=oEvent||{};var fInlineHandler=this["on"+sEvent],aHandlerList=this._htEventHandler[sEvent]||[],bHasInlineHandler=typeof fInlineHandler=="function",bHasHandlerList=aHandlerList.length>0;if(!bHasInlineHandler&&!bHasHandlerList){return true}aHandlerList=aHandlerList.concat();oEvent.sType=sEvent;if(typeof oEvent._aExtend=="undefined"){oEvent._aExtend=[];oEvent.stop=function(){if(oEvent._aExtend.length>0){oEvent._aExtend[oEvent._aExtend.length-1].bCanceled=true}}}oEvent._aExtend.push({sType:sEvent,bCanceled:false});var aArg=[oEvent],i,nLen;for(i=2,nLen=arguments.length;i<nLen;i++){aArg.push(arguments[i])}if(bHasInlineHandler){fInlineHandler.apply(this,aArg)}if(bHasHandlerList){var fHandler;for(i=0,fHandler;(fHandler=aHandlerList[i]);i++){fHandler.apply(this,aArg)}}return !oEvent._aExtend.pop().bCanceled},attach:function(sEvent,fHandlerToAttach){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,sEvent){this.attach(sEvent,fHandler)},this).bind());return this}var aHandler=this._htEventHandler[sEvent];if(typeof aHandler=="undefined"){aHandler=this._htEventHandler[sEvent]=[]}aHandler.push(fHandlerToAttach);return this},detach:function(sEvent,fHandlerToDetach){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,sEvent){this.detach(sEvent,fHandler)},this).bind());return this}var aHandler=this._htEventHandler[sEvent];if(aHandler){for(var i=0,fHandler;(fHandler=aHandler[i]);i++){if(fHandler===fHandlerToDetach){aHandler=aHandler.splice(i,1);break}}}return this},detachAll:function(sEvent){var aHandler=this._htEventHandler;if(arguments.length){if(typeof aHandler[sEvent]=="undefined"){return this}delete aHandler[sEvent];return this}for(var o in aHandler){delete aHandler[o]}return this}});jindo.Component.factory=function(aObject,oOption){var aReturn=[],oInstance;if(typeof oOption=="undefined"){oOption={}}for(var i=0,el;(el=aObject[i]);i++){oInstance=new this(el,oOption);aReturn[aReturn.length]=oInstance}return aReturn};jindo.Component.getInstance=function(){if(typeof this._aInstance=="undefined"){this._aInstance=[]}return this._aInstance};jindo.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=false},isActivating:function(){return this._bIsActivating},activate:function(){if(this.isActivating()){return this}this._bIsActivating=true;if(arguments.length>0){this._onActivate.apply(this,arguments)}else{this._onActivate()}return this},deactivate:function(){if(!this.isActivating()){return this}this._bIsActivating=false;if(arguments.length>0){this._onDeactivate.apply(this,arguments)}else{this._onDeactivate()}return this}}).extend(jindo.Component);jindo.HTMLComponent=jindo.$Class({sTagName:"",$init:function(){},paint:function(){this._onPaint();return this}}).extend(jindo.UIComponent);jindo.HTMLComponent.paint=function(){var aInstance=this.getInstance();for(var i=0,oInstance;(oInstance=aInstance[i]);i++){oInstance.paint()}};jindo.Formatter=jindo.$Class({_aMarks:["\u0000","\uFFFF"],_sPrevValue:null,_oTextRange:null,_bFakeFocus:false,$init:function(el,htOption){this._el=jindo.$(el);this.option({bPaintOnload:true,bActivateOnload:true,WatchInput:{nInterval:100,bPermanent:true,bActivateOnload:false}});this.option(htOption||{});var self=this;this._wfRealBlur=jindo.$Fn(this._realBlur,this);this._wfRealFocus=jindo.$Fn(this._realFocus,this);this._oTextRange=new jindo.TextRange(el);this._oWatchInput=new jindo.WatchInput(el,this.option("WatchInput")).attach({change:function(oCustomEvent){setTimeout(function(){self.paint()},1)}});if(this.option("bPaintOnload")){setTimeout(function(){self.paint()},1)}if(this.option("bActivateOnload")){this.activate()}},getWatchInput:function(){return this._oWatchInput},_splice:function(sStr,nIndex,nHowMany,sInsert){return sStr.slice(0,nIndex)+sInsert+sStr.slice(nIndex+nHowMany)},setValue:function(s){this._el.value=s;this.paint();return this},paint:function(){var el=this._el,oTextRange=this._oTextRange,aMark=this._aMarks,sText=el.value.toString(),bFocus=oTextRange.hasFocus(),aSel,htParam;if(bFocus){aSel=[-1,-1];try{aSel=oTextRange.getSelection()}catch(e){}sText=this._splice(this._splice(sText,aSel[1],0,aMark[1]),aSel[0],0,aMark[0])}htParam={elInput:el,sText:sText,sStartMark:aMark[0],sEndMark:aMark[1]};if(this.fireEvent("beforeChange",htParam)){var sOutput=htParam.sText;if(bFocus){var nPos=sOutput.indexOf(aMark[0]);if(nPos>-1){sOutput=this._splice(sOutput,nPos,1,"")}aSel=[nPos];aSel[1]=sOutput.indexOf(aMark[1]);if(aSel[1]>-1){sOutput=this._splice(sOutput,aSel[1],1,"")}var self=this;setTimeout(function(){self._bFakeFocus=true;el.blur()},1);setTimeout(function(){self._oWatchInput.setInputValue(sOutput);el.focus();try{oTextRange.setSelection(aSel[0],aSel[1])}catch(e){}self.fireEvent("change",{elInput:el})},2);setTimeout(function(){self._bFakeFocus=false},20)}else{this._oWatchInput.setInputValue(sOutput);this.fireEvent("change",{elInput:el})}}return this},_realBlur:function(){if(!this._bFakeFocus){this.getWatchInput().stop();this.fireEvent("blur",{elInput:this._el})}},_realFocus:function(){if(!this._bFakeFocus){this.getWatchInput().start(true);this.fireEvent("focus",{elInput:this._el})}},_onActivate:function(){this._wfRealBlur.attach(this._el,"blur");this._wfRealFocus.attach(this._el,"focus")},_onDeactivate:function(){this._wfRealBlur.detach(this._el,"blur");this._wfRealFocus.detach(this._el,"focus")}}).extend(jindo.UIComponent);jindo.Dialog=jindo.$Class({$init:function(htOption){var htDefaultOption={sClassPrefix:"dialog-",LayerPosition:{sPosition:"inside-center",bAuto:true}};this.option(htDefaultOption);this.option(htOption||{});this._bIsEventAttached=false;this._bIsShown=false;this._assignHTMLElements();this._initLayerPosition()},_assignHTMLElements:function(){this._elLayer=jindo.$('<div class="'+this.option("sClassPrefix")+'layer"></div>');this._welLayer=jindo.$Element(this._elLayer);this._wfClick=jindo.$Fn(this._onClick,this)},_initLayerPosition:function(){this._oLayerPosition=new jindo.LayerPosition(document.body,this._elLayer,this.option("LayerPosition"))},getLayer:function(){return this._elLayer},getLayerPosition:function(){return this._oLayerPosition},setLayerTemplate:function(sTemplate){this._sTemplate=sTemplate;this._template=jindo.$Template(this._sTemplate)},getLayerTemplate:function(){return this._sTemplate},show:function(htTemplateProcess,htEventHandler){if(!this.isShown()){this.attach(htEventHandler);document.body.appendChild(this._elLayer);this._welLayer.html(this._template.process(htTemplateProcess));var htCustomEvent={elLayer:this._elLayer};if(this.fireEvent("beforeShow",htCustomEvent)){this._welLayer.show();this._attachEvents();this.getLayerPosition().setPosition();this._bIsShown=true;this.fireEvent("show",htCustomEvent)}}},hide:function(){if(this.isShown()){var htCustomEvent={elLayer:this._elLayer};if(this.fireEvent("beforeHide",htCustomEvent)){this.detachAll("close").detachAll("confirm").detachAll("cancel");this._detachEvents();this._welLayer.hide();this._welLayer.leave();this._bIsShown=false;this.fireEvent("hide",htCustomEvent)}}},isShown:function(){return this._bIsShown},_isEventAttached:function(){return this._bIsEventAttached},_attachEvents:function(){if(!this._isEventAttached()){this._wfClick.attach(this._elLayer,"click");this._bIsEventAttached=true}return this},_detachEvents:function(){if(this._isEventAttached()){this._wfClick.detach(this._elLayer,"click");this._bIsEventAttached=false}return this},_onClick:function(we){var sClassPrefix=this.option("sClassPrefix");var elClosestClose,elClosestConfirm,elClosestCancel;if((elClosestClose=this._getClosest(("."+sClassPrefix+"close"),we.element))){if(this.fireEvent("close")){this.hide()}}else{if((elClosestConfirm=this._getClosest(("."+sClassPrefix+"confirm"),we.element))){if(this.fireEvent("confirm")){this.hide()}}else{if((elClosestCancel=this._getClosest(("."+sClassPrefix+"cancel"),we.element))){if(this.fireEvent("cancel")){this.hide()}}}}},_getClosest:function(sSelector,elBaseElement){if(jindo.$$.test(elBaseElement,sSelector)){return elBaseElement}return jindo.$$.getSingle("! "+sSelector,elBaseElement)}}).extend(jindo.Component);jindo.Rolling=jindo.$Class({_oTransition:null,$init:function(el,htOption){this._el=jindo.$(el);this._elList=jindo.$$.test(this._el,"ul, ol")?this._el:jindo.$$.getSingle("> ul, > ol",el);this.option({nFPS:50,nDuration:800,sDirection:"horizontal",fEffect:jindo.Effect.linear});this.option(htOption||{});this._oKeys=this.option("sDirection")=="horizontal"?{offsetWidth:"offsetWidth",marginLeft:"marginLeft",marginRight:"marginRight",clientWidth:"clientWidth",scrollLeft:"scrollLeft"}:{offsetWidth:"offsetHeight",marginLeft:"marginTop",marginRight:"marginBottom",clientWidth:"clientHeight",scrollLeft:"scrollTop"};this._initTransition()},_initTransition:function(){var self=this;this._oTransition=new jindo.Transition().fps(this.option("nFPS")).attach({end:function(oCustomEvent){self.fireEvent("afterMove",{nIndex:self.getIndex()})}})},getTransition:function(){return this._oTransition},getList:function(){return this._elList},getItems:function(){return jindo.$$("> li",this._elList)},_offsetSize:function(el){var eEl=jindo.$Element(el),oKeys=this._oKeys,nMarginLeft=parseInt(eEl.css(oKeys.marginLeft),10)||0,nMarginRight=parseInt(eEl.css(oKeys.marginRight),10)||0;return el[oKeys.offsetWidth]+nMarginLeft+nMarginRight},getIndex:function(){if(this.isMoving()){return this._nMoveTo}var el=this._el,oKeys=this._oKeys,nScroll=el[oKeys.scrollLeft],aItems=this.getItems(),nSize=0,n=0,nMinDistance=99999999;for(var i=0;i<aItems.length;i++){var nDistance=Math.abs(nScroll-nSize);if(nDistance<nMinDistance){nMinDistance=nDistance;n=i}nSize+=this._offsetSize(aItems[i])}return n},_getPosition:function(n){var el=this._el,oKeys=this._oKeys,aItems=this.getItems(),nPos=0,nSize=this._getSize(),i;for(i=0;i<n;i++){nPos+=this._offsetSize(aItems[i])}if(nPos+el[oKeys.clientWidth]>nSize){nPos=nSize-el[oKeys.clientWidth]}return nPos},_getSize:function(){var aItems=this.getItems(),nSize=0;for(i=0;i<aItems.length;i++){nSize+=this._offsetSize(aItems[i])}return this._nSize=nSize},_move:function(n){var el=this._el,oKeys=this._oKeys,aItems=this.getItems(),nPos=this._getPosition(n);nSize=this._getSize();var htParam={element:el,nIndex:n,nScroll:nPos};if(this.fireEvent("beforeMove",htParam)&&el[oKeys.scrollLeft]!=htParam.nScroll){var htDest={};htDest[oKeys.scrollLeft]=this.option("fEffect")(htParam.nScroll);this._nMoveTo=n;this.getTransition().abort().start(this.option("nDuration"),htParam.element,htDest);return true}return false},moveTo:function(n){n=Math.min(n,this.getItems().length-1);n=Math.max(n,0);return this._move(n)},moveLastTo:function(n){return this.moveTo(this.getItems().length-1-n)},moveBy:function(n){return this.moveTo(this.getIndex()+n)},isMoving:function(){return this._oTransition.isPlaying()},isOverflowed:function(){return this._getSize()>this._el[this._oKeys.clientWidth]},getDisplayedItemCount:function(){var nDisplayed=0,aItems=this.getItems(),nPos=0;for(var i=0;i<aItems.length;i++){nPos+=this._offsetSize(aItems[i]);if(nPos<=this._el[this._oKeys.clientWidth]){nDisplayed++}else{break}}return nDisplayed}}).extend(jindo.Component);jindo.ScrollBar=new jindo.$Class({_bMouseEnter:false,_bIsEventAttachedForCommon:false,_bIsEventAttachedForVertical:false,_bIsEventAttachedForHorizontal:false,$init:function(el,oOption){this.option({sClassPrefix:"scrollbar-",nDelta:16,sClassNameForRollover:"rollover",bActivateOnload:true});this.option(oOption||{});this._el=jindo.$(el);this._oTimer=new jindo.Timer();this._oTransition=new jindo.Transition().fps(30);this._wfOnMouseEnter=jindo.$Fn(this._onMouseEnter,this);this._wfOnMouseLeave=jindo.$Fn(this._onMouseLeave,this);this._wfOnWheel=jindo.$Fn(this._onWheel,this);this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this);this._assignHTMLElements();if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){var el=this._el,sClassPrefix=this.option("sClassPrefix");this._elBox=jindo.$$.getSingle("."+sClassPrefix+"box",el);this._elContent=jindo.$$.getSingle("."+sClassPrefix+"content",el);var welBox=jindo.$Element(this._elBox),welContent=jindo.$Element(this._elContent);this._oBoxSize={nWidth:welBox.width(),nHeight:welBox.height()};this._oContentSize={nWidth:welContent.width(),nHeight:welContent.height()};this._oHorizontal={elScrollBar:jindo.$$.getSingle("."+sClassPrefix+"h",el)};var oH=this._oHorizontal;if(oH.elScrollBar){oH.elTrack=jindo.$$.getSingle("."+sClassPrefix+"track",oH.elScrollBar);oH.elThumb=jindo.$$.getSingle("."+sClassPrefix+"thumb",oH.elTrack);oH.elThumbHead=jindo.$$.getSingle("."+sClassPrefix+"thumb-head",oH.elThumb);oH.elThumbBody=jindo.$$.getSingle("."+sClassPrefix+"thumb-body",oH.elThumb);oH.elThumbFoot=jindo.$$.getSingle("."+sClassPrefix+"thumb-foot",oH.elThumb);oH.elButtonLeft=jindo.$$.getSingle("."+sClassPrefix+"button-left",oH.elScrollBar);oH.elButtonRight=jindo.$$.getSingle("."+sClassPrefix+"button-right",oH.elScrollBar)}this._oVertical={elScrollBar:jindo.$$.getSingle("."+sClassPrefix+"v",el)};var oV=this._oVertical;if(oV.elScrollBar){oV.elTrack=jindo.$$.getSingle("."+sClassPrefix+"track",oV.elScrollBar);oV.elThumb=jindo.$$.getSingle("."+sClassPrefix+"thumb",oV.elTrack);oV.elThumbHead=jindo.$$.getSingle("."+sClassPrefix+"thumb-head",oV.elThumb);oV.elThumbBody=jindo.$$.getSingle("."+sClassPrefix+"thumb-body",oV.elThumb);oV.elThumbFoot=jindo.$$.getSingle("."+sClassPrefix+"thumb-foot",oV.elThumb);oV.elButtonUp=jindo.$$.getSingle("."+sClassPrefix+"button-up",oV.elScrollBar);oV.elButtonDown=jindo.$$.getSingle("."+sClassPrefix+"button-down",oV.elScrollBar)}},getBox:function(){return this._elBox},getContent:function(){return this._elContent},getDefaultBoxSize:function(){return this._oBoxSize},getDefaultContentSize:function(){return this._oContentSize},getScrollBarHorizontal:function(){return this._oHorizontal},getScrollBarVertical:function(){return this._oVertical},getSliderHorizontal:function(){return this._oSliderHorizontal||null},getSliderVertical:function(){return this._oSliderVertical||null},getRolloverArea:function(){return this._oRolloverArea},_attachEvent:function(sDirection){var sClassPrefix=this.option("sClassPrefix"),self=this,oH=this.getScrollBarHorizontal(),oV=this.getScrollBarVertical();function attach(o){if(o.elScrollBar){var sClassNameForRollover=self.option("sClassNameForRollover");jindo.$Element(o.elTrack).addClass(sClassNameForRollover);jindo.$Element(o.elThumb).addClass(sClassNameForRollover);if(o.elButtonLeft){jindo.$Element(o.elButtonLeft).addClass(sClassNameForRollover)}if(o.elButtonRight){jindo.$Element(o.elButtonRight).addClass(sClassNameForRollover)}if(o.elButtonUp){jindo.$Element(o.elButtonUp).addClass(sClassNameForRollover)}if(o.elButtonDown){jindo.$Element(o.elButtonDown).addClass(sClassNameForRollover)}}}function attachH(){if(!self._bIsEventAttachedForHorizontal){attach(oH)}self._bIsEventAttachedForHorizontal=true}function attachV(){if(!self._bIsEventAttachedForVertical){attach(oV)}self._bIsEventAttachedForVertical=true}if(!this._bIsEventAttachedForCommon){this._initSliders();this._initRolloverArea();this._wfOnMouseEnter.attach(this._el,"mouseenter");this._wfOnMouseLeave.attach(this._el,"mouseleave");this._wfOnWheel.attach(document,"mousewheel");this._wfOnMouseUp.attach(document,"mouseup");this._bIsEventAttachedForCommon=true;jindo.$Element(this._el).removeClass(sClassPrefix+"noscript")}if(!sDirection){attachH();attachV()}if(sDirection=="horizontal"){attachH()}if(sDirection=="vertical"){attachV()}},_detachEvent:function(sDirection){var sClassPrefix=this.option("sClassPrefix"),self=this,oH=this.getScrollBarHorizontal(),oV=this.getScrollBarVertical();function detach(o){if(o.elScrollBar){var sClassNameForRollover=self.option("sClassNameForRollover");jindo.$Element(o.elTrack).removeClass(sClassNameForRollover);jindo.$Element(o.elThumb).removeClass(sClassNameForRollover);if(o.elButtonLeft){jindo.$Element(o.elButtonLeft).removeClass(sClassNameForRollover)}if(o.elButtonRight){jindo.$Element(o.elButtonRight).removeClass(sClassNameForRollover)}if(o.elButtonUp){jindo.$Element(o.elButtonUp).removeClass(sClassNameForRollover)}if(o.elButtonDown){jindo.$Element(o.elButtonDown).removeClass(sClassNameForRollover)}}}function detachH(){if(self._bIsEventAttachedForHorizontal){detach(oH)}self._bIsEventAttachedForHorizontal=false}function detachV(){if(self._bIsEventAttachedForVertical){detach(oV)}self._bIsEventAttachedForVertical=false}if(!sDirection){detachH();detachV()}else{if(sDirection=="horizontal"){detachH()}else{if(sDirection=="vertical"){detachV()}}}if(this._bIsEventAttachedForCommon&&!this._bIsEventAttachedForHorizontal&&!this._bIsEventAttachedForVertical){this._wfOnMouseEnter.detach(this._el,"mouseenter");this._wfOnMouseLeave.detach(this._el,"mouseleave");this._wfOnWheel.detach(document,"mousewheel");this._wfOnMouseUp.detach(document,"mouseup");this._bMouseEnter=false;this._bIsEventAttachedForCommon=false;this.getRolloverArea().deactivate();jindo.$Element(this._el).addClass(sClassPrefix+"noscript")}},_activateH:function(){var oSliderH=this.getSliderHorizontal();if(oSliderH){oSliderH.activate();this.getBox().scrollLeft=0;this.setScrollLeft(0)}},_activateV:function(){var oSliderV=this.getSliderVertical();if(oSliderV){oSliderV.activate();this.getBox().scrollTop=0;this.setScrollTop(0)}},_onActivate:function(sDirection){this._attachEvent(sDirection||null);if(!sDirection){this._activateH();this._activateV();jindo.$Element(this._el).removeClass(this.option("sClassPrefix")+"noscript");return}if(sDirection=="horizontal"){this._activateH();return}if(sDirection=="vertical"){this._activateV();return}},_deactivateH:function(){var oSliderH=this.getSliderHorizontal();if(oSliderH){oSliderH.deactivate();this.getContent().style.left="0px";this.getBox().scrollLeft=0}},_deactivateV:function(){var oSliderV=this.getSliderVertical();if(oSliderV){oSliderV.deactivate();this.getContent().style.top="0px";this.getBox().scrollTop=0}},_onDeactivate:function(sDirection){this._detachEvent(sDirection||null);if(!sDirection){this._deactivateH();this._deactivateV();jindo.$Element(this._el).addClass(this.option("sClassPrefix")+"noscript");return}if(sDirection=="horizontal"){this._deactivateH();return}if(sDirection=="vertical"){this._deactivateV();return}},_initSliders:function(){var self=this,sClassPrefix=this.option("sClassPrefix"),oH=this.getScrollBarHorizontal(),oV=this.getScrollBarVertical();if(oH.elScrollBar){this._nScrollWidth=jindo.$Element(this._elContent).width()-jindo.$Element(this._elBox).width();this._oSliderHorizontal=new jindo.Slider(oH.elTrack,{sClassPrefix:sClassPrefix,bVertical:false,nMinValue:0,nMaxValue:this._nScrollWidth});this._oSliderHorizontal._oTransition=new jindo.Transition().fps(30);this._oSliderHorizontal.attach({beforeChange:function(oCustomEvent){var nTrackWidth=jindo.$Element(this.getTrack()).width(),nThumbWidth=jindo.$Element(this.getThumb(oCustomEvent.nIndex)).width(),nAvailWidth=nTrackWidth-nThumbWidth;oCustomEvent.nPos=Math.min(oCustomEvent.nPos,nAvailWidth);oCustomEvent.nPos=Math.max(oCustomEvent.nPos,0);if(oCustomEvent.bJump){oCustomEvent.stop();this._oTransition.abort().start(200,this.getThumb(oCustomEvent.nIndex),{"@left":jindo.Effect.easeOut(oCustomEvent.nPos+"px")}).attach({playing:function(oCustomEvent2){self.setScrollLeft(self._oSliderHorizontal._getValue(0,parseInt(oCustomEvent2.sValue,10)))}})}else{self.setScrollLeft(this._getValue(0,oCustomEvent.nPos))}}})}if(oV.elScrollBar){this._nScrollHeight=jindo.$Element(this._elContent).height()-jindo.$Element(this._elBox).height();this._oSliderVertical=new jindo.Slider(oV.elTrack,{sClassPrefix:sClassPrefix,bVertical:true,nMinValue:0,nMaxValue:this._nScrollHeight});this._oSliderVertical._oTransition=new jindo.Transition().fps(30);this._oSliderVertical.attach({beforeChange:function(oCustomEvent){var nTrackHeight=jindo.$Element(this.getTrack()).height(),nThumbHeight=jindo.$Element(this.getThumb(oCustomEvent.nIndex)).height(),nAvailHeight=nTrackHeight-nThumbHeight;oCustomEvent.nPos=Math.min(oCustomEvent.nPos,nAvailHeight);oCustomEvent.nPos=Math.max(oCustomEvent.nPos,0);if(oCustomEvent.bJump){oCustomEvent.stop();this._oTransition.abort().start(200,this.getThumb(oCustomEvent.nIndex),{"@top":jindo.Effect.easeOut(oCustomEvent.nPos+"px")}).attach({playing:function(oCustomEvent2){self.setScrollTop(self._oSliderVertical.values(0))}})}else{self.setScrollTop(this._getValue(0,oCustomEvent.nPos))}}})}},_initRolloverArea:function(){var self=this,sClassPrefix=this.option("sClassPrefix"),sClassNameForRollover=this.option("sClassNameForRollover");this._oRolloverArea=new jindo.RolloverArea(this._el,{sClassName:sClassNameForRollover,sClassPrefix:sClassPrefix}).attach({over:function(oCustomEvent){oCustomEvent.stop();self._onRollover("over",oCustomEvent.element)},down:function(oCustomEvent){oCustomEvent.stop();self._onMouseDown(oCustomEvent.element);self._onRollover("down",oCustomEvent.element)},up:function(oCustomEvent){oCustomEvent.stop();self._onMouseUp(oCustomEvent.element);self._onRollover("up",oCustomEvent.element)},out:function(oCustomEvent){oCustomEvent.stop();self._onRollover("out",oCustomEvent.element)}})},reset:function(){var oSliderH=this.getSliderHorizontal(),oSliderV=this.getSliderVertical();if(oSliderH){this._nScrollWidth=jindo.$Element(this._elContent).width()-jindo.$Element(this._elBox).width();oSliderH.option("nMaxValue",this._nScrollWidth);this.setScrollLeft(0)}if(oSliderV){this._nScrollHeight=jindo.$Element(this._elContent).height()-jindo.$Element(this._elBox).height();oSliderV.option("nMaxValue",this._nScrollHeight);this.setScrollTop(0)}this._elBox.scrollLeft=0;this._elBox.scrollTop=0},hasScrollBarHorizontal:function(){var sClassPrefix=this.option("sClassPrefix"),o=this.getScrollBarHorizontal();if(o.elScrollBar){var welScrollBar=jindo.$Element(o.elScrollBar);return welScrollBar.visible()||welScrollBar.hasClass(sClassPrefix+"show")}return false},hasScrollBarVertical:function(){var sClassPrefix=this.option("sClassPrefix"),o=this.getScrollBarVertical();if(o.elScrollBar){var welScrollBar=jindo.$Element(o.elScrollBar);return welScrollBar.visible()||welScrollBar.hasClass(sClassPrefix+"show")}return false},setScrollTop:function(n){n=Math.min(n,this._nScrollHeight);n=Math.max(n,0);n=Math.round(n);var htParam={sDirection:"top",nPosition:n};jindo.$Element(this._elContent).css("top",(htParam.nPosition*-1)+"px");var oSliderV=this.getSliderVertical();if(oSliderV){oSliderV.values(0,htParam.nPosition,false)}this._fireScrollEvent(htParam)},setScrollLeft:function(n){n=Math.min(n,this._nScrollWidth);n=Math.max(n,0);n=Math.round(n);var htParam={sDirection:"left",nPosition:n};jindo.$Element(this._elContent).css("left",(htParam.nPosition*-1)+"px");var oSliderH=this.getSliderHorizontal();if(oSliderH){oSliderH.values(0,htParam.nPosition,false)}this._fireScrollEvent(htParam)},setScrollTopBy:function(n){this.setScrollTop(this.getScrollTop()+n)},setScrollLeftBy:function(n){this.setScrollLeft(this.getScrollLeft()+n)},getScrollTop:function(n){return parseInt(jindo.$Element(this._elContent).css("top"),10)*-1},getScrollLeft:function(n){return parseInt(jindo.$Element(this._elContent).css("left"),10)*-1},_getElementType:function(wel){var sClassPrefix=this.option("sClassPrefix");if(wel.hasClass(sClassPrefix+"track")){return"track"}else{if(wel.hasClass(sClassPrefix+"thumb")){return"thumb"}else{if(wel.hasClass(sClassPrefix+"button-up")){return"button-up"}else{if(wel.hasClass(sClassPrefix+"button-up")){return"button-up"}else{if(wel.hasClass(sClassPrefix+"button-down")){return"button-down"}else{if(wel.hasClass(sClassPrefix+"button-left")){return"button-left"}else{if(wel.hasClass(sClassPrefix+"button-right")){return"button-right"}else{return false}}}}}}}},_fireScrollEvent:function(htParam){this.fireEvent("scroll",htParam)},_onWheel:function(we){if(!this._bMouseEnter){return}we.stop(jindo.$Event.CANCEL_DEFAULT);var nDelta=we.mouse().delta,nDirection=nDelta/Math.abs(nDelta)*-1,n=Math.ceil(Math.abs(nDelta))*nDirection*this.option("nDelta"),bH=this.hasScrollBarHorizontal(),bV=this.hasScrollBarVertical();if(!bH&&!bV){return}if(this.hasScrollBarVertical()&&this._bIsEventAttachedForVertical){this.setScrollTop(this.getScrollTop()+n);return}this.setScrollLeft(this.getScrollLeft()+n)},_onMouseDown:function(el){var wel=jindo.$Element(el),self=this,setScrollBy,sElementType=this._getElementType(wel);switch(sElementType){case"button-up":setScrollBy=function(n){self.setScrollTopBy(~~(n*-1))};break;case"button-down":setScrollBy=function(n){self.setScrollTopBy(n)};break;case"button-left":setScrollBy=function(n){self.setScrollLeftBy(~~(n*-1))};break;case"button-right":setScrollBy=function(n){self.setScrollLeftBy(n)};break;default:return}this._oTimer.start(function(){setScrollBy(16);return true},100)},_onMouseUp:function(el){this._oTimer.abort()},_onMouseEnter:function(we){this._bMouseEnter=true},_onMouseLeave:function(we){this._bMouseEnter=false},_onRollover:function(sType,el){var wel=jindo.$Element(el),sClassPrefix=this.option("sClassPrefix"),sElementType=this._getElementType(wel);switch(sType){case"over":wel.addClass(sClassPrefix+sElementType+"-over");break;case"down":wel.addClass(sClassPrefix+sElementType+"-hold");break;case"up":wel.removeClass(sClassPrefix+sElementType+"-hold");break;case"out":wel.removeClass(sClassPrefix+sElementType+"-over");break}}}).extend(jindo.UIComponent);jindo.Tree=jindo.$Class({_bIsActivating:false,_sTemplate:null,_htNodeData:null,_el:null,_elSelectedNode:null,$init:function(el,htOption){this.option({sClassPrefix:"tree-",sEventSelect:"click",sEventExpand:"dblclick",bExpandOnSelect:true,bActivateOnload:true});this.option(htOption||{});var sPrefix=this.option("sClassPrefix");this.htClassName={sNode:sPrefix+"node",sLastNode:sPrefix+"last-node",sHasChild:sPrefix+"has-child",sButton:sPrefix+"button",sLabel:sPrefix+"label",sSelected:sPrefix+"selected",sCollapsed:sPrefix+"collapsed"};this.setNodeTemplate('<li class="{=sNodeClass}{if bLastNode} {=sLastNodeClass}{/if}"><div{if bHasChild} class="{=sHasChildClass}"{/if}><button class="{=sButtonClass}">+</button><span class="{=sLabelClass}" unselectable="on">{=sText}</span></div></li>');this._htNodeData={};el=jindo.$(el);this._setRootList(el);this._wfSelectHandler=jindo.$Fn(this._onSelectEvent,this);this._wfExpandHandler=jindo.$Fn(this._onExpandEvent,this);this._makeNodeDataKeyFromHTML();this.paintAllNodes();var elDefaultSelectedNode=jindo.$$.getSingle("."+this.htClassName.sNode+" > ."+this.htClassName.sSelected,this.getRootList());if(elDefaultSelectedNode){this._setSelectedNode(this.getNode(elDefaultSelectedNode))}if(this.option("bActivateOnload")){this.activate()}},_onActivate:function(){var el=this.getRootList();this._wfSelectHandler.attach(el,this.option("sEventSelect"));this._wfExpandHandler.attach(el,this.option("sEventExpand"))},_onDeactivate:function(){var el=this.getRootList();this._wfSelectHandler.detach(el,this.option("sEventSelect"));this._wfExpandHandler.detach(el,this.option("sEventExpand"))},_onSelectEvent:function(we){var el=we.element;var elNode=this.getNode(el);if(!elNode){return}var elButton=jindo.$$.test(el,"."+this.htClassName.sButton)?el:jindo.$$.getSingle("! ."+this.htClassName.sButton,el);if(elButton){if(this.isCollapsed(elNode)){this.expandNode(elNode)}else{this.collapseNode(elNode)}return}var elLabel=jindo.$$.test(el,"."+this.htClassName.sLabel)?el:jindo.$$.getSingle("! ."+this.htClassName.sLabel,el);if(elLabel){var htPart=this.getPartsOfNode(elNode);if(htPart.elItem){if(this.fireEvent(we.type,{element:elNode,weEvent:we})){this.selectNode(elNode)}}}},_onExpandEvent:function(we){var el=we.element;var elNode=this.getNode(el);if(!elNode||!this.hasChild(elNode)){return}var elLabel=jindo.$$.test(el,"."+this.htClassName.sLabel)?el:jindo.$$.getSingle("! ."+this.htClassName.sLabel,el);if(elLabel){var htParam={element:elNode,weEvent:we};var htPart=this.getPartsOfNode(elNode);if(htPart.elItem&&jindo.$Element(htPart.elItem).visible()){if(this.isCollapsed(elNode)){if(this.fireEvent(we.type,htParam)){this.expandNode(elNode)}}else{if(!this._bExpandOnSelect){if(this.fireEvent(we.type,htParam)){this.collapseNode(elNode)}}}}}},paintNode:function(elNode,bPaintChild){if(typeof bPaintChild=="undefined"){bPaintChild=true}this._paintNode(elNode);if(bPaintChild){var aNodes=this.getChildNodes(elNode);for(var i=0;i<aNodes.length;i++){this.paintNode(aNodes[i])}}return this},paintAllNodes:function(elNode){this.paintNode(elNode||this.getRootNode());return this},_paintNode:function(elNode){var htPart=this.getPartsOfNode(elNode);var aChildNodes=this.getChildNodes(elNode);var htNodeData=this.getNodeData(elNode);var welNode=jindo.$Element(elNode);var welItem=jindo.$Element(htPart.elItem);delete htNodeData._aChildren;if(aChildNodes.length>0){welItem.addClass(this.htClassName.sHasChild);htNodeData._aChildren=[];var self=this;jindo.$A(aChildNodes).forEach(function(elNode,i){htNodeData._aChildren.push(self.getNodeData(elNode))})}else{welItem.removeClass(this.htClassName.sHasChild);if(htPart.elChild){htPart.elChild.parentNode.removeChild(htPart.elChild)}}htNodeData.bLastNode=jindo.$$.getSingle("~ ."+this.htClassName.sNode,elNode)?false:true;if(htNodeData.bLastNode){welNode.addClass(this.htClassName.sLastNode)}else{welNode.removeClass(this.htClassName.sLastNode)}elNode.parentNode.style.zoom=1},getNodeTemplate:function(){return this._sTemplate},setNodeTemplate:function(s){this._sTemplate=s;return this},getChildListOfNode:function(elNode){return jindo.$$.getSingle("ul",elNode)},getRootList:function(){return this._el},_setRootList:function(el){this._el=el},getNode:function(el){var elNode=jindo.$$.test(el,"."+this.htClassName.sNode)?el:jindo.$$.getSingle("! ."+this.htClassName.sNode,el);return elNode&&jindo.$Element(elNode).isChildOf(this.getRootList())?elNode:null},getPartsOfNode:function(elNode){var aParts=jindo.$$("> *",elNode);return{elItem:aParts[0],elChild:aParts[1]}},getNodeType:function(elNode){if(elNode===this.getRootNode()){return"root"}else{if(this.getChildNodes(elNode).length>0){return"internal"}else{return"leaf"}}},getRootNode:function(){if(this._elRootNode){return this._elRootNode}this._elRootNode=jindo.$$.getSingle("."+this.htClassName.sNode,this.getRootList());return this._elRootNode},getAllNodes:function(){return jindo.$$("."+this.htClassName.sNode,this.getRootList())},getChildNodes:function(elNode){var elChildList=this.getChildListOfNode(elNode);return elChildList?jindo.$$("> ."+this.htClassName.sNode,elChildList):[]},hasChild:function(elNode){var htPart=this.getPartsOfNode(elNode);return htPart.elChild&&htPart.elChild.getElementsByTagName("li")[0]?true:false},getParentNode:function(elNode){var elRootNode=this.getRootNode();if(elNode===elRootNode){return null}return this.getNode(elNode.parentNode)},getPreviousNode:function(elNode){var elReturn=jindo.$$.getSingle("!~ ."+this.htClassName.sNode,elNode);return elReturn?this.getNode(elReturn):null},getNextNode:function(elNode){var elReturn=jindo.$$.getSingle("~ ."+this.htClassName.sNode,elNode);return elReturn?this.getNode(elReturn):null},getSelectedNode:function(){return this._elSelectedNode},_setSelectedNode:function(el){this._elSelectedNode=el},isCollapsed:function(elNode){return jindo.$Element(elNode).hasClass(this.htClassName.sCollapsed)},getNodeDepth:function(elNode){var nDepth=-1;for(;elNode;elNode=elNode.parentNode){if(elNode==this.getRootList()){break}if(jindo.$$.test(elNode,"."+this.htClassName.sNode)){nDepth++}}return nDepth},setNodeData:function(elNode,htNodeData){var sKey=this._getNodeDataKey(elNode);delete htNodeData._aChildren;delete htNodeData.sLabel;for(var vProp in htNodeData){this._htNodeData[sKey][vProp]=htNodeData[vProp]}return this},getNodeLabelElement:function(elNode){return jindo.$$.getSingle("."+this.htClassName.sLabel,elNode)},getNodeLabel:function(elNode){return jindo.$Element(this.getNodeLabelElement(elNode)).html()},setNodeLabel:function(elNode,sLabel){var sKey=this._getNodeDataKey(elNode);this._htNodeData[sKey]["sLabel"]=sLabel;jindo.$Element(this.getNodeLabelElement(elNode)).html(sLabel);return this},_makeNodeDataKeyFromHTML:function(){var aNodes=this.getAllNodes();for(var i=0;i<aNodes.length;i++){var elNode=aNodes[i];this._makeNodeDataKey(elNode);this._makeNodeData(elNode)}},_makeNodeDataKey:function(elNode){var welNode=jindo.$Element(elNode);var sNodeDataKey=this._getNodeDataKey(elNode);if(sNodeDataKey){return false}var sPrefix=this.option("sClassPrefix");var sUnique=("data-"+new Date().getTime()+parseInt(Math.random()*10000000,10)).toString();var sUniqueClass=sPrefix+sUnique;welNode.addClass(sUniqueClass);var sKey=this._getNodeDataKey(elNode);this._htNodeData[sKey]={};return sKey},_makeNodeData:function(elNode){var htNodeData=this.getNodeData(elNode);htNodeData.element=elNode;htNodeData.sLabel=jindo.$Element(this.getNodeLabelElement(elNode)).text();htNodeData.bLastNode=jindo.$$.getSingle("~ ."+this.htClassName.sNode,elNode)?false:true},_getNodeDataKey:function(elNode){var sClassName=elNode.className;var sPrefix=this.option("sClassPrefix");var rKey=new RegExp("("+sPrefix+"data-[0-9]+)");if(rKey.test(sClassName)){return RegExp.$1}return null},getNodeData:function(elNode){return(elNode)?this._htNodeData[this._getNodeDataKey(elNode)]:this._htNodeData},_clearNodeData:function(elNode){var elParentNode=this.getParentNode(elNode);var htNodeData=this.getNodeData(elNode);var sKey=this._getNodeDataKey(elNode);if(elParentNode){var htParentNodeData=this.getNodeData(elParentNode);if(htParentNodeData){var nIndex=jindo.$A(htParentNodeData._aChildren).indexOf(htNodeData);htParentNodeData._aChildren.splice(nIndex,1)}}var self=this;if(this.hasChild(elNode)){jindo.$A(this.getChildNodes(elNode)).forEach(function(elNode){self._clearNodeData(elNode)})}delete this._htNodeData[sKey]},expandNode:function(elNode,bChildAll){if(!this.fireEvent("beforeExpand",{element:elNode})){return}var htPart=this.getPartsOfNode(elNode);var aChildren=[];if(jindo.$$.test(htPart.elItem,"."+this.htClassName.sHasChild)){aChildren.push(elNode)}if(bChildAll){aChildren=aChildren.concat(jindo.$$("."+this.htClassName.sHasChild,elNode))}for(var i=0,elChild;(elChild=aChildren[i]);i++){var elChildNode=this.getNode(elChild);jindo.$Element(elChildNode).removeClass(this.htClassName.sCollapsed);this.fireEvent("expand",{element:elChildNode})}return this},collapseNode:function(elNode,bChildAll){if(!this.fireEvent("beforeCollapse",{element:elNode})){return}var htPart=this.getPartsOfNode(elNode);var aChildren=[];if(jindo.$$.test(htPart.elItem,"."+this.htClassName.sHasChild)){aChildren.push(elNode)}if(bChildAll){aChildren=aChildren.concat(jindo.$$("."+this.htClassName.sHasChild,elNode))}for(var i=0,elChild;(elChild=aChildren[i]);i++){var elChildNode=this.getNode(elChild);jindo.$Element(elChildNode).addClass(this.htClassName.sCollapsed);this.fireEvent("collapse",{element:elChildNode})}return this},selectNode:function(elNode){var htPart=this.getPartsOfNode(elNode);var elSelectedNode=this.getSelectedNode();var elItem=htPart.elItem;if(!this.fireEvent("beforeSelect",{element:elNode})){return false}if(elSelectedNode!=elNode){this.deselectNode();jindo.$Element(elItem).addClass(this.htClassName.sSelected);this._setSelectedNode(elNode)}this.fireEvent("select",{element:elNode});if(this.option("bExpandOnSelect")&&elSelectedNode!=elNode&&this.isCollapsed(elNode)){var self=this;this._bExpandOnSelect=true;setTimeout(function(){self._bExpandOnSelect=false},500);this.expandNode(elNode)}return true},deselectNode:function(){var elSelectedNode=this.getSelectedNode();if(elSelectedNode){jindo.$Element(this.getPartsOfNode(elSelectedNode).elItem).removeClass(this.htClassName.sSelected)}this._setSelectedNode(null);return this},_createChild:function(elNode){var elChild=this.getChildListOfNode(elNode);if(!elChild){elChild=jindo.$("<ul>");elNode.appendChild(elChild)}try{return elChild}finally{elChild=null}},removeNode:function(elNode){if(!elNode||elNode===this.getRootNode()){this.clearNode(elNode);return this}var elParentNode=this.getParentNode(elNode);this._clearNodeData(elNode);elNode.parentNode.removeChild(elNode);this.selectNode(elParentNode);this._paintNode(elParentNode);return this},clearNode:function(elNode){var elChild=this.getChildListOfNode(elNode);if(elChild){var aChildLi=elChild.getElementsByTagName("li");for(var i=0,elChildLi;(elChildLi=aChildLi[i]);i++){this._clearNodeData(elChildLi)}elChild.parentNode.removeChild(elChild);this._paintNode(elNode);return true}return false},clearTree:function(){this.clearNode(this.getRootNode());return this},_moveNodes:function(elTargetNode,aNodes,fCallback){for(var i=0,elNode;(elNode=aNodes[i]);i++){fCallback(elNode)}},appendNode:function(elTargetNode,aNodes){if(!(aNodes instanceof Array)){return arguments.callee.call(this,elTargetNode,[aNodes])}var self=this;var elChild=this._createChild(elTargetNode);this._moveNodes(elTargetNode,aNodes,function(elNode){var elParentNode=null;elParentNode=self.getParentNode(elNode);elChild.appendChild(elNode);if(elParentNode){self.paintNode(elParentNode,false);jindo.$A(self.getChildNodes(elParentNode)).forEach(function(elChildNode){self.paintNode(elChildNode,false)})}});this.paintNode(elTargetNode,false);jindo.$A(this.getChildNodes(elTargetNode)).forEach(function(elChildNode){self.paintNode(elChildNode,false)});return this},insertNodeBefore:function(elTargetNode,aNodes){if(elTargetNode==this.getRootNode()){return}if(!(aNodes instanceof Array)){return arguments.callee.call(this,elTargetNode,[aNodes])}var self=this;var elChildList=elTargetNode.parentNode;this._moveNodes(elTargetNode,aNodes,function(elNode){var elParentNode=null;elParentNode=self.getNode(elChildList);elChildList.insertBefore(elNode,elTargetNode);if(elParentNode){jindo.$A(self.getChildNodes(elParentNode)).forEach(function(elChildNode){self.paintNode(elChildNode,false)})}});return this},insertNodeAfter:function(elTargetNode,aNodes){if(elTargetNode==this.getRootNode()){return}if(!(aNodes instanceof Array)){return arguments.callee.call(this,elTargetNode,[aNodes])}var self=this;var elChildList=elTargetNode.parentNode;var elNextNode=elTargetNode;this._moveNodes(elTargetNode,aNodes,function(elNode){var elParentNode=null;elParentNode=self.getNode(elChildList);elChildList.insertBefore(elNode,elNextNode.nextSibling);elNextNode=elNode;if(elParentNode){jindo.$A(self.getChildNodes(elParentNode)).forEach(function(elChildNode){self.paintNode(elChildNode,false)})}});return this},_getCode:function(aData){if(aData instanceof Array){var aCodes=[];var sTemplate=this.getNodeTemplate();for(var i=0;i<aData.length;i++){var htData=aData[i];var htParam={sTemplate:sTemplate,htData:htData};this.fireEvent("beforeProcessData",htParam);var htProcess={sNodeClass:this.htClassName.sNode,bLastNode:(i==aData.length-1)?true:false,sLastNodeClass:this.htClassName.sLastNode,bHasChild:(typeof htData._aChildren!="undefined"&&htData._aChildren.length>0)?true:false,sHasChildClass:this.htClassName.sHasChild,sCollapsedClass:this.htClassName.sCollapsed,sButtonClass:this.htClassName.sButton,sLabelClass:this.htClassName.sLabel,sText:htData.sLabel};var sCode=jindo.$Template(htParam.sTemplate).process(htProcess);sCode=this._getChildCode(htData._aChildren,sCode);aCodes.push(sCode)}return aCodes.join("\n")}},_getChildCode:function(elChild,sCode){var sChild=elChild?this._getCode(elChild):"";if(sChild){var bChanged=false;sCode=sCode.replace(/(<ul(\s[^>]*)*>)(<\/ul>)/i,function(_,sBegin,__,sClose){bChanged=true;return sBegin+sChild+sClose});if(!bChanged){sCode=sCode.replace(/<\/li>/i,function(_){return"\n<ul>"+sChild+"</ul>\n"+_})}}return sCode},_setData:function(elChildListOfParentNode,aDatas){var aNodes=jindo.$$("> ."+this.htClassName.sNode,elChildListOfParentNode);for(var i=0;i<aNodes.length;i++){var elNode=aNodes[i];var htNodeData=aDatas[i];var sKey=this._makeNodeDataKey(elNode);this._htNodeData[sKey]=aDatas[i];if(typeof htNodeData._aChildren!="undefined"){this._setData(this.getChildListOfNode(elNode),htNodeData._aChildren)}}},createNode:function(aDatas){var elDummy=jindo.$("<ul>");elDummy.innerHTML=this._getCode(aDatas);var aNodes=jindo.$$("> ."+this.htClassName.sNode,elDummy);this._setData(elDummy,aDatas);return aNodes},getNodeRawData:function(elNode){return this.getNodeData(elNode)},getSelectCount:function(){return this}}).extend(jindo.UIComponent);jindo.TextRange=jindo.$Class({$init:function(el,htOption){this.option({bActivateOnload:true});this.option(htOption||{});this._el=jindo.$(el);this._bFocused=false;this._wfFocus=jindo.$Fn(function(){this._bFocused=true},this);this._wfBlur=jindo.$Fn(function(){this._bFocused=false},this);if(this.option("bActivateOnload")){this.activate()}},_onActivate:function(){this._wfFocus.attach(this._el,"focus").attach(this._el,"keydown");this._wfBlur.attach(this._el,"blur")},_onDeactivate:function(){this._wfFocus.detach(this._el,"focus").detach(this._el,"keydown");this._wfBlur.detach(this._el,"blur")},hasFocus:function(){return this._bFocused},getSelection:function(){var el=this._el;if(!this._bFocused){this._el.focus()}var aSelection=[-1,-1];if(isNaN(this._el.selectionStart)){var oRange=document.selection.createRange().duplicate(),nLength=el.value.length,nRangeLength=oRange.text.length;for(var i=0;i<nLength;i++){if(oRange.parentElement()!==el){break}oRange.moveStart("character",-1)}aSelection[1]=oRange.text.length;aSelection[0]=aSelection[1]-nRangeLength}else{aSelection[0]=el.selectionStart;aSelection[1]=el.selectionEnd}this.setSelection(aSelection[0],aSelection[1]);return aSelection},setSelection:function(nStart,nEnd){var el=this._el;if(typeof nEnd=="undefined"){nEnd=nStart}if(el.setSelectionRange){el.setSelectionRange(nStart,nEnd)}else{if(el.createTextRange){var oRange=el.createTextRange();oRange.collapse(true);oRange.moveStart("character",nStart);oRange.moveEnd("character",nEnd-nStart);oRange.select()}}},copy:function(){if(!this._bFocused){this._el.focus()}var aSelection=this.getSelection();return this._el.value.substring(aSelection[0],aSelection[1])},paste:function(sStr){if(!this._bFocused){this._el.focus()}var el=this._el,aSelection=this.getSelection(),sValue=el.value,sPre=sValue.substr(0,aSelection[0]),sPost=sValue.substr(aSelection[1]);sValue=sPre+sStr+sPost;el.value=sValue;this.setSelection(aSelection[0]+sStr.length)},cut:function(){var s=this.copy();this.paste("");return s}}).extend(jindo.UIComponent);jindo.WatchInput=jindo.$Class({_bTimerRunning:false,_bFocused:false,_sPrevValue:"",$init:function(sInputId,htOption){var htDefaultOption={nInterval:100,bUseTimerOnIE:false,sKeyEvent:"keyup",bPermanent:false,bActivateOnload:true};this.option(htDefaultOption);this.option(htOption||{});this._elInput=jindo.$(sInputId);this._oTimer=new jindo.Timer();this._bIE=jindo.$Agent().navigator().ie;this._wfFocus=jindo.$Fn(this._onFocus,this);this._wfBlur=jindo.$Fn(this._onBlur,this);this._wfKeyEvent=jindo.$Fn(this._onKeyEvent,this);this._wfStartTimer=jindo.$Fn(this._startTimer,this);this._wfStopTimer=jindo.$Fn(this._stopTimer,this);if(this.option("bActivateOnload")){this.activate(true)}},getInput:function(){return this._elInput},setInputValue:function(s){this.getInput().value=s;this.setCompareValue(s);return this},getCompareValue:function(){return this._sPrevValue},setCompareValue:function(s){this._sPrevValue=s;return this},fireChangeEvent:function(){var elInput=this.getInput(),sValue=elInput.value;this.setCompareValue(sValue);this.fireEvent("change",{elInput:elInput,sText:sValue});return this},start:function(bCompareOnce){return this.activate(bCompareOnce||false)},stop:function(){return this.deactivate()},_onActivate:function(bCompareOnce){this.setCompareValue("");var elInput=this.getInput();this._wfFocus.attach(elInput,"focus");if(this._bIE&&!this.option("bUseTimerOnIE")){this.fireEvent("start");this._wfKeyEvent.attach(elInput,this.option("sKeyEvent"))}else{if(this._isTimerRunning()){return}this.fireEvent("start");if(this.option("bPermanent")){this._startTimer()}else{this._wfStartTimer.attach(elInput,"focus");this._wfStopTimer.attach(elInput,"blur")}}this._wfBlur.attach(elInput,"blur");if(bCompareOnce||false){this.compare()}},_onDeactivate:function(){var elInput=this.getInput();this._wfFocus.detach(elInput,"focus");this._wfKeyEvent.detach(elInput,this.option("sKeyEvent"));this._stopTimer();this._wfStartTimer.detach(elInput,"focus");this._wfStopTimer.detach(elInput,"blur");this._wfBlur.detach(elInput,"blur");this.fireEvent("stop")},getInterval:function(){return this.option("nInterval")},setInterval:function(n){this.option("nInterval",n);return this},_isTimerRunning:function(){return this._bTimerRunning},_startTimer:function(){if(this._isTimerRunning()){return}this._bTimerRunning=true;this.fireEvent("timerStart");this.compare();var self=this;this._oTimer.start(function(){self.compare();return true},this.getInterval())},_stopTimer:function(){if(this._isTimerRunning()){this._oTimer.abort();this._bTimerRunning=false;this.compare();this.fireEvent("timerStop")}},_onKeyEvent:function(){this.compare()},_onFocus:function(){this._bFocused=true;this.fireEvent("focus")},_onBlur:function(){this._bFocused=false;this.fireEvent("blur")},compare:function(){if(this.getInput().value!=this.getCompareValue()){this.fireChangeEvent()}return this}}).extend(jindo.UIComponent);jindo.Timer=jindo.$Class({$init:function(){this._nTimer=null;this._nLatest=null;this._nRemained=0;this._nDelay=null;this._fRun=null;this._bIsRunning=false},start:function(fRun,nDelay){this.abort();this._nRemained=0;this._nDelay=nDelay;this._fRun=fRun;this._bIsRunning=true;this._nLatest=this._getTime();this.fireEvent("wait");this._excute(this._nDelay,false);return true},isRunning:function(){return this._bIsRunning},_getTime:function(){return new Date().getTime()},_clearTimer:function(){var bFlag=false;if(this._nTimer){clearInterval(this._nTimer);this._bIsRunning=false;bFlag=true}this._nTimer=null;return bFlag},abort:function(){var bReturn=this._clearTimer();if(bReturn){this.fireEvent("abort");this._fRun=null}return bReturn},pause:function(){var nPassed=this._getTime()-this._nLatest;this._nRemained=Math.max(this._nDelay-nPassed,0);return this._clearTimer()},_excute:function(nDelay,bResetDelay){var self=this;this._clearTimer();this._bIsRunning=true;this._nTimer=setInterval(function(){if(self._nTimer){self.fireEvent("run");var r=self._fRun();self._nLatest=self._getTime();if(!r){clearInterval(self._nTimer);self._nTimer=null;self._bIsRunning=false;self.fireEvent("end");return}self.fireEvent("wait");if(bResetDelay){self._excute(self._nDelay,false)}}},nDelay)},resume:function(){if(!this._fRun||this.isRunning()){return false}this._bIsRunning=true;this.fireEvent("wait");this._excute(this._nRemained,true);this._nRemained=0;return true}}).extend(jindo.Component);jindo.LayerPosition=jindo.$Class({$init:function(el,elLayer,htOption){this.option({sPosition:"outside-bottom",sAlign:"left",sValign:"",nTop:0,nLeft:0,bAuto:false});this.option(htOption||{});this.setElement(el);if(elLayer){this.setLayer(elLayer)}if(el&&elLayer){this.setPosition()}this._wfSetPosition=jindo.$Fn(function(){var el=this._elLayer;if(el&&this._welLayer.visible()){if(this.fireEvent("beforeAdjust",{elLayer:el,htCurrentPosition:this.getCurrentPosition(),htAdjustedPosition:this._adjustPosition(this.getCurrentPosition())})){this.setPosition();this.fireEvent("adjust",{elLayer:el,htCurrentPosition:this.getCurrentPosition()})}}},this);if(this.option("bAuto")){this._wfSetPosition.attach(window,"scroll").attach(window,"resize")}},getElement:function(){return this._el},setElement:function(el){this._el=jindo.$(el);this._wel=jindo.$Element(el);return this},getLayer:function(){return this._elLayer},setLayer:function(elLayer){this._elLayer=jindo.$(elLayer);this._welLayer=jindo.$Element(elLayer);document.body.appendChild(this._elLayer);return this},_isPosition:function(htOption,sWord){if(htOption.sPosition.indexOf(sWord)>-1){return true}return false},_setLeftRight:function(htOption,htPosition){var el=this.getElement(),elLayer=this.getLayer(),nWidth=el.offsetWidth,nLayerWidth=elLayer.offsetWidth;if(el==document.body){nWidth=jindo.$Document().clientSize().width}var bLeft=this._isPosition(htOption,"left"),bRight=this._isPosition(htOption,"right"),bInside=this._isPosition(htOption,"inside");if(bLeft){if(bInside){htPosition.nLeft+=htOption.nLeft}else{htPosition.nLeft-=nLayerWidth;htPosition.nLeft-=htOption.nLeft}}else{if(bRight){htPosition.nLeft+=nWidth;if(bInside){htPosition.nLeft-=nLayerWidth;htPosition.nLeft-=htOption.nLeft}else{htPosition.nLeft+=htOption.nLeft}}else{if(htOption.sAlign=="left"){htPosition.nLeft+=htOption.nLeft}if(htOption.sAlign=="center"){htPosition.nLeft+=(nWidth-nLayerWidth)/2}if(htOption.sAlign=="right"){htPosition.nLeft+=nWidth-nLayerWidth;htPosition.nLeft-=htOption.nLeft}}}return htPosition},_setVerticalAlign:function(htOption,htPosition){var el=this.getElement(),elLayer=this.getLayer(),nHeight=el.offsetHeight,nLayerHeight=elLayer.offsetHeight;if(el==document.body){nHeight=jindo.$Document().clientSize().height}switch(htOption.sValign){case"top":htPosition.nTop+=htOption.nTop;break;case"middle":htPosition.nTop+=(nHeight-nLayerHeight)/2;break;case"bottom":htPosition.nTop+=nHeight-nLayerHeight-htOption.nTop;break}return htPosition},_adjustScrollPosition:function(htPosition){if(this.getElement()==document.body){var htScrollPosition=jindo.$Document().scrollPosition();htPosition.nTop+=htScrollPosition.top;htPosition.nLeft+=htScrollPosition.left}return htPosition},getPosition:function(htOption){if(typeof htOption!="object"){htOption=this.option()}if(typeof htOption.nTop=="undefined"){htOption.nTop=0}if(typeof htOption.nLeft=="undefined"){htOption.nLeft=0}var sArea,bCenter=this._isPosition(htOption,"center"),bInside=this._isPosition(htOption,"inside"),bTop=this._isPosition(htOption,"top"),bBottom=this._isPosition(htOption,"bottom"),bLeft=this._isPosition(htOption,"left"),bRight=this._isPosition(htOption,"right");if(bLeft){sArea="left"}if(bRight){sArea="right"}if(bTop){sArea="top"}if(bBottom){sArea="bottom"}if(bCenter){sArea="center"}var el=this.getElement(),wel=jindo.$Element(el),elLayer=this.getLayer(),welLayer=jindo.$Element(elLayer),htElementPosition=wel.offset(),nWidth=el.offsetWidth,nHeight=el.offsetHeight,oClientSize,nLayerWidth=elLayer.offsetWidth,nLayerHeight=elLayer.offsetHeight,htPosition={nTop:htElementPosition.top,nLeft:htElementPosition.left};if(el==document.body){oClientSize=jindo.$Document().clientSize();nWidth=oClientSize.width;nHeight=oClientSize.height}nLayerWidth+=parseInt(welLayer.css("marginLeft"))+parseInt(welLayer.css("marginRight"))||0;nLayerHeight+=parseInt(welLayer.css("marginTop"))+parseInt(welLayer.css("marginBottom"))||0;switch(sArea){case"center":htPosition.nTop+=(nHeight-nLayerHeight)/2;htPosition.nTop+=htOption.nTop;htPosition.nLeft+=(nWidth-nLayerWidth)/2;htPosition.nLeft+=htOption.nLeft;break;case"top":if(bInside){htPosition.nTop+=htOption.nTop}else{htPosition.nTop-=htOption.nTop+nLayerHeight}htPosition=this._setLeftRight(htOption,htPosition);break;case"bottom":htPosition.nTop+=nHeight;if(bInside){htPosition.nTop-=htOption.nTop+nLayerHeight}else{htPosition.nTop+=htOption.nTop}htPosition=this._setLeftRight(htOption,htPosition);break;case"left":if(bInside){htPosition.nLeft+=htOption.nLeft}else{htPosition.nLeft-=htOption.nLeft+nLayerWidth}htPosition=this._setVerticalAlign(htOption,htPosition);break;case"right":htPosition.nLeft+=nWidth;if(bInside){htPosition.nLeft-=htOption.nLeft+nLayerWidth}else{htPosition.nLeft+=htOption.nLeft}htPosition=this._setVerticalAlign(htOption,htPosition);break}htPosition=this._adjustScrollPosition(htPosition);return htPosition},setPosition:function(htPosition){var welLayer=jindo.$Element(this.getLayer());welLayer.css("left","-9999px").css("top","0px");if(typeof htPosition=="undefined"){htPosition=this.getPosition()}if(this.option("bAuto")){htPosition=this._adjustPosition(htPosition)}welLayer.css("left",htPosition.nLeft+"px").css("top",htPosition.nTop+"px");return this},getCurrentPosition:function(){var welLayer=jindo.$Element(this.getLayer());return{nTop:parseInt(welLayer.css("top")),nLeft:parseInt(welLayer.css("left"))}},_isFullyVisible:function(htPosition){var elLayer=this.getLayer(),welLayer=jindo.$Element(elLayer),oScrollPosition=jindo.$Document().scrollPosition(),nScrollTop=oScrollPosition.top,nScrollLeft=oScrollPosition.left,oClientSize=jindo.$Document().clientSize(),nLayerWidth=elLayer.offsetWidth+(parseInt(welLayer.css("marginLeft"))+parseInt(welLayer.css("marginRight"))||0),nLayerHeight=elLayer.offsetHeight+(parseInt(welLayer.css("marginTop"))+parseInt(welLayer.css("marginBottom"))||0);if(htPosition.nLeft>=0&&htPosition.nTop>=0&&oClientSize.width>=htPosition.nLeft-nScrollLeft+nLayerWidth&&oClientSize.height>=htPosition.nTop-nScrollTop+nLayerHeight){return true}return false},_mirrorHorizontal:function(htOption){if(htOption.sAlign=="center"||htOption.sPosition=="inside-center"){return htOption}var htConvertedOption={};for(var i in htOption){htConvertedOption[i]=htOption[i]}if(this._isPosition(htConvertedOption,"right")){htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/right/,"left")}else{if(this._isPosition(htConvertedOption,"left")){htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/left/,"right")}else{if(htConvertedOption.sAlign=="right"){htConvertedOption.sAlign="left"}else{if(htConvertedOption.sAlign=="left"){htConvertedOption.sAlign="right"}}}}return htConvertedOption},_mirrorVertical:function(htOption){if(htOption.sValign=="middle"||htOption.sPosition=="inside-center"){return htOption}var htConvertedOption={};for(var i in htOption){htConvertedOption[i]=htOption[i]}if(this._isPosition(htConvertedOption,"top")){htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/top/,"bottom")}else{if(this._isPosition(htConvertedOption,"bottom")){htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/bottom/,"top")}else{if(htConvertedOption.sValign=="top"){htConvertedOption.sValign="bottom"}else{if(htConvertedOption.sValign=="bottom"){htConvertedOption.sValign="top"}}}}return htConvertedOption},_adjustPosition:function(htPosition){var htOption=this.option(),aCandidatePosition=[];aCandidatePosition.push(htPosition);aCandidatePosition.push(this.getPosition(this._mirrorHorizontal(htOption)));aCandidatePosition.push(this.getPosition(this._mirrorVertical(htOption)));aCandidatePosition.push(this.getPosition(this._mirrorVertical(this._mirrorHorizontal(htOption))));for(var i=0,htCandidatePosition;htCandidatePosition=aCandidatePosition[i];i++){if(this._isFullyVisible(htCandidatePosition)){htPosition=htCandidatePosition;break}}return htPosition}}).extend(jindo.Component);jindo.Foggy=jindo.$Class({_elFog:null,_bFogAppended:false,_oExcept:null,_bFogVisible:false,_oTransition:null,$init:function(htOption){this.option({sClassName:"fog",nShowDuration:200,nShowOpacity:0.5,nHideDuration:200,nHideOpacity:0,fShowEffect:jindo.Effect.linear,fHideEffect:jindo.Effect.linear,nFPS:15});this.option(htOption||{});this._elFog=jindo.$('<div class="'+this.option("sClassName")+'">');this._welFog=jindo.$Element(this._elFog);document.body.insertBefore(this._elFog,document.body.firstChild);this._welFog.opacity(this.option("nHideOpacity"));this._welFog.hide();this._oExcept={};this._oTransition=new jindo.Transition().fps(this.option("nFPS"));this._fOnResize=jindo.$Fn(this._fitFogToDocument,this);this._fOnScroll=jindo.$Fn(this._fitFogToDocumentScrollSize,this)},_getScroll:function(wDocument){return{top:window.pageYOffset||document[wDocument._docKey].scrollTop,left:window.pageXOffset||document[wDocument._docKey].scrollLeft}},_fitFogToDocument:function(){var wDocument=jindo.$Document();this._elFog.style.left=this._getScroll(wDocument).left+"px";this._elFog.style.width="100%";var self=this;clearTimeout(this._nTimer);this._nTimer=null;this._nTimer=setTimeout(function(){var oSize=wDocument.clientSize();self._elFog.style.top=self._getScroll(wDocument).top+"px";self._elFog.style.height=oSize.height+"px";self._elFog.style.left=self._getScroll(wDocument).left+"px"},100)},_fitFogToDocumentScrollSize:function(){var oSize=jindo.$Document().scrollSize();this._elFog.style.left="0";this._elFog.style.top="0";this._elFog.style.width=oSize.width+"px";this._elFog.style.height=oSize.height+"px"},getFog:function(){return this._elFog},isShown:function(){return this._bFogVisible},show:function(elExcept){if(!this._bFogVisible){if(this.fireEvent("beforeShow")){if(elExcept){this._oExcept.element=elExcept;var sPosition=jindo.$Element(elExcept).css("position");if(sPosition=="static"){elExcept.style.position="relative"}this._oExcept.position=elExcept.style.position;this._oExcept.zIndex=elExcept.style.zIndex;elExcept.style.zIndex=32001}this._elFog.style.zIndex=32000;this._elFog.style.display="none";this._fitFogToDocument();this._fOnResize.attach(window,"resize");this._fOnScroll.attach(window,"scroll");this._elFog.style.display="block";var self=this;this._oTransition.abort().start(this.option("nShowDuration"),this._elFog,{"@opacity":this.option("fShowEffect")(this.option("nShowOpacity"))}).start(function(){self._bFogVisible=true;self.fireEvent("show")})}}},hide:function(){if(this._bFogVisible){if(this.fireEvent("beforeHide")){var self=this;this._oTransition.abort().start(this.option("nHideDuration"),this._elFog,{"@opacity":this.option("fHideEffect")(this.option("nHideOpacity"))}).start(function(){self._elFog.style.display="none";var elExcept=self._oExcept.element;if(elExcept){elExcept.style.position=self._oExcept.position;elExcept.style.zIndex=self._oExcept.zIndex}self._oExcept={};self._fOnResize.detach(window,"resize");self._fOnScroll.detach(window,"scroll");self._bFogVisible=false;self.fireEvent("hide")})}}}}).extend(jindo.Component);jindo.Effect=function(fEffect){if(this instanceof arguments.callee){throw new Error("You can't create a instance of this")}var rxNumber=/^(\-?[0-9\.]+)(%|px|pt|em)?$/;var rxRGB=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i;var rxHex=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;var rx3to6=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i;var getUnitAndValue=function(v){var nValue=v,sUnit;if(rxNumber.test(v)){nValue=parseFloat(v);sUnit=RegExp.$2||""}else{if(rxRGB.test(v)){nValue=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)];sUnit="color"}else{if(rxHex.test(v=v.replace(rx3to6,"#$1$1$2$2$3$3"))){nValue=[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)];sUnit="color"}}}return{nValue:nValue,sUnit:sUnit}};return function(nStart,nEnd){var sUnit;if(arguments.length>1){nStart=getUnitAndValue(nStart);nEnd=getUnitAndValue(nEnd);sUnit=nEnd.sUnit}else{nEnd=getUnitAndValue(nStart);nStart=null;sUnit=nEnd.sUnit}if(nStart&&nEnd&&nStart.sUnit!=nEnd.sUnit){throw new Error("unit error")}nStart=nStart&&nStart.nValue;nEnd=nEnd&&nEnd.nValue;var fReturn=function(p){var nValue=fEffect(p);var getResult=function(s,d){return(d-s)*nValue+s+sUnit};if(sUnit=="color"){var r=parseInt(getResult(nStart[0],nEnd[0]),10)<<16;r|=parseInt(getResult(nStart[1],nEnd[1]),10)<<8;r|=parseInt(getResult(nStart[2],nEnd[2]),10);r=r.toString(16).toUpperCase();for(var i=0;6-r.length;i++){r="0"+r}return"#"+r}return getResult(nStart,nEnd)};if(nStart===null){fReturn.setStart=function(s){s=getUnitAndValue(s);if(s.sUnit!=sUnit){throw new Error("unit eror")}nStart=s.nValue}}return fReturn}};jindo.Effect.linear=jindo.Effect(function(s){return s});jindo.Effect.easeIn=jindo.Effect(function(s){return(1-Math.sqrt(1-(s*s)))});jindo.Effect.easeOut=jindo.Effect(function(s){return Math.sqrt((2-s)*s)});jindo.Effect.bounce=jindo.Effect(function(s){if(s<(1/2.75)){return(7.5625*s*s)}else{if(s<(2/2.75)){return(7.5625*(s-=(1.5/2.75))*s+0.75)}else{if(s<(2.5/2.75)){return(7.5625*(s-=(2.25/2.75))*s+0.9375)}else{return(7.5625*(s-=(2.625/2.75))*s+0.984375)}}}});jindo.Effect._cubicBezier=function(x1,y1,x2,y2){return function(s){var cx=3*x1,bx=3*(x2-x1)-cx,ax=1-cx-bx,cy=3*y1,by=3*(y2-y1)-cy,ay=1-cy-by;function sampleCurveX(s){return((ax*s+bx)*s+cx)*s}function sampleCurveY(s){return((ay*s+by)*s+cy)*s}function solveCurveX(x,epsilon){var t0=0,t1=1,t2=x,x2,d2;for(var i=0;i<8;i++){x2=sampleCurveX(t2)-x;if(Math.abs(x2)<epsilon){return t2}d2=(3*ax*t2+2*bx)*t2+cx;if(Math.abs(d2)<0.000001){break}t2=t2-x2/d2}if(t2<t0){return t0}if(t2>t1){return t1}while(t0<t1){x2=sampleCurveX(t2);if(Math.abs(x2-x)<epsilon){return t2}if(x>x2){t0=t2}else{t1=t2}t2=(t1-t0)*0.5+t0}return t2}return sampleCurveY(solveCurveX(s,(1/1000)))}};jindo.Effect.cubicBezier=function(x1,y1,x2,y2){return jindo.Effect(jindo.Effect._cubicBezier(x1,y1,x2,y2))};jindo.Effect.overphase=jindo.Effect.cubicBezier(0.25,0.75,0.8,1.3);jindo.Effect.easeInOut=jindo.Effect.cubicBezier(0.75,0,0.25,1);jindo.Effect.easeOutIn=jindo.Effect.cubicBezier(0.25,0.75,0.75,0.25);jindo.Effect.cubicEase=jindo.Effect.cubicBezier(0.25,0.1,0.25,1);jindo.Effect.cubicEaseIn=jindo.Effect.cubicBezier(0.42,0,1,1);jindo.Effect.cubicEaseOut=jindo.Effect.cubicBezier(0,0,0.58,1);jindo.Effect.cubicEaseInOut=jindo.Effect.cubicBezier(0.42,0,0.58,1);jindo.Effect.cubicEaseOutIn=jindo.Effect.cubicBezier(0,0.42,1,0.58);jindo.Effect.pulse=function(nPulse){return jindo.Effect(function(s){return(-Math.cos((s*(nPulse-0.5)*2)*Math.PI)/2)+0.5})};jindo.Transition=jindo.$Class({_nFPS:30,_aTaskQueue:null,_oTimer:null,_bIsWaiting:true,_bIsPlaying:false,$init:function(htOption){this._aTaskQueue=[];this._oTimer=new jindo.Timer();this.option({fEffect:jindo.Effect.linear,bCorrection:false});this.option(htOption||{})},fps:function(nFPS){if(arguments.length>0){this._nFPS=nFPS;return this}return this._nFPS},isPlaying:function(){return this._bIsPlaying},abort:function(){this._aTaskQueue=[];this._oTimer.abort();if(this._bIsPlaying){this.fireEvent("abort")}this._bIsWaiting=true;this._bIsPlaying=false;this._htTaskToDo=null;return this},start:function(nDuration,elTarget,htInfo){if(arguments.length>0){this.queue.apply(this,arguments)}this._prepareNextTask();return this},queue:function(nDuration,aCommand){var htTask;if(typeof arguments[0]=="function"){htTask={sType:"function",fTask:arguments[0]}}else{var a=[];var nLength=arguments.length;if(arguments[1] instanceof Array){a=arguments[1]}else{var aInner=[];$A(arguments).forEach(function(v,i){if(i>0){aInner.push(v);if(i%2==0){a.push(aInner.concat());aInner=[]}}})}htTask={sType:"task",nDuration:nDuration,aList:[]};for(var i=0;i<a.length;i++){var aValue=[];var htArg=a[i][1];var sEnd;for(var sKey in htArg){sEnd=htArg[sKey];if(/^(@|style\.)(\w+)/i.test(sKey)){aValue.push(["style",RegExp.$2,sEnd])}else{aValue.push(["attr",sKey,sEnd])}}htTask.aList.push({elTarget:a[i][0],aValue:aValue})}}this._queueTask(htTask);return this},pause:function(){if(this._oTimer.abort()){this.fireEvent("pause")}return this},resume:function(){if(this._htTaskToDo){if(this._bIsWaiting===false&&this._bIsPlaying===true){this.fireEvent("resume")}this._doTask();this._bIsWaiting=false;this._bIsPlaying=true;var self=this;this._oTimer.start(function(){var bEnd=!self._doTask();if(bEnd){self._bIsWaiting=true;setTimeout(function(){self._prepareNextTask()},0)}return !bEnd},this._htTaskToDo.nInterval)}return this},precede:function(nDuration,elTarget,htInfo){this.start.apply(this,arguments);return this},sleep:function(nDuration,fCallback){if(typeof fCallback=="undefined"){fCallback=function(){}}this._queueTask({sType:"sleep",nDuration:nDuration,fCallback:fCallback});this._prepareNextTask();return this},_queueTask:function(v){this._aTaskQueue.push(v)},_dequeueTask:function(){var htTask=this._aTaskQueue.shift();if(htTask){if(htTask.sType=="task"){var aList=htTask.aList;for(var i=0,nLength=aList.length;i<nLength;i++){var elTarget=aList[i].elTarget;for(var j=0,aValue=aList[i].aValue,nJLen=aValue.length;j<nJLen;j++){var sType=aValue[j][0];var fFunc=aValue[j][2];if(typeof fFunc!="function"){if(fFunc instanceof Array){fFunc=this.option("fEffect")(fFunc[0],fFunc[1])}else{fFunc=this.option("fEffect")(fFunc)}}if(fFunc.setStart){if(this._isHTMLElement(elTarget)){var welTarget=jindo.$Element(elTarget);switch(sType){case"style":fFunc.setStart(welTarget.css(aValue[j][1]));break;case"attr":fFunc.setStart(welTarget.$value()[aValue[j][1]]);break}}else{fFunc.setStart(elTarget.getter(aValue[j][1]))}}aValue[j][2]=fFunc}}}return htTask}else{return null}},_prepareNextTask:function(){if(this._bIsWaiting){var htTask=this._dequeueTask();if(htTask){switch(htTask.sType){case"task":if(!this._bIsPlaying){this.fireEvent("start")}var nInterval=1000/this._nFPS;var nGap=nInterval/htTask.nDuration;this._htTaskToDo={aList:htTask.aList,nRatio:0,nInterval:nInterval,nGap:nGap,nStep:0,nTotalStep:Math.ceil(htTask.nDuration/nInterval)};this.resume();break;case"function":if(!this._bIsPlaying){this.fireEvent("start")}htTask.fTask();this._prepareNextTask();break;case"sleep":if(this._bIsPlaying){this.fireEvent("sleep",{nDuration:htTask.nDuration});htTask.fCallback()}var self=this;setTimeout(function(){self.fireEvent("awake");self._prepareNextTask()},htTask.nDuration);break}}else{if(this._bIsPlaying){this._bIsPlaying=false;this.abort();this.fireEvent("end")}}}},_isHTMLElement:function(el){return("tagName" in el)},_doTask:function(){var htTaskToDo=this._htTaskToDo,nRatio=parseFloat(htTaskToDo.nRatio.toFixed(5),1),nStep=htTaskToDo.nStep,nTotalStep=htTaskToDo.nTotalStep,aList=htTaskToDo.aList,htCorrection={};var bCorrection=this.option("bCorrection");for(var i=0,nLength=aList.length;i<nLength;i++){var elTarget=aList[i].elTarget;for(var j=0,aValue=aList[i].aValue,nJLen=aValue.length;j<nJLen;j++){var sType=aValue[j][0],sKey=aValue[j][1],sValue=aValue[j][2](nRatio);if(this._isHTMLElement(elTarget)){var welTarget=jindo.$Element(elTarget);if(bCorrection){var sUnit=/^[0-9]*([^0-9]*)$/.test(sValue)&&RegExp.$1||"";if(sUnit){var nValue=parseFloat(sValue);var nFloor;nValue+=htCorrection[sKey]||0;nValue=parseFloat(nValue.toFixed(5));if(i==nLength-1){sValue=Math.round(nValue)+sUnit}else{nFloor=parseFloat(/(\.[0-9]+)$/.test(nValue)&&RegExp.$1||0);sValue=parseInt(nValue,10)+sUnit;htCorrection[sKey]=nFloor}}}switch(sType){case"style":welTarget.css(sKey,sValue);break;case"attr":welTarget.$value()[sKey]=sValue;break}}else{elTarget.setter(sKey,sValue)}if(this._bIsPlaying){this.fireEvent("playing",{element:elTarget,sKey:sKey,sValue:sValue,nStep:nStep,nTotalStep:nTotalStep})}}}htTaskToDo.nRatio=Math.min(htTaskToDo.nRatio+htTaskToDo.nGap,1);htTaskToDo.nStep+=1;return nRatio!=1}}).extend(jindo.Component);(function(){var b=jindo.$Element.prototype.css;jindo.$Element.prototype.css=function(k,v){if(k=="opacity"){return typeof v!="undefined"?this.opacity(parseFloat(v)):this.opacity()}else{return v!="undefined"?b.call(this,k,v):b.call(this,k)}}})();jindo.DragArea=jindo.$Class({$init:function(el,htOption){this.option({sClassName:"draggable",bFlowOut:true,bSetCapture:true,nThreshold:0});this.option(htOption||{});this._el=el;this._bIE=jindo.$Agent().navigator().ie;this._htDragInfo={bPrepare:false};this._bHandleDown=false;this._bIsDragging=false;this._wfOnMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfOnMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this);this._wfOnDragStart=jindo.$Fn(this._onDragStart,this);this._wfOnSelectStart=jindo.$Fn(this._onSelectStart,this);this.activate()},_findDraggableElement:function(el){if(jindo.$$.test(el,"input[type=text], textarea, select")){return null}var self=this;var sClass="."+this.option("sClassName");var isChildOfDragArea=function(el){if(el===null){return false}if(self._el===document||self._el===el){return true}return jindo.$Element(self._el).isParentOf(el)};var elReturn=jindo.$$.test(el,sClass)?el:jindo.$$.getSingle("! "+sClass,el);if(!isChildOfDragArea(elReturn)){elReturn=null}return elReturn},isDragging:function(){return this._bIsDragging&&!this._htDragInfo.bPrepare},stopDragging:function(){this._stopDragging(true);return this},_stopDragging:function(bInterupted){this._wfOnMouseMove.detach(document,"mousemove");this._wfOnMouseUp.detach(document,"mouseup");var htInfo=this._htDragInfo;if(this.isDragging()){var welDrag=jindo.$Element(htInfo.elDrag);this.fireEvent("dragEnd",{elArea:this._el,elHandle:htInfo.elHandle,elDrag:htInfo.elDrag,nX:parseInt(welDrag.css("left"),10)||0,nY:parseInt(welDrag.css("top"),10)||0,bInterupted:bInterupted})}this._bIsDragging=false;this._bForceDrag=false;htInfo.bPrepare=false;if(this._bIE&&this._elSetCapture){this._elSetCapture.releaseCapture();this._elSetCapture=null}},_onActivate:function(){this._wfOnMouseDown.attach(this._el,"mousedown");this._wfOnDragStart.attach(this._el,"dragstart");this._wfOnSelectStart.attach(this._el,"selectstart")},_onDeactivate:function(){this._wfOnMouseDown.detach(this._el,"mousedown");this._wfOnDragStart.detach(this._el,"dragstart");this._wfOnSelectStart.detach(this._el,"selectstart")},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},isEventAttached:function(){return this.isActivating()},startDragging:function(el){var el=this._findDraggableElement(el);if(el){this._bForceDrag=true;this._htDragInfo={bPrepare:true,elHandle:el,elDrag:el};this._wfOnMouseMove.attach(document,"mousemove");this._wfOnMouseUp.attach(document,"mouseup");return true}return false},_onMouseDown:function(we){if(!we.mouse().left||we.mouse().right){this._stopDragging(true);return}var el=this._findDraggableElement(we.element);if(el){var oPos=we.pos();this._htDragInfo={bPrepare:true,nButton:we._event.button,elHandle:el,elDrag:el,nPageX:oPos.pageX,nPageY:oPos.pageY};this._bHandleDown=true;if(this.fireEvent("handleDown",{elHandle:el,elDrag:el,weEvent:we})){this._wfOnMouseMove.attach(document,"mousemove")}this._wfOnMouseUp.attach(document,"mouseup");we.stop(jindo.$Event.CANCEL_DEFAULT)}},_onMouseMove:function(we){this._bIsDragging=true;var htInfo=this._htDragInfo,htParam,htRect,oPos=we.pos();if(htInfo.bPrepare){var nThreshold=this.option("nThreshold");var htDiff={};if(!this._bForceDrag&&nThreshold){htDiff.nPageX=oPos.pageX-htInfo.nPageX;htDiff.nPageY=oPos.pageY-htInfo.nPageY;var nDistance=Math.sqrt(htDiff.nPageX*htDiff.nPageX+htDiff.nPageY*htDiff.nPageY);if(nThreshold>nDistance){return}}if(this._bIE&&this.option("bSetCapture")){this._elSetCapture=(this._el===document)?document.body:this._findDraggableElement(we.element);if(this._elSetCapture){this._elSetCapture.setCapture(false)}}htParam={elArea:this._el,elHandle:htInfo.elHandle,elDrag:htInfo.elDrag,htDiff:htDiff,weEvent:we};if(this.fireEvent("dragStart",htParam)){var welDrag=jindo.$Element(htParam.elDrag);htInfo.bPrepare=false;htInfo.elHandle=htParam.elHandle;htInfo.elDrag=htParam.elDrag;htInfo.nX=parseInt(welDrag.css("left"),10)||0;htInfo.nY=parseInt(welDrag.css("top"),10)||0;var htOffset=welDrag.offset();htInfo.nClientX=htOffset.left+welDrag.width()/2;htInfo.nClientY=htOffset.top+welDrag.height()/2}else{this._bIsDragging=false;return}}var htGap={nX:oPos.pageX-htInfo.nPageX,nY:oPos.pageY-htInfo.nPageY};if(this._bForceDrag){htGap.nX=oPos.clientX-htInfo.nClientX;htGap.nY=oPos.clientY-htInfo.nClientY}htParam={elArea:this._el,elFlowOut:htInfo.elDrag.parentNode,elHandle:htInfo.elHandle,elDrag:htInfo.elDrag,weEvent:we,nX:htInfo.nX+htGap.nX,nY:htInfo.nY+htGap.nY,nGapX:htGap.nX,nGapY:htGap.nY};if(this.fireEvent("beforeDrag",htParam)){var elDrag=htInfo.elDrag;if(this.option("bFlowOut")===false){var elParent=htParam.elFlowOut,aSize=[elDrag.offsetWidth,elDrag.offsetHeight],nScrollLeft=0,nScrollTop=0;if(elParent==document.body){elParent=null}if(elParent&&aSize[0]<=elParent.scrollWidth&&aSize[1]<=elParent.scrollHeight){htRect={nWidth:elParent.clientWidth,nHeight:elParent.clientHeight};nScrollLeft=elParent.scrollLeft;nScrollTop=elParent.scrollTop}else{var htClientSize=jindo.$Document().clientSize();htRect={nWidth:htClientSize.width,nHeight:htClientSize.height}}if(htParam.nX!==null){htParam.nX=Math.max(htParam.nX,nScrollLeft);htParam.nX=Math.min(htParam.nX,htRect.nWidth-aSize[0]+nScrollLeft)}if(htParam.nY!==null){htParam.nY=Math.max(htParam.nY,nScrollTop);htParam.nY=Math.min(htParam.nY,htRect.nHeight-aSize[1]+nScrollTop)}}if(htParam.nX!==null){elDrag.style.left=htParam.nX+"px"}if(htParam.nY!==null){elDrag.style.top=htParam.nY+"px"}this.fireEvent("drag",htParam)}},_onMouseUp:function(we){this._stopDragging(false);var htInfo=this._htDragInfo;if(this._bHandleDown){this._bHandleDown=false;this.fireEvent("handleUp",{weEvent:we,elHandle:htInfo.elHandle,elDrag:htInfo.elDrag})}},_onDragStart:function(we){if(this._findDraggableElement(we.element)){we.stop(jindo.$Event.CANCEL_DEFAULT)}},_onSelectStart:function(we){if(this._bIsDragging||this._findDraggableElement(we.element)){we.stop(jindo.$Event.CANCEL_DEFAULT)}}}).extend(jindo.UIComponent);jindo.RolloverArea=jindo.$Class({$init:function(el,htOption){this.option({sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:true,bActivateOnload:true,htStatus:{sOver:"over",sDown:"down"}});this.option(htOption||{});this._elArea=jindo.$(el);this._aOveredElements=[];this._aDownedElements=[];this._wfMouseOver=jindo.$Fn(this._onMouseOver,this);this._wfMouseOut=jindo.$Fn(this._onMouseOut,this);this._wfMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfMouseUp=jindo.$Fn(this._onMouseUp,this);if(this.option("bActivateOnload")){this.activate()}},_addOvered:function(el){this._aOveredElements.push(el)},_removeOvered:function(el){this._aOveredElements.splice(jindo.$A(this._aOveredElements).indexOf(el),1)},_addStatus:function(el,sStatus){jindo.$Element(el).addClass(this.option("sClassPrefix")+sStatus)},_removeStatus:function(el,sStatus){jindo.$Element(el).removeClass(this.option("sClassPrefix")+sStatus)},_isInnerElement:function(elParent,elChild){return elParent===elChild?true:jindo.$Element(elParent).isParentOf(elChild)},_onActivate:function(){this._wfMouseOver.attach(this._elArea,"mouseover");this._wfMouseOut.attach(this._elArea,"mouseout");if(this.option("bCheckMouseDown")){this._wfMouseDown.attach(this._elArea,"mousedown");this._wfMouseUp.attach(document,"mouseup")}},_onDeactivate:function(){this._wfMouseOver.detach(this._elArea,"mouseover");this._wfMouseOut.detach(this._elArea,"mouseout");this._wfMouseDown.detach(this._elArea,"mousedown");this._wfMouseUp.detach(document,"mouseup");this._aOveredElements.length=0;this._aDownedElements.length=0},_findRollover:function(el){var sClassName=this.option("sClassName");return jindo.$$.test(el,"."+sClassName)?el:jindo.$$.getSingle("! ."+sClassName,el)},_onMouseOver:function(we){var el=we.element,elRelated=we.relatedElement,htParam;for(;el=this._findRollover(el);el=el.parentNode){if(elRelated&&this._isInnerElement(el,elRelated)){continue}this._addOvered(el);htParam={element:el,htStatus:this.option("htStatus"),weEvent:we};if(this.fireEvent("over",htParam)){this._addStatus(htParam.element,htParam.htStatus.sOver)}}},_onMouseOut:function(we){var el=we.element,elRelated=we.relatedElement,htParam;for(;el=this._findRollover(el);el=el.parentNode){if(elRelated&&this._isInnerElement(el,elRelated)){continue}this._removeOvered(el);htParam={element:el,htStatus:this.option("htStatus"),weEvent:we};if(this.fireEvent("out",htParam)){this._removeStatus(htParam.element,htParam.htStatus.sOver)}}},_onMouseDown:function(we){var el=we.element,htParam;while(el=this._findRollover(el)){htParam={element:el,htStatus:this.option("htStatus"),weEvent:we};this._aDownedElements.push(el);if(this.fireEvent("down",htParam)){this._addStatus(htParam.element,htParam.htStatus.sDown)}el=el.parentNode}},_onMouseUp:function(we){var el=we.element,aTargetElementDatas=[],aDownedElements=this._aDownedElements,htParam,elMouseDown,i;for(i=0;elMouseDown=aDownedElements[i];i++){aTargetElementDatas.push({element:elMouseDown,htStatus:this.option("htStatus"),weEvent:we})}for(;el=this._findRollover(el);el=el.parentNode){if(jindo.$A(aDownedElements).indexOf(el)>-1){continue}aTargetElementDatas.push({element:el,htStatus:this.option("htStatus"),weEvent:we})}for(i=0;htParam=aTargetElementDatas[i];i++){if(this.fireEvent("up",htParam)){this._removeStatus(htParam.element,htParam.htStatus.sDown)}}this._aDownedElements=[]}}).extend(jindo.UIComponent);jindo.Calendar=jindo.$Class({$init:function(sLayerId,htOption){this._htToday=this.constructor.getDateHashTable(new Date());this._elLayer=jindo.$(sLayerId);this.htDefaultOption={sClassPrefix:"calendar-",nYear:this._htToday.nYear,nMonth:this._htToday.nMonth,nDate:this._htToday.nDate,sTitleFormat:"yyyy-mm",sYearTitleFormat:"yyyy",sMonthTitleFormat:"m",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],bDrawOnload:true};this.option(this.htDefaultOption);this.option(htOption||{});this._assignHTMLElements();this.activate();this.setDate(this.option("nYear"),this.option("nMonth"),this.option("nDate"));if(this.option("bDrawOnload")){this.draw()}},getBaseElement:function(){return this._elLayer},getDate:function(){return this._htDate},getDateOfElement:function(el){var nDateIndex=jindo.$A(this._aDateContainerElement).indexOf(el);if(nDateIndex>-1){return this._aMetaData[nDateIndex]}return null},getToday:function(){return this._htToday},setDate:function(nYear,nMonth,nDate){this._htDate={nYear:nYear,nMonth:(nMonth*1),nDate:(nDate*1)}},getShownDate:function(){return this._getShownDate()},_getShownDate:function(){return this.htShownDate||this.getDate()},_setShownDate:function(nYear,nMonth){this.htShownDate={nYear:nYear,nMonth:(nMonth*1),nDate:1}},_assignHTMLElements:function(){var sClassPrefix=this.option("sClassPrefix"),elLayer=this.getBaseElement();if((this.elBtnPrevYear=jindo.$$.getSingle(("."+sClassPrefix+"btn-prev-year"),elLayer))){this.wfPrevYear=jindo.$Fn(function(oEvent){oEvent.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(-1,0,true)},this)}if((this.elBtnPrevMonth=jindo.$$.getSingle(("."+sClassPrefix+"btn-prev-mon"),elLayer))){this.wfPrevMonth=jindo.$Fn(function(oEvent){oEvent.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(0,-1,true)},this)}if((this.elBtnNextMonth=jindo.$$.getSingle(("."+sClassPrefix+"btn-next-mon"),elLayer))){this.wfNextMonth=jindo.$Fn(function(oEvent){oEvent.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(0,1,true)},this)}if((this.elBtnNextYear=jindo.$$.getSingle(("."+sClassPrefix+"btn-next-year"),elLayer))){this.wfNextYear=jindo.$Fn(function(oEvent){oEvent.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(1,0,true)},this)}this.elTitle=jindo.$$.getSingle(("."+sClassPrefix+"title"),elLayer);this.elTitleYear=jindo.$$.getSingle(("."+sClassPrefix+"title-year"),elLayer);this.elTitleMonth=jindo.$$.getSingle(("."+sClassPrefix+"title-month"),elLayer);var elWeekTemplate=jindo.$$.getSingle("."+sClassPrefix+"week",elLayer);this.elWeekTemplate=elWeekTemplate.cloneNode(true);this.elWeekAppendTarget=elWeekTemplate.parentNode},_setCalendarTitle:function(nYear,nMonth,sType){if(nMonth<10){nMonth=("0"+(nMonth*1)).toString()}var elTitle=this.elTitle,sTitleFormat=this.option("sTitleFormat"),sTitle;if(typeof sType!="undefined"){switch(sType){case"year":elTitle=this.elTitleYear;sTitleFormat=this.option("sYearTitleFormat");sTitle=sTitleFormat.replace(/yyyy/g,nYear).replace(/y/g,(nYear).toString().substr(2,2));break;case"month":elTitle=this.elTitleMonth;sTitleFormat=this.option("sMonthTitleFormat");sTitle=sTitleFormat.replace(/mm/g,nMonth).replace(/m/g,(nMonth*1)).replace(/M/g,this.option("aMonthTitle")[nMonth-1]);break}}else{sTitle=sTitleFormat.replace(/yyyy/g,nYear).replace(/y/g,(nYear).toString().substr(2,2)).replace(/mm/g,nMonth).replace(/m/g,(nMonth*1)).replace(/M/g,this.option("aMonthTitle")[nMonth-1])}jindo.$Element(elTitle).text(sTitle)},draw:function(nYear,nMonth,bRelative){var sClassPrefix=this.option("sClassPrefix"),htDate=this.getDate(),oShownDate=this._getShownDate();if(oShownDate&&typeof bRelative!="undefined"&&bRelative){var htRelativeDate=this.constructor.getRelativeDate(nYear,nMonth,0,oShownDate);nYear=htRelativeDate.nYear;nMonth=htRelativeDate.nMonth}else{if(typeof nYear=="undefined"&&typeof nMonth=="undefined"&&typeof bRelative=="undefined"){nYear=htDate.nYear;nMonth=htDate.nMonth}else{nYear=nYear||oShownDate.nYear;nMonth=nMonth||oShownDate.nMonth}}if(this.fireEvent("beforeDraw",{nYear:nYear,nMonth:nMonth})){if(this.elTitle){this._setCalendarTitle(nYear,nMonth)}if(this.elTitleYear){this._setCalendarTitle(nYear,nMonth,"year")}if(this.elTitleMonth){this._setCalendarTitle(nYear,nMonth,"month")}this._clear(jindo.Calendar.getWeeks(nYear,nMonth));this._setShownDate(nYear,nMonth);var htToday=this.getToday(),nFirstDay=this.constructor.getFirstDay(nYear,nMonth),nLastDay=this.constructor.getLastDay(nYear,nMonth),nLastDate=this.constructor.getLastDate(nYear,nMonth),nDay=0,htDatePrevMonth=this.constructor.getRelativeDate(0,-1,0,{nYear:nYear,nMonth:nMonth,nDate:1}),htDateNextMonth=this.constructor.getRelativeDate(0,1,0,{nYear:nYear,nMonth:nMonth,nDate:1}),nPrevMonthLastDate=this.constructor.getLastDate(htDatePrevMonth.nYear,htDatePrevMonth.nMonth),aDate=[],bPrevMonth,bNextMonth,welDateContainer,nTempYear,nTempMonth,oParam,nIndexOfLastDate,elWeek,i;var nWeeks=this.constructor.getWeeks(nYear,nMonth);for(i=0;i<nWeeks;i++){elWeek=this.elWeekTemplate.cloneNode(true);jindo.$Element(elWeek).appendTo(this.elWeekAppendTarget);this._aWeekElement.push(elWeek)}this._aDateElement=jindo.$$("."+sClassPrefix+"date",this.elWeekAppendTarget);this._aDateContainerElement=jindo.$$("."+sClassPrefix+"week > *",this.elWeekAppendTarget);if(nFirstDay>0){for(i=nPrevMonthLastDate-nFirstDay;i<nPrevMonthLastDate;i++){aDate.push(i+1)}}for(i=1;i<nLastDate+1;i++){aDate.push(i)}nIndexOfLastDate=aDate.length-1;for(i=1;i<7-nLastDay;i++){aDate.push(i)}for(i=0;i<aDate.length;i++){bPrevMonth=false;bNextMonth=false;welDateContainer=jindo.$Element(this._aDateContainerElement[i]);nTempYear=nYear;nTempMonth=nMonth;if(i<nFirstDay){bPrevMonth=true;welDateContainer.addClass(sClassPrefix+"prev-mon");nTempYear=htDatePrevMonth.nYear;nTempMonth=htDatePrevMonth.nMonth}else{if(i>nIndexOfLastDate){bNextMonth=true;welDateContainer.addClass(sClassPrefix+"next-mon");nTempYear=htDateNextMonth.nYear;nTempMonth=htDateNextMonth.nMonth}else{nTempYear=nYear;nTempMonth=nMonth}}if(nDay===0){welDateContainer.addClass(sClassPrefix+"sun")}if(nDay==6){welDateContainer.addClass(sClassPrefix+"sat")}if(nTempYear==htToday.nYear&&(nTempMonth*1)==htToday.nMonth&&aDate[i]==htToday.nDate){welDateContainer.addClass(sClassPrefix+"today")}oParam={elDate:this._aDateElement[i],elDateContainer:welDateContainer.$value(),nYear:nTempYear,nMonth:nTempMonth,nDate:aDate[i],bPrevMonth:bPrevMonth,bNextMonth:bNextMonth,sHTML:aDate[i]};jindo.$Element(oParam.elDate).html(oParam.sHTML.toString());this._aMetaData.push({nYear:nTempYear,nMonth:nTempMonth,nDate:aDate[i]});nDay=(nDay+1)%7;this.fireEvent("draw",oParam)}this.fireEvent("afterDraw",{nYear:nYear,nMonth:nMonth})}},_clear:function(nWeek){this._aMetaData=[];this._aWeekElement=[];jindo.$Element(this.elWeekAppendTarget).empty()},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},_onActivate:function(){if(this.elBtnPrevYear){this.wfPrevYear.attach(this.elBtnPrevYear,"click")}if(this.elBtnPrevMonth){this.wfPrevMonth.attach(this.elBtnPrevMonth,"click")}if(this.elBtnNextMonth){this.wfNextMonth.attach(this.elBtnNextMonth,"click")}if(this.elBtnNextYear){this.wfNextYear.attach(this.elBtnNextYear,"click")}},_onDeactivate:function(){if(this.elBtnPrevYear){this.wfPrevYear.detach(this.elBtnPrevYear,"click")}if(this.elBtnPrevMonth){this.wfPrevMonth.detach(this.elBtnPrevMonth,"click")}if(this.elBtnNextMonth){this.wfNextMonth.detach(this.elBtnNextMonth,"click")}if(this.elBtnNextYear){this.wfNextYear.detach(this.elBtnNextYear,"click")}}}).extend(jindo.UIComponent);jindo.Calendar.getDateObject=function(htDate){if(arguments.length==3){return new Date(arguments[0],arguments[1]-1,arguments[2])}return new Date(htDate.nYear,htDate.nMonth-1,htDate.nDate)};jindo.Calendar.getDateHashTable=function(oDate){if(arguments.length==3){return{nYear:arguments[0],nMonth:arguments[1],nDate:arguments[2]}}if(arguments.length<=1){oDate=oDate||new Date()}return{nYear:oDate.getFullYear(),nMonth:oDate.getMonth()+1,nDate:oDate.getDate()}};jindo.Calendar.getTime=function(htDate){return this.getDateObject(htDate).getTime()};jindo.Calendar.getFirstDay=function(nYear,nMonth){return new Date(nYear,nMonth-1,1).getDay()};jindo.Calendar.getLastDay=function(nYear,nMonth){return new Date(nYear,nMonth,0).getDay()};jindo.Calendar.getLastDate=function(nYear,nMonth){return new Date(nYear,nMonth,0).getDate()};jindo.Calendar.getWeeks=function(nYear,nMonth){var nFirstDay=this.getFirstDay(nYear,nMonth),nLastDate=this.getLastDate(nYear,nMonth);return Math.ceil((nFirstDay+nLastDate)/7)};jindo.Calendar.getRelativeDate=function(nYear,nMonth,nDate,htDate){return this.getDateHashTable(new Date(htDate.nYear+nYear,htDate.nMonth+nMonth-1,htDate.nDate+nDate))};jindo.Calendar.isValidDate=function(nYear,nMonth,nDate){if(nMonth<=12&&nDate<=this.getLastDate(nYear,nMonth)){return true}else{return false}};jindo.Calendar.isPast=function(htDate,htComparisonDate){if(this.getTime(htDate)<this.getTime(htComparisonDate)){return true}return false};jindo.Calendar.isFuture=function(htDate,htComparisonDate){if(this.getTime(htDate)>this.getTime(htComparisonDate)){return true}return false};jindo.Calendar.isSameDate=function(htDate,htComparisonDate){if(this.getTime(htDate)==this.getTime(htComparisonDate)){return true}return false};jindo.Calendar.isBetween=function(htDate,htFrom,htTo){if(this.isFuture(htDate,htTo)||this.isPast(htDate,htFrom)){return false}else{return true}};jindo.LayerManager=jindo.$Class({_bIsActivating:false,_bIsLayerVisible:false,_bIsHiding:false,_bIsShowing:false,_aLink:null,$init:function(el,htOption){this.option({sCheckEvent:"click",nCheckDelay:100,nShowDelay:0,nHideDelay:100,sMethod:"show",nDuration:200,Transition:{fFadeIn:jindo.Effect.cubicEaseOut,fFadeOut:jindo.Effect.cubicEaseIn,fSlideDown:jindo.Effect.cubicEaseOut,fSlideUp:jindo.Effect.cubicEaseIn}});this.option(htOption||{});this.setLayer(el);this._aLink=[];this._oShowTimer=new jindo.Timer();this._oHideTimer=new jindo.Timer();this._oEventTimer=new jindo.Timer();this._wfOnEvent=jindo.$Fn(this._onEvent,this);this.getVisible();this.activate()},_onActivate:function(){this._wfOnEvent.attach(document,this.option("sCheckEvent"))},_onDeactivate:function(){this._wfOnEvent.detach(document,this.option("sCheckEvent"))},getVisible:function(){return this._bIsLayerVisible=(this._wel.visible()&&this._wel.opacity()>0)},_check:function(el){var wel=jindo.$Element(el);for(var i=0,elLink,welLink;elLink=this._aLink[i];i++){welLink=jindo.$Element(elLink);if(welLink){elLink=welLink.$value();if(elLink&&(el==elLink||wel.isChildOf(elLink))){return true}}}return false},_find:function(el){for(var i=0,elLink;(elLink=this._aLink[i]);i++){if(elLink==el){return i}}return -1},getLayer:function(){return this._el},setLayer:function(el){this._el=jindo.$(el);this._wel=jindo.$Element(el);var elToMeasure=this._el.cloneNode(true);var welToMeasure=jindo.$Element(elToMeasure);welToMeasure.css({position:"absolute",left:"-5000px"}).appendTo(this._el.parentNode);welToMeasure.show();this._nLayerHeight=welToMeasure.height();welToMeasure.height(this._nLayerHeight);this._sLayerCSSHeight=welToMeasure.css("height");this._sLayerCSSOverflowX=this._wel.css("overflowX");this._sLayerCSSOverflowY=this._wel.css("overflowY");welToMeasure.css("overflow","hidden").height(0);this._nSlideMinHeight=welToMeasure.height()+1;welToMeasure.leave();return this},_transform:function(){this._wel.css({overflowX:"hidden",overflowY:"hidden"})},_restore:function(){this._wel.css({overflowX:this._sLayerCSSOverflowX,overflowY:this._sLayerCSSOverflowY})},getLinks:function(){return this._aLink},setLinks:function(a){this._aLink=jindo.$A(a).unique().$value();return this},link:function(vElement){if(arguments.length>1){for(var i=0,len=arguments.length;i<len;i++){this.link(arguments[i])}return this}if(this._find(vElement)!=-1){return this}this._aLink.push(vElement);return this},unlink:function(vElement){if(arguments.length>1){for(var i=0,len=arguments.length;i<len;i++){this.unlink(arguments[i])}return this}var nIndex=this._find(vElement);if(nIndex>-1){this._aLink.splice(nIndex,1)}return this},_fireEventBeforeShow:function(){this._transform();return this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventAppear:function(){this.fireEvent("appear",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventShow:function(){this._bIsShowing=false;this._restore();this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventBeforeHide:function(){this._transform();return this.fireEvent("beforeHide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventHide:function(){this._bIsHiding=false;this._restore();this.fireEvent("hide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_show:function(fShow,nDelay){this._oEventTimer.abort();this._bIsShowing=true;this._bIsHiding=false;if(nDelay>0){this._oShowTimer.start(fShow,nDelay)}else{this._oHideTimer.abort();fShow()}},_hide:function(fHide,nDelay){this._bIsShowing=false;this._bIsHiding=true;if(nDelay>0){this._oHideTimer.start(fHide,nDelay)}else{this._oShowTimer.abort();fHide()}},_getShowMethod:function(){switch(this.option("sMethod")){case"show":return"showIn";case"fade":return"fadeIn";case"slide":return"slideDown"}},_getHideMethod:function(){switch(this.option("sMethod")){case"show":return"hideOut";case"fade":return"fadeOut";case"slide":return"slideUp"}},show:function(nDelay){if(typeof nDelay=="undefined"){nDelay=this.option("nShowDelay")}this[this._getShowMethod()](nDelay);return this},hide:function(nDelay){if(typeof nDelay=="undefined"){nDelay=this.option("nHideDelay")}this[this._getHideMethod()](nDelay);return this},showIn:function(nDelay){if(typeof nDelay=="undefined"){nDelay=this.option("nShowDelay")}var self=this;this._show(function(){self._sAppliedMethod="show";if(!self.getVisible()){if(self._fireEventBeforeShow()){self._wel.show();self._fireEventAppear();self._fireEventShow()}}},nDelay);return this},hideOut:function(nDelay){if(typeof nDelay=="undefined"){nDelay=this.option("nHideDelay")}var self=this;this._hide(function(){self._sAppliedMethod="show";if(self.getVisible()){if(self._fireEventBeforeHide()){self._wel.hide();self._fireEventHide()}}},nDelay);return this},_getTransition:function(){if(this._oTransition){return this._oTransition}else{return(this._oTransition=new jindo.Transition().fps(30))}},fadeIn:function(nDelay){var oTransition=this._getTransition();oTransition.detachAll().abort();if(typeof nDelay=="undefined"){nDelay=this.option("nShowDelay")}var nDuration=this.option("nDuration");var self=this;this._show(function(){self._sAppliedMethod="fade";var elLayer=self.getLayer();if(!self._wel.visible()||self._wel.opacity()!=1){if(self._fireEventBeforeShow()){if(!self._wel.visible()){self._wel.opacity(0);self._wel.show()}nDuration*=(1-self._wel.opacity());oTransition.attach({playing:function(oCustomEvent){if(oCustomEvent.nStep===1){this.detach("playing",arguments.callee);self._fireEventAppear()}},end:function(oCustomEvent){this.detach("end",arguments.callee);self._fireEventShow()}}).start(nDuration,elLayer,{"@opacity":self.option("Transition").fFadeIn.apply(null,[1])})}}},nDelay);return this},fadeOut:function(nDelay){var oTransition=this._getTransition();oTransition.detachAll().abort();if(typeof nDelay=="undefined"){nDelay=this.option("nHideDelay")}var nDuration=this.option("nDuration");var self=this;this._hide(function(){self._sAppliedMethod="fade";if(self.getVisible()){var elLayer=self.getLayer();if(self._fireEventBeforeHide()){nDuration*=self._wel.opacity();oTransition.attach({end:function(e){this.detach("end",arguments.callee);self._wel.hide();self._wel.opacity(1);self._fireEventHide()}}).start(nDuration,elLayer,{"@opacity":self.option("Transition").fFadeOut.apply(null,[0])})}}},nDelay);return this},slideDown:function(nDelay){var oTransition=this._getTransition();oTransition.detachAll().abort();if(typeof nDelay=="undefined"){nDelay=this.option("nShowDelay")}var nDuration=this.option("nDuration");var self=this;this._show(function(){self._sAppliedMethod="slide";var elLayer=self.getLayer();if(Math.ceil(self._wel.height())<self._nLayerHeight){if(self._fireEventBeforeShow()){if(!self.getVisible()){self._wel.height(0).show()}else{nDuration=Math.ceil(nDuration*((self._nLayerHeight-self._wel.height())/(self._nLayerHeight-self._nSlideMinHeight)))}oTransition.attach({playing:function(oCustomEvent){if(oCustomEvent.nStep===1){this.detach("playing",arguments.callee);self._fireEventAppear()}},end:function(oCustomEvent){this.detach("end",arguments.callee);self._fireEventShow()}}).start(nDuration,{getter:function(sKey){return jindo.$Element(elLayer)[sKey]()+1},setter:function(sKey,nValue){jindo.$Element(elLayer)[sKey](parseFloat(nValue))}},{height:self.option("Transition").fSlideDown.apply(null,[self._nLayerHeight])})}}},nDelay);return this},slideUp:function(nDelay){var oTransition=this._getTransition();oTransition.detachAll().abort();if(typeof nDelay=="undefined"){nDelay=this.option("nHideDelay")}var nDuration=this.option("nDuration");var self=this;this._hide(function(){self._sAppliedMethod="slide";var elLayer=self.getLayer();if(self.getVisible()){if(self._fireEventBeforeHide()){nDuration=Math.ceil(nDuration*(self._wel.height()/self._nLayerHeight));oTransition.attach({end:function(e){self._wel.hide().css({height:self._sLayerCSSHeight});this.detach("end",arguments.callee);self._fireEventHide()}}).start(nDuration,{getter:function(sKey){return jindo.$Element(elLayer)[sKey]()},setter:function(sKey,nValue){jindo.$Element(elLayer)[sKey](Math.ceil(nValue))}},{height:self.option("Transition").fSlideUp.apply(null,[self._nSlideMinHeight])})}}},nDelay);return this},toggle:function(nDelay){if(!this.getVisible()||this._bIsHiding){this.show(nDelay||this.option("nShowDelay"))}else{this.hide(nDelay||this.option("nHideDelay"))}return this},_onEvent:function(we){var el=we.element,self=this;this._oEventTimer.start(function(){if(!self._bIsHiding&&self.getVisible()){if(self._check(el)){if(!self._bIsShowing){self.fireEvent("ignore",{sCheckEvent:self.option("sCheckEvent")});self._oHideTimer.abort();self._bIsHiding=false}}else{if(typeof el.tagName!="undefined"){self.hide()}}}},this.option("nCheckDelay"))}}).extend(jindo.UIComponent);jindo.Slider=jindo.$Class({_elTrack:null,_aThumbs:null,_aPoses:null,_htSwap:null,$init:function(el,oOptions){this.option({bVertical:false,bJump:true,sClassPrefix:"slider-",fAdjustValue:null,nMinValue:0,nMaxValue:1,bActivateOnload:true});this.option(oOptions||{});if(!this.option("bVertical")){this._htSwap={y:"nY",x:"nX",clientX:"clientX",pageX:"pageX",offsetWidth:"offsetWidth",left:"left"}}else{this._htSwap={y:"nX",x:"nY",clientX:"clientY",pageX:"pageY",offsetWidth:"offsetHeight",left:"top"}}this._elTrack=jindo.$(el);this._aThumbs=jindo.$$("."+this.option("sClassPrefix")+"thumb",this._elTrack);this._sRand="S"+parseInt(Math.random()*100000000,10);jindo.$ElementList(this._aThumbs).addClass(this._sRand);this._aPoses=this.positions();this._onTrackMouseDownFn=jindo.$Fn(this._onTrackMouseDown,this);this._initDragArea();if(this.option("bActivateOnload")){this.activate()}},getTrack:function(){return this._elTrack},getThumb:function(nIndex){return this._aThumbs[nIndex]},_initDragArea:function(){var self=this;var htSwap=this._htSwap;this._oDragArea=new jindo.DragArea(this._elTrack,{sClassName:this._sRand,bFlowOut:false}).attach({beforeDrag:function(oCustomEvent){var nIndex=self._getThumbIndex(oCustomEvent.elHandle);var htParam={nIndex:nIndex,nPos:oCustomEvent[htSwap.x],bJump:false};if(!self.fireEvent("beforeChange",htParam)){oCustomEvent.stop();return false}oCustomEvent[htSwap.x]=self._getAdjustedPos(nIndex,htParam.nPos);oCustomEvent[htSwap.y]=null},drag:function(oCustomEvent){var nIndex=self._getThumbIndex(oCustomEvent.elHandle);var nPos=oCustomEvent[htSwap.x];if(nPos!=self._aPoses[nIndex]){self._aPoses[nIndex]=nPos;self._fireChangeEvent(nIndex)}}})},getDragArea:function(){return this._oDragArea},_fireChangeEvent:function(nIndex){var nPos=this._getPosition(nIndex);this.fireEvent("change",{nIndex:nIndex,nPos:nPos,nValue:this._getValue(nIndex,nPos)})},_onActivate:function(){this.getDragArea().activate();this._onTrackMouseDownFn.attach(this._elTrack,"mousedown")},_onDeactivate:function(){this.getDragArea().deactivate();this._onTrackMouseDownFn.detach(this._elTrack,"mousedown")},_onTrackMouseDown:function(we){if(!this.option("bJump")){return}we.stop(jindo.$Event.CANCEL_DEFAULT);var nIndex=0;var htSwap=this._htSwap;var el=we.element;var sClass="."+this.option("sClassPrefix")+"thumb";var bThumb=jindo.$$.test(el,sClass)||jindo.$$.getSingle("! "+sClass,el);if(bThumb){return}var nPos=we.pos()[htSwap.pageX];nPos-=jindo.$Element(this._elTrack).offset()[htSwap.left];var nMaxDistance=9999999;for(var i=0,oThumb;(oThumb=this._aThumbs[i]);i++){var nThumbPos=parseInt(jindo.$Element(oThumb).css(htSwap.left),10)||0;nThumbPos+=parseInt(oThumb[htSwap.offsetWidth]/2,10);var nDistance=Math.abs(nPos-nThumbPos);if(nDistance<nMaxDistance){nMaxDistance=nDistance;nIndex=i}}nPos-=parseInt(this._aThumbs[nIndex][htSwap.offsetWidth]/2,10);this.positions(nIndex,nPos)},_getTrackInfo:function(nIndex){var htSwap=this._htSwap;var oThumb=this._aThumbs[nIndex];var nThumbSize=oThumb[htSwap.offsetWidth];var nTrackSize=this._elTrack[htSwap.offsetWidth];var nMaxPos=nTrackSize-nThumbSize;var nMax=this.option("nMaxValue");var nMin=this.option("nMinValue");return{maxPos:nMaxPos,max:nMax,min:nMin}},_getValue:function(nIndex,nPos){if(typeof nPos=="undefined"){nPos=this._getPosition(nIndex)}var oInfo=this._getTrackInfo(nIndex);var nValue=Math.min(Math.max(nPos*(oInfo.max-oInfo.min)/oInfo.maxPos+oInfo.min,oInfo.min),oInfo.max);var fAdjust=this.option("fAdjustValue");if(fAdjust){nValue=fAdjust.call(this,nValue)}return nValue},_getAdjustedPos:function(nIndex,nPos){var nAdjustedPos=nPos;var oInfo=this._getTrackInfo(nIndex);var fAdjust=this.option("fAdjustValue");if(fAdjust){var nValue=Math.min(Math.max(nAdjustedPos*(oInfo.max-oInfo.min)/oInfo.maxPos+oInfo.min,oInfo.min),oInfo.max);var nAfterValue=fAdjust.call(this,nValue);if(nValue!=nAfterValue){nAdjustedPos=oInfo.maxPos*(nAfterValue-oInfo.min)/(oInfo.max-oInfo.min)}}nAdjustedPos=Math.max(nAdjustedPos,0);nAdjustedPos=Math.min(nAdjustedPos,oInfo.maxPos);return nAdjustedPos},_getThumbIndex:function(oThumb){for(var i=0,len=this._aThumbs.length;i<len;i++){if(this._aThumbs[i]==oThumb){return i}}return -1},_getPosition:function(nIndex){return parseInt(jindo.$Element(this._aThumbs[nIndex]).css(this._htSwap.left),10)},_setPosition:function(nIndex,nPos){this._aPoses[nIndex]=nPos;jindo.$Element(this._aThumbs[nIndex]).css(this._htSwap.left,nPos+"px")},positions:function(nIndex,nPos,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}switch(arguments.length){case 0:var aPoses=[];jindo.$A(this._aThumbs).forEach(function(el,i){aPoses[i]=this._getPosition(i)},this);return aPoses;case 1:return this._getPosition(nIndex);default:if(bFireEvent){var htParam={nIndex:nIndex,nPos:nPos,bJump:true};if(this.fireEvent("beforeChange",htParam)){var nAfterPos=this._getAdjustedPos(nIndex,htParam.nPos);var bChanged=(nAfterPos!=this._aPoses[nIndex]);this._setPosition(nIndex,nAfterPos);if(bChanged){this._fireChangeEvent(nIndex)}this.getDragArea().startDragging(this._aThumbs[nIndex])}return this}this._setPosition(nIndex,this._getAdjustedPos(nIndex,nPos));return this}},values:function(nIndex,nValue,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}switch(arguments.length){case 0:var aValues=[];for(var i=0,len=this._aThumbs.length;i<len;i++){aValues[i]=this._getValue(i)}return aValues;case 1:return this._getValue(nIndex,this.positions(nIndex));default:var oInfo=this._getTrackInfo(nIndex);this.positions(nIndex,(nValue-oInfo.min)*oInfo.maxPos/(oInfo.max-oInfo.min),bFireEvent);return this}}}).extend(jindo.UIComponent);jindo.RolloverClick=jindo.$Class({$init:function(el,htOption){this.option({bActivateOnload:true,sCheckEvent:"click",bCheckDblClick:false,RolloverArea:{sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:false,bActivateOnload:false,htStatus:{sOver:"over",sDown:"down"}}});this.option(htOption||{});var self=this;this._oRolloverArea=new jindo.RolloverArea(el,this.option("RolloverArea")).attach({over:function(oCustomEvent){if(!self.fireEvent("over",oCustomEvent)){oCustomEvent.stop()}},out:function(oCustomEvent){if(!self.fireEvent("out",oCustomEvent)){oCustomEvent.stop()}}});this._wfClick=jindo.$Fn(this._onClick,this);this._wfDblClick=jindo.$Fn(this._onClick,this);if(this.option("bActivateOnload")){this.activate()}},_onClick:function(we){var elRollover=we.element,sType="click";if(we.type=="dblclick"){sType=we.type}while(elRollover=this._oRolloverArea._findRollover(elRollover)){this.fireEvent(sType,{element:elRollover,htStatus:this._oRolloverArea.option("htStatus"),weEvent:we});elRollover=elRollover.parentNode}},_onActivate:function(){this._wfClick.attach(this._oRolloverArea._elArea,this.option("sCheckEvent"));if(this.option("bCheckDblClick")){this._wfDblClick.attach(this._oRolloverArea._elArea,"dblclick")}this._oRolloverArea.activate()},_onDeactivate:function(){this._wfClick.detach(this._oRolloverArea._elArea,this.option("sCheckEvent"));this._wfDblClick.detach(this._oRolloverArea._elArea,"dblclick");this._oRolloverArea.deactivate()}}).extend(jindo.UIComponent);jindo.NumberFormatter=jindo.$Class({$init:function(el,htOption){this.option({nDecimalPoint:0});this.option(htOption||{});this.attach("beforeChange",function(oCustomEvent){var sText=oCustomEvent.sText;var sOutput="";var nDecimalPoint=this.option("nDecimalPoint");if(nDecimalPoint===0){sText=sText.replace(new RegExp("[^0-9"+oCustomEvent.sStartMark+oCustomEvent.sEndMark+"]","g"),"");sText=sText.replace(/^0+/,"");sText=sText.replace(new RegExp("^0*"+oCustomEvent.sStartMark+"0*"+oCustomEvent.sEndMark+"0*"),oCustomEvent.startMark+oCustomEvent.endMark)}else{sText=sText.replace(new RegExp("[^0-9."+oCustomEvent.sStartMark+oCustomEvent.sEndMark+"]","g"),"");sText=sText.replace(/\.{2,}/g,".");sText=sText.replace(/^\.+/,"");sText=sText.replace(/(\.[^.]*?)(\.)/g,function(){return arguments[1]});sText=sText.replace(/^0+/,"");sText=sText.replace(new RegExp("^0*"+oCustomEvent.sStartMark+"0*"+oCustomEvent.sEndMark+"0*"),oCustomEvent.startMark+oCustomEvent.endMark);sText=sText.replace(new RegExp("^0([^."+oCustomEvent.sStartMark+oCustomEvent.sEndMark+"]+?)","g"),function(){return arguments[1]})}sOutput=this._convertCurrency(sText);if(nDecimalPoint>0){sOutput=this._limitDecimalPoint(sOutput,nDecimalPoint)}oCustomEvent.sText=sOutput})},getValue:function(){return this._el.value.replace(new RegExp("[,"+this._aMarks[0]+this._aMarks[1]+"]+?","g"),"")},_convertCurrency:function(sText){var nDot=0,sReturn="",nDotPosition=sText.indexOf("."),nLastPosition=sText.length;if(nDotPosition>-1){nLastPosition=nDotPosition-1}for(var i=sText.length;i>=0;i--){var sChar=sText.charAt(i);if(i>nLastPosition){sReturn=sChar+sReturn;continue}if(/[0-9]/.test(sChar)){if(nDot>=3){sReturn=","+sReturn;nDot=0}nDot++;sReturn=sChar+sReturn}else{if(sChar==this._aMarks[0]||sChar==this._aMarks[1]){sReturn=sChar+sReturn}}}return sReturn},_limitDecimalPoint:function(sText,nDecimalPoint){var sReturn="",nDotPosition=sText.indexOf("."),nLastPosition=sText.length;if(nDotPosition>-1){nLastPosition=nDotPosition-1}nDotPosition=sText.indexOf(".");if(nDotPosition>-1&&nDecimalPoint>0){var nDecimalCount=0;for(var i=0;i<sText.length;i++){var sChar=sText.charAt(i),bIsNumber=/[0-9]/.test(sChar);if(bIsNumber){if(nDecimalCount==nDecimalPoint){continue}if(i>nDotPosition){nDecimalCount++}}sReturn+=sChar}}else{sReturn=sText}return sReturn}}).extend(jindo.Formatter);jindo.InlineTextEdit=jindo.$Class({_bIsEditing:false,$init:function(htOption){var htDefaultOption={elInput:jindo.$('<input type="text">'),bHandleBlur:true,bHandleKeyDown:true};this.option(htDefaultOption);this.option(htOption||{});this._wfBlur=jindo.$Fn(this._onBlur,this);this._wfKeyDown=jindo.$Fn(this._onKeyDown,this)},getTextInput:function(){return this._getTextInput().$value()},_getTextInput:function(){if(this._welInput){return this._welInput}else{return(this._welInput=jindo.$Element(this.option("elInput")))}},_resize:function(elFrom,elTo){var wel=jindo.$Element(elFrom);var welTo=jindo.$Element(elTo);welTo.width(wel.width()).height(wel.height())},isEditing:function(){return this._bIsEditing},edit:function(el,elGetSizeFrom){var wel=jindo.$Element(el),welInput=this._getTextInput(),elInput=welInput.$value();this._welHidden=wel;wel.after(elInput);this._resize(elGetSizeFrom||el,elInput);wel.hide();elInput.value=wel.text();elInput.focus();this._bIsEditing=true;if(this.option("bHandleBlur")){this._wfBlur.attach(elInput,"blur")}if(this.option("bHandleKeyDown")){this._wfKeyDown.attach(elInput,"keydown")}return this},apply:function(){if(this.isEditing()){var welInput=this._getTextInput(),elInput=welInput.$value(),sText=elInput.value,htCustomEvent={sText:sText,elInput:elInput,elText:this._welHidden.$value()};welInput.leave();if(this._welHidden.text()!=sText&&this.fireEvent("beforeChange",htCustomEvent)){this._welHidden.text(htCustomEvent.sText).show();this._bIsEditing=false;this.fireEvent("change",htCustomEvent)}else{this._welHidden.show()}this._wfBlur.detach(elInput,"blur").detach(elInput,"keydown")}return this},cancel:function(){if(this.isEditing()){var welInput=this._getTextInput(),elInput=welInput.$value();welInput.leave();this._welHidden.show();this._bIsEditing=false;this._wfBlur.detach(elInput,"blur").detach(elInput,"keydown")}return this},_onBlur:function(we){this.apply()},_onKeyDown:function(we){switch(we.key().keyCode){case 27:this.cancel();break;case 13:if(this.getTextInput().tagName.toLowerCase()=="input"){this.apply()}break}}}).extend(jindo.Component);jindo.BrowseButton=jindo.$Class({$init:function(el,htOption){this.option({sClassPrefix:"browse-"});this.option(htOption||{});this._el=jindo.$(el);this._assignHTMLElement();this._attachEvents()},_assignHTMLElement:function(){var sClassPrefix=this.option("sClassPrefix");this._elBox=jindo.$$.getSingle("."+sClassPrefix+"box",this._el);this._elFileSelect=jindo.$$.getSingle("."+sClassPrefix+"file-input",this._el);this._elBrowseButton=jindo.$$.getSingle("."+sClassPrefix+"button",this._el);var elFileSelect=this.getFileSelect();var elBrowseButton=this.getBrowseButton();this._oOrgPos={form:jindo.$$.getSingle("! form",elFileSelect),parent:elFileSelect.parentNode,sibling:elFileSelect.nextSibling,cssText:elFileSelect.style.cssText};elFileSelect.style.cssText="top:-.5em !important; height:500px !important;";jindo.$Element(elBrowseButton).addClass(sClassPrefix+"applied")},_adjustFileSelectPos:function(nX){var elBox=this.getBox();var nPitch=(jindo.$Element(elBox).offset().left+document.documentElement.scrollLeft)-nX;this.getFileSelect().style.right=nPitch+"px"},_attachEvents:function(){var elBrowseButton=this.getBrowseButton();var welBrowseButton=jindo.$Element(elBrowseButton);var elBox=this.getBox();var elFileSelect=this.getFileSelect();var wfHoverOnBrowseButton=jindo.$Fn(function(we){welBrowseButton.addClass(this.option("sClassPrefix")+"over");this.fireEvent("over");this._adjustFileSelectPos(we.pos().pageX)},this);var wfRestore=jindo.$Fn(function(we){welBrowseButton.removeClass(this.option("sClassPrefix")+"over");elFileSelect.style.right="0px";this.fireEvent("out")},this);var wfMouseMoveOnFloat=jindo.$Fn(function(we){this._adjustFileSelectPos(we.pos().pageX)},this);jindo.$Fn(function(we){this.fireEvent("sourceChange")},this).attach(this.getFileSelect(),"change");wfHoverOnBrowseButton.attach(elBox,"mouseover");wfMouseMoveOnFloat.attach(elBox,"mousemove");wfRestore.attach(elBox,"mouseout")},getBox:function(){return this._elBox},getFileSelect:function(){return this._elFileSelect},getBrowseButton:function(){return this._elBrowseButton}}).extend(jindo.Component);jindo.FileUploader=jindo.$Class({_bIsActivating:false,_aHiddenInput:[],$init:function(elFileSelect,htOption){var htDefaultOption={sUrl:"",sCallback:"",htData:{},sFiletype:"*",sMsgNotAllowedExt:"업로드가 허용되지 않는 파일형식입니다",bAutoUpload:false,bActivateOnload:true};this.option(htDefaultOption);this.option(htOption||{});this._el=jindo.$(elFileSelect);this._wel=jindo.$Element(this._el);this._elForm=this._el.form;this._aHiddenInput=[];this.constructor._oCallback={};this._wfChange=jindo.$Fn(this._onFileSelectChange,this);if(this.option("bActivateOnload")){this.activate()}},_appendIframe:function(){var sIframeName="tmpFrame_"+this._makeUniqueId();this._welIframe=jindo.$Element(jindo.$('<iframe name="'+sIframeName+'" src="'+this.option("sCallback")+'?blank">')).css({position:"absolute",width:"1px",height:"1px",left:"-100px",top:"-100px"});document.body.appendChild(this._welIframe.$value())},_removeIframe:function(){this._welIframe.leave()},getBaseElement:function(){return this.getFileSelect()},getFileSelect:function(){return this._el},getFormElement:function(){return this._elForm},upload:function(){this._appendIframe();var elForm=this.getFormElement();var welForm=jindo.$Element(elForm);var sIframeName=this._welIframe.attr("name");var sFunctionName=sIframeName+"_func";var sAction=this.option("sUrl");welForm.attr({target:sIframeName,action:sAction});this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback",value:this.option("sCallback")}));this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback_func",value:sFunctionName}));for(var k in this.option("htData")){this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:k,value:this.option("htData")[k]}))}for(var i=0;i<this._aHiddenInput.length;i++){elForm.appendChild(this._aHiddenInput[i])}this.constructor._oCallback[sFunctionName+"_success"]=jindo.$Fn(function(oParameter){this.fireEvent("success",{htResult:oParameter});delete this.constructor._oCallback[oParameter.callback_func+"_success"];delete this.constructor._oCallback[oParameter.callback_func+"_error"];for(var i=0;i<this._aHiddenInput.length;i++){jindo.$Element(this._aHiddenInput[i]).leave()}this._aHiddenInput.length=0;this._removeIframe()},this).bind();this.constructor._oCallback[sFunctionName+"_error"]=jindo.$Fn(function(oParameter){this.fireEvent("error",{htResult:oParameter});delete this.constructor._oCallback[oParameter.callback_func+"_success"];delete this.constructor._oCallback[oParameter.callback_func+"_error"];for(var i=0;i<this._aHiddenInput.length;i++){jindo.$Element(this._aHiddenInput[i]).leave()}this._aHiddenInput.length=0;this._removeIframe()},this).bind();elForm.submit()},_onActivate:function(){this._el.value="";this._wfChange.attach(this._el,"change")},_onDeactivate:function(){this._wfChange.detach(this._el,"change")},_makeUniqueId:function(){return new Date().getMilliseconds()+Math.floor(Math.random()*100000)},_createElement:function(name,attributes){var el=jindo.$("<"+name+">");var wel=jindo.$Element(el);for(var k in attributes){wel.attr(k,attributes[k])}return el},_checkExtension:function(sFile){var aType=this.option("sFiletype").split(";");for(var i=0;i<aType.length;i++){sType=(aType[i]=="*.*")?"*":aType[i];sType=sType.replace(/^\s+|\s+$/,"");sType=sType.replace(/\./g,"\\.");sType=sType.replace(/\*/g,"[^\\/]+");if((new RegExp(sType+"$","gi")).test(sFile)){return true}}return false},_onFileSelectChange:function(we){var sValue=we.element.value,bAllowed=this._checkExtension(sValue),htParam={sValue:sValue,bAllowed:bAllowed,sMsgNotAllowedExt:this.option("sMsgNotAllowedExt")};if(this.fireEvent("select",htParam)){if(bAllowed){if(this.option("bAutoUpload")){this.upload()}}else{alert(htParam.sMsgNotAllowedExt)}}}}).extend(jindo.UIComponent);jindo.Clipboard=jindo.$Class({_aElement:null,_aData:null,_elOvered:null,_bFailed:true,$init:function(sFlashURL){this._sFlashURL=sFlashURL;var oStatic=jindo.Clipboard;var sFlashUID=this._sUnique="S"+new Date().getTime()+parseInt(Math.random()*1000000000);if(typeof oStatic._callbacks=="undefined"){oStatic._callbacks={}}oStatic._callbacks[this._sUnique]={click:jindo.$Fn(this._onFlashClick,this).bind(),mouseover:jindo.$Fn(this._onFlashMouseOver,this).bind(),mouseout:jindo.$Fn(this._onFlashMouseOut,this).bind(),mousedown:jindo.$Fn(this._onFlashMouseDown,this).bind(),mouseup:jindo.$Fn(this._onFlashMouseUp,this).bind(),load:jindo.$Fn(this._onFlashLoad,this).bind()};this._aElement=[];this._aData=[];this._initFlash();this._wfHandler=jindo.$Fn(function(we){this._initFlash();var el=we.element;var htPosition=jindo.$Element(el).offset();this._setFlashPosSize(htPosition.left,htPosition.top,el.offsetWidth,el.offsetHeight);this._setClipboard(el,this._getData(el));this._elOvered=el},this)},_initFlash:function(){if(this._elDummy){return}var elDummy=this._elDummy=jindo.$("<div>");var sFlashUID=this._sUnique;elDummy.style.cssText="position:absolute !important; border:0 !important; padding:0 !important; margin:0 !important; overflow:visible !important; z-index:32000 !important;";document.body.insertBefore(elDummy,document.body.firstChild);var sFlashHtml=nhn.FlashObject.generateTag(this._sFlashURL,"CLIPBOARD"+sFlashUID,1,1,{flashVars:{sUniq:sFlashUID},wmode:"transparent"});sFlashHtml=sFlashHtml.replace(/style="position:relative !important;"/gi,'style="position:absolute !important; left:0 !important; top:0 !important; border:0 !important; padding:0 !important; margin:0 !important; overflow:visible !important;"');elDummy.innerHTML=sFlashHtml;jindo.$Fn(this._checkFailed,this).attach(elDummy,"click")},_getFlash:function(){return nhn.FlashObject.find("CLIPBOARD"+this._sUnique)},_setFlashPosSize:function(nLeft,nTop,nWidth,nHeight){var elDummy=this._elDummy;elDummy.style.left=nLeft+"px";elDummy.style.top=nTop+"px";var oFlash=this._getFlash();oFlash.width=nWidth;oFlash.height=nHeight;oFlash.style.width=nWidth+"px";oFlash.style.height=nHeight+"px"},setData:function(el,sData){var el=jindo.$(el);var nIndex=jindo.$A(this._aElement).indexOf(el);var bExist=nIndex!=-1;if(bExist&&(!sData||typeof sData=="undefined")){this._wfHandler.detach(el,"mousemove");this._aElement.splice(nIndex,1);this._aData.splice(nIndex,1);this._setFlashPosSize(0,0,1,1);return}if(!bExist){this._wfHandler.attach(el,"mousemove");this._aElement.push(el);this._aData.push(sData)}else{this._aData[nIndex]=sData}this._setClipboard(el,sData)},_getData:function(el){var nIndex=jindo.$A(this._aElement).indexOf(el);return this._aData[nIndex]},_setClipboard:function(el,sData){var oFlash=this._getFlash();var sCursor=(jindo.$Element(el).css("cursor")||"").toUpperCase();var bHandCursor=sCursor=="POINTER"||sCursor=="HAND";try{oFlash.setClipboardData(sData);oFlash.setClipboardOptions({cursor:bHandCursor?"pointer":"default"});this._sAppliedData=sData;this._bFailed=false}catch(e){this._bFailed=true}},_checkFailed:function(){if(this._bFailed){this.fireEvent("failure",{element:this._elOvered,data:this._lastestData})}},_onFlashClick:function(sData){this.fireEvent("copy",{element:this._elOvered,data:sData})},_onFlashMouseOver:function(){this.fireEvent("over",{element:this._elOvered})},_onFlashMouseOut:function(){this.fireEvent("out",{element:this._elOvered})},_onFlashMouseDown:function(){this.fireEvent("down",{element:this._elOvered})},_onFlashMouseUp:function(){this.fireEvent("up",{element:this._elOvered})},_onFlashLoad:function(){this.fireEvent("load")}}).extend(jindo.Component);jindo.DataBridge=jindo.$Class({_htEvent:{},$static:{log:function(sFlashId,sMessage){if(sFlashId&&sMessage){this.getComponentInstance(sFlashId)._onLog(sMessage)}else{alert("Parameter is wrong!!")}},onReceive:function(sFlashId,sSenderId,vData){if(sFlashId&&sSenderId&&vData){this.getComponentInstance(sFlashId)._onReceiveData(sSenderId,vData)}else{alert("Parameter is wrong!!")}},getComponentInstance:function(sFlashId){var aInstanceList=this.getInstance();for(var i=0;i<aInstanceList.length;i++){if(sFlashId==aInstanceList[i].getFlashObjectId()){return aInstanceList[i]}}}},$init:function(htOption){this.option({sSwfPath:"data_bridge.swf",nRetryLimit:3});this.option(htOption);this._attachEvent();this._createFlashObject()},_attachEvent:function(){this._htEvent.beforeunload=jindo.$Fn(this.destroy,this).attach(window,"beforeunload")},_createFlashObject:function(){this._sFlashId="data_bridge_"+(new Date()).getMilliseconds()+Math.floor(Math.random()*100000);var welFlashContainer=jindo.$Element('<div style="position:absolute;top:-1000px;left:0px">');var sFlashVars="serviceId="+this.option("sServiceId")+"&logHandler=jindo.DataBridge.log&onReceiveHandler=jindo.DataBridge.onReceive&flashId="+this._sFlashId+"&retryLimit="+this.option("nRetryLimit");welFlashContainer.appendTo(document.body).html('<object id="'+this._sFlashId+'" width="1" height="1" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"><param name="flashvars" value="'+sFlashVars+'"><param name="movie" value="'+this.option("sSwfPath")+'"><param name = "allowScriptAccess" value = "always" /><embed name="'+this._sFlashId+'" src="'+this.option("sSwfPath")+'" flashvars="'+sFlashVars+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" width="1" height="1" allowScriptAccess="always" swLiveConnect="true"></embed></object>')},_getFlashObject:function(){return document[this._sFlashId]||jindo.$(this._sFlashId)},getFlashObjectId:function(){return this._sFlashId},getClientId:function(){return this.option("sServiceId")+"_"+this._sFlashId},send:function(vData){if(vData){try{this._getFlashObject().send(vData)}catch(e){alert("Flash object is not ready!!")}}else{alert("vData parameter is null!!")}return this},_onReceiveData:function(sSenderId,vData){this.fireEvent("receive",{sSenderId:sSenderId,vData:vData})},_onLog:function(sMessage){this.fireEvent("log",{sMessage:sMessage})},_close:function(){this._getFlashObject().close()},_detachEvent:function(){this._htEvent.beforeunload.detach(window,"beforeunload")},getLocalData:function(){},setLocalData:function(){},resetLocalData:function(){},destroy:function(){this._close();this._detachEvent();this._htEvent={};jindo.$Element(this._getFlashObject()).leave()}}).extend(jindo.Component);jindo.AjaxHistory=jindo.$Class({_htEventHandler:{},_htHistoryData:{},_oAgent:null,_welIFrame:null,_nIntervalId:0,_sCheckType:"",_sComponentId:"",$static:{checkIFrameChange:function(oLocation){var htQueryString=jindo.$S(oLocation.search.substring(1)).parseString();this.getInstance()[0]._checkLocationChange(encodeURIComponent(htQueryString.hash))}},$init:function(htOption){this._oAgent=jindo.$Agent().navigator();this._sComponentId="AjaxHistory"+(new Date()).getTime();this.option({sIFrameUrl:"history.html",nCheckInterval:100});this.option(htOption||{})},initialize:function(){var sHash=this._getLocationHash();if((this._oAgent.ie&&this._oAgent.version>=8&&jindo.$Document().renderingMode()=="Standards")||(this._oAgent.firefox&&this._oAgent.version>=3.6)||(this._oAgent.chrome&&this._oAgent.version>3)||(this._oAgent.safari&&this._oAgent.version>=5)||(this._oAgent.opera&&this._oAgent.version>=10.6)){this._htEventHandler.hashchange=jindo.$Fn(this._checkLocationChange,this).attach(window,"hashchange");this._sCheckType="hashchangeevent"}else{if(this._oAgent.ie){this._welIFrame=jindo.$Element("<IFRAME>");this._welIFrame.hide();this._welIFrame.appendTo(document.body);this._sCheckType="iframe"}else{this._nIntervalId=setInterval(jindo.$Fn(this._checkLocationChange,this).bind(),this.option("nCheckInterval"));this._sCheckType="setinterval"}}if(sHash){if(this._sCheckType=="iframe"){this._welIFrame.$value().src=this.option("sIFrameUrl")+"?hash="+sHash}else{this._htHistoryData=this._getDecodedData(sHash);this.fireEvent("change",{htHistoryData:this._htHistoryData})}}else{this.fireEvent("load")}return this},getComponentId:function(){return this._sComponentId},_getLocationHash:function(){return this._oAgent.firefox?encodeURIComponent(location.hash.substring(1)):location.hash.substring(1)},_setLocationHash:function(sHash){location.hash=sHash},addHistory:function(htHistoryData){if(htHistoryData&&typeof(htHistoryData)=="object"&&$H(htHistoryData).length()>0){this._htHistoryData=jindo.$Json(jindo.$Json(htHistoryData).toString()).toObject();var sHash=this._getEncodedData(htHistoryData);if(this._getLocationHash()!=sHash){this._setLocationHash(sHash);if(this._sCheckType=="iframe"){this._welIFrame.$value().src=this.option("sIFrameUrl")+"?hash="+sHash}return true}else{return false}}else{return false}},_checkLocationChange:function(sHash){sHash=(sHash&&typeof(sHash)=="string")?sHash:this._getLocationHash();var htCurrentHistoryData=this._getDecodedData(sHash);if(!this._compareData(this._htHistoryData,htCurrentHistoryData)){this._htHistoryData=htCurrentHistoryData;if(this._sCheckType=="iframe"){this._setLocationHash(sHash)}this.fireEvent("change",{htHistoryData:this._htHistoryData})}},_getEncodedData:function(htHistoryData){if(htHistoryData){if(typeof(JSON)=="object"&&typeof(JSON.stringify)=="function"){return encodeURIComponent(JSON.stringify(htHistoryData))}else{return encodeURIComponent(jindo.$Json(htHistoryData).toString())}}else{return""}},_getDecodedData:function(sEncodedHash){try{if(sEncodedHash){var sHashString=decodeURIComponent(sEncodedHash);if(typeof(JSON)=="object"&&typeof(JSON.parse)=="function"){return JSON.parse(sHashString)}else{return jindo.$Json(sHashString).toObject()}}}catch(e){}return{}},_compareData:function(htBase,htComparison){if(htBase&&htComparison){if(jindo.$H(htBase).length()==jindo.$H(htComparison).length()){for(var x in htBase){if(typeof(htBase[x])=="object"){if(!arguments.callee(htBase[x],htComparison[x])){return false}}else{if(htBase[x]!=htComparison[x]){return false}}}return true}else{return false}}else{return false}},destroy:function(){if(this._sCheckType=="hashchangeevent"){this._htEventHandler.hashchange.detach(window,"hashchange")}else{if(this._sCheckType=="iframe"){this._welIFrame.leave()}else{clearInterval(this._nIntervalId)}}this._htEventHandler=null;this._htHistoryData=null;this._oAgent=null;this._welIFrame=null;this._nIntervalId=null;this._sCheckType=null;this._sComponentId=null}}).extend(jindo.Component);jindo.Cache=jindo.$Class({$init:function(htOption){this._htCacheData={};this._htExpireTime={};this._waKeyList=jindo.$A();this.option({nCacheLimit:50,nExpireTime:0});this.option(htOption)},add:function(vKey,vValue,nExpireTime){if(vKey&&vValue){this._checkCacheExpire();this._checkCacheLimit();var sKey=this._makeKey(vKey);this._htCacheData[sKey]=vValue;this._htExpireTime[sKey]=this._getExpireTime(nExpireTime);this._waKeyList.push(sKey);return true}else{return false}},remove:function(vKey){if(vKey){var sKey=this._makeKey(vKey);if(this._htCacheData[vKey]){this._waKeyList=this._waKeyList.refuse(sKey);delete this._htExpireTime[sKey];delete this._htCacheData[sKey];return true}else{return false}}else{return false}},clear:function(){this._htCacheData={};this._htExpireTime={};this._waKeyList=jindo.$A()},get:function(vKey){if(vKey){var sKey=this._makeKey(vKey);if(this.check(vKey)){return this._htCacheData[sKey]}else{return null}}else{return null}},check:function(vKey){if(vKey){var sKey=this._makeKey(vKey);if(this._htCacheData[sKey]&&this._checkCacheExpire(sKey)){return true}else{return false}}else{return false}},_checkCacheLimit:function(){if(this._waKeyList.length()==this.option("nCacheLimit")){this.remove(this._waKeyList.get(0))}},_checkCacheExpire:function(sKey){if(sKey){var nTime=this._getTime();if(this._htExpireTime[sKey]===0||nTime<this._htExpireTime[sKey]){return true}else{this.remove(jindo.$S(sKey).parseString());return false}}else{for(var i=0,n=this._waKeyList.length();i<n;i++){return this._checkCacheExpire(this._waKeyList.get(i))}}},_getExpireTime:function(nExpireTime){if(nExpireTime){return this._getTime()+(nExpireTime*1000)}else{if(this.option("nExpireTime")){return this._getTime()+(this.option("nExpireTime")*1000)}else{return 0}}},_makeKey:function(vKey){if(vKey){if(typeof(vKey)=="string"){return vKey}else{return jindo.$H(vKey).toQueryString()}}else{return""}},_getTime:function(){return +new Date()},destroy:function(){this._waKeyList=null;this._htCacheData=null;this._htExpireTime=null}}).extend(jindo.Component);jindo.ModalDialog=jindo.$Class({$init:function(htOption){var htDefaultOption={Foggy:{nShowDuration:150,nShowOpacity:0.8,nHideDuration:150,nHideOpacity:0,sEffect:"linear",nFPS:30}};this.option(htDefaultOption);this.option(htOption||{});this._initFoggy()},_initFoggy:function(){var self=this;this._oFoggy=new jindo.Foggy(this.option("Foggy")).attach({show:function(e){self.fireEvent("show",{elLayer:self._elLayer})},hide:function(){self.detachAll("close").detachAll("confirm").detachAll("cancel");self._detachEvents();self._welLayer.hide();self._welLayer.leave();self._bIsShown=false;self.fireEvent("hide",{elLayer:self._elLayer})}});this._oFoggy.getFog().className=this.option("sClassPrefix")+"fog"},getFoggy:function(){return this._oFoggy},show:function(htTemplateProcess,htEventHandler){if(this.isShown()){return}this.attach(htEventHandler);document.body.appendChild(this._elLayer);this._welLayer.html(this._template.process(htTemplateProcess));var htCustomEvent={elLayer:this._elLayer};if(this.fireEvent("beforeShow",htCustomEvent)){this._welLayer.show();this._attachEvents();this.getLayerPosition().setPosition();this._bIsShown=true;this._oFoggy.show(this._elLayer)}else{return}},hide:function(){if(this.fireEvent("beforeHide",{elLayer:this._elLayer})){this._oFoggy.hide()}}}).extend(jindo.Dialog);jindo.DropArea=jindo.$Class({$init:function(el,htOption){this._el=jindo.$(el);this._wel=jindo.$Element(this._el);this.option({sClassName:"droppable",oDragInstance:null});this.option(htOption||{});this._waOveredDroppableElement=jindo.$A([]);this._elHandle=null;this._elDragging=null;this._wfMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfMouseOver=jindo.$Fn(this._onMouseOver,this);this._wfMouseOut=jindo.$Fn(this._onMouseOut,this);var oDrag=this.option("oDragInstance");if(oDrag){var self=this;oDrag.attach({handleDown:function(oCustomEvent){self._elHandle=oCustomEvent.elHandle;self._waOveredDroppableElement.empty()},dragStart:function(oCustomEvent){self._reCalculate();self.fireEvent(oCustomEvent.sType,oCustomEvent);self._wfMouseMove.attach(document,"mousemove");self._wfMouseOver.attach(self._el,"mouseover");self._wfMouseOut.attach(self._el,"mouseout")},beforeDrag:function(oCustomEvent){self._elDragging=oCustomEvent.elDrag},dragEnd:function(oCustomEvent){var o={};for(var sKey in oCustomEvent){o[sKey]=oCustomEvent[sKey]}o.aDrop=self.getOveredLists().concat();self._clearOveredDroppableElement(oCustomEvent.weEvent,oCustomEvent.bInterupted);self.fireEvent(oCustomEvent.sType,o);self._wfMouseMove.detach(document,"mousemove");self._wfMouseOver.detach(self._el,"mouseover");self._wfMouseOut.detach(self._el,"mouseout")},handleUp:function(oCustomEvent){self._elDragging=null;self._elHandle=null}})}},_addOveredDroppableElement:function(elDroppable){if(this._waOveredDroppableElement.indexOf(elDroppable)==-1){this._waOveredDroppableElement.push(elDroppable);this.fireEvent("over",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable})}},_fireMoveEvent:function(elDroppable,oRect,oPos,we){var nRatioX=(oPos.pageX-oRect.nLeft)/(oRect.nRight-oRect.nLeft);var nRatioY=(oPos.pageY-oRect.nTop)/(oRect.nBottom-oRect.nTop);this.fireEvent("move",{weEvent:we,elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable,nRatioX:nRatioX,nRatioY:nRatioY})},_removeOveredDroppableElement:function(elDroppable){var nIndex=this._waOveredDroppableElement.indexOf(elDroppable);if(nIndex!=-1){this._waOveredDroppableElement.splice(nIndex,1);this.fireEvent("out",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable})}},_clearOveredDroppableElement:function(weEvent,bInterupted){if(bInterupted){this._waOveredDroppableElement.empty();return}for(var elDroppable;(elDroppable=this._waOveredDroppableElement.$value()[0]);){this._waOveredDroppableElement.splice(0,1);this.fireEvent("drop",{weEvent:weEvent,elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable})}},getOveredLists:function(){return this._waOveredDroppableElement?this._waOveredDroppableElement.$value():[]},_isChildOfDropArea:function(el){if(this._el===document||this._el===el){return true}return this._wel.isParentOf(el)},_findDroppableElement:function(el){var sClass="."+this.option("sClassName");var elDroppable=jindo.$$.test(el,sClass)?el:jindo.$$.getSingle("! "+sClass,el);if(!this._isChildOfDropArea(el)){elDroppable=null}return elDroppable},_onMouseMove:function(we){var oDrag=this.option("oDragInstance");if(oDrag&&oDrag.isDragging()){var oPos=we.pos();if(we.element==this._elDragging){var aItem=this._aItem;var aItemRect=this._aItemRect;for(var i=0,htRect,el;((htRect=aItemRect[i])&&(el=aItem[i]));i++){if(htRect.nLeft<=oPos.pageX&&oPos.pageX<=htRect.nRight&&htRect.nTop<=oPos.pageY&&oPos.pageY<=htRect.nBottom){this._addOveredDroppableElement(el);this._fireMoveEvent(el,htRect,oPos,we)}else{this._removeOveredDroppableElement(el)}}}else{var elDroppable=this._findDroppableElement(we.element);if(!elDroppable){return}this._addOveredDroppableElement(elDroppable);var htOffset=jindo.$Element(elDroppable).offset();var htArea={nLeft:htOffset.left,nTop:htOffset.top,nRight:htOffset.left+elDroppable.offsetWidth,nBottom:htOffset.top+elDroppable.offsetHeight};if(htArea.nLeft<=oPos.pageX&&oPos.pageX<=htArea.nRight&&htArea.nTop<=oPos.pageY&&oPos.pageY<=htArea.nBottom){this._fireMoveEvent(elDroppable,htArea,oPos,we)}}}},_onMouseOver:function(we){var elDroppable=this._findDroppableElement(we.element);if(elDroppable){this._addOveredDroppableElement(elDroppable)}},_onMouseOut:function(we){var elDroppable=this._findDroppableElement(we.element);if(elDroppable&&we.relatedElement&&!jindo.$Element(we.relatedElement).isChildOf(we.element)){this._removeOveredDroppableElement(elDroppable)}},_getRectInfo:function(el){var htOffset=jindo.$Element(el).offset();return{nLeft:htOffset.left,nTop:htOffset.top,nRight:htOffset.left+el.offsetWidth,nBottom:htOffset.top+el.offsetHeight}},_reCalculate:function(){var aItem=jindo.$$("."+this.option("sClassName"),this._el);if(this._el.tagName&&jindo.$$.test(this._el,"."+this.option("sClassName"))){aItem.push(this._el)}this._aItem=aItem;this._aItemRect=[];for(var i=0,el;(el=aItem[i]);i++){this._aItemRect.push(this._getRectInfo(el))}}}).extend(jindo.Component);jindo.LazyLoading={_bIE:jindo.$Agent().navigator().ie,_waLoading:jindo.$A([]),_waLoaded:jindo.$A([]),_whtScript:jindo.$H({}),_whtCallback:jindo.$H({})};jindo.LazyLoading.load=function(sUrl,fCallback,sCharset){if(typeof fCallback!="function"){fCallback=function(){}}this._queueCallback(sUrl,fCallback);if(this._checkIsLoading(sUrl)){return false}if(this._checkAlreadyLoaded(sUrl)){this._doCallback(sUrl);return true}this._waLoading.push(sUrl);var self=this;var elHead=document.getElementsByTagName("head")[0];var elScript=document.createElement("script");elScript.type="text/javascript";elScript.charset=sCharset||"utf-8";elScript.src=sUrl;this._whtScript.add(sUrl,elScript);if(this._bIE){elScript.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){self._waLoaded.push(sUrl);self._waLoading=self._waLoading.refuse(sUrl);self._doCallback(sUrl);this.onreadystatechange=null}}}else{elScript.onload=function(){self._waLoaded.push(sUrl);self._waLoading=self._waLoading.refuse(sUrl);self._doCallback(sUrl)}}elHead.appendChild(elScript);return true};jindo.LazyLoading._queueCallback=function(sUrl,fCallback){var aCallback=this._whtCallback.$(sUrl);if(aCallback){aCallback.push(fCallback)}else{this._whtCallback.$(sUrl,[fCallback])}};jindo.LazyLoading._doCallback=function(sUrl){var aCallback=this._whtCallback.$(sUrl).concat();for(var i=0;i<aCallback.length;i++){this._whtCallback.$(sUrl).splice(i,1);aCallback[i]()}};jindo.LazyLoading.abort=function(sUrl){if(this._checkIsLoading(sUrl)){var elScript=this.getScriptElement(sUrl);this._waLoading=this._waLoading.refuse(sUrl);if(this._bIE){elScript.onreadystatechange=null}else{elScript.onload=null}jindo.$Element(elScript).leave();this._whtScript.remove(sUrl);this._whtCallback.remove(sUrl);return true}else{return false}};jindo.LazyLoading._checkAlreadyLoaded=function(sUrl){return this._waLoaded.has(sUrl)};jindo.LazyLoading._checkIsLoading=function(sUrl){return this._waLoading.has(sUrl)};jindo.LazyLoading.getLoaded=function(){return this._waLoaded.$value()};jindo.LazyLoading.getLoading=function(){return this._waLoading.$value()};jindo.LazyLoading.getScriptElement=function(sUrl){return this._whtScript.$(sUrl)||null};jindo.MouseGesture=jindo.$Class({_elCanvas:null,_oDC:null,_htEventHandler:{},_aPointList:[],_nPointCount:0,_sDrawingType:"",_bMobileSafari:false,$init:function(htOption){this.option({sLineColor:"#FF0000",nLineThickness:5,nFilteringDistance:10,elTargetWindow:window});this.option(htOption);var sUserAgent=window.navigator.userAgent.toLowerCase();this._bMobileSafari=(/mobile/.test(sUserAgent)&&/safari/.test(sUserAgent))||/iphone/.test(sUserAgent);this._htEventHandler.mouse_down=jindo.$Fn(this._onMouseDown,this).attach(this.option("elTargetWindow").document,this._bMobileSafari?"touchstart":"mousedown",true);this._createCanvas()},_createCanvas:function(){if(jindo.$Agent().navigator().ie){if(!this.option("elTargetWindow").document.namespaces.vml_nhn){this.option("elTargetWindow").document.namespaces.add("vml_nhn","urn:schemas-microsoft-com:vml")}var elStyle=this.option("elTargetWindow").document.createStyleSheet();elStyle.cssText="vml_nhn\\:shape, vml_nhn\\:stroke {behavior:url(#default#VML); display:inline-block; position:absolute;width:1px;height:1px;};";this._elCanvas=jindo.$("<div>");this._sDrawingType="vml"}else{this._elCanvas=jindo.$("<canvas>");this._oDC=this._elCanvas.getContext("2d");this._sDrawingType="canvas";this._oDC.globalCompositeOperation="destination-over"}jindo.$Element(this._elCanvas).css({position:"absolute",top:"0px",left:"0px"}).hide().appendTo(this.option("elTargetWindow").document.body)},_showCanvas:function(){var htDocumentSize=jindo.$Document(this.option("elTargetWindow").document).clientSize();var htScrollPosition=jindo.$Document(this.option("elTargetWindow").document).scrollPosition();if(this._sDrawingType=="canvas"){this._elCanvas.width=htDocumentSize.width;this._elCanvas.height=htDocumentSize.height}jindo.$Element(this._elCanvas).css({top:htScrollPosition.top+"px",width:htDocumentSize.width+"px",height:htDocumentSize.height+"px",zIndex:999999}).show()},_hideCanvas:function(){if(this._elCanvas){if(this._sDrawingType=="vml"){this._elCanvas.innerHTML=""}else{if(this._sDrawingType=="canvas"){this._oDC.beginPath();this._oDC.clearRect(0,0,this._elCanvas.offsetWidth,this._elCanvas.offsetHeight);this._oDC.closePath()}}jindo.$Element(this._elCanvas).hide()}},_drawLine:function(htStartPosition,htEndPosition){if(this._sDrawingType=="vml"){var sPath=" m "+(htStartPosition.nX*1-5)+","+(htStartPosition.nY*1-5)+" l "+(htEndPosition.nX*1-5)+","+(htEndPosition.nY*1-5);var sHTML='<vml_nhn:shape coordsize="1 1" strokeweight="'+this.option("nLineThickness")+'pt" strokecolor="'+this.option("sLineColor")+'" path="'+sPath+'"><vml_nhn:stroke endcap="round" /></vml_nhn:shape>';this._elCanvas.insertAdjacentHTML("BeforeEnd",sHTML)}else{if(this._sDrawingType=="canvas"){this._oDC.save();this._oDC.beginPath();this._oDC.lineCap="round";this._oDC.lineWidth=this.option("nLineThickness")+2;this._oDC.strokeStyle=this.option("sLineColor");this._oDC.moveTo(htStartPosition.nX,htStartPosition.nY);this._oDC.lineTo(htEndPosition.nX,htEndPosition.nY);this._oDC.stroke();this._oDC.closePath();this._oDC.restore()}}},_addPointList:function(weTarget){var htPosition;if(this._bMobileSafari){htPosition={pageX:weTarget._event.targetTouches[0].clientX,pageY:weTarget._event.targetTouches[0].clientY}}else{htPosition=weTarget.pos()}var htResult={nX:htPosition.clientX,nY:htPosition.clientY};this._aPointList.push(htResult);this._nPointCount++;return htResult},_onMouseDown:function(weMouseDown){if(weMouseDown.mouse().right||this._bMobileSafari){weMouseDown.stop();this._addPointList(weMouseDown);this._htEventHandler.mouse_move=jindo.$Fn(this._onMouseMove,this).attach(this.option("elTargetWindow").document,this._bMobileSafari?"touchmove":"mousemove");this._htEventHandler.mouse_up=jindo.$Fn(this._onMouseUp,this).attach(this.option("elTargetWindow").document,this._bMobileSafari?"touchend":"mouseup");if(this._sDrawingType=="vml"){this.option("elTargetWindow").document.body.setCapture()}}},_onMouseMove:function(weMouseMove){var htPosition=this._addPointList(weMouseMove);if(this._nPointCount===2){this._showCanvas()}if(this._nPointCount%2){this._drawLine({nX:this._aPointList[this._nPointCount-3]["nX"],nY:this._aPointList[this._nPointCount-3]["nY"]},htPosition)}},_recognitionGesture:function(){var nX,nY,nBeforeX,nBeforeY,nGradient,nAbsGradient,nResult,nDistance;var aFilteredList=[],aResult=[];var nBaseGradient1=Math.tan(22.5*Math.PI/180);var nBaseGradient2=Math.tan(67.5*Math.PI/180);for(var i=1;i<this._aPointList.length;i++){nX=this._aPointList[i]["nX"];nY=this._aPointList[i]["nY"];nBeforeX=this._aPointList[i-1]["nX"];nBeforeY=this._aPointList[i-1]["nY"];nDistance=Math.sqrt(Math.pow(nY-nBeforeY,2)+Math.pow(nX-nBeforeX,2));if(nDistance>this.option("nFilteringDistance")){nGradient=-(nY-nBeforeY)/(nX-nBeforeX);nAbsGradient=Math.abs(nGradient);if(nAbsGradient>=nBaseGradient2){if(nY<nBeforeY){nResult=8}else{nResult=4}}else{if(nAbsGradient<nBaseGradient1){if(nX<nBeforeX){nResult=6}else{nResult=2}}else{if(nAbsGradient>=nBaseGradient1&&nAbsGradient<nBaseGradient2){if(nGradient>0){nResult=1}else{nResult=3}if(nX<nBeforeX){nResult+=4}}}}aFilteredList.push(nResult)}}for(i=1;i<aFilteredList.length;i++){if(aResult.length===0){aResult.push(aFilteredList[i])}else{if(aResult[aResult.length-1]!=aFilteredList[i]){aResult.push(aFilteredList[i])}}}return{aCodeList:aResult,sCode:aResult.join("")}},_onMouseUp:function(weEvent){if(weEvent.mouse().right||this._bMobileSafari){weEvent.stop();if(this._htEventHandler.mouse_move){this._htEventHandler.mouse_move.detach(this.option("elTargetWindow").document,this._bMobileSafari?"touchmove":"mousemove")}if(this._htEventHandler.mouse_up){this._htEventHandler.mouse_up.detach(this.option("elTargetWindow").document,this._bMobileSafari?"touchend":"mouseup")}if(this._aPointList.length&&!this._bMobileSafari){this._htEventHandler.setted_context_menu=this.option("elTargetWindow").document.oncontextmenu;this.option("elTargetWindow").document.oncontextmenu=function(){return false};setTimeout(jindo.$Fn(function(){this.option("elTargetWindow").document.oncontextmenu=this._htEventHandler.setted_context_menu},this).bind(),1)}if(this._sDrawingType=="vml"){this.option("elTargetWindow").document.body.releaseCapture()}var htResult=this._recognitionGesture();if(htResult.sCode){this.fireEvent("gesture",htResult)}this._nPointCount=0;this._aPointList=[];this._hideCanvas()}},destroy:function(){jindo.$Element(this._elCanvas).leave();this._elCanvas=null;this._oDC=null;this._htEventHandler=null;this._nPointcount=null;this._aPointList=null;this._sDrawingType=null;this._bMobileSafari=null}}).extend(jindo.Component);jindo.CircularRolling=jindo.$Class({$init:function(){this.refresh()},refresh:function(){this.getTransition().abort();this._el[this._oKeys.scrollLeft]=0;this._nDuplicateCount=0;this._nItemCount=this.getItems().length;this._nDisplayedCount=this.getDisplayedItemCount();if(this.isOverflowed()){this._nDuplicateCount=(this._nDisplayedCount<=(this._nItemCount/2))?1:2;this._duplicate(this._nDuplicateCount)}return this},_duplicate:function(n){var elList=this._elList,elDuplicatedList=jindo.$("<ul>"),sListInnerHTML=elList.innerHTML,aItem;for(var i=0;i<n;i++){elDuplicatedList.innerHTML=sListInnerHTML;aItem=jindo.$$("> li",elDuplicatedList);for(var j=0;j<aItem.length;j++){elList.appendChild(aItem[j])}}},_setStartPosition:function(n,nTo){var oKeys=this._oKeys;var nNewPosition=n%(this._nItemCount)||0;if(nTo<0){var nTimes=this._nDuplicateCount;if(nNewPosition+this._nDisplayedCount>this._nItemCount){nTimes-=1}nNewPosition+=this._nItemCount*nTimes}this._el[oKeys.scrollLeft]=this._getPosition(nNewPosition)},moveBy:function(n){if(this.isMoving()){return false}if(Math.abs(n)>this._nDisplayedCount){if(n>0){n=this._nDisplayedCount}else{n=-this._nDisplayedCount}}this._setStartPosition(this.getIndex(),n);var nTarget=this.getIndex()+n;if(!this._move(nTarget)){return false}return true}}).extend(jindo.Rolling);jindo.SelectArea=jindo.$Class({_waToggleCandidate:null,_waSelected:null,_aSizeInfo:null,$init:function(el,htOption){this._el=jindo.$(el);this._wel=jindo.$Element(this._el);var htDefaultOption={bActivateOnload:true,sClassName:"selectable",htStatus:{sSelected:"selected"},bMultiSelection:true,bDragSelect:true,nThreshold:5,bDeselectAllOutside:true,bRemainOne:false,bToggleSelected:false};this.option(htDefaultOption);this.option(htOption||{});this._waToggleCandidate=jindo.$A([]);this._waSelected=jindo.$A([]);this._sCtrl=(jindo.$Agent().os().mac)?"meta":"ctrl";this._welRectIndicator=null;this._wfDragStart=jindo.$Fn(this._onDragSelectStart,this);this._wfSelectStart=jindo.$Fn(this._onDragSelectStart,this);this._wfMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfMouseUp=jindo.$Fn(this._onMouseUp,this);this._wfMouseUpWithinSelected=jindo.$Fn(this._onMouseUpWithinSelected,this);this._wfCompute=jindo.$Fn(this._computeSizeAndPos,this);if(this.option("bActivateOnload")){this.activate()}},getSelectableElement:function(){return jindo.$$("."+this.option("sClassName"),this._el)},isSelectable:function(el){return jindo.$Element(el).isChildOf(this._el)&&jindo.$$.test(el,"."+this.option("sClassName"))},getIndex:function(el){return jindo.$A(this.getSelectableElement()).indexOf(el)},select:function(a,bRemainSelected,bFireChangeEvent){a=this._convertArray(a);if(typeof bRemainSelected=="undefined"){bRemainSelected=false}if(typeof bFireChangeEvent=="undefined"){bFireChangeEvent=true}if(!bRemainSelected||!this.option("bMultiSelection")){this.deselectAll(false)}var aLastSelected=this._convertArray(this.getSelected()).concat();var htStatus=this.option("htStatus");for(var i=0;i<a.length;i++){var el=a[i];var wel=jindo.$Element(el);var htCustomEvent;if(this.isSelectable(el)&&!this.isSelected(el)&&this.fireEvent("beforeSelect",htCustomEvent)){htCustomEvent={elSelectable:el,nIndex:this.getIndex(el),bSelectedAgain:(a.length===1&&this._vLastSelected===a[0])};wel.addClass(htStatus.sSelected);this._waSelected.push(el);this.fireEvent("select",htCustomEvent)}}if(bFireChangeEvent){this._fireChangeEvent(aLastSelected)}return this},deselect:function(a,bFireChangeEvent){a=this._convertArray(a);if(typeof bFireChangeEvent=="undefined"){bFireChangeEvent=true}var aLastSelected=this._convertArray(this.getSelected()).concat();var htStatus=this.option("htStatus");for(var i=0;i<a.length;i++){var el=a[i];var wel=jindo.$Element(el);var htParam={elSelectable:el,nIndex:this.getIndex(el)};if(this.isSelectable(el)&&this.isSelected(el)&&this.fireEvent("beforeDeselect",htParam)){wel.removeClass(htStatus.sSelected);this._waSelected=this._waSelected.refuse(el);this.fireEvent("deselect",htParam)}}if(bFireChangeEvent){this._fireChangeEvent(aLastSelected)}return this},deselectAll:function(bFireChangeEvent){if(typeof bFireChangeEvent=="undefined"){bFireChangeEvent=true}this.deselect(this.getSelectableElement(),bFireChangeEvent);return this},toggle:function(a,bFireChangeEvent){a=this._convertArray(a);if(typeof bFireChangeEvent=="undefined"){bFireChangeEvent=true}for(var i=0;i<a.length;i++){var el=a[i];if(!this.isSelected(el)){this.select(el,true,bFireChangeEvent)}else{this.deselect(el,bFireChangeEvent)}}return this},getSelected:function(){if(this._waSelected.length()>0){return(this._waSelected.length()===1)?this._waSelected.get(0):this._waSelected.$value()}return null},isSelected:function(el){return this._waSelected.has(el)},_getSelectableUntil:function(el){var aReturn=el;var elFrom=this._elStartPoint;if(elFrom&&this.isSelected(elFrom)){var wa=jindo.$A(this.getSelectableElement());var nFrom=wa.indexOf(elFrom);var nTo=wa.indexOf(el);aReturn=wa.slice(Math.min(nFrom,nTo),Math.min(nFrom,nTo)+Math.abs(nFrom-nTo)+1).$value()}return aReturn},_findSelectableElement:function(el){var sClassName=this.option("sClassName");return(jindo.$$.test(el,"."+sClassName))?el:jindo.$$.getSingle("! ."+sClassName,el)},_isChanged:function(aLastSelected){var waLast=jindo.$A(aLastSelected),a=this._convertArray(this.getSelected());if(aLastSelected.length!=a.length){return true}for(var i=0;i<a.length;i++){if(!waLast.has(a[i])){return true}}return false},_fireChangeEvent:function(aLastSelected){if(this._isChanged(aLastSelected)){this.fireEvent("change")}},_convertArray:function(a){if(!(a instanceof Array)){if(a){a=[a]}else{a=[]}}return a},_onMouseDown:function(we){var htKey=we.key();var elSelectable=this._findSelectableElement(we.element);var aLastSelected=this._convertArray(this.getSelected()).concat();this._vLastSelected=this.getSelected();this._waSelectable=jindo.$A(this.getSelectableElement());this._waLastSelected=jindo.$A(this._convertArray(this._vLastSelected));if(elSelectable){var bWithinSelected=jindo.$A(this._convertArray(this._vLastSelected)).has(elSelectable);if(this.fireEvent("selectStart",{vLastSelected:this._vLastSelected,elSelectable:elSelectable,bWithinSelected:bWithinSelected,weEvent:we})){if(bWithinSelected&&!htKey.shift&&!htKey[this._sCtrl]){this._elWaitMouseUp=elSelectable;this._wfMouseUpWithinSelected.attach(this._elWaitMouseUp,"mouseup")}else{var bRemainSelected=false;if(this.option("bMultiSelection")){if(htKey.shift){if(htKey[this._sCtrl]){bRemainSelected=true}var aSelectable=this._getSelectableUntil(elSelectable);if(aSelectable==elSelectable){this._elStartPoint=elSelectable}this.select(aSelectable,bRemainSelected,false)}else{this._elStartPoint=elSelectable;if(htKey[this._sCtrl]){this.toggle(elSelectable,false)}else{this.select(elSelectable,bRemainSelected,false)}}}else{if(!this.option("bRemainOne")&&this.option("bToggleSelected")&&this.getSelected()==elSelectable){this.deselect(elSelectable,false)}else{this.select(elSelectable,bRemainSelected,false)}}this._fireChangeEvent(aLastSelected);this.fireEvent("selectEnd",{vSelected:this.getSelected()})}}}else{this._wfMouseUp.attach(document,"mouseup");this._wfCompute.attach(window,"resize").attach(this._el,"scroll");if(this.option("bMultiSelection")&&this.option("bDragSelect")){this._bOverThreshold=null;this._htDragStartPos=we.pos();this._htDragStartPos.scrollTop=this._el.scrollTop;this._htDragStartPos.scrollLeft=this._el.scrollLeft;this._wfMouseMove.attach(document,"mousemove")}}},_onDragSelectStart:function(we){we.stop(jindo.$Event.STOP_DEFAULT)},_getRectangleElement:function(){if(!this._welRectIndicator&&this.option("bMultiSelection")&&this.option("bDragSelect")){this._welRectIndicator=jindo.$Element(jindo.$('<div style="position:absolute;left:-10px;top:-10px;width:1px;height:1px;margin:0;padding:0;border:1px dotted black;z-index:99999;">'));this._welRectIndicator.appendTo(this._el)}return this._welRectIndicator},getRectangleElement:function(){return this._getRectangleElement().$value()},_computeSizeAndPos:function(){var aSizeInfo=this._aSizeInfo=[];jindo.$A(this.getSelectableElement()).forEach(function(el){aSizeInfo.push([el,el.offsetLeft,el.offsetTop,el.offsetLeft+el.offsetWidth,el.offsetTop+el.offsetHeight])})},_onMouseMove:function(we){this._htDragEndPos=we.pos();var welRect=this._getRectangleElement(),elRect=welRect.$value();var nGapX=this._htDragEndPos.pageX-this._htDragStartPos.pageX;var nGapY=this._htDragEndPos.pageY-this._htDragStartPos.pageY;var nX=this._htDragStartPos.layerX;var nY=this._htDragStartPos.layerY;var nThreshold=this.option("nThreshold");if(nThreshold&&!this._bOverThreshold){var nDistance=Math.sqrt(nGapX*nGapX+nGapY*nGapY);if(nThreshold>nDistance){return}this.fireEvent("dragStart");this._bOverThreshold=true;this._computeSizeAndPos();this._nRectX=nX;this._nRectY=nY;this._nDragDirectionX=1;this._nDragDirectionY=1;welRect.offset(nY,nX);if(!we.key()[this._sCtrl]){this.deselectAll(false)}}var nWidth=nGapX;var nHeight=nGapY;this._placeRect(nX,nY,nWidth,nHeight);this._setToggleCandidate(this._getSelectableByRect([elRect,elRect.offsetLeft,elRect.offsetTop,elRect.offsetLeft+elRect.offsetWidth,elRect.offsetTop+elRect.offsetHeight]))},_placeRect:function(nX,nY,nWidth,nHeight){var welRect=this._getRectangleElement();welRect.show();this._nDragDirectionX=(nX>this._nRectX)?1:-1;this._nDragDirectionY=(nY>this._nRectY)?1:-1;nWidth-=((this._el.scrollLeft-this._htDragStartPos.scrollLeft)*this._nDragDirectionX);nHeight-=((this._el.scrollTop-this._htDragStartPos.scrollTop)*this._nDragDirectionY);welRect.width(Math.max(Math.abs(nWidth),2)).height(Math.max(Math.abs(nHeight),2));nX+=Math.min(nWidth,0);nY+=Math.min(nHeight,0);welRect.css("left",nX+"px").css("top",nY+"px")},_getSelectableByRect:function(aRect){var aReturn=[];jindo.$A(this._aSizeInfo).forEach(function(aSelectable){if(aSelectable[1]<aRect[3]&&aSelectable[3]>aRect[1]&&aSelectable[2]<aRect[4]&&aSelectable[4]>aRect[2]){aReturn.push(aSelectable[0]);jindo.$A.Continue()}});return aReturn},_setToggleCandidate:function(a){a=this._convertArray(a);var bChanged=false;if(this._waToggleCandidate.length()!=a.length){bChanged=true}var htStatus=this.option("htStatus");var wa=jindo.$A(a);var waRemove=jindo.$A([]);this._waToggleCandidate.forEach(function(el,i){if(!wa.has(el)){waRemove.push(el);bChanged=true}});if(bChanged){waRemove.forEach(function(el){this._waToggleCandidate=this._waToggleCandidate.refuse(el);jindo.$Element(el).toggleClass(htStatus.sSelected)},this);wa.forEach(function(el){if(this.isSelected(el)){jindo.$Element(el).removeClass(htStatus.sSelected)}else{jindo.$Element(el).addClass(htStatus.sSelected)}},this);this._waToggleCandidate=jindo.$A(this._waToggleCandidate.$value().concat(a)).unique();this.fireEvent("dragSelecting",{aSelectable:this._waToggleCandidate.$value()})}},_onMouseUp:function(we){var bDeselectAll=(!this.isDragging()&&!we.key()[this._sCtrl]&&(!this.option("bRemainOne")&&this.option("bDeselectAllOutside"))),bHasCandidate=this._waToggleCandidate.length(),aLastSelected=this._convertArray(this.getSelected()).concat();if(bDeselectAll){this.deselectAll(false)}if(bHasCandidate){this._elStartPoint=this._waToggleCandidate.$value()[0];this.toggle(this._waToggleCandidate.$value())}this._fireChangeEvent(aLastSelected);this._stopDragging()},stopSelecting:function(){this._wfMouseUpWithinSelected.detach(this._elWaitMouseUp,"mouseup");return this},isDragging:function(){return this._bOverThreshold},_restore:function(){jindo.$ElementList(this._waToggleCandidate.$value()).removeClass(this.option("htStatus").sSelected);this.deselectAll(false);if(this._waLastSelected.$value().length){this.select(this._waLastSelected.$value(),false,false)}},_stopDragging:function(){this._waToggleCandidate.empty();this._htDragStartPos=null;this._htDragEndPos=null;this._wfMouseMove.detach(document,"mousemove");this._wfMouseUp.detach(document,"mouseup");this._wfCompute.detach(window,"resize").detach(this._el,"scroll");if(this.isDragging()){this._bOverThreshold=null;this._getRectangleElement().hide();this.fireEvent("dragEnd")}},stopDragging:function(){if(this.isDragging()){this._restore();this._stopDragging()}return this},_onMouseUpWithinSelected:function(we){this.stopSelecting();var elSelectable=this._findSelectableElement(we.element);if(elSelectable&&elSelectable==we.currentElement){this.deselectAll(false);this.select(elSelectable,false,true)}},_onActivate:function(){this._sMozUserSelect=this._wel.css("MozUserSelect");this._wel.css("MozUserSelect","none");this._wfMouseDown.attach(this._el,"mousedown");this._wfDragStart.attach(this._el,"dragstart");this._wfSelectStart.attach(this._el,"selectstart")},_onDeactivate:function(){this._wel.css("MozUserSelect",this._sMozUserSelect);this._wfMouseDown.detach(this._el,"mousedown");this._wfDragStart.detach(this._el,"dragstart");this._wfSelectStart.detach(this._el,"selectstart")}}).extend(jindo.UIComponent);jindo.MultipleAjaxRequest=jindo.$Class({_bIsRequesting:false,$init:function(htOption){var htDefaultOption={sMode:"parallel"};this.option(htDefaultOption);this.option(htOption)},isRequesting:function(){return this._bIsRequesting},request:function(aAjax,htMetaData){if(this.isRequesting()){return false}if(!(aAjax instanceof Array)){aAjax=[aAjax]}if(typeof htMetaData=="undefined"){htMetaData={}}this._htMetaData=htMetaData;switch(this.option("sMode")){case"parallel":this._parallelRequest(aAjax);break;case"serial":this._serialRequest(aAjax);break;default:return false}return true},_fireEventStart:function(){this._bIsRequesting=true;if(this.fireEvent("start",{aAjax:this._aAjax,htMetaData:this._htMetaData})){return true}else{this.abort();return false}},_fireEventBeforeEachRequest:function(nIndex){if(this.fireEvent("beforeEachRequest",{oAjax:this._aAjax[nIndex],nIndex:nIndex})){return true}else{this.abort();return false}},_fireEventAfterEachResponse:function(nIndex){if(this.fireEvent("afterEachResponse",{oAjax:this._aAjax[nIndex],nIndex:nIndex})){return true}else{this.abort();return false}},_parallelRequest:function(aAjax){this._aAjaxData=aAjax;this._aAjax=[];this._aStatus=[];this._aStatus.length=aAjax.length;this._aResponse=[];if(this._fireEventStart()){var self=this;jindo.$A(this._aAjaxData).forEach(function(htAjax,i){var fParallelResponseHandler=function(oResponse){oResponse._constructor=self._aAjax[i];var nIndex=self._findAjaxObjectIndexOfResponse(oResponse._constructor);self._aResponse[nIndex]=oResponse;self._aStatus[nIndex]=true;if(self._fireEventAfterEachResponse(nIndex)){if(self._hasCompletedGotResponsesOfParallelResponses()){self._complete()}}};self._aAjax.push(jindo.$Ajax(htAjax.sUrl,htAjax.htOption));htAjax.htOption.onload=fParallelResponseHandler;htAjax.htOption.onerror=fParallelResponseHandler;htAjax.htOption.ontimeout=fParallelResponseHandler;self._aAjax[i].option(htAjax.htOption);if(self._fireEventBeforeEachRequest(i)){self._aAjax[i].request(htAjax.htParameter)}else{jindo.$A.Break()}})}},_findAjaxObjectIndexOfResponse:function(oAjax){return jindo.$A(this._aAjax).indexOf(oAjax)},_hasCompletedGotResponsesOfParallelResponses:function(){var bResult=true;jindo.$A(this._aStatus).forEach(function(bStatus){if(!bStatus){bResult=false;jindo.$A.Break()}});return bResult},_serialRequest:function(aAjax){this._aAjaxData=aAjax;this._aAjax=[];this._aStatus=[];this._aStatus.length=aAjax.length;this._aResponse=[];var self=this;jindo.$A(this._aAjaxData).forEach(function(htAjax,i){var fSerialRequestHandler=function(e){e._constructor=self._aAjax[i];self._aResponse.push(e);self._serialRequestNext()};self._aAjax.push(jindo.$Ajax(htAjax.sUrl,htAjax.htOption));htAjax.htOption.onload=fSerialRequestHandler;htAjax.htOption.onerror=fSerialRequestHandler;htAjax.htOption.ontimeout=fSerialRequestHandler;self._aAjax[i].option(htAjax.htOption)});if(this._fireEventStart()){if(this._fireEventBeforeEachRequest(0)){this._aAjax[0].request(this._aAjaxData[0].htParameter);this._aStatus[0]=true}}},_serialRequestNext:function(){var nIndex=-1;for(var i=0;i<this._aStatus.length;i++){if(!this._aStatus[i]){this._aStatus[i]=true;nIndex=i;break}}if(nIndex>0){if(this._fireEventAfterEachResponse(nIndex-1)){if(this._fireEventBeforeEachRequest(nIndex)){this._aAjax[nIndex].request(this._aAjaxData[nIndex].htParameter)}}}else{if(nIndex==-1){if(this._fireEventAfterEachResponse(this._aStatus.length-1)){this._complete()}}}},_reset:function(){this._aAjaxData.length=0;this._aAjax.length=0;this._aStatus.length=0;this._aResponse.length=0;this._htMetaData=null;delete this._aAjaxData;delete this._aAjax;delete this._aStatus;delete this._aResponse;delete this._htMetaData;this._bIsRequesting=false},abort:function(){jindo.$A(this._aAjax).forEach(function(oAjax){oAjax.abort()});this._reset()},_complete:function(){var aResponse=this._aResponse.concat(),htMetaData={},sProp;for(sProp in this._htMetaData){htMetaData[sProp]=this._htMetaData[sProp]}this._reset();this.fireEvent("complete",{aResponse:aResponse,htMetaData:htMetaData})}}).extend(jindo.Component);jindo.Accordion=jindo.$Class({$init:function(el,htOption){this._el=jindo.$(el);this.option({classPrefix:"accordion-",sDirection:"vertical",nDuration:300,nFPS:30,sEffect:"linear",nExpandDelay:0,nContractDelay:0,bActivateOnload:true});this.option(htOption||{});var sClassPrefix=this.option("classPrefix");this._aBlock=jindo.$$("."+sClassPrefix+"block",this._el);this._oTimer=new jindo.Timer();this._oTransition=new jindo.Transition({bCorrection:true}).fps(this.option("nFPS"));this._wfOnMouseOverClick=jindo.$Fn(this._onMouseOverClick,this);this._wfOnMouseOut=jindo.$Fn(this._onMouseOut,this);if(this.option("bActivateOnload")){this.activate()}},_onActivate:function(){this._wfOnMouseOverClick.attach(this._el,"click");this._wfOnMouseOverClick.attach(this._el,"mouseover");this._wfOnMouseOut.attach(this._el,"mouseout")},_onDeactivate:function(){this._wfOnMouseOverClick.detach(this._el,"click");this._wfOnMouseOverClick.detach(this._el,"mouseover");this._wfOnMouseOut.detach(this._el,"mouseout")},_onMouseOverClick:function(we){var el=we.element;if(el==this._el){return}var sClassPrefix=this.option("classPrefix");var elBlock=(jindo.$Element(el).hasClass(sClassPrefix+"block"))?el:jindo.$$.getSingle("! ."+sClassPrefix+"block",el);var nIndex=null;jindo.$A(this._aBlock).forEach(function(o,i){if(o===elBlock){nIndex=i}});if(typeof nIndex=="number"){var elHandler=this.getHandler(nIndex);if(elHandler===elBlock||el===elHandler){this.fireEvent(we.type,{element:el,nIndex:nIndex,weEvent:we})}}},_onMouseOut:function(we){var el=we.element;if(el==this._el){return}var sClassPrefix=this.option("classPrefix");var elBlock=(jindo.$Element(el).hasClass(sClassPrefix+"block"))?el:jindo.$$.getSingle("! ."+sClassPrefix+"block",el);var nIndexOfBlock=null;jindo.$A(this._aBlock).forEach(function(o,i){if(o===elBlock){nIndexOfBlock=i}});var self=this;var bMouseOutFromLayer=true;jindo.$A(jindo.$$("! *",we.relatedElement)).forEach(function(o){if(o==self._el){bMouseOutFromLayer=false;jindo.$A.Break()}});if(elBlock&&bMouseOutFromLayer&&typeof nIndexOfBlock=="number"){this.fireEvent(we.type,{element:elBlock,nIndex:nIndexOfBlock})}},_getHeadSize:function(n){var el=this.getHead(n);el.style.zoom=1;return{width:jindo.$Element(el).width(),height:jindo.$Element(el).height()}},_getBodySize:function(n){var el=this.getBody(n);el.style.zoom=1;return{width:jindo.$Element(el).width(),height:jindo.$Element(el).height()}},getTransition:function(){return this._oTransition},expand:function(n){var self=this;this._oTimer.abort();if(this.getExpanded()==n){return}var aArgs=new Array();aArgs.push(this.option("nDuration"));jindo.$A(this._aBlock).forEach(function(o,i){var aHeadSize=self._getHeadSize(i);var aBodySize=self._getBodySize(i);aArgs.push(self._aBlock[i]);switch(self.option("sDirection")){case"vertical":if(i==n){aArgs.push({"@height":jindo.Effect[self.option("sEffect")](aBodySize.height+aHeadSize.height+"px")})}else{aArgs.push({"@height":jindo.Effect[self.option("sEffect")](aHeadSize.height+"px")})}break;case"horizontal":if(i==n){aArgs.push({"@width":jindo.Effect[self.option("sEffect")](aBodySize.width+aHeadSize.width+"px")})}else{aArgs.push({"@width":jindo.Effect[self.option("sEffect")](aHeadSize.width+"px")})}break}});this._oTimer.start(function(){self._oTransition.start.apply(self._oTransition,aArgs);self._setExpanded(n)},this.option("nExpandDelay"))},expandAll:function(){var self=this;this._oTimer.abort();var aArgs=new Array();aArgs.push(this.option("nDuration"));jindo.$A(this._aBlock).forEach(function(o,i){var aHeadSize=self._getHeadSize(i);var aBodySize=self._getBodySize(i);aArgs.push(self._aBlock[i]);switch(self.option("sDirection")){case"vertical":aArgs.push({"@height":jindo.Effect[self.option("sEffect")](aBodySize.height+aHeadSize.height+"px")});break;case"horizontal":aArgs.push({"@width":jindo.Effect[self.option("sEffect")](aBodySize.width+aHeadSize.width+"px")});break}});this._oTimer.start(function(){self._oTransition.start.apply(self._oTransition,aArgs);self._setExpanded("all")},this.option("nExpandDelay"))},contractAll:function(){var self=this;var aArgs=new Array();aArgs.push(this.option("nDuration"));jindo.$A(this._aBlock).forEach(function(o,i){aArgs.push(self._aBlock[i]);var aHeadSize=self._getHeadSize(i);switch(self.option("sDirection")){case"vertical":aArgs.push({"@height":jindo.Effect[self.option("sEffect")](aHeadSize.height+"px")});break;case"horizontal":aArgs.push({"@width":jindo.Effect[self.option("sEffect")](aHeadSize.width+"px")});break}});this._oTimer.start(function(){self._oTransition.start.apply(self._oTransition,aArgs);self._setExpanded(null)},this.option("nContractDelay"))},_setExpanded:function(n){this.nExpanded=n},getExpanded:function(){return this.nExpanded},getBlock:function(n){return this._aBlock[n]},getAllBlocks:function(){return this._aBlock},getHead:function(n){var elBlock=this.getBlock(n);return jindo.$$.getSingle("dt",elBlock)},getBody:function(n){var elBlock=this.getBlock(n);return jindo.$$.getSingle("dd",elBlock)},getHandler:function(n){var sClassPrefix=this.option("classPrefix");var elBlock=this.getBlock(n);return jindo.$$.getSingle("."+sClassPrefix+"handler",elBlock)||this.getBlock(n)}}).extend(jindo.UIComponent);jindo.DatePicker=jindo.$Class({_aDatePickerSet:[],_htSelectedDatePickerSet:null,$init:function(elCalendarLayer,htOption){var oDate=new Date();this.htDefaultOption={bUseLayerPosition:true,Calendar:{sClassPrefix:"calendar-",nYear:oDate.getFullYear(),nMonth:oDate.getMonth()+1,nDate:oDate.getDate(),sTitleFormat:"yyyy-mm",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},LayerManager:{sCheckEvent:"click",nShowDelay:0,nHideDelay:0},LayerPosition:{sPosition:"outside-bottom",sAlign:"left",nTop:0,nLeft:0,bAuto:false}};this.option(this.htDefaultOption);this.option(htOption);this._elCalendarLayer=jindo.$(elCalendarLayer);this._initCalendar();this._initLayerManager();this._initLayerPosition();this._wfFocusInput=jindo.$Fn(this._onFocusInput,this);this._wfClickLinkedElement=jindo.$Fn(this._onClickLinkedElement,this);this._wfMouseOverDate=jindo.$Fn(this._onMouseOverDate,this);this._wfMouseOutDate=jindo.$Fn(this._onMouseOutDate,this);this._wfClickDate=jindo.$Fn(this._onClickDate,this);this.activate()},addDatePickerSet:function(ht){var htOption=this.option(),htCalendarOption=this.getCalendar().option(),htDefaultOption={nYear:htCalendarOption.nYear,nMonth:htCalendarOption.nMonth,nDate:htCalendarOption.nDate,bDefaultSet:true,bReadOnly:true,sDateFormat:"yyyy-mm-dd",htSelectableDateFrom:{nYear:1900,nMonth:1,nDate:1},htSelectableDateTo:{nYear:2100,nMonth:12,nDate:31}};if(typeof ht.htOption!="undefined"){for(var value in ht.htOption){if(typeof htDefaultOption[value]!="undefined"){htDefaultOption[value]=ht.htOption[value]}}}ht.htOption=htDefaultOption;this._aDatePickerSet.push(ht);var oLayerManager=this.getLayerManager();if(typeof ht.elInput!="undefined"){oLayerManager.link(ht.elInput);if(ht.htOption.bReadOnly){ht.elInput.readOnly=true}this._wfFocusInput.attach(ht.elInput,"focus");this._wfClickLinkedElement.attach(ht.elInput,"click")}if(typeof ht.elButton!="undefined"){oLayerManager.link(ht.elButton);this._wfClickLinkedElement.attach(ht.elButton,"click")}if(ht.htOption.bDefaultSet){this._setDate(ht,ht.htOption)}return this},removeDatePickerSet:function(ht){var nIndex=-1;for(var i=0,len=this._aDatePickerSet.length;i<len;i++){if(this._aDatePickerSet[i].elInput==ht.elInput||this._aDatePickerSet[i].elButton==ht.elButton){nIndex=i;break}}var htDatePickerSet=this._aDatePickerSet[nIndex];var oLayerManager=this.getLayerManager();if(typeof htDatePickerSet.elButton!="undefined"){oLayerManager.unlink(htDatePickerSet.elButton);this._wfClickLinkedElement.detach(htDatePickerSet.elButton,"click")}if(typeof htDatePickerSet.elInput!="undefined"){this._wfFocusInput.detach(htDatePickerSet.elInput,"focus");this._wfClickLinkedElement.detach(htDatePickerSet.elInput,"click");htDatePickerSet.elInput.readOnly=false}if(htDatePickerSet==this._htSelectedDatePickerSet){this._htSelectedDatePickerSet=null}this._aDatePickerSet.splice(i,1);return this},getDatePickerSet:function(el){if(typeof el=="undefined"){return this._aDatePickerSet}for(var i=0,len=this._aDatePickerSet.length;i<len;i++){if(this._aDatePickerSet[i].elInput==el||this._aDatePickerSet[i].elButton==el){return this._aDatePickerSet[i]}}return false},getCalendarLayer:function(){return this._elCalendarLayer},_initCalendar:function(){var self=this;this._oCalendar=new jindo.Calendar(this.getCalendarLayer(),this.option("Calendar")).attach({beforeDraw:function(oCustomEvent){if(!self.fireEvent("beforeDraw",oCustomEvent)){oCustomEvent.stop()}},draw:function(oCustomEvent){var sClassPrefix=this.option("sClassPrefix");var oShowDatePickerSet=self._htSelectedDatePickerSet;if(self.isSelectable(oShowDatePickerSet,oCustomEvent)){oCustomEvent.bSelectable=true;if(jindo.Calendar.isSameDate(oCustomEvent,oShowDatePickerSet)){jindo.$Element(oCustomEvent.elDateContainer).addClass(sClassPrefix+"selected")}}else{oCustomEvent.bSelectable=false;jindo.$Element(oCustomEvent.elDateContainer).addClass(this.option("sClassPrefix")+"unselectable")}if(!self.fireEvent("draw",oCustomEvent)){oCustomEvent.stop()}},afterDraw:function(oCustomEvent){self.fireEvent("afterDraw",oCustomEvent)}})},getCalendar:function(){return this._oCalendar},_initLayerManager:function(){var self=this;var elCalendarLayer=this.getCalendarLayer();this._oLayerManager=new jindo.LayerManager(elCalendarLayer,this.option("LayerManager")).attach({hide:function(oCustomEvent){self._htSelectedDatePickerSet=null}}).link(elCalendarLayer)},getLayerManager:function(){return this._oLayerManager},_initLayerPosition:function(){if(this.option("bUseLayerPosition")){this._oLayerPosition=new jindo.LayerPosition(null,this.getCalendarLayer(),this.option("LayerPosition"))}},getLayerPosition:function(){return this._oLayerPosition},getInput:function(htDatePickerSet){if(typeof htDatePickerSet!="undefined"){return htDatePickerSet.elInput||null}if(this._htSelectedDatePickerSet){return this._htSelectedDatePickerSet.elInput||null}return null},setInput:function(htDatePickerSet,htDate){this._setDate(htDatePickerSet,htDate)},getDate:function(htDatePickerSet){return{nYear:htDatePickerSet.nYear,nMonth:htDatePickerSet.nMonth,nDate:htDatePickerSet.nDate}},_setDate:function(htDatePickerSet,htDate){htDatePickerSet.nYear=htDate.nYear*1;htDatePickerSet.nMonth=htDate.nMonth*1;htDatePickerSet.nDate=htDate.nDate*1;if(typeof htDatePickerSet.elInput!="undefined"){htDatePickerSet.elInput.value=this._getDateFormat(htDatePickerSet,htDate)}},isSelectable:function(htDatePickerSet,htDate){return jindo.Calendar.isBetween(htDate,htDatePickerSet.htOption.htSelectableDateFrom,htDatePickerSet.htOption.htSelectableDateTo)},setDate:function(htDatePickerSet,htDate){if(this.isSelectable(htDatePickerSet,htDate)){var sDateFormat=this._getDateFormat(htDatePickerSet,htDate);var htParam={sText:sDateFormat,nYear:htDate.nYear,nMonth:htDate.nMonth,nDate:htDate.nDate};if(this.fireEvent("beforeSelect",htParam)){this._setDate(htDatePickerSet,htDate);this.getLayerManager().hide();this.fireEvent("select",htParam)}return true}return false},_getDateFormat:function(htDatePickerSet,htDate){var nYear=htDate.nYear;var nMonth=htDate.nMonth;var nDate=htDate.nDate;if(nMonth<10){nMonth=("0"+(nMonth*1)).toString()}if(nDate<10){nDate=("0"+(nDate*1)).toString()}var sDateFormat=htDatePickerSet.htOption.sDateFormat;sDateFormat=sDateFormat.replace(/yyyy/g,nYear).replace(/y/g,(nYear).toString().substr(2,2)).replace(/mm/g,nMonth).replace(/m/g,(nMonth*1)).replace(/M/g,this.getCalendar().option("aMonthTitle")[nMonth-1]).replace(/dd/g,nDate).replace(/d/g,(nDate*1));return sDateFormat},_linkOnly:function(htDatePickerSet){var oLayerManager=this.getLayerManager();oLayerManager.setLinks([this.getCalendarLayer()]);if(typeof htDatePickerSet.elInput!="undefined"){oLayerManager.link(htDatePickerSet.elInput)}if(typeof htDatePickerSet.elButton!="undefined"){oLayerManager.link(htDatePickerSet.elButton)}},_onActivate:function(){var elCalendarLayer=this.getCalendarLayer();this._wfMouseOverDate.attach(elCalendarLayer,"mouseover");this._wfMouseOutDate.attach(elCalendarLayer,"mouseout");this._wfClickDate.attach(elCalendarLayer,"click");this.getLayerManager().activate();this.getCalendar().activate()},_onDeactivate:function(){var elCalendarLayer=this.getCalendarLayer();this._wfMouseOverDate.detach(elCalendarLayer,"mouseover");this._wfMouseOutDate.detach(elCalendarLayer,"mouseout");this._wfClickDate.detach(elCalendarLayer,"click").detach(elCalendarLayer,"mouseover").detach(elCalendarLayer,"mouseout");this.getLayerManager().deactivate();this.getCalendar().deactivate()},attachEvent:function(){return this.activate()},detachEvent:function(){return this.deactivate()},addButton:function(){return this},_onFocusInput:function(we){this.fireEvent("focus",{element:we.element})},_onClickLinkedElement:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT);if(this.fireEvent("click",{element:we.element})){var htDatePickerSet=this.getDatePickerSet(we.currentElement);if(htDatePickerSet){this._htSelectedDatePickerSet=htDatePickerSet;this._linkOnly(htDatePickerSet);if(!htDatePickerSet.nYear){htDatePickerSet.nYear=htDatePickerSet.htOption.nYear}if(!htDatePickerSet.nMonth){htDatePickerSet.nMonth=htDatePickerSet.htOption.nMonth}if(!htDatePickerSet.nDate){htDatePickerSet.nDate=htDatePickerSet.htOption.nDate}var nYear=htDatePickerSet.nYear;var nMonth=htDatePickerSet.nMonth;this.getCalendar().draw(nYear,nMonth);this.getLayerManager().show();if(this.option("bUseLayerPosition")){if(typeof htDatePickerSet.elLayerPosition!="undefined"){this.getLayerPosition().setElement(htDatePickerSet.elLayerPosition).setPosition()}else{this.getLayerPosition().setElement(htDatePickerSet.elInput).setPosition()}}}}},_getTargetDateElement:function(el){var sClassPrefix=this.getCalendar().option("sClassPrefix");var elDate=(jindo.$Element(el).hasClass(sClassPrefix+"date"))?el:jindo.$$.getSingle("."+sClassPrefix+"date",el);if(elDate&&(elDate==el||elDate.length==1)){return elDate}return null},_getTargetDateContainerElement:function(el){var sClassPrefix=this.getCalendar().option("sClassPrefix");var elWeek=jindo.$$.getSingle("! ."+sClassPrefix+"week",el);if(elWeek){var elReturn=el;while(!jindo.$Element(elReturn.parentNode).hasClass(sClassPrefix+"week")){elReturn=elReturn.parentNode}if(jindo.$Element(elReturn).hasClass(sClassPrefix+"unselectable")){return null}return elReturn}else{return null}},_setSelectedAgain:function(){if(this._elSelected){var sClassPrefix=this.getCalendar().option("sClassPrefix");jindo.$Element(this._elSelected).addClass(sClassPrefix+"selected");this._elSelected=null}},_setAsideSelected:function(){if(!this._elSelected){var sClassPrefix=this.getCalendar().option("sClassPrefix");this._elSelected=jindo.$$.getSingle("."+sClassPrefix+"selected",this.elWeekAppendTarget);if(this._elSelected){jindo.$Element(this._elSelected).removeClass(sClassPrefix+"selected")}}},_onMouseOverDate:function(we){var sClassPrefix=this.getCalendar().option("sClassPrefix");var elDateContainer=this._getTargetDateContainerElement(we.element);if(elDateContainer){var htDate=this.getCalendar().getDateOfElement(elDateContainer);var htParam={element:we.element,nYear:htDate.nYear,nMonth:htDate.nMonth,nDate:htDate.nDate,bSelectable:false};if(this._htSelectedDatePickerSet&&this.isSelectable(this._htSelectedDatePickerSet,htDate)){this._setAsideSelected();jindo.$Element(elDateContainer).addClass(sClassPrefix+"over");htParam.bSelectable=true}this.fireEvent("mouseover",htParam)}},_onMouseOutDate:function(we){var sClassPrefix=this.getCalendar().option("sClassPrefix");var elDateContainer=this._getTargetDateContainerElement(we.element);if(elDateContainer){var htDate=this.getCalendar().getDateOfElement(elDateContainer);var htParam={element:we.element,nYear:htDate.nYear,nMonth:htDate.nMonth,nDate:htDate.nDate,bSelectable:false};if(this._htSelectedDatePickerSet&&this.isSelectable(this._htSelectedDatePickerSet,htDate)){jindo.$Element(elDateContainer).removeClass(sClassPrefix+"over");htParam.bSelectable=true;this._setSelectedAgain()}this.fireEvent("mouseout",htParam)}else{this._setSelectedAgain()}},_onClickDate:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT);var el=we.element;var elDate=this._getTargetDateElement(el);if(elDate){var elDateContainer=this._getTargetDateContainerElement(elDate);if(elDateContainer){var htDate=this.getCalendar().getDateOfElement(elDateContainer);if(this.isSelectable(this._htSelectedDatePickerSet,htDate)){this.setDate(this._htSelectedDatePickerSet,htDate)}}}}}).extend(jindo.UIComponent);jindo.DefaultTextValue=jindo.$Class({$init:function(el,htOption){this.option({sValue:"",bActivateOnload:true});this.option(htOption||{});this._elBaseTarget=jindo.$(el);this._wfOnFocusAndBlur=jindo.$Fn(this._onFocusAndBlur,this);if(this.option("bActivateOnload")){this.activate()}},getBaseElement:function(){return this._elBaseTarget},setDefault:function(){this.getBaseElement().value=this.option("sValue");return this},setDefaultValue:function(sValue){var sOldValue=this.option("sValue");this.option("sValue",sValue);if(this.getBaseElement().value==sOldValue){this.setDefault()}return this},getDefaultValue:function(){return this.option("sValue")},paint:function(){return this},_onActivate:function(){var elInput=this.getBaseElement();if(elInput.value==""){this.setDefault()}this._wfOnFocusAndBlur.attach(elInput,"focus").attach(elInput,"blur")},_onDeactivate:function(){var elInput=this.getBaseElement();this._wfOnFocusAndBlur.detach(elInput,"focus").detach(elInput,"blur")},_onFocusAndBlur:function(we){var el=this._elBaseTarget;var sValue=el.value;switch(we.type){case"focus":if(sValue==this.getDefaultValue()){el.value="";el.select()}break;case"blur":if(jindo.$S(sValue).trim().$value()==""){this.setDefault()}break}}}).extend(jindo.UIComponent);jindo.FloatingLayer=jindo.$Class({$init:function(el,htOption){this._el=jindo.$(el);this._wel=jindo.$Element(el);this.option({nDelay:0,nDuration:500,fEffect:jindo.Effect.easeOut,bActivateOnload:true});this.option(htOption||{});this._htPos=this._getPosition();this._oTransition=new jindo.Transition().fps(60);this._oTimer=new jindo.Timer();this._wfScroll=jindo.$Fn(this._onScroll,this);if(this.option("bActivateOnload")){this.activate()}},getTransition:function(){return this._oTransition},getTimer:function(){return this._oTimer},_onActivate:function(){var self=this;setTimeout(function(){self._onScroll()},0);this._wfScroll.attach(window,"scroll").attach(window,"resize")},_onDeactivate:function(){this._wfScroll.detach(window,"scroll").detach(window,"resize")},_getPosition:function(){var el=this._el;var wel=this._wel;var sLeft=el.style.left;var sRight=el.style.right;var sTop=el.style.top;var sBottom=el.style.bottom;var htPos={sAlignX:sLeft?"left":(sRight?"right":null),sAlignY:sTop?"top":(sBottom?"bottom":null)};var htOffset=wel.offset();var htClientSize=jindo.$Document().clientSize();switch(htPos.sAlignX){case"left":htPos.nX=htOffset.left;break;case"right":htPos.nX=Math.max(htClientSize.width-htOffset.left-wel.width(),parseFloat(sRight));break}switch(htPos.sAlignY){case"top":htPos.nY=htOffset.top;break;case"bottom":htPos.nY=Math.max(htClientSize.height-htOffset.top-wel.height(),parseFloat(sBottom));break}return htPos},_onScroll:function(){var self=this;this._oTimer.start(function(){self._paint()},this.option("nDelay"))},_paint:function(){var oDoc=document.documentElement||document;var elBody=document.body;var el=this._el;var wel=this._wel;var htPos=this._htPos;var htScrollPos={};var htOffset=jindo.$Element(el).offset();var nPosX,nPosY;var htParam={nX:null,nY:null};if(htPos.sAlignX){switch(htPos.sAlignX){case"left":htScrollPos.x=oDoc.scrollLeft||elBody.scrollLeft;nPosX=htOffset.left-htScrollPos.x;break;case"right":htScrollPos.x=(oDoc.scrollLeft||elBody.scrollLeft)+jindo.$Document().clientSize().width;nPosX=htScrollPos.x-(htOffset.left+wel.width());break}htParam.nX=parseFloat(wel.css(htPos.sAlignX))+(htPos.nX-nPosX)}if(htPos.sAlignY){switch(htPos.sAlignY){case"top":htScrollPos.y=oDoc.scrollTop||elBody.scrollTop;nPosY=htOffset.top-htScrollPos.y;break;case"bottom":htScrollPos.y=(oDoc.scrollTop||elBody.scrollTop)+jindo.$Document().clientSize().height;nPosY=htScrollPos.y-(htOffset.top+wel.height());break}htParam.nY=parseFloat(wel.css(htPos.sAlignY))+(htPos.nY-nPosY)}this.fireEvent("beforeMove",htParam);var htTransition={};var fEffect=this.option("fEffect");if(htParam.nX!==null){htTransition["@"+htPos.sAlignX]=fEffect(htParam.nX+"px")}if(htParam.nY!==null){htTransition["@"+htPos.sAlignY]=fEffect(htParam.nY+"px")}var self=this;this._oTransition.abort().start(this.option("nDuration"),el,htTransition).start(function(){self.fireEvent("move")})}}).extend(jindo.UIComponent);jindo.NumericStepper=jindo.$Class({_bIsOnFocus:false,$init:function(el,htOption){this._el=jindo.$(el);this.option({sClassPrefix:"ns-",bActivateOnload:true,bUseMouseWheel:false,nStep:1,nDecimalPoint:0,nMin:-Infinity,nMax:Infinity,nDefaultValue:0,bInputReadOnly:true});this.option(htOption||{});this._assignHTMLElements();this._initEventHandlers();if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){var sPrefix=this.option("sClassPrefix");this._elInput=jindo.$$.getSingle("."+sPrefix+"input",this._el);this._elPlusButton=jindo.$$.getSingle("."+sPrefix+"plus",this._el);this._elMinusButton=jindo.$$.getSingle("."+sPrefix+"minus",this._el)},_initEventHandlers:function(){this._wfPlusClick=jindo.$Fn(this._onPlusClick,this);this._wfMinusClick=jindo.$Fn(this._onMinusClick,this);this._wfWheel=jindo.$Fn(this._onWheel,this);this._wfFocus=jindo.$Fn(this._onFocus,this);this._wfBlur=jindo.$Fn(this._onBlur,this)},reset:function(){this._elInput.value=this.option("nDefaultValue").toFixed(this.option("nDecimalPoint"))},getValue:function(){return parseFloat(this._elInput.value)},setValue:function(n){n=n.toFixed(this.option("nDecimalPoint"));var nMin=this.option("nMin"),nMax=this.option("nMax"),htParam={nValue:n,nMin:nMin,nMax:nMax};if(n>nMax||n<nMin){this.fireEvent("overLimit",htParam);return}if(!this.fireEvent("beforeChange",htParam)){return}this._elInput.value=htParam.nValue;this.fireEvent("change",htParam)},getBaseElement:function(){return this._el},getInputElement:function(){return this._elInput},getPlusElement:function(){return this._elPlusButton},getMinusElement:function(){return this._elMinusButton},isFocused:function(){return this._bIsOnFocus},_onActivate:function(){var elInput=this.getInputElement();this._wfPlusClick.attach(this.getPlusElement(),"click");this._wfMinusClick.attach(this.getMinusElement(),"click");this._wfFocus.attach(elInput,"focus");this._wfBlur.attach(elInput,"blur");if(this.option("bUseMouseWheel")){this._wfWheel.attach(elInput,"mousewheel")}this._elInput.readOnly=this.option("bInputReadOnly");this.reset()},_onDeactivate:function(){var elInput=this.getInputElement();this._wfPlusClick.detach(this.getPlusElement(),"click");this._wfMinusClick.detach(this.getMinusElement(),"click");this._wfInputClick.detach(elInput,"click");this._wfFocus.detach(elInput,"focus");this._wfBlur.detach(elInput,"blur");this._wfWheel.detach(elInput,"mousewheel")},_onMinusClick:function(we){this.setValue(this.getValue()-this.option("nStep"))},_onPlusClick:function(we){this.setValue(this.getValue()+this.option("nStep"))},_onWheel:function(we){if(this.isFocused()){we.stop(jindo.$Event.CANCEL_DEFAULT);if(we.mouse().delta>0){this._onPlusClick()}else{this._onMinusClick()}}},_onFocus:function(we){this._bIsOnFocus=true},_onBlur:function(we){this._bIsOnFocus=false;this.setValue(this.getValue());this._elInput.readOnly=this.option("bInputReadOnly")}}).extend(jindo.UIComponent);jindo.Pagination=jindo.$Class({$init:function(sId,htOption){this._elPageList=jindo.$(sId);this._welPageList=jindo.$Element(this._elPageList);this._waPage=jindo.$A([]);this._fClickPage=jindo.$Fn(this._onClickPageList,this);this.option({bActivateOnload:true,nItem:10,nItemPerPage:10,nPagePerPageList:10,nPage:1,sMoveUnit:"pagelist",bAlignCenter:false,sInsertTextNode:"",sClassFirst:"first-child",sClassLast:"last-child",sPageTemplate:"<a href='#'>{=page}</a>",sCurrentPageTemplate:"<strong>{=page}</strong>",elFirstPageLinkOn:jindo.$$.getSingle("a.pre_end",this._elPageList),elPrevPageLinkOn:jindo.$$.getSingle("a.pre",this._elPageList),elNextPageLinkOn:jindo.$$.getSingle("a.next",this._elPageList),elLastPageLinkOn:jindo.$$.getSingle("a.next_end",this._elPageList),elFirstPageLinkOff:jindo.$$.getSingle("span.pre_end",this._elPageList),elPrevPageLinkOff:jindo.$$.getSingle("span.pre",this._elPageList),elNextPageLinkOff:jindo.$$.getSingle("span.next",this._elPageList),elLastPageLinkOff:jindo.$$.getSingle("span.next_end",this._elPageList)});this.option(htOption||{});if(this.option("bActivateOnload")){this.activate()}},getBaseElement:function(){return this._elPageList},getItemCount:function(){return this.option("nItem")},setItemCount:function(n){this.option({nItem:n})},getItemPerPage:function(){return this.option("nItemPerPage")},setItemPerPage:function(n){this.option("nItemPerPage",n)},getCurrentPage:function(){return this._nCurrentPage},getFirstItemOfPage:function(n){return this.getItemPerPage()*(n-1)+1},getPageOfItem:function(n){return Math.ceil(n/this.getItemPerPage())},_getLastPage:function(){return Math.ceil(this.getItemCount()/this.getItemPerPage())},_getRelativePage:function(sRelative){var nPage=null;if(this.option("sMoveUnit")=="page"){switch(sRelative){case"pre":nPage=this.getCurrentPage()-1;break;case"next":nPage=this.getCurrentPage()+1;break}}else{var nThisPageList=this._getPageList(this.getCurrentPage());switch(sRelative){case"pre_end":nPage=1;break;case"pre":var nLastPageOfPrePageList=(nThisPageList-1)*this.option("nPagePerPageList");nPage=nLastPageOfPrePageList;break;case"next":var nFirstPageOfNextPageList=(nThisPageList)*this.option("nPagePerPageList")+1;nPage=nFirstPageOfNextPageList;break;case"next_end":nPage=this._getLastPage();break}}return nPage},_getPageList:function(nThisPage){if(this.option("bAlignCenter")){var nLeft=Math.floor(this.option("nPagePerPageList")/2);var nPageList=nThisPage-nLeft;nPageList=Math.max(nPageList,1);nPageList=Math.min(nPageList,this._getLastPage());return nPageList}return Math.ceil(nThisPage/this.option("nPagePerPageList"))},_isIn:function(el,elParent){if(!elParent){return false}return(el===elParent)?true:jindo.$Element(el).isChildOf(elParent)},_getPageElement:function(el){for(var i=0,nLength=this._waPage.$value().length;i<nLength;i++){var elPage=this._waPage.get(i);if(this._isIn(el,elPage)){return elPage}}return null},_onClickPageList:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT);var nPage=null,htOption=this.option(),el=we.element;if(this._isIn(el,htOption.elFirstPageLinkOn)){nPage=this._getRelativePage("pre_end")}else{if(this._isIn(el,htOption.elPrevPageLinkOn)){nPage=this._getRelativePage("pre")}else{if(this._isIn(el,htOption.elNextPageLinkOn)){nPage=this._getRelativePage("next")}else{if(this._isIn(el,htOption.elLastPageLinkOn)){nPage=this._getRelativePage("next_end")}else{var elPage=this._getPageElement(el);if(elPage){nPage=parseInt(jindo.$Element(elPage).text(),10)}else{return}}}}}this.movePageTo(nPage)},_convertToAvailPage:function(nPage){var nLastPage=this._getLastPage();nPage=Math.max(nPage,1);nPage=Math.min(nPage,nLastPage);return nPage},movePageTo:function(nPage,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}nPage=this._convertToAvailPage(nPage);this._nCurrentPage=nPage;if(bFireEvent){if(!this.fireEvent("beforeMove",{nPage:nPage})){return}}this._paginate(nPage);if(bFireEvent){this.fireEvent("move",{nPage:nPage})}},reset:function(nItemCount){if(typeof nItemCount=="undefined"){nItemCount=this.option("nItem")}this.setItemCount(nItemCount);this.movePageTo(1,false)},_onActivate:function(){this._fClickPage.attach(this._elPageList,"click");this.setItemCount(this.option("nItem"));this.movePageTo(this.option("nPage"),false);this._welPageList.addClass("loaded")},_onDeactivate:function(){this._fClickPage.detach(this._elPageList,"click");this._welPageList.removeClass("loaded")},_addTextNode:function(){var sTextNode=this.option("sInsertTextNode");this._elPageList.appendChild(document.createTextNode(sTextNode))},_paginate:function(nPage){this._empty();this._addTextNode();var htOption=this.option(),elFirstPageLinkOn=htOption.elFirstPageLinkOn,elPrevPageLinkOn=htOption.elPrevPageLinkOn,elNextPageLinkOn=htOption.elNextPageLinkOn,elLastPageLinkOn=htOption.elLastPageLinkOn,elFirstPageLinkOff=htOption.elFirstPageLinkOff,elPrevPageLinkOff=htOption.elPrevPageLinkOff,elNextPageLinkOff=htOption.elNextPageLinkOff,elLastPageLinkOff=htOption.elLastPageLinkOff,nLastPage=this._getLastPage(),nThisPageList=this._getPageList(nPage),nLastPageList=this._getPageList(nLastPage);if(nLastPage===0){this._welPageList.addClass("no-result")}else{if(nLastPage==1){this._welPageList.addClass("only-one")}else{this._welPageList.removeClass("only-one").removeClass("no-result")}}var nFirstPageOfThisPageList,nLastPageOfThisPageList;if(htOption.bAlignCenter){var nLeft=Math.floor(htOption.nPagePerPageList/2);nFirstPageOfThisPageList=nPage-nLeft;nFirstPageOfThisPageList=Math.max(nFirstPageOfThisPageList,1);nLastPageOfThisPageList=nFirstPageOfThisPageList+htOption.nPagePerPageList-1;if(nLastPageOfThisPageList>nLastPage){nFirstPageOfThisPageList=nLastPage-htOption.nPagePerPageList+1;nFirstPageOfThisPageList=Math.max(nFirstPageOfThisPageList,1);nLastPageOfThisPageList=nLastPage}}else{nFirstPageOfThisPageList=(nThisPageList-1)*htOption.nPagePerPageList+1;nLastPageOfThisPageList=(nThisPageList)*htOption.nPagePerPageList;nLastPageOfThisPageList=Math.min(nLastPageOfThisPageList,nLastPage)}if(htOption.sMoveUnit=="page"){nThisPageList=nPage;nLastPageList=nLastPage}if(nPage>1){if(elFirstPageLinkOn){this._welPageList.append(elFirstPageLinkOn);this._addTextNode()}}else{if(elFirstPageLinkOff){this._welPageList.append(elFirstPageLinkOff);this._addTextNode()}}if(nThisPageList>1){if(elPrevPageLinkOn){this._welPageList.append(elPrevPageLinkOn);this._addTextNode()}}else{if(elPrevPageLinkOff){this._welPageList.append(elPrevPageLinkOff);this._addTextNode()}}var el,wel;for(var i=nFirstPageOfThisPageList;i<=nLastPageOfThisPageList;i++){if(i==nPage){el=jindo.$(jindo.$Template(htOption.sCurrentPageTemplate).process({page:i.toString()}))}else{el=jindo.$(jindo.$Template(htOption.sPageTemplate).process({page:i.toString()}));this._waPage.push(el)}wel=jindo.$Element(el);if(i==nFirstPageOfThisPageList){wel.addClass(this.option("sClassFirst"))}if(i==nLastPageOfThisPageList){wel.addClass(this.option("sClassLast"))}this._welPageList.append(el);this._addTextNode()}if(nThisPageList<nLastPageList){if(elNextPageLinkOn){this._welPageList.append(elNextPageLinkOn);this._addTextNode()}}else{if(elNextPageLinkOff){this._welPageList.append(elNextPageLinkOff);this._addTextNode()}}if(nPage<nLastPage){if(elLastPageLinkOn){this._welPageList.append(elLastPageLinkOn);this._addTextNode()}}else{if(elLastPageLinkOff){this._welPageList.append(elLastPageLinkOff);this._addTextNode()}}},_empty:function(){var htOption=this.option(),elFirstPageLinkOn=htOption.elFirstPageLinkOn,elPrevPageLinkOn=htOption.elPrevPageLinkOn,elNextPageLinkOn=htOption.elNextPageLinkOn,elLastPageLinkOn=htOption.elLastPageLinkOn,elFirstPageLinkOff=htOption.elFirstPageLinkOff,elPrevPageLinkOff=htOption.elPrevPageLinkOff,elNextPageLinkOff=htOption.elNextPageLinkOff,elLastPageLinkOff=htOption.elLastPageLinkOff;elFirstPageLinkOn=this._clone(elFirstPageLinkOn);elPrevPageLinkOn=this._clone(elPrevPageLinkOn);elLastPageLinkOn=this._clone(elLastPageLinkOn);elNextPageLinkOn=this._clone(elNextPageLinkOn);elFirstPageLinkOff=this._clone(elFirstPageLinkOff);elPrevPageLinkOff=this._clone(elPrevPageLinkOff);elLastPageLinkOff=this._clone(elLastPageLinkOff);elNextPageLinkOff=this._clone(elNextPageLinkOff);this._waPage.empty();this._welPageList.empty()},_clone:function(el){if(el&&typeof el.cloneNode=="function"){return el.cloneNode(true)}return el}}).extend(jindo.UIComponent);jindo.RollingChart=jindo.$Class({_nIndexOfRolling:0,_bIsRolling:false,$init:function(el,htOption){var htDefaultOption={sClassPrefix:"rollingchart-",sDirection:"down",nFPS:50,nDuration:300,nRollingInterval:100,sUrl:"",sRequestType:"jsonp",sRequestMethod:"get",htRequestParameter:null,nRequestInterval:10000,bActivateOnload:true};this.option(htDefaultOption);this.option(htOption||{});this._el=jindo.$(el);this._assignHTMLElements();this._initTimer();this._initRolling();if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){this._elList=jindo.$$.getSingle("ol",this._el);this._aItems=jindo.$$("> li",this._elList)},getList:function(){return this._elList},getItems:function(){return this._aItems},getListOfItem:function(elItem){return jindo.$$.getSingle("ul",elItem)},isRolling:function(){return this._bIsRolling},_initTimer:function(){this._oRequestTimer=new jindo.Timer()},getTimer:function(){return this._oRequestTimer},_initRolling:function(){var self=this;this._oRollingEventHandler={end:function(){setTimeout(function(){self.fireEvent("afterRolling",{nIndex:self._nIndexOfRolling});self._roll(self._nIndexOfRolling+1)},self.option("nRollingInterval"))}};this._oRolling=new jindo.Rolling(this._el,{nFPS:this.option("nFPS"),nDuration:this.option("nDuration"),sDirection:"vertical",fEffect:jindo.Effect.linear})},getRolling:function(){return this._oRolling},_setItemIndexToRolling:function(n){var elList=this.getListOfItem(this.getItems()[n]);var oRolling=this.getRolling();oRolling._el=elList;oRolling._elList=elList},_onActivate:function(){var self=this;this.getTimer().start(function(){self._stopRequest();self._request();return true},this.option("nRequestInterval"))},_onDeactivate:function(){this.getTimer().abort()},_request:function(sQuery){if(this.isRolling()){return}var htOption=this.option();var sUrl=htOption.sUrl;var htParameter=htOption.htRequestParameter;var self=this;this._oAjax=jindo.$Ajax(sUrl,{type:htOption.sRequestType,method:htOption.sRequestMethod,onload:function(oResponse){try{var htParam={htResponseJSON:oResponse.json()};if(!self.fireEvent("response",htParam)){return}if(!self.fireEvent("beforeUpdate")){return}var oChart=htParam.htResponseJSON;self._addItemToRolling(oChart);self.getRolling().getTransition().attach(self._oRollingEventHandler);self._roll(0)}catch(e){}}});if(!self.fireEvent("request")){return}this._oAjax.request(htParameter)},_stopRequest:function(){try{this._oAjax.abort();this._oAjax=null}catch(e){}},_addItemToRolling:function(oChart){var self=this;var sDirection=this.option("sDirection");jindo.$A(this.getItems()).forEach(function(el,i){var wel=jindo.$Element(jindo.$("<li>"));wel.html(oChart.items[i]);var elList=self.getListOfItem(el);if(sDirection=="down"){elList.insertBefore(wel.$value(),elList.firstChild);elList.scrollTop=9999}else{jindo.$Element(elList).append(wel.$value());elList.scrollTop=0}})},_removeItemRolled:function(){var self=this;var sDirection=this.option("sDirection");jindo.$A(this.getItems()).forEach(function(el,i){if(sDirection=="down"){jindo.$Element(jindo.$$("li",self.getListOfItem(el))[1]).leave()}else{var elList=self.getListOfItem(el);jindo.$Element(jindo.$$.getSingle("li",elList)).leave();elList.scrollTop=0}});this._nIndexOfRolling=0},_roll:function(n){this._bIsRolling=true;this._nIndexOfRolling=n;this.fireEvent("beforeRolling",{nIndex:n});var nIndex=n;if(nIndex==this.getItems().length){this._removeItemRolled();this._nIndexOfRolling=0;this.getRolling().getTransition().detach(this._oRollingEventHandler);this._bIsRolling=false;this.fireEvent("afterUpdate");return}this._setItemIndexToRolling(nIndex);var n=1;if(this.option("sDirection")=="down"){n=-1}this.getRolling().moveBy(n)}}).extend(jindo.UIComponent);jindo.ScrollBox=new jindo.$Class({$init:function(el,htOption){this.option({sClassPrefix:"scrollbar-",bActivateOnload:true,sOverflowX:"auto",sOverflowY:"auto",bAdjustThumbSize:true,nMinThumbSize:50,nDelta:16});this.option(htOption||{});this._el=jindo.$(el);if(this.option("bActivateOnload")){this.activate();this.reset()}},reset:function(){this._autoToggleScrollBar();var oStatusH=this.hasScrollBarHorizontal();var oStatusV=this.hasScrollBarVertical();this._adjustBoxSize();this._adjustContentSize();this._autoToggleScrollBar();if(oStatusH!=this.hasScrollBarHorizontal()||oStatusV!=this.hasScrollBarVertical()){this._adjustBoxSize();this._adjustContentSize()}this._autoToggleAvailability();this._adjustTrackSize();this._adjustThumbSize();this.$super.reset()},_onActivate:function(){this.$super._onActivate();this.reset()},_onDeactivate:function(){this.$super._onDeactivate();this._adjustBoxSize()},setSize:function(nWidth,nHeight){if(nWidth){jindo.$Element(this._el).css("width",nWidth+"px")}if(nHeight){jindo.$Element(this._el).css("height",nHeight+"px")}this.setBoxSize(nWidth,nHeight);this._oBoxSize={nWidth:jindo.$Element(this._elBox).width(),nHeight:jindo.$Element(this._elBox).height()};this.reset()},getContentSize:function(){var welContent=jindo.$Element(this._elContent);return{nWidth:parseInt(welContent.width(),10),nHeight:parseInt(welContent.height(),10)}},setContentSize:function(nWidth,nHeight){var welContent=jindo.$Element(this._elContent);if(nWidth){if(nWidth==Infinity){welContent.css("width","")}else{welContent.css("width",nWidth+"px")}}if(nHeight){if(nHeight==Infinity){welContent.css("height","auto")}else{welContent.css("height",nHeight+"px")}}this.$super.reset()},getBoxSize:function(){var welBox=jindo.$Element(this._elBox);return{nWidth:parseInt(welBox.width(),10),nHeight:parseInt(welBox.height(),10)}},setBoxSize:function(nWidth,nHeight){var welBox=jindo.$Element(this._elBox);if(nWidth){welBox.css("width",nWidth+"px")}if(nHeight){welBox.css("height",nHeight+"px")}this.$super.reset()},getTrackSize:function(ht){if(!ht.elScrollBar){return{nWidth:0,nHeight:0}}var welTrack=jindo.$Element(ht.elTrack);return{nWidth:parseInt(welTrack.width(),10),nHeight:parseInt(welTrack.height(),10)}},setTrackSize:function(o,nWidth,nHeight){var welTrack=jindo.$Element(o.elTrack);if(nWidth){welTrack.css("width",nWidth+"px")}if(nHeight){welTrack.css("height",nHeight+"px")}},isNeededScrollBarHorizontal:function(){if(this.option("sOverflowX")=="scroll"){return true}var oContentSize=this.getContentSize();var oBoxSize=this.getDefaultBoxSize();if(this.getScrollBarHorizontal().elScrollBar&&this.option("sOverflowX")!="hidden"){if(this.hasScrollBarVertical()){if(oContentSize.nWidth>oBoxSize.nWidth-jindo.$Element(this.getScrollBarVertical().elScrollBar).width()){return true}}if(oContentSize.nWidth>oBoxSize.nWidth){return true}}return false},isNeededScrollBarVertical:function(){if(this.option("sOverflowY")=="scroll"){return true}var oContentSize=this.getContentSize();var oBoxSize=this.getDefaultBoxSize();if(this.getScrollBarVertical().elScrollBar&&this.option("sOverflowY")!="hidden"){if(this.hasScrollBarHorizontal()){if(oContentSize.nHeight>oBoxSize.nHeight-jindo.$Element(this.getScrollBarHorizontal().elScrollBar).height()){return true}}if(oContentSize.nHeight>oBoxSize.nHeight){return true}}return false},_autoToggleScrollBar:function(){if(!this.isActivating()){return}var sClassPrefix=this.option("sClassPrefix");var oH=this.getScrollBarHorizontal();var oV=this.getScrollBarVertical();var welScrollBar;var bAjustThumbSize=this.option("bAdjustThumbSize");var bV=this.isNeededScrollBarVertical();if(oV.elScrollBar){welScrollBar=jindo.$Element(oV.elScrollBar);if(bV){welScrollBar.addClass(sClassPrefix+"show")}else{welScrollBar.removeClass(sClassPrefix+"show")}if(oV.elThumb&&bAjustThumbSize){jindo.$Element(oV.elThumb).css("height","0px")}}var bH=this.isNeededScrollBarHorizontal();if(oH.elScrollBar){welScrollBar=jindo.$Element(oH.elScrollBar);if(bH){welScrollBar.addClass(sClassPrefix+"show")}else{welScrollBar.removeClass(sClassPrefix+"show")}if(oH.elThumb&&bAjustThumbSize){jindo.$Element(oH.elThumb).css("width","0px")}}if(oV.elScrollBar){welScrollBar=jindo.$Element(oV.elScrollBar);if(this.isNeededScrollBarVertical()){welScrollBar.addClass(sClassPrefix+"show")}else{welScrollBar.removeClass(sClassPrefix+"show")}if(oV.elThumb&&bAjustThumbSize){jindo.$Element(oV.elThumb).css("height","0px")}}},_adjustTrackSize:function(){if(!this.isActivating()){return}var oBoxSize=this.getDefaultBoxSize();var oH=this.getScrollBarHorizontal();var oV=this.getScrollBarVertical();var bH=this.isNeededScrollBarHorizontal();if(bH&&oH.elScrollBar){var nTrackWidth=oBoxSize.nWidth;var wel=jindo.$Element(oH.elScrollBar);wel.css("top",oBoxSize.nHeight-wel.height()+"px");var nVerticalWidth=0;if(this.hasScrollBarVertical()&&oV.elScrollBar){nVerticalWidth=parseInt(jindo.$Element(oV.elScrollBar).width(),10);nTrackWidth-=nVerticalWidth}wel.width(nTrackWidth);var nButtonLeftWidth=0;if(oH.elButtonLeft){nButtonLeftWidth=parseInt(jindo.$Element(oH.elButtonLeft).width(),10);nTrackWidth-=nButtonLeftWidth}if(oH.elButtonRight){nTrackWidth-=parseInt(jindo.$Element(oH.elButtonRight).width(),10)}jindo.$Element(oH.elTrack).css("left",nButtonLeftWidth+"px");this.setTrackSize(oH,nTrackWidth,null)}var bV=this.isNeededScrollBarVertical();if(bV&&oV.elScrollBar){var nTrackHeight=oBoxSize.nHeight;var nHorizontalHeight=0;if(this.hasScrollBarHorizontal()&&oH.elScrollBar){nHorizontalHeight=parseInt(jindo.$Element(oH.elScrollBar).height(),10);nTrackHeight-=nHorizontalHeight}if(oV.elButtonUp){nTrackHeight-=parseInt(jindo.$Element(oV.elButtonUp).height(),10)}if(oV.elButtonDown){nTrackHeight-=parseInt(jindo.$Element(oV.elButtonDown).height(),10)}this.setTrackSize(oV,null,nTrackHeight)}},_adjustBoxSize:function(){var oBoxSize=this.getDefaultBoxSize();var oH=this.getScrollBarHorizontal();var oV=this.getScrollBarVertical();var bV=this.hasScrollBarVertical();var bH=this.hasScrollBarHorizontal();this.setBoxSize(oBoxSize.nWidth,oBoxSize.nHeight);if(this.isActivating()){if(bH&&oH.elScrollBar){var nHeight=oBoxSize.nHeight;nHeight-=parseInt(jindo.$Element(oH.elScrollBar).height(),10);this.setBoxSize(null,nHeight)}if(bV&&oV.elScrollBar){var nWidth=oBoxSize.nWidth;nWidth-=parseInt(jindo.$Element(oV.elScrollBar).width(),10);this.setBoxSize(nWidth,null)}}},_adjustContentSize:function(){if(!this.isActivating()){return}var oBoxSize=this.getBoxSize();var bV=this.option("sOverflowY")!="hidden";var bH=this.option("sOverflowX")!="hidden";var nWidth,nHeight;if(bV&&!bH){nWidth=oBoxSize.nWidth}if(bH&&!bV){nHeight=oBoxSize.nHeight}this.setContentSize(nWidth||Infinity,nHeight||Infinity)},_adjustThumbSize:function(){if(!this.isActivating()){return}if(!this.option("bAdjustThumbSize")){return}var nMinThumbSize=this.option("nMinThumbSize");var oContentSize=this.getContentSize();var oBoxSize=this.getBoxSize();var nGap;var oH=this.getScrollBarHorizontal();var oV=this.getScrollBarVertical();if(oV.elScrollBar){var oTrackSizeV=this.getTrackSize(oV);var nThumbHeight=Math.floor(parseInt(oTrackSizeV.nHeight*oBoxSize.nHeight/oContentSize.nHeight,10));if(nThumbHeight<nMinThumbSize){nThumbHeight=nMinThumbSize}if(nThumbHeight>=oTrackSizeV.nHeight){nThumbHeight=oTrackSizeV.nHeight}jindo.$Element(oV.elThumb).height(nThumbHeight);nGap=0;if(oV.elThumbHead){nGap+=jindo.$Element(oV.elThumbHead).height()}if(oV.elThumbFoot){nGap+=jindo.$Element(oV.elThumbFoot).height()}if(oV.elThumbBody){jindo.$Element(oV.elThumbBody).height(nThumbHeight-nGap)}}if(oH.elScrollBar){var oTrackSizeH=this.getTrackSize(oH);var nThumbWidth=Math.floor(parseInt(oTrackSizeH.nWidth*oBoxSize.nWidth/oContentSize.nWidth,10));if(nThumbWidth<nMinThumbSize){nThumbWidth=nMinThumbSize}if(nThumbWidth>=oTrackSizeH.nWidth){nThumbWidth=oTrackSizeH.nWidth}jindo.$Element(oH.elThumb).width(nThumbWidth);nGap=0;if(oH.elThumbHead){nGap+=jindo.$Element(oH.elThumbHead).width()}if(oH.elThumbFoot){nGap+=jindo.$Element(oH.elThumbFoot).width()}if(oH.elThumbBody){jindo.$Element(oH.elThumbBody).width(nThumbWidth-nGap)}}},_autoToggleAvailability:function(){var sClassPrefix=this.option("sClassPrefix");var oContentSize=this.getContentSize();var oBoxSize=this.getBoxSize();var oH=this.getScrollBarHorizontal();var oV=this.getScrollBarVertical();if(oH.elScrollBar){if(this.option("sOverflowX")=="scroll"&&oBoxSize.nWidth>=oContentSize.nWidth){jindo.$Element(oH.elScrollBar).addClass(sClassPrefix+"disabled");this.$super._onDeactivate("horizontal");if(this.isActivating()){jindo.$Element(this._el).removeClass(sClassPrefix+"noscript")}}else{jindo.$Element(oH.elScrollBar).removeClass(sClassPrefix+"disabled");if(this.isActivating()){this.$super._onActivate("horizontal")}}}if(oV.elScrollBar){if(this.option("sOverflowY")=="scroll"&&oBoxSize.nHeight>=oContentSize.nHeight){jindo.$Element(oV.elScrollBar).addClass(sClassPrefix+"disabled");this.$super._onDeactivate("vertical");if(this.isActivating()){jindo.$Element(this._el).removeClass(sClassPrefix+"noscript")}}else{jindo.$Element(oV.elScrollBar).removeClass(sClassPrefix+"disabled");if(this.isActivating()){this.$super._onActivate("vertical")}}}}}).extend(jindo.ScrollBar);jindo.StarRating=jindo.$Class({$init:function(el,htOption){var htDefaultOption={nStep:1,nMaxValue:10,nDefaultValue:0,bSnap:false,bActivateOnload:true};this.option(htDefaultOption);this.option(htOption||{});this._el=jindo.$(el);this._wel=jindo.$Element(el);this._assignHTMLElements();this._wfMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfMouseLeave=jindo.$Fn(this._onMouseLeave,this);this._wfClick=jindo.$Fn(this._onClick,this);if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){this._elRatingElement=jindo.$$.getSingle("span",this.getBaseElement());this._welRatingElement=jindo.$Element(this._elRatingElement)},getBaseElement:function(){return this._el},getRatingElement:function(){return this._elRatingElement},getValue:function(){return this._nValue},getValueByWidth:function(){return this._welRatingElement.width()/this._nBaseWidth*this.option("nMaxValue")},getValueToBeSet:function(nValue){nValue=this._round(nValue,this.option("nStep"));nValue=Math.min(nValue,this.option("nMaxValue"));nValue=Math.max(nValue,0);return nValue},setValue:function(nValue,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}var nMaxValue=this.option("nMaxValue");nValue=this.getValueToBeSet(nValue);var nWidth=this._nBaseWidth*nValue/nMaxValue;nWidth=Math.min(nWidth,this._nBaseWidth);this._welRatingElement.width(nWidth);this._nValue=nValue;if(bFireEvent){this.fireEvent("set",{nValue:this._nValue})}return this},reset:function(){var nValue=this.option("nDefaultValue")||0;this.setValue(nValue,false);return this},_round:function(nValue,nStep){var nResult=nValue,nFloor=Math.floor(nValue),nMaxCandidate=nFloor+1,nCompare=1,nTempCompare,nCandidate,nFixed;for(nCandidate=nFloor;nCandidate<=nMaxCandidate;nCandidate+=nStep){nTempCompare=Math.abs(nValue-nCandidate);if(nTempCompare<=nCompare){nCompare=nTempCompare;nResult=nCandidate}}return nResult.toFixed(Math.max((nStep.toString().length-2),0))},_onActivate:function(){var el=this.getBaseElement();this._wfMouseMove.attach(el,"mousemove");this._wfMouseLeave.attach(el,"mouseleave");this._wfClick.attach(el,"click");this._nBaseWidth=this._wel.width();this.reset()},_onDeactivate:function(){var el=this.getBaseElement();this._wfMouseMove.detach(el,"mousemove");this._wfMouseLeave.detach(el,"mouseleave");this._wfClick.detach(el,"click")},_onMouseMove:function(we){var nOffsetX=we.pos(true).offsetX+1,nWidth=(nOffsetX>this._nBaseWidth)?this._nBaseWidth:nOffsetX,nValue;if(this.option("bSnap")){nValue=nOffsetX/this._nBaseWidth*this.option("nMaxValue");nWidth=this._round(nValue,this.option("nStep"))*this._nBaseWidth/this.option("nMaxValue");nWidth=Math.min(nWidth,this._nBaseWidth)}this._welRatingElement.css("width",nWidth+"px");nValue=this.getValueByWidth();this.fireEvent("move",{nValue:nValue,nValueToBeSet:this.getValueToBeSet(nValue)})},_onMouseLeave:function(we){this.setValue(this._nValue,false);this.fireEvent("out")},_onClick:function(we){this.setValue(this.getValueByWidth())}}).extend(jindo.UIComponent);jindo.TabControl=jindo.$Class({_bIsActivating:false,_nCurrentIndex:null,_welSelectedTab:null,_welSelectedPanel:null,$init:function(el,htOption){var htDefaultOption={sClassPrefix:"tc-",sCheckEvent:"click",bActivateOnload:true};this.option(htDefaultOption);this.option(htOption||{});this._el=jindo.$(el);this._wfEventTab=jindo.$Fn(this._onEventTab,this);this._assignHTMLElements();if(this.option("bActivateOnload")){this._selectTab(this._elSelectedTab);this.activate()}},_assignHTMLElements:function(){var sPrefix=this.option("sClassPrefix"),el=this._el;this._aTab=jindo.$$("."+sPrefix+"tab",el);this._aPanel=jindo.$$("."+sPrefix+"panel",el);this._elSelectedTab=jindo.$$.getSingle("."+sPrefix+"tab."+sPrefix+"selected",el)||this.getTab(0);this._waTab=jindo.$A(this._aTab)},getTab:function(n){return this.getTabs()[n]},getTabs:function(){return this._aTab},getPanel:function(n){return this.getPanels()[n]},getPanels:function(){return this._aPanel},selectTab:function(n,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}this._selectTab(this.getTab(n),bFireEvent)},getIndex:function(elTab){return this._waTab.indexOf(elTab)},getCurrentIndex:function(){return this._nCurrentIndex},_selectTab:function(elTab,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}var sPrefix=this.option("sClassPrefix"),nIndex=this.getIndex(elTab),elPanel=this.getPanel(nIndex);if(bFireEvent){if(!this.fireEvent("beforeSelect",{nIndex:nIndex,elTab:elTab,elPanel:elPanel})){return}}var welTab=jindo.$Element(elTab);if(this._welSelectedTab){this._welSelectedTab.removeClass(sPrefix+"selected")}this._welSelectedTab=welTab;welTab.addClass(sPrefix+"selected");var welPanel=jindo.$Element(elPanel);if(this._welSelectedPanel){this._welSelectedPanel.removeClass(sPrefix+"selected")}this._welSelectedPanel=welPanel;welPanel.addClass(sPrefix+"selected");this._nCurrentIndex=nIndex;if(bFireEvent){this.fireEvent("select",{nIndex:nIndex,elTab:elTab,elPanel:elPanel})}},getBaseElement:function(){return this._el},_onActivate:function(){this._wfEventTab.attach(this._el,this.option("sCheckEvent"))},_onDeactivate:function(){this._wfEventTab.detach(this._el,this.option("sCheckEvent"))},_onEventTab:function(we){if(this.fireEvent(we.type,{weEvent:we})){var sPrefix=this.option("sClassPrefix"),el=we.element,elTab=jindo.$$.test(el,"."+sPrefix+"tab")?el:jindo.$$.getSingle("! ."+sPrefix+"tab",el);if(elTab){this._selectTab(elTab)}}}}).extend(jindo.UIComponent);jindo.DynamicTree=jindo.$Class({$init:function(el,htOption){var htDefaultOption={sUrl:"",sRequestType:"jsonp",sRequestMethod:"get",htRequestParameter:{}};this.option(htDefaultOption);this.option(htOption||{});this._attachEvents();this._initAjax()},_attachEvents:function(){var self=this;this.attach("beforeExpand",function(oCustomEvent){var el=oCustomEvent.element;var self=this;if(self.getNodeData(el).hasOwnProperty("_aChildren")){return}var htRequestParameter=self.option("htRequestParameter");htRequestParameter.key=self._getNodeDataKey(el);var htParam={element:el,htRequestParameter:htRequestParameter};if(self.fireEvent("request",htParam)){self._request(htParam.htRequestParameter)}else{oCustomEvent.stop()}})},_initAjax:function(){var htOption=this.option();var sPrefix=this.option("sClassPrefix");var sUrl=htOption.sUrl;var self=this;this._oAjax=jindo.$Ajax(sUrl,{type:htOption.sRequestType,method:htOption.sRequestMethod,onload:function(oResponse){try{var htParam={htResponseJSON:oResponse.json()};if(!self.fireEvent("response",htParam)){return}var elNode=self.createNode(htParam.htResponseJSON.aChildren);var elTargetNode=jindo.$$.getSingle("."+htParam.htResponseJSON.sKey,self.getRootList());if(self.getChildListOfNode(elTargetNode)){return}self.appendNode(elTargetNode,elNode);jindo.$A(elNode).forEach(function(el){if(jindo.$$.getSingle("."+sPrefix+"has-child",el)){jindo.$Element(el).addClass(sPrefix+"collapsed")}})}catch(e){}}})},_request:function(htRequestParameter){this._oAjax.abort();this._oAjax.request(htRequestParameter)},hasChild:function(elNode){return this._htNodeData[this._getNodeDataKey(elNode)]["bHasChild"]},_paintNode:function(elNode){if(!elNode){return}var htPart=this.getPartsOfNode(elNode);var aChildNodes=this.getChildNodes(elNode);var oNodeData=this.getNodeData(elNode);var welNode=jindo.$Element(elNode);var welItem=jindo.$Element(htPart.elItem);delete oNodeData._aChildren;if(this.hasChild(elNode)){welItem.addClass(this.htClassName.sHasChild);if(aChildNodes.length>0){oNodeData.bHasChild=true;oNodeData._aChildren=[]}var self=this;jindo.$A(aChildNodes).forEach(function(elNode,i){oNodeData._aChildren.push(self.getNodeData(elNode))})}else{welItem.removeClass(this.htClassName.sHasChild);if(htPart.elChild){htPart.elChild.parentNode.removeChild(htPart.elChild)}}oNodeData.lastNode=jindo.$$.getSingle("~ ."+this.htClassName.sNode,elNode)?false:true;(oNodeData.lastNode)?welNode.addClass(this.htClassName.sLastNode):welNode.removeClass(this.htClassName.sLastNode);elNode.parentNode.style.zoom=1},_makeNodeData:function(elNode){var oNodeData=this.getNodeData(elNode);oNodeData.bHasChild=false;if(jindo.$Element(this.getPartsOfNode(elNode).elItem).hasClass(this.option("sClassPrefix")+"has-child")){oNodeData.bHasChild=true}this.$super._makeNodeData(elNode)}}).extend(jindo.Tree);jindo.CheckBox=jindo.$Class({sTagName:"input[type=checkbox]",$init:function(el,htOption){this.option({sClassPrefix:"checkbox-"});this.option(htOption||{});this._elWrapper=jindo.$(el);this._welWrapper=jindo.$Element(el);this._assignHTMLElements();this.wfOnClickInput=jindo.$Fn(this._onClickInput,this);this.wfOnClickWrapper=jindo.$Fn(this._onClickWrapper,this);this.wfOnFocusInput=jindo.$Fn(this._onFocusInput,this);this.wfOnBlurInput=jindo.$Fn(this._onBlurInput,this);this.activate();this.paint()},_assignHTMLElements:function(){var elWrapper=this._elWrapper;this._elInput=jindo.$$.getSingle("input",elWrapper);if(this._elInput.type=="radio"){this.sTagName="input[type=radio]";this.option("sClassPrefix","radio-")}var sPrefix=this.option("sClassPrefix");this._elSubstitute=jindo.$$.getSingle("."+sPrefix+"mark",elWrapper);this._welSubstitute=jindo.$Element(this._elSubstitute)},getInput:function(){return this._elInput},getChecked:function(){return this.getInput().checked},setChecked:function(b){this.getInput().checked=b;this.paint();return this},enable:function(){this.getInput().disabled=false;this.paint();return this},disable:function(){this.getInput().disabled=true;this.paint();return this},_onClickInput:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT);var self=this;setTimeout(function(){self._welWrapper.fireEvent("click")},1)},_onClickWrapper:function(we){var elInput=this._elInput;if(elInput.disabled||we.element===elInput){return}elInput.focus();if(this.fireEvent("beforeChange",{bChecked:elInput.checked})){switch(elInput.type){case"checkbox":elInput.checked=!elInput.checked;this.paint();break;case"radio":elInput.checked=true;var self=this;jindo.$A(this.constructor.getInstance()).forEach(function(oRadioButton){if(oRadioButton.getInput().name==self.getInput().name){oRadioButton.paint()}});break}}},_onFocusInput:function(we){this._welWrapper.addClass(this.option("sClassPrefix")+"focused")},_onBlurInput:function(we){this._welWrapper.removeClass(this.option("sClassPrefix")+"focused")},_onActivate:function(){this._welWrapper.addClass(this.option("sClassPrefix")+"applied");this.wfOnClickInput.attach(this._elInput,"click");this.wfOnClickWrapper.attach(this._elWrapper,"click");this.wfOnFocusInput.attach(this._elInput,"focus");this.wfOnBlurInput.attach(this._elInput,"blur")},_onDeactivate:function(){this._welWrapper.removeClass(this.option("sClassPrefix")+"applied");this.wfOnClickInput.detach(this._elInput,"click");this.wfOnClickWrapper.detach(this._elWrapper,"click");this.wfOnFocusInput.detach(this._elInput,"focus");this.wfOnBlurInput.detach(this._elInput,"blur")},_onPaint:function(){var sPrefix=this.option("sClassPrefix");if(this._elInput.disabled){this._welWrapper.addClass(sPrefix+"disabled")}else{this._welWrapper.removeClass(sPrefix+"disabled")}if(this._elInput.checked){this._welSubstitute.addClass(sPrefix+"checked")}else{this._welSubstitute.removeClass(sPrefix+"checked")}this.fireEvent("change",{bChecked:this._elInput.checked})}}).extend(jindo.HTMLComponent);jindo.SelectBox=jindo.$Class({sTagName:"select",_bDisabled:false,_sPrevValue:null,_nSelectedIndex:0,_bRealFocused:false,$init:function(el,htOption){this._aItemData=[];this._aListItem=[];this._aOptions=[];this.option({sClassPrefix:"selectbox-",nWidth:null,nHeight:null,bUseLayerPosition:true,aOptionHTML:[],aOptionLabel:[],LayerPosition:{sPosition:"outside-bottom",sAlign:"left",nTop:0,nLeft:0},LayerManager:{sCheckEvent:"mousedown",nShowDelay:20,nHideDelay:0,sMethod:"show"}});this.option(htOption||{});this._el=jindo.$(el);this._assignHTMLElements();if(this.option("bUseLayerPosition")){this._initLayerPosition()}this._initLayerManager();this._initRolloverClick();this._oTimer=new jindo.Timer();this._wfOnFocusSelect=jindo.$Fn(this._onFocusSelect,this);this._wfOnBlurSelect=jindo.$Fn(this._onBlurSelect,this);this._wfOnMouseDownBox=jindo.$Fn(this._onMouseDownBox,this);this._wfOnMouseDownList=jindo.$Fn(this._onMouseDownList,this);this._wfOnKeyDown=jindo.$Fn(this._onKeyDown,this);this._wfOnMouseWheel=jindo.$Fn(function(e){e.stop(jindo.$Event.CANCEL_DEFAULT)});this._oAgent=jindo.$Agent();this.activate()},_assignHTMLElements:function(){var sPrefix=this.option("sClassPrefix"),el=this._el;this._wel=jindo.$Element(el);this._elSelect=jindo.$$.getSingle("select."+sPrefix+"source",el);this._sSelectInnerHTML=this._elSelect.innerHTML;this._elOptionDefault=jindo.$$.getSingle("option."+sPrefix+"default",el);this._elSelectOptionGroup=jindo.$$.getSingle("select."+sPrefix+"source-option-group",el);this._elBox=jindo.$$.getSingle("."+sPrefix+"box",el);this._elLabel=jindo.$$.getSingle("."+sPrefix+"label",el);this._elLayer=jindo.$$.getSingle("."+sPrefix+"layer",el);this._elList=jindo.$$.getSingle("."+sPrefix+"list",el);this._elList.innerHTML="";this._elSelectList=jindo.$("<ul>");this._elList.insertBefore(this._elSelectList,this._elList.firstChild)},getSelectElement:function(){return this._elSelect},getBoxElement:function(){return this._elBox},getLabelElement:function(){return this._elLabel},getLayerElement:function(){return this._elLayer},getListElement:function(){return this._elList},getSelectListElement:function(){return this._elSelectList},_limitWidth:function(){var nWidth=this.option("nWidth");this.getLayerManager()._sLayerCSSOverflowX="hidden";if(nWidth){jindo.$Element(this.getBoxElement()).css({width:nWidth+"px",overflowX:"hidden"});jindo.$Element(this.getLayerElement()).css({width:nWidth+"px",overflowX:"hidden"})}},_initLayerManager:function(){var self=this,sPrefix=this.option("sClassPrefix"),elSelect=this.getSelectElement();this._oLayerManager=new jindo.LayerManager(this.getLayerElement(),this.option("LayerManager")).attach({beforeShow:function(oCustomEvent){if(self.fireEvent("open")){if(!this._bMeasureFinished){this.setLayer(oCustomEvent.elLayer);this._bMeasureFinished=true}self._limitWidth();var nHeight=self.option("nHeight");if(nHeight){var welLayer=jindo.$Element(this.getLayer());if(this._nLayerHeight>=nHeight){this._sLayerCSSOverflowY="auto";welLayer.css("overflowY","hidden");if(oCustomEvent.sMethod!="slide"){welLayer.css("height",nHeight+"px")}this._nLayerHeight=nHeight}}setTimeout(function(){elSelect.focus()},10);self._wel.addClass(sPrefix+"open")}else{oCustomEvent.stop()}},appear:function(oCustomEvent){if(self.option("bUseLayerPosition")){self.getLayerPosition().setPosition();this._bMeasureFinished=true}},show:function(oCustomEvent){self._paintSelected()},beforeHide:function(oCustomEvent){if(self.fireEvent("close")){self._wel.removeClass(sPrefix+"open").removeClass(sPrefix+"focused");setTimeout(function(){self.getSelectElement().blur()},10)}else{oCustomEvent.stop();setTimeout(function(){elSelect.focus()},10)}}}).link(this.getBoxElement()).link(this.getLayerElement())},getLayerManager:function(){return this._oLayerManager},_initRolloverClick:function(){var self=this,sPrefix=this.option("sClassPrefix");this._oRolloverClick=new jindo.RolloverClick(this.getSelectListElement(),{sCheckEvent:"mouseup",RolloverArea:{sClassName:sPrefix+"item",sClassPrefix:sPrefix+"item-"}}).attach({over:function(oCustomEvent){if(self._welOvered){self._welOvered.removeClass(sPrefix+"item-over")}var wel=jindo.$Element(oCustomEvent.element);wel.addClass(sPrefix+"item-over");self._welOvered=wel},out:function(oCustomEvent){oCustomEvent.stop()},click:function(oCustomEvent){var nSelectedIndex=self._nSelectedIndex;jindo.$A(self._aItemData).forEach(function(htData){if(htData.elItem===oCustomEvent.element){self.setValue(htData.sValue);jindo.$A.Break()}});var nLastSelectedIndex=self.getSelectedIndex();if(nSelectedIndex!=nLastSelectedIndex){jindo.$Element(self.getSelectElement()).fireEvent("change");self.fireEvent("change",{nIndex:nSelectedIndex,nLastIndex:nLastSelectedIndex})}if(!jindo.$Element(oCustomEvent.element).hasClass(sPrefix+"notclose")){self.getLayerManager().hide()}}})},getRolloverClick:function(){return this._oRolloverClick},_initLayerPosition:function(){this._oLayerPosition=new jindo.LayerPosition(this.getBoxElement(),this.getLayerElement(),this.option("LayerPosition"))},getLayerPosition:function(){return this._oLayerPosition},_onActivate:function(){var sPrefix=this.option("sClassPrefix"),elSelect=this.getSelectElement();this._limitWidth();this._wel.removeClass(sPrefix+"noscript");this._wfOnFocusSelect.attach(elSelect,"focus");this._wfOnBlurSelect.attach(elSelect,"blur");this._wfOnMouseDownBox.attach(this.getBoxElement(),"mousedown");this._wfOnMouseDownList.attach(this.getListElement(),"mousedown");this._wfOnKeyDown.attach(elSelect,"keydown");this._wfOnMouseWheel.attach(elSelect,"mousewheel");this.paint();this._sPrevValue=this.getValue()},_onDeactivate:function(){this.getLayerManager().hide();var sPrefix=this.option("sClassPrefix"),elSelect=this.getSelectElement();this._wel.addClass(sPrefix+"noscript");this._wfOnFocusSelect.detach(elSelect,"focus");this._wfOnBlurSelect.detach(elSelect,"blur");this._wfOnMouseDownBox.detach(this.getBoxElement(),"mousedown");this._wfOnMouseDownList.detach(this.getListElement(),"mousedown");this._wfOnKeyDown.detach(elSelect,"keydown");this._wfOnMouseWheel.detach(elSelect,"mousewheel")},getValueOf:function(sText){for(var i=0,oItemData;(oItemData=this._aItemData[i]);i++){if(oItemData.sText==sText){return oItemData.sValue}}return null},getValue:function(){return this.getSelectElement().value},getText:function(){return this._aItemData[this._nSelectedIndex].sText},getHTML:function(){return this.getLabelElement().innerHTML},setValue:function(sValue){this.getSelectElement().value=sValue;this._sPrevValue=this.getValue();this._paint()},getSelectedIndex:function(nIndex){return this.getSelectElement().selectedIndex},setSelectedIndex:function(nIndex,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}if(this._isSelectable(nIndex)){var nLastSelectedIndex=this.getSelectedIndex();this._setSelectedIndex(nIndex);this._paint();if(bFireEvent&&nLastSelectedIndex!=nIndex){this.fireEvent("change",{nIndex:nIndex,nLastIndex:nLastSelectedIndex})}return true}return false},_setSelectedIndex:function(nIndex){this.getSelectElement().selectedIndex=nIndex},_isSelectable:function(nIndex){var htItem=this._aItemData[nIndex];if(!htItem||htItem.bDisabled||htItem.bDefault){return false}else{return true}},getOptions:function(){return this._aOptions},getListItems:function(){return this._aListItem},getDisabled:function(){return this._bDisabled},setOptionGroup:function(sName){if(!this._elSelectOptionGroup||!this._elOptionDefault){return false}var elSelect=this.getSelectElement(),sPrefix=this.option("sClassPrefix"),aGroupOption=jindo.$$("."+sPrefix+"option-group-"+sName,this._elSelectOptionGroup),elOptionDefault=this._elOptionDefault=this._elOptionDefault.cloneNode(true);elSelect.innerHTML="";elSelect.appendChild(elOptionDefault);this._nSelectedIndex=0;for(var i=0;i<aGroupOption.length;i++){elSelect.appendChild(aGroupOption[i].cloneNode(true))}this._sPrevValue=this.getValue();this.paint();return true},isSelected:function(){return !this._aItemData[this.getSelectedIndex()].bDefault},setDefault:function(){var nDefaultOption=-1;jindo.$A(this._aItemData).forEach(function(o,i){if(o.bDefault||o.bSelected){nDefaultOption=i}});if(nDefaultOption<0){nDefaultOption=0}this._nSelectedIndex=nDefaultOption;this._setSelectedIndex(nDefaultOption);this._sPrevValue=this.getValue();this._paint()},paint:function(){this._paintList();this._paintSelected();this._paintLabel();this.getLayerManager().setLayer(this.getLayerElement())},_paint:function(){this._paintSelected();this._paintLabel()},_paintLabel:function(){var welLabel=jindo.$Element(this.getLabelElement()),sHTML=this.option("aOptionHTML")[this._nSelectedIndex]||"",sLabel=this.option("aOptionLabel")[this._nSelectedIndex]||"",sText=this.getText();if(sHTML){if(sLabel){welLabel.html(sLabel)}else{welLabel.html(sHTML)}}else{welLabel.text(sText)}welLabel.attr("unselectable","on")},_paintList:function(){var sPrefix=this.option("sClassPrefix");this._aOptions=jindo.$$("option",this.getSelectElement());var aOptions=this._aOptions;this._aItemData=[];this._aListItem=[];this._nSelectedIndex=0;var elList=this.getSelectListElement();elList.innerHTML="";if(this.option("nHeight")){jindo.$Element(this.getLayerElement()).css("height","auto")}for(var i=0,elOption;(elOption=aOptions[i]);i++){var welOption=jindo.$Element(elOption),bDefault=welOption.hasClass(sPrefix+"default"),bSelected=welOption.attr("selected")=="selected",bDisabled=bDefault||elOption.disabled,sHTML=this.option("aOptionHTML")[i]||"",sText=welOption.text()||"",sValue=welOption.attr("value");if(!sValue){welOption.attr("value",sText);sValue=sText}this._aItemData[i]={elOption:elOption,elItem:null,sHTML:sHTML,sText:sText,sValue:sValue,bDisabled:bDisabled,bSelected:bSelected,bDefault:bDefault};var elItem=null,htItem=this._aItemData[i];if(!htItem.bDefault){elItem=jindo.$("<li>");elItem.style.cssText=htItem.elOption.style.cssText;elItem.className=htItem.elOption.className;var welItem=jindo.$Element(elItem);if(htItem.sHTML){welItem.html(htItem.sHTML)}else{welItem.text(htItem.sText)}welItem.attr("unselectable","on");if(htItem.bDisabled){welItem.addClass(sPrefix+"item-disabled")}else{welItem.addClass(sPrefix+"item")}elList.appendChild(elItem);this._aListItem.push(elItem);this._aItemData[i].elItem=elItem}}if(this._aListItem.length===0){this.disable();return}this.enable()},_paintSelected:function(){var sPrefix=this.option("sClassPrefix"),n=this.getSelectedIndex(),htItem,nPrevSelectedIndex=this._nSelectedIndex;this._nSelectedIndex=n;htItem=this._aItemData[n];if(htItem.elItem){var elSelected=htItem.elItem,welSelected=jindo.$Element(elSelected);if(this._welSelected){this._welSelected.removeClass(sPrefix+"item-selected")}if(this._welOvered){this._welOvered.removeClass(sPrefix+"item-over")}this._welSelected=this._welOvered=welSelected;welSelected.addClass(sPrefix+"item-selected").addClass(sPrefix+"item-over");if(this.isLayerOpened()){var elLayerElement=this.getLayerElement();if(!this.option("nHeight")||this.getLayerManager().option("sMethod")=="slide"){}var nHeight=parseInt(jindo.$Element(elLayerElement).css("height"),10),nOffsetTop=elSelected.offsetTop,nOffsetHeight=elSelected.offsetHeight,nScrollTop=elLayerElement.scrollTop,bDown;if(nPrevSelectedIndex<n){bDown=true}else{bDown=false}if(nOffsetTop<nScrollTop||nOffsetTop>nScrollTop+nHeight){elLayerElement.scrollTop=nOffsetTop}if(bDown){if(nOffsetTop+nOffsetHeight>nHeight+nScrollTop){elLayerElement.scrollTop=(nOffsetTop+nOffsetHeight-nHeight)}}else{if(nOffsetTop<nScrollTop){elLayerElement.scrollTop=nOffsetTop}}}}},isLayerOpened:function(){return this.getLayerManager().getVisible()},disable:function(){this.getLayerManager().hide();var sPrefix=this.option("sClassPrefix");this._wel.addClass(sPrefix+"disabled");this.getSelectElement().disabled=true;this._bDisabled=true},enable:function(){var sPrefix=this.option("sClassPrefix");this._wel.removeClass(sPrefix+"disabled");this.getSelectElement().disabled=false;this._bDisabled=false},open:function(){if(!this._bDisabled){this.getLayerManager().show()}return this},close:function(){this.getLayerManager().hide();return this},_onMouseDownBox:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT);if(!this._bDisabled){this.getLayerManager().toggle()}},_onMouseDownList:function(we){if(!jindo.$$.getSingle("! ."+this.option("sClassPrefix")+"notclose",we.element)){we.stop(jindo.$Event.CANCEL_DEFAULT)}},_getSelectableIndex:function(nIndex,nDirection,nTargetIndex){var nFirst=-1,nLast=this._aItemData.length-1,i;for(i=0;i<this._aItemData.length;i++){if(this._isSelectable(i)){if(nFirst<0){nFirst=i}else{nLast=i}}}switch(nDirection){case -1:if(nIndex==nFirst){return nIndex}for(i=nIndex-1;i>nFirst;i--){if(this._isSelectable(i)){return i}}return nFirst;case 1:if(nIndex==nLast){return nIndex}for(i=nIndex+1;i<nLast;i++){if(this._isSelectable(i)){return i}}return nLast;case Infinity:return nLast;case -Infinity:return nFirst}},_onKeyDown:function(we){var htKey=we.key();if(this._oAgent.os().mac&&this._oAgent.navigator().safari){var nKeyCode=htKey.keyCode;if(nKeyCode!=9){we.stop(jindo.$Event.CANCEL_DEFAULT)}var nSelectedIndex=this.getSelectedIndex(),nTargetIndex=nSelectedIndex;switch(nKeyCode){case 37:nTargetIndex=this._getSelectableIndex(nSelectedIndex,-1);break;case 38:nTargetIndex=this._getSelectableIndex(nSelectedIndex,-1);break;case 39:nTargetIndex=this._getSelectableIndex(nSelectedIndex,1);break;case 40:nTargetIndex=this._getSelectableIndex(nSelectedIndex,1);break;case 33:nTargetIndex=this._getSelectableIndex(nSelectedIndex,-Infinity);break;case 34:nTargetIndex=this._getSelectableIndex(nSelectedIndex,Infinity);break;case 13:this.getLayerManager().hide();break}var oParam={nIndex:nTargetIndex,nLastIndex:parseInt(this._nSelectedIndex,10)};this._setSelectedIndex(nTargetIndex);this._paint();if(oParam.nIndex!=oParam.nLastIndex){this.fireEvent("change",oParam)}}else{if(this.isLayerOpened()&&(htKey.enter||htKey.keyCode==9)){this.getLayerManager().hide()}}},_onFocusSelect:function(we){var sPrefix=this.option("sClassPrefix"),wel=this._wel;if(!this.isLayerOpened()){if(this.fireEvent("focus")){this._bRealFocused=true}else{this.getSelectElement().blur();return}}wel.addClass(sPrefix+"focused");if(!(this._oAgent.os().mac&&this._oAgent.navigator().safari)){var self=this;this._oTimer.start(function(){var sValue=self.getValue();if(!!self._sPrevValue&&self._sPrevValue!=sValue){var nSelectedIndex=self.getSelectElement().selectedIndex;if(!self._isSelectable(nSelectedIndex)){var nDiff=-(self._nSelectedIndex-nSelectedIndex);nDiff=(nDiff>0)?1:-1;self._setSelectedIndex(self._getSelectableIndex(self._nSelectedIndex,nDiff,nSelectedIndex));return true}var oParam={nIndex:nSelectedIndex,nLastIndex:parseInt(self._nSelectedIndex,10)};self._paint();if(oParam.nIndex!=oParam.nLastIndex){self.fireEvent("change",oParam)}self._sPrevValue=sValue}return true},10)}},_onBlurSelect:function(we){var self=this,sPrefix=this.option("sClassPrefix");if(this._bRealFocused){this.fireEvent("blur");this._wel.removeClass(sPrefix+"focused");this._bRealFocused=false}setTimeout(function(){self._oTimer.abort()},10)}}).extend(jindo.HTMLComponent);nhn.Component=jindo.$Class({_eventHandlers:null,_options:null,$init:function(){var aInstance=this.constructor.getInstance();if(typeof aInstance=="undefined"){this.constructor._aInstance=aInstance=[]}aInstance[aInstance.length]=this;this._eventHandlers={};this._options={};this._options._setters={}},option:function(sName,sValue){var sNameType=(typeof sName);if(sNameType=="undefined"){return this._options}else{if(sNameType=="string"){if(typeof sValue!="undefined"){this._options[sName]=sValue;if(typeof this._options._setters[sName]=="function"){this._options._setters[sName](sValue)}return this}else{return this._options[sName]}}else{if(sNameType=="object"){try{for(var x in sName){this._options[x]=sName[x];if(typeof this._options._setters[x]=="function"){this._options._setters[x](sName[x])}}}catch(e){}return this}}}},optionSetter:function(sName,fSetter){var sNameType=(typeof sName);if(sNameType=="undefined"){return this._options._setters}else{if(sNameType=="string"){if(typeof fSetter!="undefined"){this._options._setters[sName]=jindo.$Fn(fSetter,this).bind();return this}else{return this._options._setters[sName]}}else{if(sNameType=="object"){try{for(var x in sName){this._options._setters[x]=jindo.$Fn(sName[x],this).bind()}}catch(e){}return this}}}},fireEvent:function(sEvent,oEvent){var oEvent=oEvent?(oEvent instanceof jindo.$Event?oEvent._event:oEvent):{};var inlineHandler=this["on"+sEvent];var handlerList=this._eventHandlers[sEvent];var bHasInlineHandler=typeof inlineHandler=="function";var bHasHandlerList=typeof handlerList!="undefined";if(!bHasInlineHandler&&!bHasHandlerList){return true}handlerList=handlerList.concat();var bIsRealEvent=(function(oEvent){try{if(oEvent instanceof Event){return true}}catch(x){}try{if(oEvent instanceof MouseEvent){return true}}catch(x){}try{if(oEvent instanceof KeyEvent){return true}}catch(x){}try{if(("cancelBubble" in oEvent||"preventBubble" in oEvent)&&"type" in oEvent){return true}}catch(x){}return false})(oEvent);if(!bIsRealEvent){try{if(typeof oEvent._extends=="undefined"){oEvent._extends=[];oEvent.stop=function(){if(oEvent._extends.length>0){oEvent._extends[oEvent._extends.length-1].bCanceled=true}}}oEvent._extends.push({sType:sEvent,bCanceled:false});oEvent.sType=sEvent}catch(e){bIsRealEvent=true}}if(bIsRealEvent){oEvent=jindo.$Event(oEvent)}var aArg=[oEvent];for(var i=2,nLen=arguments.length;i<nLen;i++){aArg.push(arguments[i])}if(bHasInlineHandler){inlineHandler.apply(this,aArg)}if(bHasHandlerList){for(var i=0,handler;handler=handlerList[i];i++){handler.apply(this,aArg)}}if(bIsRealEvent){return !oEvent.bCanceled}var oPopedEvent=oEvent._extends.pop();return !oPopedEvent.bCanceled},attach:function(sEvent,fHandler){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,sEvent){this.attach(sEvent,fHandler)},this).bind());return this}var handlers=this._eventHandlers[sEvent];if(typeof handlers=="undefined"){handlers=this._eventHandlers[sEvent]=[]}handlers.push(fHandler);return this},detach:function(sEvent,fHandler){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,sEvent){this.detach(sEvent,fHandler)},this).bind());return this}var handlers=this._eventHandlers[sEvent];if(typeof handlers=="undefined"){return this}for(var i=0,handler;handler=handlers[i];i++){if(handler===fHandler){handlers=handlers.splice(i,1);break}}return this},detachAll:function(sEvent){var handlers=this._eventHandlers;if(arguments.length){if(typeof handlers[sEvent]=="undefined"){return this}delete handlers[sEvent];return this}for(var o in handlers){delete handlers[o]}return this}});nhn.Component.factory=function(aObject,oOption){var aReturn=[];if(typeof oOption=="undefined"){oOption={}}for(var i=0;i<aObject.length;i++){try{oInstance=new this(aObject[i],oOption);aReturn[aReturn.length]=oInstance}catch(e){}}return aReturn};nhn.Component.getInstance=function(){return this._aInstance};nhn.LayerManager=jindo.$Class({_bIsActivating:false,_bIsLayerVisible:false,_bIsHiding:false,_bIsShowing:false,_aLinks:null,_oTimer:null,$init:function(el,oOptions){this.option({checkEvent:"mousedown",showDelay:0,hideDelay:100,visibleCallback:function(){return jindo.$Element(this.getLayer()).visible()}});this.option(oOptions||{});this._el=jindo.$(el);this._aLinks=[];this._oTimer=new nhn.Timer();this._wfOnEvent=jindo.$Fn(this._onEvent,this);this.getVisible();this.activate()},isActivating:function(){return this._bIsActivating},activate:function(){if(this.isActivating()){return}this._wfOnEvent.attach(document,this.option("checkEvent"));this._bIsActivating=true},deactivate:function(){if(!this.isActivating()){return}this._wfOnEvent.detach(document,this.option("checkEvent"));this._bIsActivating=false},getVisible:function(){return this._bIsLayerVisible=this.option("visibleCallback").call(this)?true:false},_check:function(oEl){var eEl=jindo.$Element(oEl);for(var i=0,oLink;oLink=this._aLinks[i];i++){oLink=jindo.$Element(oLink).$value();if(oLink&&(oEl==oLink||eEl.isChildOf(oLink))){return true}}return false},_find:function(oEl){for(var i=0,oLink;oLink=this._aLinks[i];i++){if(oLink==oEl){return i}}return -1},getLayer:function(){return this._el},setLayer:function(el){this._el=el},getLinks:function(){return this._aLinks},setLinks:function(a){this._aLinks=jindo.$A(a).unique().$value();return this},link:function(oEl){if(arguments.length>1){for(var i=0,len=arguments.length;i<len;i++){this.link(arguments[i])}return this}if(this._find(oEl)!=-1){return this}this._aLinks.push(oEl);return this},unlink:function(oEl){if(arguments.length>1){for(var i=0,len=arguments.length;i<len;i++){this.unlink(arguments[i])}return this}var nIndex=this._find(oEl);if(nIndex==-1){return this}this._aLinks.splice(nIndex,1);return this},show:function(nDelay){if(this.getVisible()){return this}var self=this;if(typeof nDelay=="undefined"){nDelay=this.option("showDelay")}var fRun=function(){var elLayer=self.getLayer();if(self.fireEvent("beforeshow",{element:elLayer,linkedList:self._aLinks})){jindo.$Element(elLayer).show();self.fireEvent("show",{element:elLayer,linkedList:self._aLinks});self._bIsShowing=false}else{return}var sGroup=self.option("group");if(!sGroup){return}var aInstances=self.constructor._instances;for(var i=0,len=aInstances.length;i<len;i++){var oInst=aInstances[i];if(oInst!==self&&oInst.option("group")==sGroup){oInst.hide()}}};this._bIsShowing=true;this._bIsHiding=false;if(nDelay){this._oTimer.start(fRun,nDelay)}else{this._oTimer.abort();fRun()}return this},hide:function(nDelay){if(!this.getVisible()){return this}var self=this;if(typeof nDelay=="undefined"){nDelay=this.option("hideDelay")}var fRun=function(){var elLayer=self.getLayer();if(self.fireEvent("beforehide",{element:elLayer,linkedList:self._aLinks})){jindo.$Element(elLayer).hide();self.fireEvent("hide",{element:elLayer,linkedList:self._aLinks});self._bIsHiding=false}};this._bIsShowing=false;this._bIsHiding=true;if(nDelay){this._oTimer.start(fRun,nDelay)}else{this._oTimer.abort();fRun()}return this},toggle:function(nDelay){return this[this.getVisible()?"hide":"show"](nDelay)},_onEvent:function(e){var self=this;setTimeout(function(){if(!self.getVisible()){return}var el=e.element;if(self._check(el)){if(!self._bIsHiding||!self._bIsShowing){self.fireEvent("ignore",{event:e});self._oTimer.abort();return}}if(typeof el.tagName!="undefined"){self.hide()}},this.option("hideDelay"))}}).extend(nhn.Component);nhn.LayerPosition=jindo.$Class({$init:function(el,elLayer,oOption){this.option({position:"outside-bottom",align:"left",valign:"",top:0,left:0,auto:false,adjustPositionOnResize:true,adjustPositionOnScroll:true});this.option(oOption||{});this.setElement(el);this.setLayer(elLayer);if(el&&elLayer){this.setPosition()}this._wfSetPosition=jindo.$Fn(function(){if(jindo.$Element(this.getLayer()).visible()){this.setPosition()}},this);if(el==document.body){if(this.option("adjustPositionOnScroll")){this._wfSetPosition.attach(window,"scroll")}if(this.option("adjustPositionOnResize")){this._wfSetPosition.attach(window,"resize")}}},getElement:function(){return this._el},setElement:function(el){this._el=jindo.$(el);return this},getLayer:function(){return this._elLayer},setLayer:function(elLayer){this._elLayer=jindo.$(elLayer);return this},getPosition:function(oOption){if(typeof oOption!="object"){var oOption=this.option()}function isPosition(sPosition){if(oOption.position.indexOf(sPosition)>-1){return true}return false}function setLeftRight(){if(isPosition("left")){if(isPosition("outside")){oPosition.left-=nLayerWidth;oPosition.left-=oOption.left}else{oPosition.left+=oOption.left}}else{if(isPosition("right")){oPosition.left+=nWidth;if(isPosition("inside")){oPosition.left-=nLayerWidth;oPosition.left-=oOption.left}else{oPosition.left+=oOption.left}}else{setAlign()}}}function setAlign(){if(oOption.align=="left"){oPosition.left+=oOption.left}if(oOption.align=="center"){oPosition.left+=(nWidth-nLayerWidth)/2}if(oOption.align=="right"){oPosition.left+=nWidth-nLayerWidth;oPosition.left-=oOption.left}}function setVerticalAlign(){if(oOption.valign=="top"){oPosition.top+=oOption.top}if(oOption.valign=="middle"){oPosition.top+=(nHeight-nLayerHeight)/2}if(oOption.valign=="bottom"){oPosition.top+=nHeight-nLayerHeight;oPosition.top-=oOption.top}}var el=this.getElement();var wel=jindo.$Element(el);var elLayer=this.getLayer();var welLayer=jindo.$Element(elLayer);var oElPos=wel.offset();var nWidth=el.offsetWidth;var nHeight=el.offsetHeight;if(el==document.body){var oClientSize=jindo.$Document().clientSize();nWidth=oClientSize.width;nHeight=oClientSize.height}var nLayerWidth=elLayer.offsetWidth;var nLayerHeight=elLayer.offsetHeight;nLayerWidth+=parseInt(welLayer.css("marginLeft"))+parseInt(welLayer.css("marginRight"))||0;nLayerHeight+=parseInt(welLayer.css("marginTop"))+parseInt(welLayer.css("marginBottom"))||0;var oPosition={top:0,left:0};oPosition.top=oElPos.top;oPosition.left=oElPos.left;if(isPosition("center")){oPosition.top+=(nHeight-nLayerHeight)/2;oPosition.top+=oOption.top;oPosition.left+=(nWidth-nLayerWidth)/2;oPosition.left+=oOption.left}else{if(isPosition("top")){if(isPosition("outside")){oPosition.top-=nLayerHeight;oPosition.top-=oOption.top}else{oPosition.top+=oOption.top}setLeftRight()}else{if(isPosition("bottom")){oPosition.top+=nHeight;if(isPosition("inside")){oPosition.top-=nLayerHeight;oPosition.top-=oOption.top}else{oPosition.top+=oOption.top}setLeftRight()}else{if(isPosition("left")){if(isPosition("outside")){oPosition.left-=nLayerWidth;oPosition.left-=oOption.left}else{oPosition.left+=oOption.left}setVerticalAlign()}else{if(isPosition("right")){oPosition.left+=nWidth;if(isPosition("inside")){oPosition.left-=nLayerWidth;oPosition.left-=oOption.left}else{oPosition.left+=oOption.left}setVerticalAlign()}}}}}if(el==document.body){var oScrollPosition=jindo.$Document().scrollPosition();var nScrollTop=oScrollPosition.top;var nScrollLeft=oScrollPosition.left;oPosition.top+=nScrollTop;oPosition.left+=nScrollLeft}return oPosition},setPosition:function(oPosition){var elLayer=this.getLayer();var welLayer=jindo.$Element(elLayer);document.body.appendChild(elLayer);welLayer.css("left","-9999px").css("top","0px");if(!oPosition){var oPosition=this.getPosition()}if(this.option("auto")){oPosition=this._adjustPosition(oPosition)}welLayer.css("left",oPosition.left+"px").css("top",oPosition.top+"px")},_isFullyVisible:function(oPosition){if(!oPosition){var oPosition=this.getPosition()}var elLayer=this.getLayer();var welLayer=jindo.$Element(elLayer);var oScrollPosition=jindo.$Document().scrollPosition();var nScrollTop=oScrollPosition.top;var nScrollLeft=oScrollPosition.left;var oClientSize=jindo.$Document().clientSize();var nLayerWidth=elLayer.offsetWidth+(parseInt(welLayer.css("marginLeft"))+parseInt(welLayer.css("marginRight"))||0);var nLayerHeight=elLayer.offsetHeight+(parseInt(welLayer.css("marginTop"))+parseInt(welLayer.css("marginBottom"))||0);if(oPosition.left>=0&&oPosition.top>=0&&oClientSize.width>=oPosition.left-nScrollLeft+nLayerWidth&&oClientSize.height>=oPosition.top-nScrollTop+nLayerHeight){return true}return false},_mirrorHorizontal:function(oOption){var oOption=oOption||this.option();if(oOption.align=="center"||oOption.position=="inside-center"){return}var oTempOption={};for(var i in oOption){oTempOption[i]=oOption[i]}var oPosition=this.getPosition();if(oTempOption.position.indexOf("right")>-1){oTempOption.position=oTempOption.position.replace(/right/,"left")}else{if(oTempOption.position.indexOf("left")>-1){oTempOption.position=oTempOption.position.replace(/left/,"right")}else{if(oTempOption.align=="right"){oTempOption.align="left"}else{if(oTempOption.align=="left"){oTempOption.align="right"}}}}return oTempOption},_mirrorVertical:function(oOption){var oOption=oOption||this.option();if(oOption.valign=="middle"||oOption.position=="inside-center"){return}var oTempOption={};for(var i in oOption){oTempOption[i]=oOption[i]}var oPosition=this.getPosition();if(oTempOption.position.indexOf("top")>-1){oTempOption.position=oTempOption.position.replace(/top/,"bottom")}else{if(oTempOption.position.indexOf("bottom")>-1){oTempOption.position=oTempOption.position.replace(/bottom/,"top")}else{if(oTempOption.valign=="top"){oTempOption.valign="bottom"}else{if(oTempOption.valign=="bottom"){oTempOption.valign="top"}}}}return oTempOption},_adjustPosition:function(oPosition){if(this._isFullyVisible(oPosition)){return oPosition}var oOption=this.option();var aOption=[];aOption.push(this._mirrorHorizontal(oOption));aOption.push(this._mirrorVertical(oOption));aOption.push(this._mirrorVertical(this._mirrorHorizontal(oOption)));for(var i=0;i<aOption.length;i++){oTempPosition=this.getPosition(aOption[i]);if(this._isFullyVisible(oTempPosition)){return oTempPosition}}return oPosition}}).extend(nhn.Component);nhn.Transition=jindo.$Class({_nFPS:15,_aQueue:null,_oTimer:null,_bIsWaiting:true,_bIsPlaying:false,$init:function(oOptions){this._aQueue=[];this._oTimer=new nhn.Timer();this.option({effect:nhn.Effect.linear,correction:false});this.option(oOptions||{})},fps:function(nFPS){if(arguments.length>0){this._nFPS=nFPS;return this}return this._nFPS},abort:function(){this._aQueue=[];this._oTimer.abort();if(this._bIsPlaying){this.fireEvent("abort")}this._bIsWaiting=true;this._bIsPlaying=false;this._oNow=null},start:function(){this.abort();return this.precede.apply(this,arguments)},pause:function(){if(this._oTimer.abort()){this.fireEvent("pause")}},resume:function(){var self=this;if(!this._oNow){return}if(this._bIsWaiting==false&&this._bIsPlaying==true){this.fireEvent("resume")}this._goOn();this._bIsWaiting=false;this._bIsPlaying=true;this._oTimer.start(function(){var bEnd=!self._goOn();if(bEnd){self._bIsWaiting=true;setTimeout(function(){self._try()},0)}return !bEnd},this._oNow.interval)},precede:function(nDuration,oEl){if(typeof nDuration=="function"){this._aQueue.push(nDuration)}else{var oStuff={duration:nDuration,lists:[]};for(var oArg=arguments,nLen=oArg.length,i=1;i<nLen-1;i+=2){var oValues=[];jindo.$H(oArg[i+1]).forEach(function(sEnd,sKey){if(/^(@|style\.)(\w+)/i.test(sKey)){oValues.push(["csses",RegExp.$2,sEnd])}else{oValues.push(["attrs",sKey,sEnd])}});oStuff.lists.push({element:"tagName" in oArg[i]?jindo.$Element(oArg[i]):oArg[i],values:oValues})}this._aQueue.push(oStuff)}this._try();return this},_dequeue:function(){var oStuff=this._aQueue.shift();if(!oStuff){return}if(typeof oStuff=="function"){return oStuff}var aLists=oStuff.lists;for(var i=0,nLen=aLists.length;i<nLen;i++){var oEl=aLists[i].element;for(var j=0,aValues=aLists[i].values,nJLen=aValues.length;j<nJLen;j++){var sType=aValues[j][0];var fpFunc=aValues[j][2];if(typeof fpFunc!="function"){if(fpFunc instanceof Array){fpFunc=this.option("effect")(fpFunc[0],fpFunc[1])}else{fpFunc=this.option("effect")(fpFunc)}}if(fpFunc.setStart){if(oEl instanceof jindo.$Element){switch(sType){case"csses":fpFunc.setStart(oEl.css(aValues[j][1]));break;case"attrs":fpFunc.setStart(oEl.$value()[aValues[j][1]]);break}}else{fpFunc.setStart(oEl.getter(aValues[j][1]))}}aValues[j][2]=fpFunc}}return oStuff},_try:function(){var self=this;if(!this._bIsWaiting){return false}var oStuff;do{oStuff=this._dequeue();if(!oStuff){if(this._bIsPlaying){this._bIsPlaying=false;this.abort();this.fireEvent("end")}return false}if(!this._bIsPlaying){this.fireEvent("start")}if(typeof oStuff=="function"){this._bIsPlaying=true;oStuff.call(this)}}while(typeof oStuff=="function");var nInterval=1000/this._nFPS;this._oNow={lists:oStuff.lists,ratio:0,interval:nInterval,step:nInterval/oStuff.duration};this.resume();return true},_goOn:function(){var oNow=this._oNow;var nRatio=oNow.ratio;var aLists=oNow.lists;var oEq={};nRatio=parseFloat(nRatio.toFixed(5));if(nRatio>1){nRatio=1}var bCorrection=this.option("correction");for(var i=0,nLen=aLists.length;i<nLen;i++){var oEl=aLists[i].element;for(var j=0,aValues=aLists[i].values,nJLen=aValues.length;j<nJLen;j++){if(oEl instanceof jindo.$Element){var sKey=aValues[j][1];var sValue=aValues[j][2](nRatio);if(bCorrection){var sUnit=/[0-9]([^0-9]*)$/.test(sValue)&&RegExp.$1||"";if(sUnit){var nValue=parseFloat(sValue);var nFloor;var a=nValue;nValue+=oEq[sKey]||0;nValue=parseFloat(nValue.toFixed(5));if(i==nLen-1){sValue=Math.round(nValue)+sUnit}else{nFloor=parseFloat(/(\.[0-9]+)$/.test(nValue)&&RegExp.$1||0);sValue=parseInt(nValue)+sUnit;oEq[sKey]=nFloor}}}switch(aValues[j][0]){case"csses":oEl.css(sKey,sValue);break;case"attrs":oEl.$value()[sKey]=sValue;break}}else{oEl.setter(aValues[j][1],aValues[j][2](nRatio))}this.fireEvent("playing",{element:oEl})}}oNow.ratio+=oNow.step;return nRatio!=1}}).extend(nhn.Component);nhn.Timer=jindo.$Class({_timer:null,_lastest:null,_remained:0,_delay:null,_callback:null,$init:function(){},start:function(fpCallback,nDelay){var self=this;this.abort();this.fireEvent("wait");this._lastest=new Date().getTime();this._remained=0;this._delay=nDelay;this._callback=fpCallback;this.resume();return true},_clearTimer:function(){var bFlag=false;if(this._timer){clearInterval(this._timer);bFlag=true}this._timer=null;return bFlag},abort:function(){var bRet;if(bRet=this._clearTimer()){this.fireEvent("abort")}return bRet},pause:function(){var nPassed=new Date().getTime()-this._lastest;this._remained=this._delay-nPassed;if(this._remained<0){this._remained=0}return this._clearTimer()},resume:function(){var self=this;if(!this._callback){return false}var fpGo=function(nDelay,bRecursive){self._clearTimer();self._timer=setInterval(function(){if(!self._timer){return}self.fireEvent("run");var r=self._callback();self._lastest=new Date().getTime();if(!r){clearInterval(self._timer);self._timer=null;self.fireEvent("end");return}self.fireEvent("wait");if(bRecursive){fpGo(self._delay,false)}},nDelay)};if(this._remained){fpGo(this._remained,true);this._remained=0}else{fpGo(this._delay,false)}return true}}).extend(nhn.Component);nhn.Effect=function(fpFunc){if(this instanceof arguments.callee){throw new Error("You can't create a instance of this")}var regnum=/^(\-?[0-9\.]+)(%|px|pt|em)?$/;var regrgb=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i;var reghex=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;var reg3to6=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i;var getValue=function(v){var unit;if(regnum.test(v)){v=parseFloat(v),unit=RegExp.$2}else{if(regrgb.test(v)){v=[parseInt(RegExp.$1),parseInt(RegExp.$2),parseInt(RegExp.$3)],unit="color"}else{if(reghex.test(v=v.replace(reg3to6,"#$1$1$2$2$3$3"))){v=[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)],unit="color"}}}return{value:v,unit:unit}};return function(fixs,fixd){var unit;if(arguments.length>1){fixs=getValue(fixs),fixd=getValue(fixd),unit=fixd.unit}else{fixd=getValue(fixs),fixs=null,unit=fixd.unit}if(fixs&&fixd&&fixs.unit!=fixd.unit){throw new Error("unit error")}fixs=fixs&&fixs.value;fixd=fixd&&fixd.value;var cacheValue,cacheResult;var fp=function(p){var s=fixs;var d=fixd;var getResult=function(s,d){return(d-s)*fpFunc(p)+s+unit};if(unit=="color"){var r=parseInt(getResult(s[0],d[0]))<<16;r|=parseInt(getResult(s[1],d[1]))<<8;r|=parseInt(getResult(s[2],d[2]));r=r.toString(16).toUpperCase();for(var i=0;6-r.length;i++){r="0"+r}return"#"+r}return getResult(s,d)};if(fixs===null){fp.setStart=function(s){if(isNaN(parseInt(s))){s=0+unit}s=getValue(s);if(s.unit!=unit){throw new Error("unit eror")}fixs=s.value}}return fp}};nhn.Effect.linear=nhn.Effect(function(s){return s});nhn.Effect.easeIn=nhn.Effect(function(s){y=Math.sqrt(1-(s*s));return(1-y)});nhn.Effect.easeOut=nhn.Effect(function(s){y=Math.sqrt((2-s)*s);return y});nhn.Effect.overphase=nhn.Effect(function(s){s/=0.69643223;y=Math.sqrt((2-s)*s)+0.1;return y.toFixed(7)});nhn.Effect.bounce=nhn.Effect(function(s){if(s<(1/2.75)){return(7.5625*s*s)}else{if(s<(2/2.75)){return(7.5625*(s-=(1.5/2.75))*s+0.75)}else{if(s<(2.5/2.75)){return(7.5625*(s-=(2.25/2.75))*s+0.9375)}else{return(7.5625*(s-=(2.625/2.75))*s+0.984375)}}}});(function(){var b=jindo.$Element.prototype.css;jindo.$Element.prototype.css=function(k,v){if(k=="opacity"){return typeof v!="undefined"?this.opacity(parseFloat(v)):this.opacity()}return v!="undefined"?b.call(this,k,v):b.call(this,k)}})();nhn.ToolTip=jindo.$Class({_welLayer:null,_oTransition:null,_oLayerManager:null,_oTempOptions:null,_elEventFired:null,_bResetOpacity:true,$init:function(el,oOptions){var self=this;this._el=el;this._welLayer=jindo.$Element(el);this.option({upper:false,top:0,left:0,opacity:1,showDuration:50,hideDuration:500,checkEvent:"mouseover",showDelay:100,hideDelay:100,visibleCallback:function(){if(self._bOnHiding){return false}else{if(self._bOnShowing){return true}else{var wel=jindo.$Element(this.getLayer());if(wel.visible()){if(wel.opacity()>0){return true}else{return false}}return false}}}});this.option(oOptions||{});this._oLayerManager=new nhn.LayerManager(this._el,this.option()).attach({beforeshow:function(e){e.stop();self._show()},beforehide:function(e){e.stop();self._hide()}}).link(this._el);this._oTransition=new nhn.Transition().fps(40);this.setTemplate(this.getText())},getLayer:function(){return this._el},getLayerManager:function(){return this._oLayerManager},getTransition:function(el){return this._oTransition},setTemplate:function(sTemplate){this._sTemplate=sTemplate},getTemplate:function(){return this._sTemplate},setText:function(oTemplateParam){if(oTemplateParam){var oTemplate=jindo.$Template(this.getTemplate());var sParsed=oTemplate.process(oTemplateParam)}jindo.$Element(this.getLayer()).html(sParsed)},getText:function(){return jindo.$Element(this.getLayer()).html()},_show:function(){var self=this;var el=this._elEventFired;this.getLayerManager().link(el);if(this._bResetOpacity){this.getLayerManager()._oTimer.abort();this._welLayer.opacity(0)}this._welLayer.show();var oOptions=this.option();var oTempOptions=this._oTempOptions;new nhn.LayerPosition(this._elEventFired,this._el,this._oTempOptions).setPosition();if(!this.fireEvent("beforeshow",{element:el,layer:self._welLayer.$value()})){return}var nOpacity=typeof oTempOptions.opacity=="undefined"?oOptions.opacity:oTempOptions.opacity;self._bOnShowing=true;self._bOnHiding=false;this.getTransition(el).start(oOptions.showDuration,this._welLayer,{"@opacity":nOpacity}).precede(function(){self._bOnShowing=false;self.fireEvent("show",{element:el,layer:self._welLayer.$value()})})},_hide:function(){var self=this;var el=this.getLayer();if(!this.fireEvent("beforehide",{element:el,layer:el})){return}var oOptions=this.option();self._bOnShowing=false;self._bOnHiding=true;this.getTransition(el).start(oOptions.hideDuration,this._welLayer,{"@opacity":0}).precede(function(){self.getLayerManager().unlink(self._elEventFired);self._welLayer.hide();self._bOnHiding=false;self.fireEvent("hide",{element:el,layer:self._welLayer.$value()})})},show:function(el,oTemplateParam,oOptions){this._oTempOptions=oOptions||{};this._bResetOpacity=this._elEventFired!==el;this._elEventFired=el;var self=this;setTimeout(function(){self.setText(oTemplateParam);self._show()},this.option("showDelay"))},hide:function(){this.getLayerManager().hide()},toggle:function(){}}).extend(nhn.Component);cssquery=function(sQuery,vRoot,bCaseSensitive){if(this instanceof cssquery){this._caseSensitive=bCaseSensitive?true:false;this._compile(sQuery);return}sQuery=sQuery.replace(/\//g," ");var sPrefix=bCaseSensitive?"@MAGICKEY@":"";var aQueries=sQuery.split(",");var aRet=[];for(var i=0,sQuery;sQuery=aQueries[i];i++){sQuery=sQuery.replace(/(^\s+|\s+$)/,"");var sKey=sPrefix+sQuery;if(!cssquery._cache[sKey]){cssquery._cache[sKey]=new cssquery(sQuery,vRoot,bCaseSensitive)}aRet=aRet.concat(cssquery._cache[sKey].select(vRoot))}return cssquery._unique(aRet)};cssquery._cache={};cssquery._unique=function(aData){var len=aData.length;for(var i=0;i<len;i++){for(var j=0;j<len;j++){if(aData[i]==aData[j]&&i!=j){aData.splice(j,1);len=aData.length}}}return aData};cssquery._operator={" ":function(sVal,sNeedle){return sVal},"~=":function(sVal,sNeedle){return sVal!=null&&(" "+sVal+" ").indexOf(" "+sNeedle+" ")>-1},"^=":function(sVal,sNeedle){return sVal!=null&&sVal.indexOf(sNeedle)==0},"$=":function(sVal,sNeedle){return sVal!=null&&sVal.substr(sVal.length-sNeedle.length)==sNeedle},"*=":function(sVal,sNeedle){return sVal!=null&&sVal.indexOf(sNeedle)>-1}};cssquery._pseudo={"first-child":function(oNode){for(oNode=oNode.previousSibling;oNode;oNode=oNode.previousSibling){if(oNode.nodeType==1){return false}}return true},"last-child":function(oNode){for(oNode=oNode.nextSibling;oNode;oNode=oNode.nextSibling){if(oNode.nodeType==1){return false}}return true},empty:function(oNode){return oNode.firstChild?false:true},contains:function(oNode,oOption){return oNode.innerHTML.indexOf(oOption)>-1}};cssquery.prototype={_caseSensitive:false,_wrapQuot:function(s){return'"'+s.replace(/"/g,'\\"')+'"'},_getElementsByTagName:function(oEl,sTag){if(sTag=="*"&&navigator.userAgent.indexOf("MSIE")>-1){return oEl.all}return oEl.getElementsByTagName(sTag)},_getSibling:function(oEl,sRel){do{oEl=oEl[sRel+"Sibling"]}while(oEl&&oEl.nodeType!=1);return oEl},_getFirstChild:function(oEl){for(oEl=oEl.firstChild;oEl&&oEl.nodeType!=1;oEl=oEl.nextSibling){}return oEl},_compilePart:function(sTag){var self=this;var oRet={tag:"*",match:null};var aVars=[];aVars._setted={};var aExps=[];var sPrepend="";var pAddExpr=function(sKey,sOp,sVal,sValFormat){if(!this._caseSensitive){sKey=sKey.toLowerCase()}if(sKey=="id"){oRet[sKey]=sVal}var sVar="v_"+sKey;sKey=self._wrapQuot(sKey);sVal=self._wrapQuot(sVal);if(!aVars._setted[sKey]){aVars.push("var "+sVar+" = "+sValFormat.replace("%s",sKey)+";");aVars._setted[sKey]=true}switch(sOp){case"=":aExps.push(sVar+" == "+sVal);break;case"!=":aExps.push(sVar+" != "+sVal);break;default:aExps.push('cssquery._operator["'+(sOp||" ")+'"]('+sVar+", "+sVal+")")}return""};var pAddPseudoClass=function(sType,sOption){aExps.push("cssquery._pseudo["+self._wrapQuot(sType)+"](oEl, "+self._wrapQuot(sOption||"")+")");return""};var sTag=sTag.replace(/\[([\w-]+)(([!^~$*]?=)([^\]]*))?\]/g,function(_,sKey,_,sOp,sVal){if(sVal){sVal=sVal.replace(/(^["']|["']$)/g,"")}var sFormat="oEl.getAttribute(%s)";switch(sKey){case"class":sFormat="oEl.className";break}return pAddExpr(sKey,sOp,sVal||"",sFormat)});var sTag=sTag.replace(/\.([\w-]+)/g,function(_,sClass){return pAddExpr("class","~=",sClass,"oEl.className")});var sTag=sTag.replace(/#([\w-]+)/g,function(_,sId){return pAddExpr("id","=",sId,"oEl.id")});var sTag=sTag.replace(/:([\w-]+)(\(([^)]*)\))?/g,function(_,sType,_,sOption){return pAddPseudoClass(sType,sOption)});if(aExps.length){var sCode=sPrepend+"\n"+aVars.join("\n")+"return (\n\t"+aExps.join(" &&\n\t")+"\n);";oRet.match=new Function("oEl","bCheckTag",sPrepend+sCode);oRet.hasmatch=true}oRet.tag=this._caseSensitive?sTag:sTag.toLowerCase()||"*";return oRet},_encodeQuery:function(sQuery){var o={"+":"\u0001",">":"\u0002","~":"\u0003"," ":"\u0004","!":"\u0005"};return sQuery.replace(/[+>~ !]/g,function(sToken){return o[sToken]})},_decodeQuery:function(sQuery){var o={"\u0001":"+","\u0002":">","\u0003":"~","\u0004":" ","\u0005":"!"};return sQuery.replace(/[\u0001\u0002\u0003\u0004\u0005]/g,function(sToken){return o[sToken]})},_findCloseBrace:function(sQuery){var nDepth=0;for(var i=0,len=sQuery.length;i<len;i++){switch(sQuery.charAt(i)){case"(":nDepth++;break;case")":if(--nDepth==-1){return i}break}}return -1},_compileQuery:function(sQuery){var self=this;sQuery=sQuery.replace(/(:not\()(.*)(\))/g,function(_,sPrefix,sInner,sPostfix){var nIndex=self._findCloseBrace(sInner);if(nIndex==-1){return _}var sRemained=sInner.substr(nIndex);var sInner=sInner.substr(0,nIndex);return sPrefix+sRemained+sPostfix});sQuery=sQuery.replace(/\[(.*?)\]/g,function(_,sPseudo){return"["+self._encodeQuery(sPseudo)+"]"});var aParts=[];var sRel=" ";var sLast=sQuery.replace(/(.*?)\s*(!?[+>~ ]|!)\s*/g,function(_,sBody,sRelative){if(sBody){aParts.push({rel:sRel,body:self._decodeQuery(sBody)})}sRel=sRelative==" "?" ":sRelative.replace(/(^\s+|\s+$)/,"");return""});if(sLast){aParts.push({rel:sRel,body:self._decodeQuery(sLast)})}return aParts},_compile:function(sQuery){this._query=sQuery;this._parts=this._compileQuery(this._query);var aPriority=[-1,0];for(var i=0,oPart;oPart=this._parts[i];i++){oPart.compile=this._compilePart(oPart.body);delete oPart.body;if(oPart.compile.id){aPriority[0]=i}if(oPart.compile.tag&&oPart.compile.tag!="*"){aPriority[1]=i}}this._start=aPriority[0]>-1?aPriority[0]:aPriority[1];this._start=0;return this._parts},_traceBackward:function(oNode,oRoot,nIndex){var oPart=this._parts[nIndex];if(!oPart){return oRoot!=document?oNode==oRoot:true}var oCompile=oPart.compile;var sTag=oCompile.tag;var sTagName;if(oNode.nodeType==1){if(sTag!="*"&&(sTagName=oNode.tagName)){if(this._caseSensitive&&sTag!=sTagName){return false}else{if(!this._caseSensitive&&sTag!=sTagName.toLowerCase()){return false}}}if(oCompile.hasmatch&&!oCompile.match(oNode)){return false}}switch(oPart.rel){case" ":for(oNode=oNode.parentNode;oNode;oNode=oNode.parentNode){if(this._traceBackward(oNode,oRoot,nIndex-1)){return true}}break;case">":if(oNode=oNode.parentNode){return this._traceBackward(oNode,oRoot,nIndex-1)}break;case"~":for(oNode=this._getSibling(oNode,"previous");oNode;oNode=this._getSibling(oNode,"previous")){if(this._traceBackward(oNode,oRoot,nIndex-1)){return true}}break;case"+":if(oNode=this._getSibling(oNode,"previous")){return this._traceBackward(oNode,oRoot,nIndex-1)}break;case"!":try{sTag="*";sTag=this._parts[nIndex-1].compile.tag}catch(e){}var aTmp=this._getElementsByTagName(oNode,sTag);for(var j=0,oNode;oNode=aTmp[j];++j){if(this._traceBackward(oNode,oRoot,nIndex-1)){return true}}break;case"!>":for(oNode=oNode.firstChild;oNode;oNode=oNode.nextSibling){if(oNode.nodeType==1&&this._traceBackward(oNode,oRoot,nIndex-1)){return true}}break;case"!~":for(oNode=this._getSibling(oNode,"next");oNode;oNode=this._getSibling(oNode,"next")){if(this._traceBackward(oNode,oRoot,nIndex-1)){return true}}break;case"!+":if(oNode=this._getSibling(oNode,"next")){return this._traceBackward(oNode,oRoot,nIndex-1)}break;case"":return true}return false},_getRelatedNode:function(aSands,oNode,sRel,sTag,bHasMatch,pMatch){var aSands=aSands||[];var bHasTagMatch=sTag!="*";var pTagMatch=bHasTagMatch?function(o){if(this._caseSensitive){return o.tagName==sTag}return o.tagName.toLowerCase()==sTag}:null;switch(sRel){case" ":var aTmp=this._getElementsByTagName(oNode,sTag);for(var j=0,oNode;oNode=aTmp[j];++j){if(oNode.nodeType==1&&(!bHasMatch||pMatch(oNode))){aSands.push(oNode)}}break;case">":for(oNode=oNode.firstChild;oNode;oNode=oNode.nextSibling){if(oNode.nodeType==1&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}}break;case"~":for(oNode=oNode.nextSibling;oNode;oNode=oNode.nextSibling){if(oNode.nodeType==1&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}}break;case"+":oNode=this._getSibling(oNode,"next");if(oNode&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}break;case"!":for(oNode=oNode.parentNode;oNode;oNode=oNode.parentNode){if(oNode.nodeType==1&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}}break;case"!>":oNode=oNode.parentNode;if(oNode&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}break;case"!~":for(oNode=oNode.previousSibling;oNode;oNode=oNode.previousSibling){if(oNode.nodeType==1&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}}break;case"!+":oNode=this._getSibling(oNode,"previous");if(oNode&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}break}return aSands},_traceForward:function(sRel,aNodes,oCompile){var aSands=[];var sTag=oCompile.tag;var bHasMatch=oCompile.hasmatch;var pMatch=bHasMatch?oCompile.match:null;var bHasTagMatch=sTag!="*";var pTagMatch=bHasTagMatch?function(o){if(this._caseSensitive){return o.tagName==sTag}return o.tagName.toLowerCase()==sTag}:null;for(var i=0,oNode;oNode=aNodes[i];i++){switch(sRel){case" ":var aTmp=this._getElementsByTagName(oNode,sTag);for(var j=0,oNode;oNode=aTmp[j];++j){if(oNode.nodeType==1&&(!bHasMatch||pMatch(oNode))){aSands.push(oNode)}}break;case">":for(oNode=oNode.firstChild;oNode;oNode=oNode.nextSibling){if(oNode.nodeType==1&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}}break;case"~":for(oNode=oNode.nextSibling;oNode;oNode=oNode.nextSibling){if(oNode.nodeType==1&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}}break;case"+":oNode=this._getSibling(oNode,"next");if(oNode&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}break;case"!":for(oNode=oNode.parentNode;oNode;oNode=oNode.parentNode){if(oNode.nodeType==1&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}}break;case"!>":oNode=oNode.parentNode;if(oNode&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}break;case"!~":for(oNode=oNode.previousSibling;oNode;oNode=oNode.previousSibling){if(oNode.nodeType==1&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}}break;case"!+":oNode=this._getSibling(oNode,"previous");if(oNode&&(!bHasMatch||pMatch(oNode))&&(!bHasTagMatch||pTagMatch(oNode))){aSands.push(oNode)}break}}return aSands},select:function(oRoot){var aSands=[];var aLists=[];var oPart,oCompile,oTmp;var oRoot=oRoot||document;oPart=this._parts[this._start];oCompile=oPart.compile;if(oCompile.id){if(oTmp=document.getElementById(oCompile.id)){aLists=[oTmp]}}else{if(oCompile.tag){aLists=this._getRelatedNode(aLists,oRoot,this._start==0?oPart.rel:" ",oCompile.tag)}}if(aLists.length==0){return aSands}for(var i=0,oNode;oNode=aLists[i];i++){if(this._traceBackward(oNode,oRoot,this._start)){aSands.push(oNode)}}for(var i=this._start+1,oPart;oPart=this._parts[i];i++){aSands=this._traceForward(oPart.rel,aSands,oPart.compile)}return aSands}};cssquery.test=function(oEl,sQuery){var aQueries=sQuery.split(",");for(var i=0,sQuery;sQuery=aQueries[i];i++){var compile=cssquery.prototype._compile(sQuery);var part=compile[0].compile;if(part.tag!="*"&&(part.tag.toUpperCase()!=oEl.tagName.toUpperCase())){continue}if(part.hasmatch&&!part.match(oEl)){continue}return true}return false};nhn.Component=$Class({_eventHandlers:null,_options:null,$init:function(){var ins=this.constructor._instances;if(typeof ins=="undefined"){this.constructor._instances=ins=[]}ins[ins.length]=this;this._eventHandlers={};this._options={}},option:function(sName,sValue){var nameType=(typeof sName);if(nameType=="undefined"){return this._options}else{if(nameType=="string"){if(typeof sValue!="undefined"){this._options[sName]=sValue;return this}else{return this._options[sName]}}else{if(nameType=="object"){try{for(var x in sName){this._options[x]=sName[x]}}catch(e){}return this}}}},fireEvent:function(sEvent,oEvent){var oEvent=oEvent?(oEvent instanceof $Event?oEvent._event:oEvent):{};var isRealEvent=("boundElements" in oEvent&&"cancelBubble" in oEvent)||(typeof Event!="undefined"&&oEvent.constructor===Event);if(!isRealEvent){try{oEvent.type=oEvent.type||sEvent;oEvent.canceled=false;oEvent.stop=function(){this.canceled=true}}catch(e){isRealEvent=true}}if(isRealEvent){oEvent=$Event(oEvent)}var aArg=[oEvent];for(var i=2,len=arguments.length;i<len;i++){aArg.push(arguments[i])}var inlineHandler=this["on"+sEvent];if(typeof inlineHandler=="function"){inlineHandler.apply(this,aArg)}var handlerList=this._eventHandlers[sEvent];if(typeof handlerList!="undefined"){for(var i=0,handler;handler=handlerList[i];i++){handler.apply(this,aArg)}}return !oEvent.canceled},attach:function(sEvent,fpHandler){if(arguments.length==1){$H(arguments[0]).forEach($Fn(function(fpHandler,sEvent){this.attach(sEvent,fpHandler)},this).bind());return this}var handlers=this._eventHandlers[sEvent];if(typeof handlers=="undefined"){handlers=this._eventHandlers[sEvent]=[]}handlers.push(fpHandler);return this},detach:function(sEvent,fpHandler){if(arguments.length==1){$H(arguments[0]).forEach($Fn(function(fpHandler,sEvent){this.detach(sEvent,fpHandler)},this).bind());return this}var handlers=this._eventHandlers[sEvent];if(typeof handlers=="undefined"){return this}for(var i=0,handler;handler=handlers[i];i++){if(handler===fpHandler){handlers=handlers.splice(i,1);break}}return this}});nhn.Component.factory=function(objs,opt){var retArr=[];if(typeof opt=="undefined"){opt={}}for(var i=0;i<objs.length;i++){try{obj=new this(objs[i],opt);retArr[retArr.length]=obj}catch(e){}}return retArr};nhn.HTMLComponent=$Class({tagName:""}).extend(nhn.Component);nhn.HTMLComponent.paint=function(){var ins=this._instances;if(typeof ins=="undefined"){return}for(var i=0;i<ins.length;i++){if(ins[i]&&ins[i].paint){ins[i].paint()}}};nhn.HTMLComponent.factory=function(objs,opt){if(typeof objs=="string"){var sClassName=objs;if(/^(\w+)\s*(?:\[(\w+)\s*=\s*(\w+)\])?$/.test(this.prototype.tagName)){var a=[];objs=document.getElementsByTagName(RegExp.$1);if(RegExp.$2&&RegExp.$3){for(var i=0;i<objs.length;i++){if(objs[i].getAttribute(RegExp.$2)==RegExp.$3){a[a.length]=objs[i]}}objs=a}if(sClassName){var regex=new RegExp("\\b"+sClassName+"\\b","i");for(var i=0,a=[];i<objs.length;i++){if(regex.test(objs[i].className)){a[a.length]=objs[i]}}objs=a}}else{return[]}}this._tmpFactory=nhn.Component.factory;var objs=this._tmpFactory(objs,opt);delete this._tmpFactory};var Timer=function(){this.initialize.apply(this,arguments)};Timer.prototype={_bInterval:false,_oInstance:null,initialize:function(sType){this._bInterval=sType.toLowerCase()=="interval"},start:function(nTime,fCallback,pThis){this.stop();if(this._bInterval){this._oInstance=window.setInterval(fCallback,nTime)}else{var self=this;this._oInstance=window.setTimeout(function(){pThis?fCallback.call(pThis):fCallback();self.stop()},nTime)}},stop:function(){var fFunc=window[this._bInterval?"clearInterval":"clearTimeout"];if(this._oInstance){fFunc(this._oInstance)}this._oInstance=null}};$Element._box_addon={compatMode:document.compatMode||"BackCompat",getCSS:function(o,sPrefix,sPostfix,aWhich){var size=0;size+=parseInt(o.css(sPrefix+aWhich[0]+sPostfix))||0;size+=parseInt(o.css(sPrefix+aWhich[1]+sPostfix))||0;return size},oldWidth:$Element.prototype.width,oldHeight:$Element.prototype.height,oldSize:$Element.prototype.size,adjustSize:function(o,nSize,sInclude,aWhich){var addon=$Element._box_addon;var getCSS=addon.getCSS;if($Agent().navigator().ie&&addon.compatMode=="BackCompat"){if(sInclude=="margin"){nSize-=getCSS(o,"margin","",aWhich)}if(sInclude!="margin"&&sInclude!="border"){nSize+=getCSS(o,"border","Width",aWhich)}if(sInclude!="margin"&&sInclude!="padding"&&sInclude!="border"){nSize+=getCSS(o,"padding","",aWhich)}}else{switch(sInclude){case"margin":nSize-=getCSS(o,"margin","",aWhich);case"border":nSize-=getCSS(o,"border","Width",aWhich);case"padding":nSize-=getCSS(o,"padding","",aWhich)}}return nSize},getElementSize:function(o,sInclude,aWhich){var addon=$Element._box_addon;var getCSS=addon.getCSS;var nSize=o.$value()["offset"+aWhich[2]];if(nSize==0&&!o.visible()){return 0}switch(sInclude){case"margin":nSize+=getCSS(o,"margin","",aWhich);break;case"border":break;default:if(sInclude!="padding"){nSize-=getCSS(o,"padding","",aWhich)}nSize-=getCSS(o,"border","Width",aWhich)}return nSize},setWidth:function(nSize,sInclude){this.$value().style.width=$Element._box_addon.adjustSize(this,nSize,sInclude,["Left","Right","Width"])+"px";return this},setHeight:function(nSize,sInclude){this.$value().style.height=$Element._box_addon.adjustSize(this,nSize,sInclude,["Top","Bottom","Height"])+"px";return this},getWidth:function(sInclude){return $Element._box_addon.getElementSize(this,sInclude,["Left","Right","Width"])},getHeight:function(sInclude){return $Element._box_addon.getElementSize(this,sInclude,["Top","Bottom","Height"])}};var SimulateFocus=$Class({_object:null,_dummy:null,_timer:null,_options:null,_focused:false,$init:function(oEl,oOptions){var e=$Element(oEl);this._options={scrollable:false};for(var k in oOptions){this._options[k]=oOptions[k]}this._object=oEl;var self=this;this._object.focus=function(){self._dummy.disabled=false;return self._dummy.focus()};this._object.blur=function(){return self._dummy.blur()};this._createDummy();this._bindEvents()},_createDummy:function(){this._dummy=$(this._options.scrollable?"<button>":"<textarea>");with(this._dummy.style){position="absolute";display="block";left="-999999px";width="50px"}this._dummy.value="dummy";this._dummy.readOnly=true;this._dummy.title="dummy";this._rePositionDummy()},_rePositionDummy:function(){this._object.parentNode.insertBefore(this._dummy,this._object)},_fireFocusEvent:function(oEvent){if(this._timer){clearTimeout(this._timer)}this._timer=null;if(this._focused==true){return}this._focused=true;this.fireEvent("focus",oEvent)},_fireBlurEvent:function(oEvent){var self=this;if(this._timer){clearTimeout(this._timer)}var cloneEvent=document.createEventObject?document.createEventObject(oEvent._event):oEvent._event;this._timer=setTimeout(function(){if(self._focused==false){return}self._focused=false;self.fireEvent("blur",cloneEvent);delete cloneEvent;cloneEvent=null},10)},_onDummyEvents:function(oEvent){if(!this.fireEvent(oEvent.type,oEvent)){oEvent.stop()}},setFriend:function(oFriend){var textboxes=cssquery("textarea, input, button, select, a",oFriend);var oToss=$Fn(this._onDummyEvents,this);for(var i=0,textbox;textbox=textboxes[i];i++){var o=$Element(textbox);if(o.hasClass("-simfocus-friend")){return}o.addClass("-simfocus-friend");$Fn(function(oEvent){this._dummy.disabled=true;this._fireFocusEvent(oEvent);this.fireEvent("fieldfocus",oEvent)},this).attach(textbox,"focus");$Fn(function(oEvent){this._dummy.disabled=false;this._fireBlurEvent(oEvent);this.fireEvent("fieldblur",oEvent)},this).attach(textbox,"blur");oToss.attach(textbox,"keydown");oToss.attach(textbox,"keypress");oToss.attach(textbox,"keyup")}return this},focus:function(){this._dummy.focus()},blur:function(){this._dummy.blur()},_bindEvents:function(){$Fn(function(oEvent){var el=oEvent.element;if(cssquery.test(el,"input, textarea, button, a")){return}var self=this;setTimeout(function(){try{self._dummy.focus()}catch(e){}},0)},this).attach(this._object,"mousedown");$Fn(this._fireFocusEvent,this).attach(this._dummy,"focus");$Fn(this._fireBlurEvent,this).attach(this._dummy,"blur");var oToss=$Fn(this._onDummyEvents,this);oToss.attach(this._dummy,"keydown");oToss.attach(this._dummy,"keypress");oToss.attach(this._dummy,"keyup");this.setFriend(this._object)}}).extend(nhn.Component);var Selectbox=$Class({tagName:"select",_agent:$Agent().navigator(),_object:null,_options:null,_focusTimer:null,_comboTimer:null,_customTimer:null,_simfocus:null,_items:null,_customs:null,_title:"",_selectedIndex:-1,_hoveredIndex:-1,_heightFitted:false,_heightOverflowed:false,_comboChanged:false,_needle:"",_handlers:{box:{focus:function(oEvent){var o=this._object;if(o.source.disabled){return}var sPrefix=this.option("classPrefix");this._focusTimer.stop();var selectbox=$Element(o.selectbox);if(selectbox.hasClass(sPrefix+"focused")){return}selectbox.addClass(sPrefix+"focused");this.fireEvent("focus")},blur:function(oEvent){var o=this._object;var sPrefix=this.option("classPrefix");this._focusTimer.start(50,function(){$Element(o.selectbox).removeClass(sPrefix+"focused");this._showLayer(false);this.fireEvent("blur")},this)},keydown:function(oEvent){var o=this._object;var keyCode=oEvent.key().keyCode;if(o.source.disabled){return}var el=oEvent.element;if(this.fireEvent("keydown",oEvent)){switch(keyCode){case 38:this.selectAbove(1);this._paintLabel();oEvent.stop();break;case 40:this.selectBelow(1);this._paintLabel();oEvent.stop();break;case 33:this.selectAbove(Infinity);this._paintLabel();oEvent.stop();break;case 34:this.selectBelow(Infinity);this._paintLabel();oEvent.stop();break;case 13:if(this._isVisibleLayer()){this._showLayer(false)}oEvent.stop();break}var item=this._items[this._selectedIndex];if(el==o.combobox){var orgValue=o.combobox.value;this._comboTimer.start(0,function(){var newValue=o.combobox.value;if(orgValue==newValue){return}this._comboChanged=true;o.source.selectedIndex=this._pseudoIndex;this._pseudo.value=newValue;this._paintItem()},this)}else{if(item&&!item.custom){switch(keyCode){case 37:this.selectAbove(1);this._paintLabel();oEvent.stop();break;case 39:this.selectBelow(1);this._paintLabel();oEvent.stop();break;default:var sChar=String.fromCharCode(keyCode);if(/[a-z0-9 ]/i.test(sChar)){this._needle+=sChar.toUpperCase();var idx=this._findMatchItem();if(idx!=-1){this._setSelectedIndex(idx)}oEvent.stop()}this._paintLabel();break}}else{if(this.option("customValue")){var orgValue=this.option("customValue").call(this,item.custom,item.object);this._comboTimer.start(0,function(){item=this._setCustomValue(item);if(orgValue==item.source.value){return}this._comboChanged=true;this._paintLabel()},this)}}}}this._paintItem()},mousedown:function(oEvent){var o=this._object;if(o.source.disabled){return}if(oEvent.element==o.combobox){this._showLayer(false);return}this._showLayer();if(o.combobox){setTimeout(function(){o.combobox.focus()},10)}}},combobox:{keyup:function(oEvent){}},layer:{mousedown:function(oEvent){var o=this._object;if(o.source.disabled){return}var isForm=cssquery.test(oEvent.element,"input, textarea, button, a");var idx=this._getItemIndexFromEvent(oEvent);if(idx!=-1&&this._items[idx].custom&&isForm){}else{this._delayCall(0,function(){try{o.box.focus()}catch(e){}})}oEvent.stop()}},list:{mouseover:function(oEvent){var idx=this._getItemIndexFromEvent(oEvent);if(idx==-1){return}var item=this._items[idx];if(item.disable){return}this._addHoveredClass(idx)},mousedown:function(oEvent){var idx=this._getItemIndexFromEvent(oEvent);if(idx==-1){return}if(!this.fireEvent("itemclick",{itemIndex:idx,itemObject:item})){return}var item=this._items[idx];if(item.disable){return}this._setSelectedIndex(idx);this._paintLabel();this._paintItem();if(this.option("closeOnClickItem")&&!item.custom){this._showLayer(false)}}},field:{focus:function(oEvent){var el=oEvent.element;var sPrefix=this.option("classPrefix");this._customTimer.start(10,function(){for(;el&&el.tagName;el=el.parentNode){var e=$Element(el);if(e.hasClass(sPrefix+"item-selected")){return}if(e.hasClass(sPrefix+"list")){return this._showLayer(false)}}},this)}}},$init:function(vEl,oOptions){var o=this._object={};var uniq=Math.round(new Date().getTime()*10000)+Math.random()*10000;var uniqid="selectbox("+uniq+")";this.option({useHtml:false,closeOnClickItem:true,classPrefix:"selectbox-"});this.option(oOptions||{});var sPrefix=this.option("classPrefix");o.selectbox=$(vEl);if(cssquery.test(o.selectbox,"select")){o.selectbox=cssquery("! ."+sPrefix+"naked",o.selectbox)[0]}o.source=cssquery("select."+sPrefix+"source",o.selectbox)[0];o.box=cssquery("."+sPrefix+"box",o.selectbox)[0];o.label=cssquery("."+sPrefix+"label",o.selectbox)[0];o.combobox=cssquery("input."+sPrefix+"combobox",o.selectbox)[0];var sLayer=this.option("layer");if(sLayer){o.layer=$(sLayer);document.body.insertBefore(o.layer,document.body.firstChild)}else{o.layer=cssquery("."+sPrefix+"layer",o.selectbox)[0]}o.list=cssquery.test(o.layer,"ul."+sPrefix+"list")?o.layer:cssquery("ul."+sPrefix+"list",o.layer)[0];if(o.combobox){o.label.appendChild(o.combobox)}$Element(o.selectbox).removeClass(sPrefix+"naked");$Element(o.selectbox).addClass(sPrefix+"applied");$Element(o.source).css({position:"absolute",visibility:"hidden",display:"block"});this._processCustoms();this._showLayer(false);this._focusTimer=new Timer("timeout");this._comboTimer=new Timer("timeout");this._customTimer=new Timer("timeout");this._simfocus=new SimulateFocus(o.box);this._bindEvents();this.paint();$Element(o.selectbox).addClass(uniqid);$Element(o.layer).addClass(uniqid);Selectbox._instanceKeys[uniq]=this},_toRegExp:function(sStr){return sStr.replace(/\-/g,"\\-")},_getCustom:function(oEl){var sPrefix=this.option("classPrefix");if(new RegExp("\\b"+this._toRegExp(sPrefix)+"item\\-custom\\(([^\\)]+)\\)").test(oEl.className)){return RegExp.$1}},_processCustoms:function(){var o=this._object;var lis=cssquery("> li",o.list);this._custom=[];var custom;for(var i=0,li;li=lis[i];i++){if(custom=this._getCustom(li)){var q=cssquery("input",li)[0];this._custom[custom]=li.cloneNode(true)}}},_paintPseudoItem:function(){var sPrefix=this.option("classPrefix");var o=this._object;if(!o.combobox){return}var pseudo=cssquery("option."+sPrefix+"item-pseudo",o.source)[0];if(pseudo){this._pseudo=pseudo;this._pseudoIndex=pseudo.index;return}var pseudo=this._pseudo=$("<option>");this._pseudoIndex=o.source.options.length;pseudo.className=sPrefix+"item-pseudo "+sPrefix+"invisible";pseudo.innerHTML="콤보박스 항목";o.source.appendChild(pseudo)},_findMatchItem:function(nGap){var len=this._items.length;var start=this._object.source.selectedIndex;var needle=this._needle;var offset=-1;if(typeof nGap=="undefined"){nGap=0}for(var i=start+nGap;i<start+len;i++){var idx=i%len;var found=this._items[idx].found;if(found.indexOf(needle)==0){offset=idx;break}}if(offset==-1&&needle.length>1){this._needle=needle=needle.substr(needle.length-1);offset=this._findMatchItem(1)}return offset},_delayCall:function(nDelay,fpFunc){setTimeout($Fn(fpFunc,this).bind(),nDelay)},_text:function(option){var oOptions=this._options;return oOptions.useHtml?(option.textContent||option.innerText):option.innerHTML},_value:function(option){return option.getAttribute("value")||""},_isVisibleLayer:function(){var layer=this._object.layer;return $Element(layer).visible()},_showLayer:function(bFlag){var sPrefix=this.option("classPrefix");var layer=$Element(this._object.layer);var visible=layer.visible();if(typeof bFlag=="undefined"){bFlag=!visible}$Element(this._object.selectbox)[bFlag?"addClass":"removeClass"](sPrefix+"expanded");if(bFlag!=visible&&!this.fireEvent(bFlag?"open":"close")){return}layer[bFlag?"show":"hide"]();if(bFlag){this._paintHeight();this._paintItem();this._paintLayer()}else{this._fireChangeEvent()}},_fireChangeEvent:function(){var o=this._object;if(this._comboChanged){this._comboChanged=false;this._onCustomSelect();var nSelectedIndex=o.source.selectedIndex;$Element(o.source).fireEvent("change");this.fireEvent("change",{custom:this._items[nSelectedIndex].custom})}},_onCustomSelect:function(){var o=this._object;var sPrefix=this.option("classPrefix");if(!$Element(o.selectbox).hasClass(sPrefix+"focused")){return}var item=this._setCustomValue();if(!item){return}if(!this._isVisibleLayer()){this._showLayer(true)}var self=this;if(this.option("customSelect")){setTimeout(function(){self.option("customSelect").call(self,item.custom,item.object)},0)}},_setCustomValue:function(item){var o=this._object;if(!item){item=this._items[o.source.selectedIndex]}if(!item.custom){return}var value=this.option("customValue").call(this,item.custom,item.object);item.source.value=value;return item},_getItemIndexFromEvent:function(oEvent){var el=oEvent.element;if(el.tagName.toLowerCase()!="li"){el=cssquery("! li",el)[0]}return this._getItemIndex(el)},_getItemIndex:function(item){var sPrefix=this.option("classPrefix");if(item&&new RegExp("\\b"+this._toRegExp(sPrefix)+"item\\(([0-9]+)\\)").test(item.className)){var r=parseInt(RegExp.$1);return isNaN(r)?-1:r}return -1},selectAbove:function(nOffset){return this._addSelectedIndex(-nOffset)},selectBelow:function(nOffset){return this._addSelectedIndex(nOffset)},_addSelectedIndex:function(nOffset){var o=this._object;var tarIndex=-1;var orgIndex=this._selectedIndex;var newIndex=orgIndex+nOffset;var len=this._items.length;if(newIndex<0){newIndex=0}if(newIndex>len-1){newIndex=len-1}if(orgIndex<newIndex){for(tarIndex=newIndex;tarIndex<len&&this._items[tarIndex].disable;tarIndex++){}if(tarIndex>=len){for(tarIndex=newIndex;tarIndex>=orgIndex&&this._items[tarIndex].disable;tarIndex--){}}}else{for(tarIndex=newIndex;tarIndex>=0&&this._items[tarIndex].disable;tarIndex--){}if(tarIndex<0){for(tarIndex=newIndex;tarIndex<=orgIndex&&this._items[tarIndex].disable;tarIndex++){}}}this._setSelectedIndex(tarIndex)},_setSelectedIndex:function(nIndex){var o=this._object;if(o.source.selectedIndex==nIndex){return}o.source.selectedIndex=nIndex;this._comboChanged=true;this._fireChangeEvent()},_bindEvents:function(){var o=this._object;this._simfocus.attach({focus:$Fn(this._handlers.box.focus,this).bind(),blur:$Fn(this._handlers.box.blur,this).bind(),fieldfocus:$Fn(this._handlers.field.focus,this).bind()});this._simfocus.attach(this._agent.opera?"keypress":"keydown",$Fn(this._handlers.box.keydown,this).bind());$Fn(this._handlers.box.mousedown,this).attach(o.box,"mousedown");$Fn(this._handlers.combobox.keyup,this).attach(o.box,"keyup");$Fn(this._handlers.layer.mousedown,this).attach(o.layer,"mousedown");$Fn(this._handlers.list.mouseover,this).attach(o.list,"mouseover");$Fn(this._handlers.list.mousedown,this).attach(o.list,"mousedown")},_removeSelectedClass:function(){var sPrefix=this.option("classPrefix");var item;var nIndex=this._selectedIndex;if(nIndex==-1){return}if((item=this._items[nIndex])&&item.object){$Element(item.object).removeClass(sPrefix+"item-selected")}this._selectedIndex=-1},_addSelectedClass:function(nIndex){var sPrefix=this.option("classPrefix");this._removeSelectedClass();var item;if(nIndex==-1){return}if((item=this._items[nIndex])&&item.object){$Element(item.object).addClass(sPrefix+"item-selected");this._selectedIndex=nIndex}},_removeHoveredClass:function(){var sPrefix=this.option("classPrefix");var item;var nIndex=this._hoveredIndex;if(nIndex==-1){return}if((item=this._items[nIndex])&&item.object){$Element(item.object).removeClass(sPrefix+"item-hovered")}this._hoveredIndex=-1},_addHoveredClass:function(nIndex){var sPrefix=this.option("classPrefix");this._removeHoveredClass();var item;if(nIndex==-1){return}if((item=this._items[nIndex])&&item.object){$Element(item.object).addClass(sPrefix+"item-hovered");this._hoveredIndex=nIndex}},paint:function(){var o=this._object;var sPrefix=this.option("classPrefix");this._paintWidth();this._paintPseudoItem();this._paintItems();this._paintLabel();this._paintItem();var bDisabled=o.source.disabled;this._simfocus._object.disabled=bDisabled;$Element(o.selectbox)[bDisabled?"addClass":"removeClass"](sPrefix+"disabled");if(bDisabled){this._showLayer(false);this._handlers.box.blur.call(this)}},paintValue:function(){this._setCustomValue();this._paintLabel()},_paintWidth:function(){var o=this._object;var oOptions=this._options;var toPx=function(width){if(typeof width=="string"){if(/^[0-9]+%$/.test(width)){width=Math.round(parseInt(width)*o.source.offsetWidth/100)}else{width=parseInt(width)}}return width};$Element(o.source).show();var boxWidth=toPx(oOptions.boxWidth||oOptions.width);var layerWidth=toPx(oOptions.layerWidth||oOptions.width);$Element(o.source).hide();if(!isNaN(boxWidth)){$Element(o.box).css({width:boxWidth+"px"})}if(!isNaN(layerWidth)){$Element(o.layer).css({width:layerWidth+"px"})}},_paintHeight:function(){var height=this.option("height");if(!height||this._heightFitted){return}var o=this._object;if(o.list.offsetHeight>height){o.list.style.height=height+"px";if(this._agent.safari){o.list.style.overflow="scroll";o.list.style.overflowX="hidden"}else{o.list.style.overflow="auto"}this._heightOverflowed=true}this._heightFitted=true},_paintLayer:function(){var o=this._object;var sPrefix=this.option("classPrefix");var layer=$Element(o.layer);var box=$Element(o.box);var pos=box.offset();var layerHeight=layer.height("margin");var boxHeight=box.height("margin");var layerBottom=pos.top+o.box.offsetHeight+layerHeight;var scrBottom=(document.documentElement.scrollTop||document.body.scrollTop)+(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);var overflowed=layerBottom>scrBottom;layer[overflowed?"addClass":"removeClass"](sPrefix+"layer-above");if(this.option("layer")){if(overflowed){o.layer.style.top=pos.top-layerHeight+"px";o.layer.style.left=pos.left+"px"}else{o.layer.style.top=pos.top+boxHeight+"px";o.layer.style.left=pos.left+"px"}}},_paintItems:function(){var o=this._object;var sPrefix=this.option("classPrefix");var aOptions=cssquery("option",o.source);this._items=[];o.list.innerHTML="";o.list.style.height="auto";for(var i=0,eOption;eOption=aOptions[i];i++){var oOption=$Element(eOption);var invisible=oOption.hasClass(sPrefix+"invisible");var disable=invisible||oOption.hasClass(sPrefix+"item-pseudo")||eOption.disabled;var custom=this._getCustom(eOption);var li=null;var text=this._text(eOption)||"";if(!invisible){if(custom&&this._custom[custom]){li=this._custom[custom].cloneNode(true)}else{li=$("<li>");li.style.cssText=eOption.style.cssText;li.innerHTML=text}li.className=(eOption.className||"")+" "+sPrefix+"item("+i+")";o.list.appendChild(li)}this._items[i]={index:i,source:eOption,object:li,text:text,found:text.toUpperCase(),invisible:invisible,disable:disable,custom:custom}}this._simfocus.setFriend(o.list);this._heightFitted=false;this._heightOverflowed=false},_paintLabel:function(){var o=this._object;var idx=o.source.selectedIndex;if(idx==-1){return}var item=this._items[idx];if(o.combobox){if(item.custom){o.combobox.value=this._value(item.source)}else{o.combobox.value=this._value(item.source);o.combobox.select()}return}var label=o.source.title;if(!label){label=item.text}$Element(o.label).html(label)},_paintItem:function(){var o=this._object;var nIndex=o.source.selectedIndex;this._customTimer.stop();this._addSelectedClass(nIndex);this._addHoveredClass(nIndex);var item=this._items[nIndex];if(!item){return}var li=item.object;if(li&&this._isVisibleLayer()&&this._heightOverflowed){var wrapper=li.offsetParent;var top=li.offsetTop-li.parentNode.offsetTop;var range=[o.list.scrollTop,o.list.scrollTop+o.list.clientHeight];var itemrgn=[top,top+li.offsetHeight];if(range[0]>itemrgn[0]){o.list.scrollTop=itemrgn[0]}if(range[1]<itemrgn[1]){o.list.scrollTop+=itemrgn[1]-range[1]}}},focus:function(){this._simfocus.focus()},blur:function(){this._simfocus.blur()}}).extend(nhn.HTMLComponent);Selectbox._instanceKeys={};Selectbox.getInstance=function(o){var regexp=/\bselectbox\(([0-9]+)\)/;for(var className;o&&(className=o.className);o=o.parentNode){if(regexp.test(className)){return Selectbox._instanceKeys[RegExp.$1]}}return null};var sps;document.domain="naver.com";if(typeof sps=="undefined"){sps={CommentBox:{},config:{}}}else{if(typeof sps.CommentBox=="undefined"){sps.CommentBox={}}}sps.CommentBox.NAME="sps.CommentBox";sps.CommentBox.VERSION="1.0.1.3813";sps.CommentBox.Config=jindo.$Class({name:"unknown",version:"unknown",message:{},$init:function(htOptions){this.name=sps.CommentBox.Config.NAME;this.version=sps.CommentBox.Config.VERSION;this.instance={};this._initDefaultConfiguration();this._initConvertConvention();if(typeof htOptions=="object"){this.option(htOptions)}var serviceAddress=document.location.protocol+"//";serviceAddress+=document.location.host+"/";serviceAddress+=this.option("servicePath")+"/";this.option("serviceAddress",serviceAddress);var booleans=this.option("booleans");booleans.isMine=true;booleans.isReply=true;booleans.isDeleted=true;booleans.isVisible=true;booleans.isAuthor=true;booleans.isAuthorComment=true;booleans.isUserRecommend=true;booleans.isAuthorRecommend=true;booleans.isRecommendArea=true;booleans.isMobile=true;var comment=this.option("comment");comment.push("parentCommentNo");comment.push("commentNo");comment.push("writerNickName");comment.push("writerId");comment.push("isMine");comment.push("contents");comment.push("registeredDate");comment.push("modifiedDate");comment.push("replyLevel");comment.push("isReply");comment.push("isDeleted");comment.push("isVisible");comment.push("writerProfileUrl");comment.push("writerProfileType");comment.push("isMe2DayPosted");comment.push("upCount");comment.push("downCount");comment.push("isUserRecommend");comment.push("isAuthorRecommend");comment.push("isRecommendArea");comment.push("isAuthor");comment.push("isAuthorComment");comment.push("replyCount");comment.push("objectScore");comment.push("status");comment.push("isMobile");comment.push("personacon")},_initConvertConvention:function(){var convention=this.option("convention");convention={parentCommentNo:"parent_comment_no",commentNo:"comment_no",groupNo:"group_no",writerNickName:"writer_nickname",writerId:"writer_id",encodedWriterId:"enc_writer_id",writerIp:"writer_ip",registeredDate:"registered_ymdt",modifiedDate:"modified_ymdt",replyLevel:"reply_level",typeCode:"comment_type_code",isMine:"is_mine",isReply:"is_reply",isDeleted:"deleted_yn",isVisible:"visible_yn",isMe2DayPosted:"is_me2day_posted",ticket:"ticket",objectId:"object_id",objectUrl:"object_url",replyCount:"reply_count",writerProfileUrl:"writer_profile_url",writerProfileType:"writer_profile_type",upCount:"up_count",downCount:"down_count",isUserRecommend:"user_recommend_yn",isAuthorRecommend:"author_recommend_yn",isRecommendArea:"is_recommend_area",isAuthor:"is_author",isAuthorComment:"is_author_comment",replyCount:"reply_count",objectScore:"object_score",status:"status",isMobile:"mobile_yn",personacon:"personacon"};this.option("convention",convention)},_initDefaultConfiguration:function(){this.option("useCategory",false);this.option("categoryId","default");this.option("viewCategoryId",undefined);this.option("useProfile",false);this.option("useScore",false);this.option("useMe2Day",false);this.option("useSpan",false);this.option("useMemorial",false);this.option("useDummyThumb",false);this.option("useCountUnderBar",false);this.option("useRecommendArea",false);this.option("useReplyArea",false);this.option("method","post");this.option("pageSize",10);this.option("replyPageSize",3);this.option("isLogin",false);this.option("objectUrl",""+document.location);this.option("servicePath","comments");this.option("dateFormat","Y-m-d H:i");this.option("centerPaginate",false);this.option("paginateSize",10);this.option("commands",["reply","report","delete"]);this.option("allowCommandsAtReplyArea",["report","delete"]);this.option("nobarInCommandGroup",["reply","delete","report"]);this.option("formation",["count","list","page","write"]);this.option("me2desc",["me2check","me2guide","me2certify"]);this.option("layers",["me2guide","profile","me2Help","naverHelp"]);this.option("descs",["policy"]);this.option("maxDepth",3);this.option("maxReplyAreaDepth",1);this.option("maxScoreDepth",1);this.option("maxScore",10);this.option("enableMultiLine",false);this.option("enableSpotLight",true);this.option("maximumCommentLength",500);this.option("useBlockCopyAndPaste",false);this.option("defaultProfileUrl","http://static.naver.com/common/comment/img_default_profile.gif");this.option("me2dayDefaultImageUrl","http://static1.me2day.net/images/profile.png");this.option("memorialDefaultImageUrl","http://static.comic.naver.net/staticImages/COMICWEB/NAVER/img/common/thumb5.gif");this.option("pwBlockUrl","not_available.nhn");this.option("pwReportUrl","report.nhn");this.option("profileHome","redirect.nhn");this.option("browser",jindo.$Agent().navigator().getName());this.option("onTextboxBackground","#FFFFFF");this.option("onTextboxFontColor","#666666");this.option("offTextboxBackground","#FFFFFF");this.option("offTextboxFontColor","#666666");this.option("replaceErrorFontFamily","돋움, Dotum");this.option("thumbSizeInComment","medium");this.option("replyThumbSizeInWritebox","medium");this.option("isDescInOnlyRoot",false);this.option("isReplyWriteBoxPositionOnBottom",true);this.option("useSpareButtonInReplyWriteBox",false);this.option("useProfileThumbLink",true);this.option("useNameLink",true);this.option("useWriteDummyThumb",false);this.option("useLineBreaking8203",true);this.option("useEscapeHtml",true);this.option("useProfileNameLink",true);this.option("useMobile",false);this.option("usePersonacon",false);this.option("comment",[]);this.option("convention",{});this.option("initialized",false);this.option("booleans",{});this.option({elements:{list:".cbox_list_comment",countArea:".cbox_list_info",writeboxRoot:".writebox_root_area",writebox:".cbox_write",textarea:"textarea",userArea:".cbox_user_area",mainPartInWritebox:".cbox_txt_area",writeButton:'input[type="image"]',closeButton:".cbox_close",layer:".cbox_layer_popup",commentNameArea:".cbox_section",commands:".cbox_section2",descs:".cbox_desc_area",paginate:".cbox_paginate",body:"#cbox_module",me2dayCheck:"input[name=chk_submit_m2day]",me2dayLink:"span a",helpButton:".cbox_help",commentBody:".cbox_comment_area",firstOfCommentBody:".cbox_info_area",commentText:".cbox_desc",recommendCount:"span",profileButtonArea:".cbox_btn_area2",profileRadio:"input[name=rdo_profile][checked]",scoreArea:".cbox_select_area",scoreDiv:".selectbox-noscript",scoreSelector:".selectbox-source",starGrade:".cbox_star_grade",replyNum:".reply_num",replyAreaPageLeft:".pglt",replyAreaPageRight:".pgrt",mobileIcon:".ico_mobile",mobileLayer:".ly_mobile",personacon:".personacon"}});this.option({css:{firstCommand:"cbox_first",spotLight:"cbox_focus",basicWriteBoxType:"cbox_write_default",profileWriteBoxType:"cbox_profile",thumbOn:"cbox_thumb_on",thumbOff:"cbox_thumb_off",closeButtonOver:"cbox_over",countUnderBar:"cbox_h_type2",noBarOnCommend:"cbox_nobar",recommendCountOn:"on",cboxOn:"cbox_on",thumbs:"cbox_thumbs",thumb:"cbox_thumb",writeboxProfile:"cbox_profile",writeboxProfileArea:"cbox_profile_area",nickName:"cbox_nick_name",userId:"cbox_user_id",noProfileThumbArea:"cbox_li_type",bodySpan:"cbox_fluid",spanThumbs:"cbox_thumbs_box",scoreList:"cbox_list_comment_vari",replyCountOn:"on",replyAreaUnfold:"unfold"}});this.option({templates:{comment:'<li class="cbox_thumb_off comment_no_{=commentNo}" >{if replyLevel > 1} <span class="cbox_bu_subnode">ㄴ</span> {/if}<div class="cbox_comment_area"><div class="cbox_info_area"><div class="cbox_section">{if config.option(\'usePersonacon\') && personacon}<img class="cbox_personacon" src="{=personacon}">{/if}<span class="cbox_nick_name">{=writerNickName}</span> <span class="cbox_user_id">({=writerId})</span> <span class="cbox_date">{=registeredDate}</span> </div><div class="cbox_section2"></div></div><div class="cbox_desc_comment"><p class="cbox_desc" style="word-break:break-all;line-break: all;word-wrap:break-word;">{=contents}</p></div></div><ul></ul></li>',deleteComment:'<li class="cbox_thumb_off comment_no_{=commentNo}" >{if replyLevel > 1} <span class="cbox_bu_subnode">ㄴ</span> {/if}<div class="cbox_comment_area"><div class="cbox_info_area"></div><div class="cbox_desc_comment"><p class="cbox_desc" style="word-break:break-all;line-break: all;word-wrap:break-word;">댓글이 삭제되었습니다.</p></div></div><ul></ul></li>',blockComment:'<li class="cbox_thumb_off comment_no_{=commentNo}" >{if replyLevel > 1} <span class="cbox_bu_subnode">ㄴ</span> {/if}<div class="cbox_comment_area"><div class="cbox_info_area"><div class="cbox_section2"></div></div><div class="cbox_desc_comment"><p class="cbox_desc" style="word-break:break-all;line-break: all;word-wrap:break-word;">{if status == 7 }본 게시물은 저작권법 제103조에 의거하여 저작권자의 요청으로 임시 게시중단 되었습니다.{elseif status == 8 || status == 9}본 게시물은 정보통신망이용촉진및정보보호등에 관한 법률 제44조의2를 준수하기 위해 다른 이용자의 요청으로 임시 게시중단 되었습니다.{/if}</p></div></div><ul></ul></li>',countArea:'<div class="cbox_list_info"></div>',countSimple:'<h5 class="cbox_h_type">댓글 <span>(<strong>{=count}</strong>)</span></h5>',countDetail:'<h5 class="cbox_h_type">사용자평 <span>(<strong>{=score.count}</strong>)</span></h5>',rootWriteBoxArea:'<div class="writebox_root_area"></div>',list:'<div class="cbox_list_comment"><ul></ul></div>',writeBox:'<div class="cbox_write"><div class="cbox_write_box"><div class="cbox_write_box2"><form action="#" method="post"><fieldset><legend>댓글 등록 폼</legend><div class="cbox_user_area"><div class="cbox_txt_area"><!-- 유동형 덧글 입력상자 --><div class="cbox_section"><textarea  name=""></textarea><div class="cbox_btn_area"><input type="image" src="http://static.naver.com/common/comment/btn_registry.gif" alt="등록"onMouseDown="this.src=\'http://static.naver.com/common/comment/btn_registry_down.gif\'" onMouseOut="this.src=\'http://static.naver.com/common/comment/btn_registry.gif\'" ></div></div><div class="cbox_desc_area"></div><!-- //유동형 덧글 입력상자 --></div></div></fieldset></form></div></div></div>',spareWriteButton:'<input type="image" src="http://static.naver.com/common/comment/btn_registry.gif" alt="등록"onMouseDown="this.src=\'http://static.naver.com/common/comment/btn_registry_down.gif\'" onMouseOut="this.src=\'http://static.naver.com/common/comment/btn_registry.gif\'" >',subNode:'<span class="cbox_bu_subnode">ㄴ</span>',recommendImgArea:'<span class="cbox_desc_img"></span> ',extra1:"<div></div>",extra2:"<div></div>",extra3:"<div></div>",extra4:"<div></div>",extra5:"<div></div>",deleteCommand:'{if isMine}<span><a href="#" >삭제</a></span>{/if}',reportCommand:'{if !isMine}<span><a href="#" >신고</a></span>{/if}',replyCommand:'<span><a href="#" >답글</a></span>',replyCancelCommand:'<span><a href="#" >답글취소</a></span>',recommendCommand:'{if !isMine}<span class="cbox_activate_up"><a href="#" title="이 댓글을 추천합니다" ><em>추천 : </em></a><span>0</span></span>{/if}',discommendCommand:'{if !isMine}<span class="cbox_activate_down"><a href="#" title="이 댓글을 비추천합니다"><em>비추천 : </em></a><span>0</span></span>{/if}',authorCommand:'{if isAuthor}<span class="cbox_activate_up"><a href="#" title="좋은 댓글로 추천하시면, 이 댓글이 추천 댓글 목록에 추가됩니다."><em>필자추천</em></a></span>{/if}',authorCancelCommand:'{if isAuthor}<span class="cbox_activate_cancel"><a href="#" title="추천을 취소하시면, 이 댓글은 추천 댓글 목록에서 지워지고 원래의 위치에 나타납니다."><em>추천취소</em></a></span>{/if}',pageArea:'<div class="cbox_paginate"></div>',page:'<a href="#">{=page}</a>',currentPage:"<strong>{=page}</strong>",firstPage:'<a class="cbox_pre_end" href="#">맨앞</a>',prevPage:'<a class="cbox_pre" href="#">이전</a>',nextPage:'<a class="cbox_next" href="#">다음</a>',arthorRecommendImgTag:'<img src="http://static.naver.com/common/comment/ico_writer_recommend.gif" width="42" height="15" title="필자가 좋은 댓글로 추천한 글입니다." alt="필자가 좋은 댓글로 추천한 글입니다." class="recommend">',userRecommendImgTag:'<img src="http://static.naver.com/common/comment/ico_recommend_comment.gif" width="42" height="15" title="네이버 이용자들이 추천한 댓글입니다." alt="네이버 이용자들이 추천한 댓글입니다." class="recommend2">',recommendReply:'<div class="cbox_info_area2"><span>0</span>개의 답글이 있습니다. <a href="#">답글 작성하러 가기</a></div>',policyDesc:'<div class="cbox_desc2"><p><span>주제와 무관한 댓글, 악플은 삭제될 수 있습니다.</span><a href="#" target="_blank">댓글 운영정책</a></p></div>',textCountDesc:'<div class="cbox_desc2"><span class="cbox_present_text_length">0</span>/ <span class="cbox_total_text_length">0</span> </div>',me2checkDesc:'<p class="cbox_desc"><input type="checkbox" name="chk_submit_m2day" id="chk_submit_m2day4" class="cbox_input_chk"><span><a href="#" target="_blank">나의 미투데이</a>에 글을 등록합니다.</span></p>',me2guideDesc:'<div class="cbox_btn_area3"><button type="button" class="cbox_help"><span>도움말</span></button></div>',me2certifyDesc:'<p class="cbox_desc3"><a href="#" target="_blank">미투데이 시작하기</a></p>',me2decertifyButtonInDesc:'<a href="#" target="_blank">인증해제</a>',me2guideLayer:'<div class="cbox_layer_popup" tier="1" style="width:278px; left:0; top:0;"><button type="button" class="cbox_close"><span><em>닫기</em></span></button><p class="cbox_desc6">체크박스를 선택하여 <a href="http://me2day.net" target="_blank">미투데이</a>에 글을<br>동시에 등록할 수 있습니다.</p></div>',profileLayer:'<div class="cbox_layer_popup" tier="1" style="width:298px; left:54px; top:-12px;"><form action="#" method="post"><button type="button" class="cbox_close"><span><em>닫기</em></span></button><dl class="cbox_list_profile"><dt>프로필 선택</dt><dd>내 댓글 작성자명에 해당 블로그 / 미투데이 링크가 걸립니다.</dd></dl><ul></ul><div class="cbox_btn_area2"><input type="image" src="http://static.naver.com/common/comment/btn_confirm.gif" alt="확인" onMouseOver="this.src=\'http://static.naver.com/common/comment/btn_confirm_over.gif\'" onMouseOut="this.src=\'http://static.naver.com/common/comment/btn_confirm.gif\'"><a href="#"><img src="http://static.naver.com/common/comment/btn_cancel.gif" width="45" height="25" alt="취소" onMouseOver="this.src=\'http://static.naver.com/common/comment/btn_cancel_over.gif\'" onMouseOut="this.src=\'http://static.naver.com/common/comment/btn_cancel.gif\'" ></a></div></form></div>',me2HelpLayer:'<span class="cbox_layer_popup" tier="2" style=" width:278px; left:0; top:0;"><a href="#" class="cbox_close"><span><em>닫기</em></span></a><span class="cbox_desc6">내 미투데이에 등록한 사진, 별명을 사용합니다.</span></span>',naverHelpLayer:'<span class="cbox_layer_popup" tier="2" style="width:278px; left:0; top:0;"><a href="#" class="cbox_close"><span><em>닫기</em></span></a><span class="cbox_desc6">네이버 회원정보에 등록한 별명을 사용합니다.</span></span>',thumbMediumProfileImg:'<img alt="썸네일" class="cbox_user_thumb" width="40" height="40" >',thumbSmallProfileImg:'<img alt="썸네일" class="cbox_user_thumb" width="22" height="22" >',thumbProfileBorder:'<span class="cbox_tmp_border"></span>',profileButton:'<button type="button"><span>변경</span></button>',profileRadio:'<input type="radio" name="rdo_profile" class="cbox_input_rdo">',blogLabel:"<label>네이버 블로그 프로필</label>",me2Label:"<label>미투데이 프로필</label>",naverLabel:"<label>네이버 별명</label>",baseball9Label:"<label>야구9단 프로필</label>",aBlank:'<a href="#" target="_blank"></a>',helpButton:'<span class="cbox_btn_area4"><button type="button" class="cbox_help"><span>도움말</span></button></a>',decertifyButton:'<a href="#" class="cbox_option" target="_blank"><span>인증해제</span></a>',certifyButton:'<a href="#" class="cbox_option" >가져오기</a>',authorImg:'<img width="40" height="12" class="cbox_admin" alt="" src="http://static.naver.com/common/comment/blank.gif">',authorText:"<span>필자</span>",spanWriteBox:'<div class="cbox_txt_area"><table cellspacing="0" class="cbox_section"><caption>덧글 입력박스</caption><tbody><tr><td></td><td><textarea cols="80" rows="20" name=""></textarea></td><td class="cbox_btn_area"><input type="image" src="http://static.naver.com/common/comment/btn_registry.gif" alt="등록" onMouseDown="this.src=\'http://static.naver.com/common/comment/btn_registry_down.gif\'" onMouseOut="this.src=\'http://static.naver.com/common/comment/btn_registry.gif\'" ></td></tr><tr><td></td><td><div class="cbox_desc_area"></div></td><td></td></tr></tbody></table></div>',scoreArea:'<div class="cbox_select_area"><div id="s2" class="selectbox-noscript"><select name="" class="selectbox-source"><option class="selectbox-default">평점선택</option><option value="10">10점</option><option value="9">9점</option><option value="8">8점</option><option value="7">7점</option><option value="6">6점</option><option value="5">5점</option><option value="4">4점</option><option value="3">3점</option><option value="2">2점</option><option value="1">1점</option></select><div class="selectbox-box"><div class="selectbox-label">평점선택</div></div><div class="selectbox-layer"><div class="selectbox-list"></div></div></div></div>',scoreItem:'<separator/><span class="cbox_star_grade"><span style="width:100%;"><em>10점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:90%;"><em>9점</em></span></span<separator/><span class="cbox_star_grade"><span style="width:80%;"><em>8점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:70%;"><em>7점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:60%;"><em>6점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:50%;"><em>5점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:40%;"><em>4점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:30%;"><em>3점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:20%;"><em>2점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:10%;"><em>1점</em></span></span>',thirdOfCommentBody:'<div class="cbox_info_area3"></div>',fourthOfCommentBody:'<div class="cbox_info_area2"><a href="#"><strong>답글</strong> <span class="reply_num"></span></a></div>',scoreBoard:'<div class="cbox_section"><span class="cbox_star_grade"></span></div>',replyAreaPage:'<li><p class="cbox_paginate2"><a href="#" class="pglt">이전 답글</a><a href="#" class="pgrt">다음 답글</a></p></li>',mobileIcon:'<img src="http://static.comic.naver.net/staticImages/COMICWEB/NAVER/img/common/ico_mobile.gif" width="9" height="12" alt="모바일" class="ico_mobile">',mobileLayer:'<div style="top:26px; left:159px" class="ly_mobile">모바일에서 작성한 댓글입니다.<em></em></div>'}})},element:function(oName,sElement){var elements=this.option("elements");if(typeof elements=="undefined"||elements==null){elements={};this.option("elements",elements)}if(typeof oName=="object"){for(var i=0;i<oName.length;i++){elements[i]=oName[i]}}else{if(typeof oName=="string"){if(typeof sElement=="string"){elements[oName]=sElement}else{return elements[oName]}}else{return null}}},template:function(oName,sTemplate){var templates=this.option("templates");if(typeof templates=="undefined"||templates==null){templates={};this.option("templates",templates)}if(typeof oName=="object"){for(var i=0;i<oName.length;i++){templates[i]=oName[i]}}else{if(typeof oName=="string"){if(typeof sTemplate=="string"){templates[oName]=sTemplate}else{return jindo.$Template(templates[oName])}}else{return null}}},css:function(oName,sStyle){var styles=this.option("css");if(typeof styles=="undefined"||styles==null){styles={};this.option("css",styles)}if(typeof oName=="object"){for(var i=0;i<oName.length;i++){styles[i]=oName[i]}}else{if(typeof oName=="string"){if(typeof sStyle=="string"){styles[oName]=sStyle}else{return styles[oName]}}else{return null}}}}).extend(jindo.Component);sps.CommentBox.Config.prototype.message.UNAVAILABLE_OPERATION="요청한 동작을 수행할 수 없습니다.";sps.CommentBox.Config.prototype.message.ALREADY_REPORT="이미 신고된 글입니다.";sps.CommentBox.Config.prototype.message.NO_CONTENTS="댓글 내용을 입력해주세요.";sps.CommentBox.Config.prototype.message.NOT_LOGIN="로그인을 하신 후 이용해 주시기 바랍니다.";sps.CommentBox.Config.prototype.message.NEED_LOGIN="로그인이 필요한 기능입니다.";sps.CommentBox.Config.prototype.message.EXCEED_MAX_LENGTH="{=max}자까지 입력할 수 있습니다.";sps.CommentBox.Config.prototype.message.BLOCK_COPY="복사 기능은 사용하실 수 없습니다.";sps.CommentBox.Config.prototype.message.BLOCK_PASTE="붙여넣기 기능은 사용하실 수 없습니다.";sps.CommentBox.Config.prototype.message.REPORT_COMPLETE="신고 완료 처리 되었습니다.";sps.CommentBox.Config.prototype.message.DELETE_CONFIRM="정말 삭제하시겠습니까?";sps.CommentBox.Config.prototype.message.RECOMMEND_COMPLETE="추천 했습니다.";sps.CommentBox.Config.prototype.message.DISCOMMEND_COMPLETE="비추천 했습니다.";sps.CommentBox.Config.prototype.message.AUTHOR_RECOMMEND_COMPLETE="필자추천 했습니다.";sps.CommentBox.Config.prototype.message.AUTHOR_DISCOMMEND_COMPLETE="필자추천이 취소되었습니다.";sps.CommentBox.Config.prototype.message.ME2DAY_POSTED="정말 삭제하시겠습니까? \n\n이글은 미투데이에 동시 등록된 글입니다.\n미투데이의 댓글은 미투데이에 가서 삭제해주셔야 합니다.";sps.CommentBox.Config.prototype.message.REQUIRE_SCORE="평점을 선택해야 댓글을 작성할 수 있습니다.";sps.CommentBox.Config.prototype.message.CREATE_ERROR_PWORD_BLOCK="작성하신 내용에 금칙어가 포함되어 있습니다. [{=pwords}]";sps.CommentBox.Config.prototype.message.CREATE_ERROR_PWORD_ABUSING="작성하신 내용에 사용이 제한된 문구가 포함되어 일시적으로 등록이 제한됩니다.";sps.CommentBox.Config.prototype.message.DEFAULT_TEXT="";sps.CommentBox.Config.NAME="sps.CommentBox.Config";sps.CommentBox.Config.VERSION="1.0.0";sps.config=new sps.CommentBox.Config();document.domain="naver.com";var sps;if(typeof sps=="undefined"){sps={CommentBox:{},disableForm:function(oEvent){var event=jindo.$Event(oEvent);event.stop(jindo.$Event.CANCEL_ALL);return false},core:{}}}else{if(typeof sps.CommentBox=="undefined"){sps.CommentBox={}}}if(typeof sps.disableForm=="undefined"){sps.disableForm=function(oEvent){var event=jindo.$Event(oEvent);event.stop(jindo.$Event.CANCEL_ALL);return false}}sps.CommentBox.Core=jindo.$Class({name:"unknown",version:"unknown",message:{},$init:function(){this.name=sps.CommentBox.Core.NAME;this.version=sps.CommentBox.Core.VERSION;this.indexInstance=sps.CommentBox.Core.getInstance().length-1;this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},initialize:function(){this.initializeOnly();this.list("page",1)},initializeOnly:function(){this.saveInstanceInConfig();this.config.option("initialized",true);var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));if(this.config.option("useSpan")){elBody.addClass(this.config.css("bodySpan"))}var jsonFormation={};jsonFormation.count=this.config.instance.ui.makeCountArea();jsonFormation.page=this.config.instance.ui.makePaginationArea();jsonFormation.write=this.config.instance.ui.makeRootWriteBoxArea();jsonFormation.list=this.config.instance.ui.makeListArea();jsonFormation.extra1=this.config.instance.ui.makeExtraArea("extra1");jsonFormation.extra2=this.config.instance.ui.makeExtraArea("extra2");jsonFormation.extra3=this.config.instance.ui.makeExtraArea("extra3");jsonFormation.extra4=this.config.instance.ui.makeExtraArea("extra4");jsonFormation.extra5=this.config.instance.ui.makeExtraArea("extra5");var formation=this.config.option("formation");for(var i=0;i<formation.length;i++){var part=formation[i];elBody.append(jsonFormation[part])}if(typeof this.config.instance.layer=="object"){this.config.instance.layer.make()}},list:function(type,no){var params=this.commonParam();params.page_size=this.config.option("pageSize");if(type=="page"&&typeof no=="number"){params.page_no=no}if(type=="comment"&&typeof no=="number"){params.comment_no=no;params.up_to_date_yn="Y"}if(type=="user"){if(typeof no=="number"){params.user_comment=no}else{params.user_comment=1}params.up_to_date_yn="Y"}if(typeof this.config.option("viewCategoryId")!="undefined"){params.view_category_id=this.config.option("viewCategoryId")}this.config.instance.ajax.call({operation:"list",onSuccess:jindo.$Fn(this.config.instance.ui.list,this.config.instance.ui).bind(),param:params})},commonParam:function(){var params={};params.ticket=this.config.option("ticket");params.object_id=this.config.option("objectId");params._ts=(new Date().getTime());if(typeof this.config.option("lkey")!="undefined"){params.lkey=this.config.option("lkey")}return params},saveInstanceInConfig:function(){this.config.instance.core=sps.CommentBox.Core.getInstance()[this.indexInstance];this.config.instance.ajax=sps.CommentBox.Ajax.getInstance()[this.indexInstance];this.config.instance.ui=sps.CommentBox.UI.getInstance()[this.indexInstance];this.config.instance.layer=sps.CommentBox.Layer.getInstance()[this.indexInstance];this.config.instance.writebox=sps.CommentBox.WriteBox.getInstance()[this.indexInstance];this.config.instance.util=sps.CommentBox.Util.getInstance()[this.indexInstance];if(typeof sps.me2day=="object"){this.config.instance.me2day=sps.CommentBox.Me2day.getInstance()[this.indexInstance]}if(typeof sps.profile=="object"){this.config.instance.profile=sps.CommentBox.profile.getInstance()[this.indexInstance]}if(typeof sps.score=="object"){this.config.instance.score=sps.CommentBox.score.getInstance()[this.indexInstance]}}}).extend(jindo.Component);sps.CommentBox.Core.NAME="sps.CommentBox.Core";sps.CommentBox.Core.VERSION="1.0.0";sps.core=new sps.CommentBox.Core();var sps;if(typeof sps=="undefined"){sps={CommentBox:{},ajax:{}}}else{if(typeof sps.CommentBox=="undefined"){sps.CommentBox={}}}sps.CommentBox.Ajax=jindo.$Class({name:"unknown",version:"unknown",message:{},defaultError:{},error:{create:{}},$init:function(){this.name=sps.CommentBox.Ajax.NAME;this.version=sps.CommentBox.Ajax.VERSION;this.option("handlers",{});this.option("list","list_comment.nhn");this.option("create","set_comment.nhn");this.option("delete","delete_comment.nhn");this.option("me2day","is_authenticated_me2day.nhn");this.option("isReport","isreported_comment.nhn");this.option("report","report_comment.nhn");this.option("checkEnableSetComment","check_comment_settable.nhn");this.option("profile","get_profile.nhn");this.option("profileList","get_profile_list.nhn");this.option("setProfileType","set_profile_type.nhn");this.option("isLogin","is_logged_in.nhn");this.option("vote","vote_comment.nhn");this.option("authorRecommend","recommend_comment.nhn");this.option("replyList","list_reply_comment.nhn");this.indexInstance=sps.CommentBox.Ajax.getInstance().length-1;this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},call:function(options){var handler=this.option("handlers");delete handler[options.operation];handler[options.operation]=options.onSuccess;var url=this.config.option("serviceAddress")+this.option(options.operation);var req=jindo.$Ajax(url,{method:this.config.option("method")||"post",async:options.async?options.async:false,onload:jindo.$Fn(this.onSuccess,this).bind(options.operation),onerror:jindo.$Fn(this.onError,this).bind(options.errorMessage)});req.request(options.param)},onSuccess:function(type,result){var message=result.json();if(this.errorHandler(message,this.error[type])==0){var fn=this.option("handlers")[type];fn(message)}},onError:function(message,result){if(message){alert(message)}},callSync:function(operation,params){var url=this.config.option("serviceAddress")+this.option(operation);var context={success:undefined,response:undefined};var req=jindo.$Ajax(url,{method:this.config.option("method")||"post",async:false,onload:jindo.$Fn(this.onSuccessSync,this).bind(context),onerror:jindo.$Fn(this.onErrorSync,this).bind(context)});req.request(params);if(context.success){var errorCode=this.errorHandler(context.response,this.error[operation]);if(errorCode==0){return context.response}}},onSuccessSync:function(context,response){context.success=true;context.response=response.json()},onErrorSync:function(context,response){context.success=false},errorHandler:function(message,errorhandler){if(!message.error){return -1}var error=message.error;if(error.no&&error.no!="0"){if(error.no=="-1"){alert(this.config.message.UNAVAILABLE_OPERATION)}else{if(errorhandler&&errorhandler[error.no]){var fnTemp=jindo.$Fn(errorhandler[error.no],this).bind();fnTemp(message)}else{if(this.defaultError&&this.defaultError[error.no]){this.defaultError[error.no](message)}else{alert(error.message)}}}}return Number(error.no)}}).extend(jindo.Component);sps.CommentBox.Ajax.prototype.error.create[409019]=function(message){var words=[];var prohibit_words=message.error.arguments[0];for(var i=0;i<prohibit_words.length;i++){words[i]=encodeURIComponent(prohibit_words[i].word)}var pw_word=words.join(",");var type="1";if(prohibit_words[0].reason=="검색어뷰징/도배"){type="2"}var params=new jindo.$H({type:type,pw_word:pw_word}).toQueryString();var url=this.config.option("pwBlockUrl")+"?"+params;var popUp=this.config.instance.util.popUp(url,"abuseError",410,342);if(!popUp){for(var i=0;i<prohibit_words.length;i++){words[i]=prohibit_words[i].word}pw_words=words.join(",");if(type=="1"){alert(jindo.$Template(this.config.message.CREATE_ERROR_PWORD_BLOCK).process({pwords:pw_words}))}else{alert(jindo.$Template(this.config.message.CREATE_ERROR_PWORD_ABUSING).process({pwords:pw_words}))}}};sps.CommentBox.Ajax.prototype.error.create[409111]=function(message){alert(message.error.message);this.config.instance.writebox.onCreate(message)};sps.CommentBox.Ajax.prototype.error.create[409112]=function(message){alert(message.error.message);this.config.instance.writebox.onCreate(message)};sps.CommentBox.Ajax.prototype.error.create[409113]=function(message){alert(message.error.message);this.config.instance.writebox.onCreate(message)};sps.CommentBox.Ajax.prototype.error.create[409114]=function(message){alert(message.error.message);this.config.instance.writebox.onCreate(message)};sps.CommentBox.Ajax.prototype.defaultError[403101]=function(message){alert(message.error.message);this.config.option("isLogin",false);this.config.instance.ui.resetPage()};sps.CommentBox.Ajax.NAME="sps.CommentBox.Ajax";sps.CommentBox.Ajax.VERSION="1.0";sps.ajax=new sps.CommentBox.Ajax();var sps;if(typeof sps=="undefined"){sps={CommentBox:{}}}else{if(typeof sps.CommentBox=="undefined"){sps.CommentBox={}}}sps.CommentBox.Comment=jindo.$Class({name:"unknown",version:"unknown",message:{},$init:function(htOptions){this.name=sps.CommentBox.Comment.NAME;this.version=sps.CommentBox.Comment.VERSION;this.indexInstance=htOptions.indexInstance;this.config=sps.CommentBox.Config.getInstance()[this.indexInstance];var values=this.config.option("comment");var convention=this.config.option("convention");var booleans=this.config.option("booleans");for(var i=0;i<values.length;i++){var key=convention[values[i]];if(typeof key=="undefined"){key=values[i]}var value=htOptions[key];if(booleans[values[i]]){value=value=="Y"}this.option(values[i],value)}this.option("config",this.config)},deleteCommand:function(){var deleteConfirmMessage=this.config.message.DELETE_CONFIRM;if(this.option("isMe2DayPosted")=="Y"){deleteConfirmMessage=this.config.message.ME2DAY_POSTED}if(!confirm(deleteConfirmMessage)){return false}var params={};params.ticket=this.config.option("ticket");params.object_id=this.config.option("objectId");params.comment_no=this.option("commentNo");params.page_no=this.config.instance.ui.option("currentPageNo");params.page_size=this.config.option("pageSize");if(typeof this.config.option("viewCategoryId")!="undefined"){params.view_category_id=this.config.option("viewCategoryId")}this.config.instance.ajax.call({operation:"delete",onSuccess:jindo.$Fn(this.config.instance.ui.list,this.config.instance.ui).bind(),param:params})},reportCommand:function(){var params={};params.ticket=this.config.option("ticket");params.object_id=this.config.option("objectId");params.comment_no=this.option("commentNo");var response=this.config.instance.ajax.callSync("isReport",params);if(response){if(response.reported_yn===0){var url=this.config.option("pwReportUrl");params=jindo.$H(params);if(params.length()>0){url+="?"+params.toQueryString()}this.config.instance.util.popUp(url,"report",531,533)}else{alert(this.config.message.ALREADY_REPORT)}}},replyCommand:function(e){this.config.instance.ui.resetList();var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var objList=elBody.query(this.config.element("list")+" ul");var elList=jindo.$Element(objList);var objReplyPosition=elList.query(".comment_no_"+this.option("commentNo")+" ul");var elReplyPosition=jindo.$Element(objReplyPosition);var elWriteBox=this.config.instance.writebox.createReplyWrite(elReplyPosition,this.option("commentNo"));var objReplyCommand=elList.query(".comment_no_"+this.option("commentNo")+" .reply");var elReplyCommand=jindo.$Element(objReplyCommand);var sReplyCancelCommand=this.config.template("replyCancelCommand").process(this.option());var elReplyCancelCommand=jindo.$Element(sReplyCancelCommand);if(elReplyCancelCommand==null){return}jindo.$Fn(function(oEvent){var event=jindo.$Event(oEvent);this.config.instance.ui.resetList();event.stop(jindo.$Event.CANCEL_ALL);return false},this).attach(elReplyCancelCommand,"click");elReplyCommand.before(elReplyCancelCommand);elReplyCommand.leave()},recommendCommand:function(){this.vote("recommend")},discommendCommand:function(){this.vote("discommend")},vote:function(operation){var params={};params.ticket=this.config.option("ticket");params.object_id=this.config.option("objectId");params.comment_no=this.option("commentNo");if(operation=="recommend"){params.recommend_up_yn="Y"}else{params.recommend_up_yn="N"}this.config.instance.ajax.call({operation:"vote",onSuccess:jindo.$Fn(this.processVote,this).bind(operation),param:params})},processVote:function(operation,result){this.config.instance.core.list("page",this.config.instance.ui.option("currentPageNo"));if(operation=="recommend"){alert(this.config.message.RECOMMEND_COMPLETE)}else{alert(this.config.message.DISCOMMEND_COMPLETE)}},authorCommand:function(){this.authorRecommend("recommend")},authorCancelCommand:function(){this.authorRecommend("discommend")},authorRecommend:function(operation){var params={};params.ticket=this.config.option("ticket");params.object_id=this.config.option("objectId");params.comment_no=this.option("commentNo");if(operation=="recommend"){params.recommend_yn="Y"}else{params.recommend_yn="N"}this.config.instance.ajax.call({operation:"authorRecommend",onSuccess:jindo.$Fn(this.processAuthorRecommend,this).bind(operation),param:params})},processAuthorRecommend:function(operation,result){this.config.instance.core.list("page",this.config.instance.ui.option("currentPageNo"));if(operation=="recommend"){alert(this.config.message.AUTHOR_RECOMMEND_COMPLETE)}else{alert(this.config.message.AUTHOR_DISCOMMEND_COMPLETE)}},_command:function(){var commands=this.config.option("commands");var maxDepth=this.config.option("maxDepth");var replyLevel=this.option("replyLevel");var elRoot=jindo.$Element("<div></div>");var expressedCommendCount=0;var expressedCommend="";for(var i=0;i<commands.length;i++){var operation=commands[i];if(this.config.option("isDeleted")){continue}if(this.option("status")>=7&&this.option("status")<=9){if(!(operation=="delete")){continue}}if(this.config.option("useReplyArea")&&replyLevel>this.config.option("maxReplyAreaDepth")){var elAllowCommandsAtReplyArea=jindo.$A(this.config.option("allowCommandsAtReplyArea"));if(!elAllowCommandsAtReplyArea.has(operation)){continue}}if(operation=="reply"){if(replyLevel>=maxDepth){continue}if(this.option("isRecommendArea")){continue}}if(operation=="author"){if(this.option("isAuthorRecommend")){operation="authorCancel"}}var text=this.config.template(operation+"Command").process(this.option());if(text==""){continue}var elCommand=jindo.$Element(text);if(expressedCommendCount==0){elCommand.addClass(this.config.css("firstCommand"))}else{if(expressedCommendCount>0){var elNobarInCommandGroup=jindo.$A(this.config.option("nobarInCommandGroup"));if(elNobarInCommandGroup.has(expressedCommend)){elCommand.addClass(this.config.css("noBarOnCommend"))}}}if((operation=="recommend"&&this.option("upCount")>0)||(operation=="discommend"&&this.option("downCount")>0)){var objRecommendCount=elCommand.query(this.config.element("recommendCount"));var elRecommendCount=jindo.$Element(objRecommendCount);elRecommendCount.addClass(this.config.css("recommendCountOn"));if(operation=="recommend"){elRecommendCount.text(this.option("upCount"))}else{if(operation=="discommend"){elRecommendCount.text(this.option("downCount"))}}}elCommand.addClass(operation);var handler=this[operation+"Command"];if(typeof handler=="function"){var oFn=jindo.$Fn(function(op,oEvent){var event=jindo.$Event(oEvent);var objCurrent=event.element;if(this.config.instance.util.redirectLogin(oEvent)){this[op+"Command"](oEvent)}event.stop(jindo.$Event.CANCEL_ALL);return false},this).bind(operation);jindo.$Fn(oFn).attach(elCommand,"click")}if(elCommand!=null){elRoot.append(elCommand);expressedCommend=operation;expressedCommendCount++}}return elRoot.child()},build:function(){var tplComment="";var isStopCommentMaking=false;if(this.option("isDeleted")){tplComment=this.config.template("deleteComment");isStopCommentMaking=true}else{if(this.option("status")>=7&&this.option("status")<=9){tplComment=this.config.template("blockComment");isStopCommentMaking=true}else{tplComment=this.config.template("comment")}}var sComment=tplComment.process(this.option());var elComment=jindo.$Element(sComment);var objCommentText=elComment.query(this.config.element("commentText"));var elCommentText=jindo.$Element(objCommentText);if(this.config.option("browser")=="safari"){elCommentText.css("font-family",this.config.option("replaceErrorFontFamily"))}var elCommands=elComment.query(this.config.element("commands"));var commands=this._command();if(elCommands!=null){elCommands=jindo.$Element(elCommands);for(var i=0;i<commands.length;i++){elCommands.append(commands[i])}}if(isStopCommentMaking){return elComment}if(this.config.option("useScore")){elComment=this.config.instance.score.addScoreToComment(elComment,this.option())}else{if(this.config.option("useProfile")){elComment=this.config.instance.profile.addProfileToComment(elComment,this.option())}}if(this.option("isUserRecommend")||this.option("isAuthorRecommend")){elComment=this.config.instance.ui.addRecommendTag(elComment,this.option())}if(this.option("isRecommendArea")){elComment=this.config.instance.ui.deckRecommendArea(elComment,this.option())}if(this.config.option("useMobile")&&this.option("isMobile")){elComment=this.config.instance.ui.addMobileIcon(elComment,this.option())}return elComment}}).extend(jindo.Component);sps.CommentBox.Comment.NAME="sps.CommentBox.Comment";sps.CommentBox.Comment.VERSION="1.0.0";var sps;if(typeof sps=="undefined"){sps={CommentBox:{}}}else{if(typeof sps.CommentBox=="undefined"){sps.CommentBox={}}}sps.CommentBox.Layer=jindo.$Class({name:"unknwon",version:"unknown",$init:function(){this.name=sps.CommentBox.Layer.NAME;this.version=sps.CommentBox.Layer.VERSION;this.indexInstance=sps.CommentBox.Layer.getInstance().length-1;this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},make:function(){var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));jindo.$Fn(function(e){this.hideLayer(1)},this).attach(elBody,"click");this.create()},create:function(){var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var arrLayers=this.config.option("layers");for(var i=0;i<arrLayers.length;i++){var sLayer=arrLayers[i];var text=this.config.template(sLayer+"Layer").process();if(text==""){continue}var elLayer=jindo.$Element(text);elLayer.addClass(sLayer+"Layer");elLayer.hide();elLayer=this.operate(elLayer);var handler=this[sLayer+"Layer"];if(typeof handler=="function"){var oFn=jindo.$Fn(handler,this).bind();elLayer=oFn(elLayer)}elBody.append(elLayer)}},operate:function(elLayer){var elButton=jindo.$Element(elLayer.query(this.config.element("closeButton")));if(elButton==null){return elLayer}jindo.$Fn(function(e){var woEvent=jindo.$Event(e);woEvent.stop(jindo.$Event.CANCEL_BUBBLE)}).attach(elLayer,"click");jindo.$Fn(function(){this.hideLayer(elLayer.attr("tier"))},this).attach(elButton,"click");jindo.$Fn(sps.disableForm).attach(elButton,"click");jindo.$Fn(function(){elButton.addClass(this.config.css("closeButtonOver"))},this).attach(elButton,"mouseenter");jindo.$Fn(function(){elButton.removeClass(this.config.css("closeButtonOver"))},this).attach(elButton,"mouseleave");return elLayer},hideLayer:function(sLayerTier){var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var elLayerList=jindo.$ElementList(elBody.queryAll(this.config.element("layer")));for(var i=0;i<elLayerList.length();i++){var elTempLayer=elLayerList.get(i);var sTempLayerTier=elTempLayer.attr("tier");if(sTempLayerTier>=sLayerTier){elTempLayer.hide()}}},getLayer:function(layerName){var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var elLayer=jindo.$Element(elBody.query("."+layerName+"Layer"));this.hideLayer(elLayer.attr("tier"));return elLayer},adjustPosition:function(elSource,elLayer,sAnchorHorizon,sAnchorVertical){var iAnchorHorizon=0;var iAnchorVertical=0;elLayer.show();if(sAnchorHorizon=="left"){iAnchorHorizon=elSource.offset().left}else{if(sAnchorHorizon=="right"){iAnchorHorizon=elSource.offset().left-elLayer.width()+elSource.width()}}if(sAnchorVertical=="top"){iAnchorVertical=elSource.offset().top}else{if(sAnchorVertical=="bottom"){iAnchorVertical=elSource.offset().top-elLayer.height()+elSource.height()}}elLayer.offset(iAnchorVertical,iAnchorHorizon);return elLayer},me2guideLayer:function(elLayer){return elLayer},profileLayer:function(elLayer){if(this.config.option("isLogin")==true&&this.config.option("useProfile")&&typeof this.config.instance.profile=="object"){elLayer=this.config.instance.profile.makeProfileLayer(elLayer)}return elLayer},resetLayer:function(){var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var elLayerList=jindo.$ElementList(elBody.queryAll(this.config.element("layer")));elLayerList.leave();this.create()}}).extend(jindo.Component);sps.CommentBox.Layer.NAME="sps.CommentBox.Layer";sps.CommentBox.Layer.VERSION="1.0.0";sps.layer=new sps.CommentBox.Layer();var sps;if(typeof sps=="undefined"){sps={CommentBox:{}}}else{if(typeof sps.CommentBox=="undefined"){sps.CommentBox={}}}sps.CommentBox.WriteBox=jindo.$Class({name:"unknwon",version:"unknown",message:{},$init:function(htOptions){this.name=sps.CommentBox.WriteBox.NAME;this.version=sps.CommentBox.WriteBox.VERSION;this.option("isKeyDownLoop",false);this.option("isTrackingTextCount",false);this.option("previousText","");this.indexInstance=sps.CommentBox.WriteBox.getInstance().length-1;this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},create:function(obj){if(!this.config.instance.util.redirectLogin(obj)){return false}var elForm=jindo.$Element(obj.element.form);var objTextarea=elForm.query(this.config.element("textarea"));var objParentCommentNo=elForm.query("input.parentCommentNo");var sParentCommentNo=objParentCommentNo==null?this.config.option("parentCommentNo"):objParentCommentNo.value;var sText=this.config.instance.util.cancelLineBreaking(objTextarea.value);sText=jindo.$S(sText).trim().$value();if(sText.length==0||this.config.instance.util.compareTextWithoutRetuneChar(sText,this.config.message.DEFAULT_TEXT)){alert(this.config.message.NO_CONTENTS);return false}if(typeof sParentCommentNo=="undefined"){sParentCommentNo=0}this.config.fireEvent("beforeCreate",{text:sText});var validationResult=this.fireEvent("validate",params);if(!validationResult){return false}var params={};params.ticket=this.config.option("ticket");params.object_id=this.config.option("objectId");params.page_size=this.config.option("pageSize");params.object_url=this.config.option("objectUrl");params.contents=sText;params.parent_comment_no=sParentCommentNo;if(typeof this.config.option("lkey")!="undefined"){params.lkey=this.config.option("lkey")}if(this.config.option("useCategory")){params.category_id=this.config.option("categoryId");if(typeof this.config.option("viewCategoryId")!="undefined"){params.view_category_id=this.config.option("viewCategoryId")}}if(this.config.option("useMe2Day")){var objCheckbox=elForm.query(this.config.element("me2dayCheck"));if(objCheckbox!=null){if(objCheckbox.checked){params.post_to_me2day="Y"}}}if(this.config.option("useScore")){var objSelect=elForm.query("select");if(objSelect!=null){if(isNaN(objSelect.value)){alert(this.config.message.REQUIRE_SCORE);return false}params.object_score=objSelect.value}}if(this.config.option("useReplyArea")){params.reply_page_size=this.config.option("replyPageSize")}if(this.config.option("usePersonacon")){var objPersonacon=elForm.query(this.config.element("personacon"));if(objPersonacon){params.personacon=objPersonacon.src}}this.config.instance.ajax.call({operation:"create",onSuccess:jindo.$Fn(this.onCreate,this).bind(),errorMessage:this.config.message.UNAVAILABLE_OPERATION,param:params})},onCreate:function(result){this.resetRootWriteBox();this.config.instance.layer.resetLayer();this.config.instance.ui.list(result);this.config.fireEvent("afterCreate",{text:result})},createWriteBox:function(elWriteBoxArea,isRoot){var sWriteBox=this.config.template("writeBox").process({isLogin:this.config.option("isLogin")});var elWriteBox=jindo.$Element(sWriteBox);if(this.config.option("useSpan")){var objUserArea=elWriteBox.query(this.config.element("userArea"));var elUserArea=jindo.$Element(objUserArea);var sSpanWriteBox=this.config.template("spanWriteBox").process();var elSpanWriteBox=jindo.$Element(sSpanWriteBox);elUserArea.empty();elUserArea.append(elSpanWriteBox)}elWriteBox.addClass(this.config.css("basicWriteBoxType"));if(this.config.option("useProfile")&&typeof this.config.instance.profile=="object"){elWriteBox=this.config.instance.profile.makeProfileWriteBox(elWriteBox,isRoot)}if(this.config.option("useScore")&&typeof this.config.instance.score=="object"){elWriteBox=this.config.instance.score.addSelectboxInWritebox(elWriteBox)}var objTextBox=elWriteBox.query(this.config.element("textarea"));var elTextBox=jindo.$Element(objTextBox);this.addActionToTextArea(elTextBox);if(this.config.option("browser")=="safari"){elTextBox.css("font-family",this.config.option("replaceErrorFontFamily"))}elTextBox.css("background",this.config.option("offTextboxBackground"));elTextBox.css("color",this.config.option("offTextboxFontColor"));elTextBox.text(this.config.message.DEFAULT_TEXT);elWriteBox=this.createDesc(elWriteBox,isRoot);elWriteBoxArea.append(elWriteBox);var objWriteButton=elWriteBoxArea.query(this.config.element("writeButton"));var elWriteButton=jindo.$Element(objWriteButton);if(!isRoot&&this.config.option("useSpareButtonInReplyWriteBox")){var elParentWriteButton=elWriteButton.parent();var objSpareWriteButton=this.config.template("spareWriteButton").process();elWriteButton.leave();elWriteButton=jindo.$Element(objSpareWriteButton);elParentWriteButton.append(elWriteButton)}jindo.$Fn(this.create,this).attach(elWriteButton,"click");var objWriteForm=elWriteBoxArea.query("form");jindo.$Fn(sps.disableForm).attach(objWriteForm,"submit");return elWriteBoxArea},addActionToTextArea:function(elTextBox){jindo.$Fn(this.onKeyDownWriteArea,this).attach(elTextBox,"keydown");jindo.$Fn(this.onFocusWriteArea,this).attach(elTextBox,"focus");jindo.$Fn(this.onMouseDownWriteArea,this).attach(elTextBox,"mousedown");jindo.$Fn(this.onBlurWriteArea,this).attach(elTextBox,"blur");jindo.$Fn(this.blockContextAction,this).attach(elTextBox,"paste");jindo.$Fn(this.blockContextAction,this).attach(elTextBox,"copy")},onKeyDownWriteArea:function(oEvent){if(!this.config.option("isLogin")){return false}this.option("isKeyDownLoop",true);this.detectOverMaxLength(oEvent);this.blockCopyAndPasteKey(oEvent)},onMouseDownWriteArea:function(oEvent){if(!this.config.option("isLogin")){return false}},onFocusWriteArea:function(oEvent){if(this.config.option("isLogin")){this.defaultText(oEvent)}else{this.config.instance.util.redirectLogin(oEvent)}},onBlurWriteArea:function(oEvent){if(!this.config.option("isLogin")){}else{this.defaultText(oEvent)}this.option("isKeyDownLoop",false)},defaultText:function(oEvent){var objTextarea=oEvent.element;var elTextarea=jindo.$Element(objTextarea);var text=this.config.instance.util.cancelLineBreaking(elTextarea.text());switch(oEvent.type){case"focus":if(this.config.instance.util.compareTextWithoutRetuneChar(text,this.config.message.DEFAULT_TEXT)){elTextarea.css("background",this.config.option("onTextboxBackground"));elTextarea.css("color",this.config.option("onTextboxFontColor"));elTextarea.text("")}break;case"blur":if(jindo.$S(text).trim().$value()==""){elTextarea.css("background",this.config.option("offTextboxBackground"));elTextarea.css("color",this.config.option("offTextboxFontColor"));elTextarea.text(this.config.message.DEFAULT_TEXT)}break}},blockCopyAndPasteKey:function(oEvent){if(!this.config.option("useBlockCopyAndPaste")){return}var woEvent=jindo.$Event(oEvent);var KEYCODE={COPY:67,PASTE:86};if(!woEvent||!woEvent.key||!(key=woEvent.key())||!key.ctrl){return}if(KEYCODE.COPY==key.keyCode){woEvent.stop(jindo.$Event.CANCEL_ALL);alert(this.config.message.BLOCK_COPY)}if(KEYCODE.PASTE==key.keyCode){woEvent.stop(jindo.$Event.CANCEL_ALL);alert(this.config.message.BLOCK_PASTE)}},blockContextAction:function(oEvent){if(!this.config.option("useBlockCopyAndPaste")){return}var woEvent=jindo.$Event(oEvent);if(!woEvent||!woEvent.stop){return}woEvent.stop(jindo.$Event.CANCEL_ALL);if(woEvent.type=="copy"){alert(this.config.message.BLOCK_COPY)}else{if(woEvent.type=="paste"){alert(this.config.message.BLOCK_PASTE)}}},detectOverMaxLength:function(oEvent){if(!this.option("isKeyDownLoop")){return false}var woEvent=jindo.$Event(oEvent);var objTextarea=woEvent.element;var elTextarea=jindo.$Element(objTextarea);var text=this.config.instance.util.cancelLineBreaking(elTextarea.text());var result=this.config.instance.util.validation(text,1,this.config.option("maximumCommentLength"),false,false,this.config.message.EXCEED_MAX_LENGTH);if(!result){elTextarea.text(this.option("previousText"))}else{this.option("previousText",elTextarea.text());if(this.option("isTrackingTextCount")){var elForm=jindo.$Element(woEvent.element.form);var objPresentTextLength=elForm.query(".cbox_present_text_length");if(objPresentTextLength!=null){var elPresentTextLength=jindo.$Element(objPresentTextLength);elPresentTextLength.text(text.length)}}}setTimeout(jindo.$Fn(this.detectOverMaxLength,this).bind(oEvent),100)},createSubNode:function(){var elLi=jindo.$Element("<li>");elLi.addClass(this.config.css("thumbOff"));var sSubNode=this.config.template("subNode").process();elLi.append(sSubNode);return elLi},createDesc:function(elWriteBox,isRoot){var sDescs=this.config.element("descs");if(typeof sDescs=="undefined"){return elWriteBox}var elDescs=jindo.$Element(elWriteBox.query(sDescs));if(!isRoot&&this.config.option("isDescInOnlyRoot")){elDescs.leave();return elWriteBox}var arrDescs=this.config.option("descs");for(var i=0;i<arrDescs.length;i++){var sDesc=arrDescs[i];var text=this.config.template(sDesc+"Desc").process();if(text==""){continue}var elDesc=jindo.$Element(text);var handler=this[sDesc+"Desc"];if(typeof handler=="function"){var oFn=jindo.$Fn(handler,this).bind();elDesc=oFn(elDesc)}elDescs.append(elDesc)}if(this.config.option("isLogin")){elDescs=this.config.instance.me2day.addMe2DayInDesc(elDescs)}if(elDescs.child().length==0){elDescs.leave()}return elWriteBox},policyDesc:function(elDesc){var objPolicy=elDesc.query("a");var elPolicy=jindo.$Element(objPolicy);jindo.$Fn(function(){}).attach(elPolicy,"click");jindo.$Fn(sps.disableForm).attach(elPolicy,"click");return elDesc},textCountDesc:function(elDesc){this.option("isTrackingTextCount",true);var objTotalTextLength=elDesc.query(".cbox_total_text_length");var elTotalTextLength=jindo.$Element(objTotalTextLength);elTotalTextLength.text(this.config.option("maximumCommentLength"));return elDesc},resetRootWriteBox:function(){var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var objRootSelecter=elBody.query(this.config.element("writeboxRoot"));var elRootSelecter=jindo.$Element(objRootSelecter);elRootSelecter.empty();this.createWriteBox(elRootSelecter,true);return elRootSelecter},createReplyWrite:function(elParent,parentCommentNo){var elLi=this.createSubNode();var elWriteBox=this.createWriteBox(elLi,false);if(this.config.option("isReplyWriteBoxPositionOnBottom")){elParent.append(elWriteBox)}else{elParent.prepend(elWriteBox)}if(this.config.option("useProfile")&&typeof this.config.instance.profile=="object"){this.config.instance.profile.adjustZindex()}var elWriteForm=jindo.$Element(elWriteBox.query("form"));var elParentCommentNo=jindo.$Element("<input>");elParentCommentNo.attr("type","hidden");elParentCommentNo.addClass("parentCommentNo");elParentCommentNo.text(parentCommentNo);elWriteForm.append(elParentCommentNo);return elWriteBox}}).extend(jindo.Component);sps.CommentBox.WriteBox.NAME="sps.CommentBox.WriteBox";sps.CommentBox.WriteBox.VERSION="1.0.0";sps.writebox=new sps.CommentBox.WriteBox();var sps;if(typeof sps=="undefined"){sps={CommentBox:{}}}else{if(typeof sps.CommentBox=="undefined"){sps.CommentBox={}}}sps.CommentBox.Util=jindo.$Class({name:"unknwon",version:"unknown",$init:function(){this.name=sps.CommentBox.Util.NAME;this.version=sps.CommentBox.Util.VERSION;this.indexInstance=sps.CommentBox.Util.getInstance().length-1;this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},popUp:function(url,name,width,height){var popup=window.open(url,name,"width="+width+",height="+height+",status=no,left=0,top=0");if(popup){popup.focus();return popup}},parseQueryString:function(rawString){var result={};var string=decodeURI(rawString);if(string){var values=string.split(/&/);for(var i=0;i<values.length;i++){var pair=values[i].split(/\=/);result[pair[0]]=pair[1]}}return result},multiLine:function(text){text=text.split(/\r/).join("");if(this.config.option("enableMultiLine")){text=text.split(/\n/).join("<br>")}else{text=text.split(/\n/).join(" ")}return text},validation:function(contents,min,max,emptyError,minError,maxError){contents=jindo.$S(contents).trim().$value();contents=this.cancelLineBreaking(contents);if(emptyError&&contents.length===0){alert(emptyError);return false}if(minError&&contents.length<min){alert(jindo.$Template(minError).process({min:escape(min.toString())}));return false}if(maxError&&contents.length>max){alert(jindo.$Template(maxError).process({max:escape(max.toString())}));return false}return true},lineBreaking:function(text){if(typeof document.body.style.wordWrap!="undefined"){return text}if(!this.config.option("useLineBreaking8203")){return text}var result=this.cancelLineBreaking(text);result=result.replace(/(\s)+/g,"$1");result=result.split("").join(String.fromCharCode(8203));return result},cancelLineBreaking:function(text){var result=text;result=result.split(String.fromCharCode(8203)).join("");return result},redirectLogin:function(oEvent){if(this.config.option("isLogin")){return true}else{if(this.isLogin(false)){this.config.instance.ui.resetPage();return true}}if(oEvent!=null){var woEvent=jindo.$Event(oEvent);var objCurrent=woEvent.element;objCurrent.blur()}if(confirm(this.config.message.NOT_LOGIN)){top.location="http://nid.naver.com/nidlogin.login?mode=form&url="+encodeURIComponent(this.config.option("objectUrl"))}return false},isLogin:function(isPopMessage){var params={};params.ticket=this.config.option("ticket");this.config.instance.ajax.call({operation:"isLogin",async:false,onSuccess:jindo.$Fn(function(result){if(result.is_logged_in=="Y"){this.config.option("isLogin",true)}else{this.config.option("isLogin",false);if(isPopMessage){alert(this.config.message.NEED_LOGIN)}}},this).bind(),param:params});return this.config.option("isLogin")},profilePopUp:function(commentNo,profileType){var params={};params.ticket=this.config.option("ticket");if(!commentNo==""){params.comment_no=commentNo}else{if(!profileType==""){if(!this.isLogin(true)){this.config.instance.ui.resetPage();return false}params.profile_type=profileType}}var url=this.config.option("profileHome")+"?"+jindo.$H(params).toQueryString();window.open(url,"_blank")},compareTextWithoutRetuneChar:function(paramText1,paramText2){var sText1=paramText1;var sText2=paramText2;sText1=sText1.replace(/\r/g,"");sText1=sText1.replace(/\n/g,"");sText2=sText2.replace(/\r/g,"");sText2=sText2.replace(/\n/g,"");if(sText1==sText2){return true}return false},initIframe:function(iframeId){if(!iframeId){return}this.config.option("iframeId",iframeId);this.resizeIframe();var fnResize=jindo.$Fn(this.resizeIframe,this).bind();this.config.attach("afterList",fnResize)},resizeIframe:function(){if(!this.config.option("iframeId")){return}var iframe=parent.document.getElementById(this.config.option("iframeId"));if(!iframe){return}var elBody=jindo.$Element(jindo.$$.getSingle("body"));if(elBody.height()>0){iframe.style.height=elBody.height()+"px"}}}).extend(jindo.Component);sps.CommentBox.Util.NAME="sps.CommentBox.Util";sps.CommentBox.Util.VERSION="1.0.0";sps.util=new sps.CommentBox.Util();var sps;if(typeof sps=="undefined"){sps={CommentBox:{},ui:{}}}else{if(typeof sps.CommentBox=="undefined"){sps.CommentBox={}}}sps.CommentBox.UI=jindo.$Class({name:"unknown",version:"unknown",$init:function(){this.name=sps.CommentBox.UI.NAME;this.version=sps.CommentBox.UI.VERSION;this.rowMessage;this.option("list",{});this.option("oMessage",{});this.indexInstance=sps.CommentBox.UI.getInstance().length-1;this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},list:function(oMessage){this.option("oMessage",oMessage);var commentList=oMessage.comment_list;var recommendList=oMessage.recommended_list;var replyMessage=oMessage.reply_lists[0];this.config.fireEvent("beforeList",{text:oMessage});var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));if(this.config.option("useScore")){var objRawList=elBody.query(this.config.element("list"));var elRawList=jindo.$Element(objRawList);elRawList.addClass(this.config.css("scoreList"))}var objList=elBody.query(this.config.element("list")+" ul");var elList=jindo.$Element(objList);elList.empty();if(this.config.option("useRecommendArea")&&oMessage.page_no==1){for(var nRecommendIndex=0;nRecommendIndex<recommendList.length;nRecommendIndex++){var oRawRecommend=this.preprocessing(recommendList[nRecommendIndex]);oRawRecommend.parent_comment_no=0;oRawRecommend.reply_level=1;oRawRecommend.is_author=oMessage.author_yn;oRawRecommend.is_recommend_area="Y";oRawRecommend.indexInstance=this.indexInstance;var oRecommend=new sps.CommentBox.Comment(oRawRecommend);var elRecommend=oRecommend.build();elList.append(elRecommend)}}for(var nCommentIndex=0;nCommentIndex<commentList.length;nCommentIndex++){var oRawComment=this.preprocessing(commentList[nCommentIndex]);oRawComment.is_author=oMessage.author_yn;oRawComment.indexInstance=this.indexInstance;var oComment=new sps.CommentBox.Comment(oRawComment);var elComment=oComment.build();var elParent=this.seekParentElement(oRawComment);elParent.append(elComment)}if(typeof replyMessage=="object"&&typeof this.config.instance.score=="object"&&this.config.option("useReplyArea")){if(replyMessage.parent_comment_no>0){this.config.instance.score.displayReplyList(oMessage)}}this.updateCount(oMessage);this.spotLight(oMessage.comment_no);this.paginate(oMessage);this.config.fireEvent("afterList",{text:oMessage})},updateCount:function(oMessage){var totalCount=oMessage.total_count;var score=oMessage.score;var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var objCountArea=elBody.query(this.config.element("countArea"));var elCountArea=jindo.$Element(objCountArea);elCountArea.empty();if(typeof score.average!="undefined"&&typeof score.sum!="undefined"&&typeof score.count!="undefined"){var objCountDetail=this.config.template("countDetail").process({score:oMessage.score});var elCountDetail=jindo.$Element(objCountDetail);elCountArea.append(elCountDetail)}else{var objCountSimple=this.config.template("countSimple").process({count:totalCount});var elCountSimple=jindo.$Element(objCountSimple);elCountArea.append(elCountSimple)}if(this.config.option("useCountUnderBar")){var objCountBar=elCountArea.query("h5");if(objCountBar!=null){var elCountBar=jindo.$Element(objCountBar);elCountBar.addClass(this.config.css("countUnderBar"))}}},seekParentElement:function(oOption){var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var objList=elBody.query(this.config.element("list")+" ul");var elList=jindo.$Element(objList);var nReplyLevel=Number(oOption.reply_level);var nParentCommentNo=Number(oOption.parent_comment_no);var returnElement=elList;if(nParentCommentNo>0&&nReplyLevel>1){var objReplyPosition=elList.query(".comment_no_"+nParentCommentNo+" ul");var elReplyPosition=jindo.$Element(objReplyPosition);if(elReplyPosition==null){var elDummyReplyPosition=elList.query(".dummy_comment_no_"+(nReplyLevel-1)+" ul");var elDummyReplyPosition=jindo.$Element(elDummyReplyPosition);if(elDummyReplyPosition==null){var elDummy;var elTarget;for(var i=1;i<nReplyLevel;i++){var elLi=jindo.$Element("<li>");elLi.addClass(this.config.css("thumbOff"));elLi.addClass("dummy_comment_no_"+(nReplyLevel-i));var elUl=jindo.$Element("<ul>");if(i==1){elTarget=elUl}else{elUl.append(elDummy)}elLi.append(elUl);elDummy=elLi}elList.append(elDummy);returnElement=elTarget}else{returnElement=elDummyReplyPosition}}else{returnElement=elReplyPosition}}return returnElement},paginate:function(oMessage){var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var objPaginate=elBody.query(this.config.element("paginate"));if(objPaginate==null){return false}var elPaginate=jindo.$Element(objPaginate);elPaginate.html("");this.option("currentPageNo",oMessage.page_no);var nCurrent=this.option("currentPageNo");var nStart=0;var nEnd=0;var nLast=Math.ceil(oMessage.total_count/this.config.option("pageSize"));var nPageCount=this.config.option("paginateSize");if(this.config.option("centerPaginate")){var nLeadSize=Math.floor(nPageCount/2);nStart=Math.max(nCurrent-nLeadSize,1);nEnd=nStart+nPageCount-1}else{var nOffset=nCurrent%nPageCount===0?nPageCount:nCurrent%nPageCount;var nPrevious=nCurrent-nOffset;nStart=nPrevious+1;nEnd=nPrevious+nPageCount}nEnd=Math.max(nStart,nEnd);nEnd=Math.min(nEnd,nLast);if(nStart>1){var elFirstPage=this._buildPage(1,"firstPage");var elPrevPage=this._buildPage(nStart-1,"prevPage");if(elFirstPage!=null){elPaginate.append(elFirstPage);elPaginate.append(document.createTextNode("\n"))}if(elPrevPage!=null){elPaginate.append(elPrevPage);elPaginate.append(document.createTextNode("\n"))}}for(var nPage=nStart;nPage<=nEnd;nPage++){var elPage;if(nPage==nCurrent){elPage=this._buildPage(nPage,"currentPage")}else{elPage=this._buildPage(nPage,"page")}if(elPage!=null){elPaginate.append(elPage);elPaginate.append(document.createTextNode("\n"))}}if(nEnd<nLast){var elNextPage=this._buildPage(nEnd+1,"nextPage");if(elNextPage!=null){elPaginate.append(elNextPage);elPaginate.append(document.createTextNode("\n"))}}},_buildPage:function(nPage,sTplName){var tplPage=this.config.template(sTplName);var sPage=tplPage.process({page:nPage});var elPage=jindo.$Element(sPage);jindo.$Fn(jindo.$Fn(this.config.instance.core.list,this.config.instance.core).bind("page",nPage)).attach(elPage,"click");jindo.$Fn(sps.disableForm).attach(elPage,"click");return elPage},preprocessing:function(oComment){if(!oComment.done_preprocessing){oComment.registered_ymdt=this.dateFormat(oComment.registered_ymdt);oComment.modified_ymdt=this.dateFormat(oComment.modified_ymdt);if(this.config.option("browser")=="firefox"||this.config.option("browser")=="opera"){oComment.contents=this.config.instance.util.lineBreaking(oComment.contents)}if(this.config.option("useEscapeHtml")){oComment.contents=oComment.contents.replace("<!-- Not Allowed Tag Filtered -->","");oComment.contents=jindo.$S(oComment.contents).unescapeHTML().escapeHTML().$value()}oComment.contents=this.config.instance.util.multiLine(oComment.contents);oComment.done_preprocessing=true}return oComment},dateFormat:function(date){var datetime=date.split(/\+/);datetime=datetime[0].split(/T/);if(datetime.length>1){var ymd=datetime[0].split(/-/);var his=datetime[1].split(/:/);var year=ymd[0];var month=ymd[1];var dayOfMonth=ymd[2];var time=his[0];var minute=his[1];var second=his[2].split(/\./);var milli=second[1];second=second[0];year=Number(year);month=Number(month)-1;var day=Number(dayOfMonth);time=Number(time);minute=Number(minute);second=Number(second);var oDate=jindo.$Date(year,month,day,time,minute,second,milli);return oDate.format(this.config.option("dateFormat"))}else{return datetime[0]}},resetList:function(){var oMessage=this.option("oMessage");oMessage.comment_no=0;this.list(oMessage);this.config.instance.layer.resetLayer()},resetPage:function(){this.config.instance.writebox.resetRootWriteBox();this.resetList()},spotLight:function(commentNo){if(commentNo==0){return}if(this.config.option("enableSpotLight")==false){return}var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var objComment=elBody.query(".comment_no_"+commentNo+" "+this.config.element("commentBody"));var elComment=jindo.$Element(objComment);var sCssSpotLight=this.config.css("spotLight");elComment.addClass(sCssSpotLight);var oTransition=new jindo.Transition().fps(30).attach({end:function(){elComment.removeClass(sCssSpotLight);elComment.$value().style.backgroundColor=""}});oTransition.start(1500,elComment.$value(),{"@backgroundColor":jindo.Effect.linear(elComment.css("backgroundColor"),"rgb(255,255,255)")})},addRecommendTag:function(elComment,oOption){var objNameArea=elComment.query(this.config.element("commentNameArea"));var elNameArea=jindo.$Element(objNameArea);var objRecommendImgArea=this.config.template("recommendImgArea").process();var elRecommendImgArea=jindo.$Element(objRecommendImgArea);if(oOption.isAuthorRecommend){var objAuthorRecommendImgTag=this.config.template("arthorRecommendImgTag").process();var elAuthorRecommendImgTag=jindo.$Element(objAuthorRecommendImgTag);elRecommendImgArea.append(elAuthorRecommendImgTag);elRecommendImgArea.append(document.createTextNode("\n"))}if(oOption.isUserRecommend){var objUserRecommendImgTag=this.config.template("userRecommendImgTag").process();var elUserRecommendImgTag=jindo.$Element(objUserRecommendImgTag);elRecommendImgArea.append(elUserRecommendImgTag)}elNameArea.prepend(elRecommendImgArea);return elComment},addMobileIcon:function(elComment,oOption){var objNameArea=elComment.query(this.config.element("commentNameArea"));var elNameArea=jindo.$Element(objNameArea);var objMobileIcon=this.config.template("mobileIcon").process();var elMobileIcon=jindo.$Element(objMobileIcon);var elMobileLayer=jindo.$Element(jindo.$$.getSingle(this.config.element("body")+" "+this.config.element("mobileLayer")));if(!elMobileLayer){var objMobileLayer=this.config.template("mobileLayer").process();elMobileLayer=jindo.$Element(objMobileLayer);elMobileLayer.hide();var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));elBody.append(elMobileLayer)}jindo.$Fn(function(e){var offset=elMobileIcon.offset();var top=offset.top+elMobileIcon.height()+5;var left=offset.left-18;elMobileLayer.show();elMobileLayer.offset(top,left)},this).attach(elMobileIcon,"mouseenter");jindo.$Fn(function(e){elMobileLayer.hide()},this).attach(elMobileIcon,"mouseleave");elNameArea.append(elMobileIcon);return elComment},deckRecommendArea:function(elComment,oOption){elComment.toggleClass("comment_no_"+oOption.commentNo,"recommend_comment_no_"+oOption.commentNo);if(this.config.option("useReplyArea")){return elComment}var objCommentBody=elComment.query(this.config.element("commentBody"));var elCommentBody=jindo.$Element(objCommentBody);var objRecommendReply=this.config.template("recommendReply").process();var elRecommendReply=jindo.$Element(objRecommendReply);var objRecommendReplyCount=elRecommendReply.query("span");var elRecommendReplyCount=jindo.$Element(objRecommendReplyCount);if(oOption.replyCount){elRecommendReplyCount.text(oOption.replyCount)}var objRecommendReplyLink=elRecommendReply.query("a");var elRecommendReplyLink=jindo.$Element(objRecommendReplyLink);jindo.$Fn(function(oEvent){this.config.instance.core.list("comment",oOption.commentNo)},this).attach(elRecommendReplyLink,"click");jindo.$Fn(sps.disableForm).attach(elRecommendReplyLink,"click");elCommentBody.append(elRecommendReply);return elComment},makeCountArea:function(){var objCount=this.config.template("countArea").process();var elCount=jindo.$Element(objCount);return elCount},makePaginationArea:function(){var objPaginationArea=this.config.template("pageArea").process();var elPaginationArea=jindo.$Element(objPaginationArea);return elPaginationArea},makeListArea:function(){var objListArea=this.config.template("list").process();var elListArea=jindo.$Element(objListArea);return elListArea},makeExtraArea:function(templateName){var objDiv=this.config.template(templateName).process();var elDiv=jindo.$Element(objDiv);return elDiv},makeRootWriteBoxArea:function(){var objRootWriteBoxArea=this.config.template("rootWriteBoxArea").process();var elRootWriteBoxArea=jindo.$Element(objRootWriteBoxArea);this.config.instance.writebox.createWriteBox(elRootWriteBoxArea,true);return elRootWriteBoxArea}}).extend(jindo.Component);sps.CommentBox.UI.NAME="sps.CommentBox.UI";sps.CommentBox.UI.VERSION="1.0";sps.ui=new sps.CommentBox.UI();sps.CommentBox.Control=jindo.$Class({options:null,templates:null,$init:function(){this.options={};this.templates={}},setOptions:function(option,value){if(typeof option=="object"){for(var key in option){this.options[key]=option[key]}}else{if(typeof option=="string"&&value){this.options[option]=value}}},setTemplates:function(template,value){if(typeof template=="object"){for(var key in template){this.templates[key]=template[key]}}else{if(typeof template=="string"&&value){this.templates[template]=value}}},validate:function(core){var instances;if(core&&core.name=="sps.CommentBox.Core"){instances=[core]}else{instances=sps.CommentBox.Core.getInstance()}for(var i=0;i<instances.length;i++){var instance=instances[i];for(var key in this.options){instance.config.option(key,this.options[key])}for(var key in this.templates){instance.config.template(key,this.templates[key])}}},create:function(target,ticket,objectId,categoryId){var core=this.createOnly(target,ticket,objectId,categoryId);core.list("page",1);return core},createOnly:function(target,ticket,objectId,categoryId){var targetObject;if(!target||typeof target!="string"||!(targetObject=jindo.$$.getSingle(target))){throw TypeError("Invalid target argument.")}if(!ticket||typeof ticket!="string"){throw TypeError("Invalid ticket argument.")}if(!objectId||typeof objectId!="string"){throw TypeError("Invalid objectId argument.")}var instances=sps.CommentBox.Core.getInstance();var core=instances[instances.length-1];if(core.initialized){new sps.CommentBox.Config();new sps.CommentBox.Core();new sps.CommentBox.Ajax();new sps.CommentBox.UI();new sps.CommentBox.Layer();new sps.CommentBox.WriteBox();new sps.CommentBox.Util();if(sps.CommentBox.Me2day){new sps.CommentBox.Me2day()}if(sps.CommentBox.profile){new sps.CommentBox.profile()}if(sps.CommentBox.score){new sps.CommentBox.score()}core=instances[instances.length-1]}this.validate(core);core.config.option("ticket",ticket);core.config.option("objectId",objectId);if(categoryId||typeof categoryId=="string"){core.config.option("categoryId",categoryId);core.config.option("viewCategoryId",categoryId)}core.config.element("body",target);var targetElement=jindo.$Element(targetObject);if(!targetElement.hasClass("cbox")){targetElement.addClass("cbox")}core.initializeOnly();core.initialized=true;return core},addHandler:function(target,eventName,handler){if(target&&target.initialized){target.config.attach("afterList",handler)}}});var sps;if(typeof sps=="undefined"){sps={CommentBox:{}}}else{if(typeof sps.CommentBox=="undefined"){sps.CommentBox={}}}sps.CommentBox.Me2day=jindo.$Class({name:"unknwon",version:"unknown",$init:function(){this.name=sps.CommentBox.Me2day.NAME;this.version=sps.CommentBox.Me2day.VERSION;this.option("activateMe2",false);this.indexInstance=sps.CommentBox.Me2day.getInstance().length-1;this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},getInformMe2Day:function(){if(this.config.option("isLogin")&&this.config.option("useMe2Day")&&!this.option("activateMe2")){this.config.instance.ajax.call({operation:"me2day",async:false,onSuccess:jindo.$Fn(function(result){this.option("activateMe2",true);this.option("authenticatedYn",result.authenticated_yn);this.option("profileUserId",result.profile_user_id);this.option("me2daySsoLkey",result.me2day_sso_lkey)},this).bind(),param:{ticket:this.config.option("ticket")}})}},addMe2DayInDesc:function(elDescs){this.getInformMe2Day();if(!this.option("activateMe2")){return elDescs}var arrDescs=this.config.option("me2desc");for(var i=0;i<arrDescs.length;i++){var sDesc=arrDescs[i];var text=this.config.template(sDesc+"Desc").process();if(text==""){continue}var elDesc=jindo.$Element(text);var handler=this[sDesc+"Desc"];if(typeof handler=="function"){var oFn=jindo.$Fn(handler,this).bind();elDesc=oFn(elDesc)}elDescs.append(elDesc)}return elDescs},me2checkDesc:function(elDesc){var objCheckboxMe2=elDesc.query(this.config.element("me2dayCheck"));var elCheckboxMe2=jindo.$Element(objCheckboxMe2);var objLinkMe2=elDesc.query(this.config.element("me2dayLink"));var elLinkMe2=jindo.$Element(objLinkMe2);if(this.option("authenticatedYn")=="Y"){jindo.$Fn(this.openMyMe2Day,this).attach(elLinkMe2,"click");jindo.$Fn(sps.disableForm).attach(elLinkMe2,"click")}else{elCheckboxMe2.attr("disabled","true");elLinkMe2.before(document.createTextNode(elLinkMe2.text()));elLinkMe2.leave()}return elDesc},me2guideDesc:function(elDesc){var elGuideMe2Button=jindo.$Element(elDesc.query(this.config.element("helpButton")));jindo.$Fn(function(e){var elGuideMe2Layer=this.config.instance.layer.getLayer("me2guide");elGuideMe2Layer=this.config.instance.layer.adjustPosition(elGuideMe2Button,elGuideMe2Layer,"left","bottom");var woEvent=jindo.$Event(e);woEvent.stop(jindo.$Event.CANCEL_BUBBLE)},this).attach(elGuideMe2Button,"click");jindo.$Fn(sps.disableForm).attach(elGuideMe2Button,"click");return elDesc},me2certifyDesc:function(elDesc){var elCertify=jindo.$Element(elDesc.query("a"));if(this.option("authenticatedYn")=="Y"){elCertify.leave()}else{jindo.$Fn(this.showMe2DayAuthLayer,this).attach(elCertify,"click");jindo.$Fn(sps.disableForm).attach(elCertify,"click")}return elDesc},showMe2DayAuthLayer:function(){if(!this.config.instance.util.isLogin(true)){this.config.instance.ui.resetPage();return false}var cookie=jindo.$Cookie();if(Number(cookie.get("NID_MATCH_M"))=="1"){alert("미투데이 아이디와 네이버 아이디가 성공적으로 연동되어 있는 상태입니다");return}var returnURL=this.config.option("objectUrl");returnURL=returnURL.split(/\?/);var returnPamrams=jindo.$H(this.config.instance.util.parseQueryString(returnURL[1]));returnPamrams.add("set_me2day",true);returnURL=returnURL[0]+"?"+returnPamrams.toQueryString();this.config.instance.util.popUp("http://nid.naver.com/new_me2day/new_me2day.nhn?ret_url="+escape(returnURL),"me2day",450,400);return false},showMe2DayReleaseLayer:function(){if(!this.config.instance.util.isLogin(true)){this.config.instance.ui.resetPage();return false}var returnURL=""+this.config.option("objectUrl");returnURL=returnURL.split(/\?/);var returnPamrams=jindo.$H(this.config.instance.util.parseQueryString(returnURL[1]));returnPamrams.remove("set_me2day");returnURL=returnURL[0]+"?"+returnPamrams.toQueryString();this.config.instance.util.popUp("https://nid.naver.com/new_me2day/match_delete.nhn?ret_url="+escape(returnURL));return false},openMyMe2Day:function(){this.config.instance.util.profilePopUp("","me2day")}}).extend(jindo.Component);sps.CommentBox.Me2day.NAME="sps.CommentBox.Me2day";sps.CommentBox.Me2day.VERSION="1.0.0";sps.me2day=new sps.CommentBox.Me2day();var sps;if(typeof sps=="undefined"){sps={CommentBox:{}}}else{if(typeof sps.CommentBox=="undefined"){sps.CommentBox={}}}sps.CommentBox.profile=jindo.$Class({name:"unknwon",version:"unknown",$init:function(){this.name=sps.CommentBox.profile.NAME;this.version=sps.CommentBox.profile.VERSION;this.indexInstance=sps.CommentBox.profile.getInstance().length-1;this.config=sps.CommentBox.Config.getInstance()[this.indexInstance];this.option("activeProfile",false);this.option("activeProfileList",false);this.option("profile",{});this.option("profileList",{})},getProfile:function(){if(!this.option("activeProfile")){this.config.instance.ajax.call({operation:"profile",async:false,onSuccess:jindo.$Fn(function(result){this.option("activeProfile",true);this.option("profile",result)},this).bind(),param:{ticket:this.config.option("ticket")}})}},getProfileList:function(){if(!this.option("activeProfileList")){this.config.instance.ajax.call({operation:"profileList",async:false,onSuccess:jindo.$Fn(function(result){this.option("activeProfileList",true);this.option("profileList",result)},this).bind(),param:{ticket:this.config.option("ticket")}})}},addProfileToComment:function(elComment,oOption){if(oOption.writerProfileType=="naver"&&!this.config.option("useDummyThumb")){return elComment}elComment.removeClass(this.config.css("thumbOff"));elComment.addClass(this.config.css("thumbOn"));var elThumbProfile=this.assembleThumb(false,this.config.option("thumbSizeInComment"));elThumbProfile.addClass(this.config.css("thumb"));if(oOption.isAuthorComment){var sAuthorImg=this.config.template("authorImg").process();var elAuthorImg=jindo.$Element(sAuthorImg);var sAuthorText=this.config.template("authorText").process();var elAuthorText=jindo.$Element(sAuthorText);elThumbProfile.append(elAuthorImg);elThumbProfile.append(elAuthorText)}this.changeImage(elThumbProfile,oOption.writerProfileUrl,oOption.commentNo,oOption.writerProfileType);elComment=this.changeNamePlate(elComment,oOption);elComment.prepend(elThumbProfile);return elComment},changeNamePlate:function(elComment,oOption){if(oOption.writerProfileType=="naver"){return elComment}var objNickNameArea=elComment.query("."+this.config.css("nickName"));var elNickNameArea=jindo.$Element(objNickNameArea);var objUserIdArea=elComment.query("."+this.config.css("userId"));var elUserIdArea=jindo.$Element(objUserIdArea);var elNickNameA=this.addLink(oOption.writerNickName,oOption.commentNo,oOption.writerProfileType);var elUserIdA=this.addLink(oOption.writerId,oOption.commentNo,oOption.writerProfileType);elNickNameArea.empty();elUserIdArea.empty();elNickNameArea.append(elNickNameA);elUserIdArea.append(document.createTextNode("("));elUserIdArea.append(elUserIdA);elUserIdArea.append(document.createTextNode(")"));return elComment},addLink:function(text,commentNo,profileType){if(!this.config.option("useProfileNameLink")){var elBlank=jindo.$Element("<span>");elBlank.text(text);return elBlank}var sABlank=this.config.template("aBlank").process();var elABlank=jindo.$Element(sABlank);elABlank.text(text);jindo.$Fn(function(e){this.config.instance.util.profilePopUp(commentNo,profileType)},this).attach(elABlank,"click");jindo.$Fn(sps.disableForm).attach(elABlank,"click");return elABlank},assembleThumb:function(useInWritebox,sizeType){var sThumbProfileImg;var elThumbProfileImg;if(sizeType=="medium"){sThumbProfileImg=this.config.template("thumbMediumProfileImg").process();elThumbProfileImg=jindo.$Element(sThumbProfileImg)}else{if(sizeType=="small"){sThumbProfileImg=this.config.template("thumbSmallProfileImg").process();elThumbProfileImg=jindo.$Element(sThumbProfileImg)}}var sThumbProfileBorder=this.config.template("thumbProfileBorder").process();var elThumbProfileBorder=jindo.$Element(sThumbProfileBorder);var elDiv=jindo.$Element("<div>");if(this.config.option("useProfileThumbLink")){var elA=jindo.$Element("<a>");elA.append(elThumbProfileImg);elA.append(elThumbProfileBorder);elDiv.append(elA)}else{elDiv.append(elThumbProfileImg);elDiv.append(elThumbProfileBorder)}if(this.config.option("useSpan")&&useInWritebox){elDiv.addClass(this.config.css("spanThumbs"));var elSpanDiv=jindo.$Element("<div>");elSpanDiv.append(elDiv);return elSpanDiv}else{return elDiv}},makeProfileWriteBox:function(elWriteBox,isRoot){if(!this.config.option("isLogin")&&!this.config.option("useWriteDummyThumb")){return elWriteBox}this.getProfile();if(!this.option("activeProfile")){return elWriteBox}elWriteBox.toggleClass(this.config.css("basicWriteBoxType"),this.config.css("profileWriteBoxType"));var objUserArea=elWriteBox.query(this.config.element("userArea"));var elUserArea=jindo.$Element(objUserArea);var elProfile;if(this.config.option("useSpan")){var objTd=elUserArea.query("tbody tr td");elProfile=jindo.$Element(objTd)}else{elProfile=jindo.$Element("<div>");elUserArea.prepend(elProfile)}elProfile.addClass(this.config.css("writeboxProfile"));var elDivProfileArea=jindo.$Element("<div>");elDivProfileArea.addClass(this.config.css("writeboxProfileArea"));elProfile.append(elDivProfileArea);var elThumbProfile;if(isRoot){elThumbProfile=this.assembleThumb(true,"medium")}else{elThumbProfile=this.assembleThumb(true,this.config.option("replyThumbSizeInWritebox"))}elThumbProfile.addClass(this.config.css("thumbs"));elDivProfileArea.append(elThumbProfile);if(this.config.option("isLogin")){this.changeImage(elThumbProfile,this.option("profile").profile_url,"",this.option("profile").profile_type)}else{this.changeImage(elThumbProfile,"","","none")}if(this.config.option("isLogin")){var sProfileButton=this.config.template("profileButton").process();var elProfileButton=jindo.$Element(sProfileButton);elDivProfileArea.append(elProfileButton);jindo.$Fn(function(e){if(this.config.instance.util.isLogin(true)){var elProfileLayer=this.config.instance.layer.getLayer("profile");elUserArea.append(elProfileLayer);elProfileLayer.show()}var woEvent=jindo.$Event(e);woEvent.stop(jindo.$Event.CANCEL_BUBBLE)},this).attach(elProfileButton,"click")}return elWriteBox},adjustZindex:function(){var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var objList=elBody.query(this.config.element("list")+" ul");var elList=jindo.$Element(objList);var objReplyWriteBox=elList.query(this.config.element("writebox"));var elReplyWriteBox=jindo.$Element(objReplyWriteBox);elReplyWriteBox.parent(jindo.$Fn(function(p){if(p.tag=="li"){p.addClass(this.config.css("cboxOn"));return true}return false},this).bind())},changeImage:function(elThumbProfile,imgUrl,commentNo,profileType){var elImg=jindo.$Element(elThumbProfile.query("img"));if(typeof imgUrl=="undefined"||imgUrl==""){imgUrl=this.config.option("defaultProfileUrl")}if(this.config.option("useMemorial")){imgUrl=this.config.option("memorialDefaultImageUrl")}elImg.attr("src",imgUrl);jindo.$Fn(function(e){elImg.attr("src",this.config.option("defaultProfileUrl"))},this).attach(elImg,"error");var objA=elThumbProfile.query("a");if(objA==null){return}var elA=jindo.$Element(objA);elA.attr("href","#");var elSpan=jindo.$Element(elThumbProfile.query("a span"));if(profileType=="none"||profileType=="naver"||this.config.option("useMemorial")){elSpan.css("cursor","default");elA.css("cursor","default")}else{jindo.$Fn(function(e){this.config.instance.util.profilePopUp(commentNo,profileType)},this).attach(elA,"click")}jindo.$Fn(sps.disableForm).attach(elA,"click")},makeProfileLayer:function(elLayer){this.getProfileList();if(!this.option("activeProfileList")){return elLayer}jindo.$Fn(function(e){this.config.instance.layer.hideLayer(2)},this).attach(elLayer,"click");var objProfileListArea=elLayer.query("ul");var elProfileListArea=jindo.$Element(objProfileListArea);var objProfileButtonArea=elLayer.query(this.config.element("profileButtonArea"));var elProfileButtonArea=jindo.$Element(objProfileButtonArea);var profileList=this.option("profileList");var selectedProfileType=profileList.selected_profile_type;var sortProfileList=new Array(10);for(var j=0;j<profileList.profile_list.length;j++){var jsonProfile=profileList.profile_list[j];var elLi=jindo.$Element("<li>");var sRadio=this.config.template("profileRadio").process();var elRadio=jindo.$Element(sRadio);elRadio.attr("id",jsonProfile.profile_type);var elDl=jindo.$Element("<dl>");var elDt=jindo.$Element("<dt>");var elDd=jindo.$Element("<dd>");var elNickNameSpan=jindo.$Element("<span>");elNickNameSpan.addClass(this.config.css("nickName"));var elUserIdSpan=jindo.$Element("<span>");elUserIdSpan.addClass(this.config.css("userId"));var elThumbProfile=this.assembleThumb(false,"medium");elThumbProfile.addClass(this.config.css("thumb"));var elNickNameA=this.addLink(jsonProfile.nickname,"",jsonProfile.profile_type);var elUserIdA=this.addLink(jsonProfile.user_id,"",jsonProfile.profile_type);elLi.append(elRadio);elLi.append(elDl);elDl.append(elDt);elDl.append(elDd);elDd.append(elNickNameSpan);elDd.append(document.createTextNode(" "));elDd.append(elUserIdSpan);if(selectedProfileType==jsonProfile.profile_type){elRadio.attr("checked","true")}if(jsonProfile.profile_type=="naver_blog"){var sBlogLabel=this.config.template("blogLabel").process();var elBlogLabel=jindo.$Element(sBlogLabel);elBlogLabel.attr("for",jsonProfile.profile_type);elDt.append(elBlogLabel);elNickNameSpan.append(elNickNameA);elUserIdSpan.append(document.createTextNode("("));elUserIdSpan.append(elUserIdA);elUserIdSpan.append(document.createTextNode(")"));this.changeImage(elThumbProfile,jsonProfile.profile_url,"","naver_blog");elRadio.after(elThumbProfile);sortProfileList[0]=elLi}else{if(jsonProfile.profile_type=="me2day"){var sM2Label=this.config.template("me2Label").process();var elM2Label=jindo.$Element(sM2Label);elM2Label.attr("for",jsonProfile.profile_type);elDt.append(elM2Label);var sMe2HelpButton=this.config.template("helpButton").process();var elMe2HelpButton=jindo.$Element(sMe2HelpButton);jindo.$Fn(function(e){var elMe2HelpLayer=this.config.instance.layer.getLayer("me2Help");elMe2HelpLayer=this.config.instance.layer.adjustPosition(elMe2HelpButton,elMe2HelpLayer,"left","top");var woEvent=jindo.$Event(e);woEvent.stop(jindo.$Event.CANCEL_BUBBLE)},this).attach(elMe2HelpButton,"click");elDt.append(elMe2HelpButton);if(jsonProfile.authenticated_yn=="Y"){elNickNameSpan.append(elNickNameA);elUserIdSpan.append(document.createTextNode("("));elUserIdSpan.append(elUserIdA);elUserIdSpan.append(document.createTextNode(")"));this.changeImage(elThumbProfile,jsonProfile.profile_url,"","me2day");elRadio.after(elThumbProfile)}else{elRadio.attr("disabled","true");this.changeImage(elThumbProfile,this.config.option("me2dayDefaultImageUrl"),"","none");elRadio.after(elThumbProfile);elDd.empty();var sCertifyButton=this.config.template("certifyButton").process();var elCertifyButton=jindo.$Element(sCertifyButton);jindo.$Fn(this.config.instance.me2day.showMe2DayAuthLayer,this.config.instance.me2day).attach(elCertifyButton,"click");jindo.$Fn(sps.disableForm).attach(elCertifyButton,"click");elDd.append(elCertifyButton)}sortProfileList[1]=elLi}else{if(jsonProfile.profile_type=="naver"){elLi.addClass(this.config.css("noProfileThumbArea"));var sNaverLabel=this.config.template("naverLabel").process();var elNaverLabel=jindo.$Element(sNaverLabel);elNaverLabel.attr("for",jsonProfile.profile_type);elDt.append(elNaverLabel);var sNaverHelpButton=this.config.template("helpButton").process();var elNaverHelpButton=jindo.$Element(sNaverHelpButton);jindo.$Fn(function(e){var elNaverHelpLayer=this.config.instance.layer.getLayer("naverHelp");elNaverHelpLayer=this.config.instance.layer.adjustPosition(elNaverHelpButton,elNaverHelpLayer,"left","top");var woEvent=jindo.$Event(e);woEvent.stop(jindo.$Event.CANCEL_BUBBLE)},this).attach(elNaverHelpButton,"click");elDt.append(elNaverHelpButton);elNickNameSpan.text(jsonProfile.nickname);elUserIdSpan.text("("+jsonProfile.user_id+")");sortProfileList[2]=elLi}else{if(jsonProfile.profile_type=="baseball9"){var sBaseBall9Label=this.config.template("baseball9Label").process();var elBaseBall9Label=jindo.$Element(sBaseBall9Label);elBaseBall9Label.attr("for",jsonProfile.profile_type);elDt.append(elBaseBall9Label);elNickNameSpan.text(jsonProfile.nickname);elUserIdSpan.text("("+jsonProfile.user_id+")");this.changeImage(elThumbProfile,jsonProfile.profile_url,"","none");elRadio.after(elThumbProfile);sortProfileList[3]=elLi}}}}}for(var i=0;i<sortProfileList.length;i++){if(!(typeof sortProfileList[i]=="undefined")){elProfileListArea.append(sortProfileList[i])}}var objConfirmButton=elProfileButtonArea.query("input");var elConfirmButton=jindo.$Element(objConfirmButton);var objCancelButton=elProfileButtonArea.query("a");var elCancelButton=jindo.$Element(objCancelButton);var objForm=elLayer.query("form");jindo.$Fn(sps.disableForm).attach(objForm,"submit");jindo.$Fn(function(e){var elForm=jindo.$Element(e.element.form);var objSelectedRadio=elForm.query(this.config.element("profileRadio"));var elSelectedRadio=jindo.$Element(objSelectedRadio);this.setProfile(elSelectedRadio.attr("id"))},this).attach(elConfirmButton,"click");jindo.$Fn(function(e){this.config.instance.layer.hideLayer(elLayer.attr("tier"))},this).attach(elCancelButton,"click");jindo.$Fn(sps.disableForm).attach(elCancelButton,"click");return elLayer},setProfile:function(type){var params={};params.ticket=this.config.option("ticket");params.profile_type=type;this.config.instance.ajax.call({operation:"setProfileType",async:false,onSuccess:jindo.$Fn(this.modifyProfileType,this).bind(),param:params})},modifyProfileType:function(result){this.option("activeProfile",false);this.option("activeProfileList",false);var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var elThumbProfileList=jindo.$ElementList(elBody.queryAll("."+this.config.css("thumbs")));for(var i=0;i<elThumbProfileList.length();i++){var elThumbProfile=elThumbProfileList.get(i);var elTempThumbProfile=this.assembleThumb(true,"medium");elThumbProfile.html(elTempThumbProfile.html());this.changeImage(elThumbProfile,result.profile_url,"",result.profile_type)}this.config.instance.layer.hideLayer(1)}}).extend(jindo.Component);sps.CommentBox.profile.NAME="sps.CommentBox.profile";sps.CommentBox.profile.VERSION="1.0.0";sps.profile=new sps.CommentBox.profile();var sps;if(typeof sps=="undefined"){sps={CommentBox:{}}}else{if(typeof sps.CommentBox=="undefined"){sps.CommentBox={}}}sps.CommentBox.score=jindo.$Class({name:"unknwon",version:"unknown",$init:function(){this.name=sps.CommentBox.score.NAME;this.version=sps.CommentBox.score.VERSION;this.option("parentCommentOption",{});this.indexInstance=sps.CommentBox.score.getInstance().length-1;this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},addSelectboxInWritebox:function(elWritebox){var sMainPartInWritebox=elWritebox.query(this.config.element("mainPartInWritebox"));var elMainPartInWritebox=jindo.$Element(sMainPartInWritebox);var sScoreArea=this.config.template("scoreArea").process();var elScoreArea=jindo.$Element(sScoreArea);var sSelectDiv=elScoreArea.query(this.config.element("scoreDiv"));var sScoreItem=this.config.template("scoreItem").process();var arrScoreItem=sScoreItem.split("<separator/>");var oSelectBox2=new jindo.SelectBox(sSelectDiv,{bUseLayerPosition:false,aOptionHTML:arrScoreItem});var oScore=this;oSelectBox2.attach({open:function(oCustomEvent){if(!oScore.config.option("isLogin")){var fnRedirectLogin=jindo.$Fn(oScore.config.instance.util.redirectLogin,oScore.config.instance.util).bind();fnRedirectLogin(null);fnRedirectLogin=null;oCustomEvent.stop()}}});elMainPartInWritebox.prepend(elScoreArea);return elWritebox},detachSelectboxInWritebox:function(elWritebox){if(!this.config.option("isLogin")){return false}var sScoreArea=elWritebox.query(this.config.element("scoreArea"));var elScoreArea=jindo.$Element(sScoreArea);elScoreArea.leave()},addScoreToComment:function(elComment,oOption){var sCommentBody=elComment.query(this.config.element("commentBody"));var elCommentBody=jindo.$Element(sCommentBody);var sFirstOfCommentBody=elComment.query(this.config.element("firstOfCommentBody"));var elFirstOfCommentBody=jindo.$Element(sFirstOfCommentBody);var sThirdOfCommentBody=this.config.template("thirdOfCommentBody").process();var elThirdOfCommentBody=jindo.$Element(sThirdOfCommentBody);var woChildOfFirst=jindo.$A(elFirstOfCommentBody.child());woChildOfFirst.forEach(function(o,i,w){elThirdOfCommentBody.append(o)});this.config.instance.profile.changeNamePlate(elThirdOfCommentBody,oOption);if(!(oOption.writerProfileType=="naver"&&!this.config.option("useDummyThumb"))){var elThumbProfile=this.config.instance.profile.assembleThumb(false,"small");elThumbProfile.addClass(this.config.css("thumb"));this.config.instance.profile.changeImage(elThumbProfile,oOption.writerProfileUrl,oOption.commentNo,oOption.writerProfileType);elThirdOfCommentBody.prepend(elThumbProfile)}elCommentBody.append(elThirdOfCommentBody);var sScoreBoard=this.config.template("scoreBoard").process(oOption);var elScoreBoard=jindo.$Element(sScoreBoard);var sStarGrade=elScoreBoard.query(this.config.element("starGrade"));var elStarGrade=jindo.$Element(sStarGrade);if(oOption.objectScore){if(oOption.objectScore>0){var scorePercent=oOption.objectScore/this.config.option("maxScore")*100;var elSpan=jindo.$Element("<span style='width:"+scorePercent+"%'>");elStarGrade.append(elSpan)}else{elStarGrade.leave()}}else{elStarGrade.leave()}elFirstOfCommentBody.append(elScoreBoard);if(oOption.replyLevel>this.config.option("maxReplyAreaDepth")){elFirstOfCommentBody.leave()}if(oOption.replyLevel>this.config.option("maxReplyAreaDepth")){return elComment}var sFourthOfCommentBody=this.config.template("fourthOfCommentBody").process();var elFourthOfCommentBody=jindo.$Element(sFourthOfCommentBody);var sReplyOpenButton=elFourthOfCommentBody.query("a");var elReplyOpenButton=jindo.$Element(sReplyOpenButton);var sReplyNum=elFourthOfCommentBody.query(this.config.element("replyNum"));var elReplyNum=jindo.$Element(sReplyNum);var elStrong=jindo.$Element("<strong>");if(typeof oOption.replyCount=="undefined"){elStrong.text("0")}else{elStrong.text(oOption.replyCount)}elReplyNum.append(document.createTextNode("("));elReplyNum.append(elStrong);elReplyNum.append(document.createTextNode(")"));if(oOption.replyCount>0){elReplyNum.addClass(this.config.css("replyCountOn"))}jindo.$Fn(function(oEvent){this.option("parentCommentOption",oOption);if(elReplyOpenButton.hasClass(this.config.css("replyAreaUnfold"))){var sReplyArea=elComment.query("ul");var elReplyArea=jindo.$Element(sReplyArea);elReplyArea.empty()}else{this.replyList(0)}elReplyOpenButton.toggleClass(this.config.css("replyAreaUnfold"))},this).attach(elReplyOpenButton,"click");jindo.$Fn(sps.disableForm).attach(elReplyOpenButton,"click");elCommentBody.append(elFourthOfCommentBody);return elComment},replyList:function(pageNo){var parentCommentOption=this.option("parentCommentOption");var params=this.config.instance.core.commonParam();params.page_size=this.config.option("replyPageSize");params.parent_comment_no=parentCommentOption.commentNo;if(pageNo>0){params.page_no=pageNo}this.config.instance.ajax.call({operation:"replyList",onSuccess:jindo.$Fn(this.displayReplyList,this).bind(),param:params})},displayReplyList:function(oMessage){var parentCommentOption=this.option("parentCommentOption");var oReplyMessage=oMessage.reply_lists[0];var replyList=oReplyMessage.reply_list;var elBody=jindo.$Element(jindo.$$.getSingle(this.config.element("body")));var sRecommend=".";if(parentCommentOption.isRecommendArea){sRecommend=".recommend_"}var sParent=elBody.query(sRecommend+"comment_no_"+parentCommentOption.commentNo+" ul");var elParent=jindo.$Element(sParent);elParent.empty();for(var i=0;i<replyList.length;i++){var oRawReply=this.config.instance.ui.preprocessing(replyList[i]);oRawReply.indexInstance=this.indexInstance;var oComment=new sps.CommentBox.Comment(oRawReply);var elComment=oComment.build();elParent.append(elComment)}if(oReplyMessage.is_have_prev_page=="Y"||oReplyMessage.is_have_next_page=="Y"){var elReplyAreaPage=this.replyPaginate(oReplyMessage);elParent.append(elReplyAreaPage)}var elWriteBox=this.config.instance.writebox.createReplyWrite(elParent,parentCommentOption.commentNo);if(this.config.option("maxScoreDepth")>=parentCommentOption.replyLevel){this.detachSelectboxInWritebox(elWriteBox)}},replyPaginate:function(oReplyMessage){var sReplyAreaPage=this.config.template("replyAreaPage").process();var elReplyAreaPage=jindo.$Element(sReplyAreaPage);var sReplyAreaPageLeft=elReplyAreaPage.query(this.config.element("replyAreaPageLeft"));var elReplyAreaPageLeft=jindo.$Element(sReplyAreaPageLeft);var sReplyAreaPageRight=elReplyAreaPage.query(this.config.element("replyAreaPageRight"));var elReplyAreaPageRight=jindo.$Element(sReplyAreaPageRight);if(oReplyMessage.is_have_prev_page=="Y"){jindo.$Fn(function(oEvent){this.replyList(Number(oReplyMessage.page_no)-1)},this).attach(elReplyAreaPageLeft,"click");jindo.$Fn(sps.disableForm).attach(elReplyAreaPageLeft,"click")}else{elReplyAreaPageLeft.leave()}if(oReplyMessage.is_have_next_page=="Y"){jindo.$Fn(function(oEvent){this.replyList(Number(oReplyMessage.page_no)+1)},this).attach(elReplyAreaPageRight,"click");jindo.$Fn(sps.disableForm).attach(elReplyAreaPageRight,"click")}else{elReplyAreaPageRight.leave()}return elReplyAreaPage}}).extend(jindo.Component);sps.CommentBox.score.NAME="sps.CommentBox.score";sps.CommentBox.score.VERSION="1.0.0";sps.score=new sps.CommentBox.score();if(typeof sps.Fix=="undefined"){sps.Fix={}}sps.CommentBox.WriteBox.prototype.onFocusWriteArea=function(oEvent){if(!this.config.option("isLogin")){this.config.instance.util.redirectLogin(oEvent)}else{if(!this.config.option("isAuth")){this.config.instance.util.redirectAuth(oEvent)}else{this.defaultText(oEvent)}}};sps.Fix.create=sps.CommentBox.WriteBox.prototype.create;sps.CommentBox.WriteBox.prototype.create=function(e){if(!this.config.instance.util.redirectLogin(e)){return false}if(!this.config.instance.util.redirectAuth(e)){return false}if(!jindo.$Fn(sps.Fix.create,this).bind()(e)){return false}};sps.Fix.replyCommand=sps.CommentBox.Comment.prototype.replyCommand;sps.CommentBox.Comment.prototype.replyCommand=function(e){if(!this.config.instance.util.redirectAuth(e)){return false}jindo.$Fn(sps.Fix.replyCommand,this).bind()(e)};sps.CommentBox.Util.prototype.redirectAuth=function(oEvent){if(!this.config.option("isLogin")){return false}this.checkAuth();if(this.config.option("isAuth")==false){if(oEvent!=null){var woEvent=jindo.$Event(oEvent);var objCurrent=woEvent.element;objCurrent.blur()}if(confirm(this.config.message.NOT_AUTHENTICATED)){var certUrl=this.config.option("certUrl")||"https://nid.naver.com/user/cert.nhn?todo=cert_start";var rurl=this.config.option("certRurl")||this.config.option("objectUrl");var surl=this.config.option("certSrul")||this.config.option("objectUrl");var svc=this.config.option("certSvc")||"";top.location=certUrl+"&rurl="+encodeURIComponent(rurl)+"&surl="+encodeURIComponent(surl)+"&svc="+svc}return false}return true};sps.CommentBox.Util.prototype.checkAuth=function(){if(this.config.option("isAuth")!=undefined){return}var params={ticket:this.config.option("ticket")};this.config.instance.ajax.call({operation:"checkAuth",async:false,onSuccess:jindo.$Fn(this.onCheckAuth,this).bind(),param:params})};sps.CommentBox.Util.prototype.onCheckAuth=function(message){this.config.option("isAuth",message.is_authenticated_name=="Y")};sps.CommentBox.Config.prototype.message.NOT_AUTHENTICATED="정보통신망법에 따라 게시판에 글 작성 시 실명확인이 필요합니다. 실명확인을 하시겠습니까?";sps.ajax.option("checkAuth","is_authenticated_name.nhn");function getByteLength(s){var len=s.length;if(document.all){var temp=escape(s);var offset=temp.indexOf("%u");while(-1!=offset){++len;temp=temp.substring(offset+2);offset=temp.indexOf("%u")}}return len}function escapeUnicode(s){var escaped="";var len=s.length;var code;for(i=0;i!=len;++i){code=s.charCodeAt(i);if(code<256){escaped+=escape(s.charAt(i))}else{escaped+=s.charAt(i)}}return escaped}function trimString(source){var filteredString=trimFront(source);return trimBack(filteredString)}function trimFront(str){var indexFront,indexMover,len;indexFront=0;indexMover=0;len=str.length;while(true){indexMover=str.indexOf(" ");if(indexMover==-1){break}if(indexMover==0){str=str.substring(1,len)}else{break}}return str}function trimBack(str){var indexMover;while(true){indexMover=str.lastIndexOf(" ");if(indexMover==-1){break}if(indexMover==str.length-1){str=str.substring(0,indexMover)}else{break}}return str}var whitespace=" \t\n";function isEmpty(s){return((s==null)||(s.length==0))}function isWhitespace(s){var i;if(isEmpty(s)){return true}for(i=0;i<s.length;i++){var c=s.charAt(i);if(whitespace.indexOf(c)==-1){return false}}return true}function removeZeroString(str){while(true){var index=str.indexOf("0");if(index==0){str=str.substring(1)}else{break}}return str}function replaceBackSlash(str){return str.replace(/\\/g,"\\")}function checkURLString(str){var searchStr="http://";if(str.indexOf(searchStr)==-1){str=searchStr.concat(str)}return str}function getSelectedValue(sel){var tempValue="";var len=sel.options.length;for(i=len-1;i>=0;i--){if(sel.options[i].selected){tempValue=sel.options[i].value;break}}return tempValue}function getTowNumberStr(str){if(parseInt(str)>=1&&parseInt(str)<=9){return str="0"+str}return str}function String_format(){var buffer="";var values=String_format.arguments;var fmt=values[0];var start=0;var offset=-1;var i;for(i=1;i<values.length;i++){offset=fmt.indexOf("%s",start);if(-1!=offset){buffer+=fmt.substring(start,offset);buffer+=values[i];start=offset+2;offset=-1}}buffer+=fmt.substring(start);return buffer}String.prototype.format=String_format;function fc_chk2(){if(event.keyCode==13){event.returnValue=false}}function checkDate(formName,selName,hiddenName){sel=eval(formName+"."+selName);len=sel.options.length;for(i=len-1;i>=0;i--){if(sel.options[i].selected){var temp=eval(formName+"."+hiddenName);temp.value=sel.options[i].value;if(parseInt(temp.value)>0&&parseInt(temp.value)<10){temp.value="0"+temp.value}break}}}function isLetter(c){return(((c>="a")&&(c<="z"))||((c>="A")&&(c<="Z")))}function withHangul(str){for(i=0;i<str.length;i++){var code=str.charCodeAt(i);var ch=(str.substr(i,1)).toUpperCase();iCode=parseInt(code);if((ch<"0"||ch>"9")&&(ch<"A"||ch>"Z")&&((iCode>255)||(iCode<0))){return true}}return false}function removeSpecialCharacters(str){var tempStr="";tempStr=str;tempStr=tempStr.replace(/"/g,"");tempStr=tempStr.replace(/'/g,"");return tempStr}function removeSpecialCharactersQuot(str){var tempStr="";tempStr=str;tempStr=tempStr.replace(/"/g,"");return tempStr}var fc_isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var fc_isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;var fc_isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;function checkFlashPlayerVersion(){var _version;var _e;try{var _axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.5");_version=_axo.GetVariable("$version")}catch(_e){_version=-1}return _version}function showFlash(_swfURL_,_flashID_,_width_,_height_,_wmode_,_flashVars_,_bgColor_){_wmode_=(_wmode_==undefined)?"transparent":_wmode_;_bgColor_=(_bgColor_==undefined)?"#000000":_bgColor_;if(fc_isIE&&fc_isWin&&!fc_isOpera){_object_='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="'+_width_+'" height="'+_height_+'" id="'+_flashID_+'" align="middle">';_object_+='<param name="allowScriptAccess" value="always" />';_object_+='<param name="quality" value="high" />';_object_+='<param name="movie" value="'+_swfURL_+'" />';_object_+='<param name="wmode" value="'+_wmode_+'" />';_object_+='<param name="bgcolor" value="'+_bgColor_+'" />';_object_+='<param name="flashvars" value="'+_flashVars_+'">';_object_+="</object>"}else{_object_='<embed src="'+_swfURL_+'" quality="high" wmode="'+_wmode_+'" flashvars="'+_flashVars_+'" bgcolor="'+_bgColor_+'" width="'+_width_+'" height="'+_height_+'" name="'+_flashID_+'" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />'}document.write(_object_)}function findFlashObj(_flashID_){var tarObj=fc_isIE?document.all[_flashID_]:document[_flashID_];return tarObj}var SearchBar=$Class({$init:function(greeting){this._greeting=greeting;this._eventBind();this._addGreeting()},_focusSearchBar:function(){if($("search_bar_keyword")){if($("search_bar_keyword").value==this._greeting){$("search_bar_keyword").value=""}}},_blurSearchBar:function(){if($("search_bar_keyword")){if($("search_bar_keyword").value==""){$("search_bar_keyword").value=this._greeting}}},_addGreeting:function(){if($("search_bar_keyword")){if($("search_bar_keyword").value==""){$("search_bar_keyword").value=this._greeting}}},_validateSearchBarClick:function(e){if($("search_bar_button")){if($("search_bar_keyword").value==this._greeting||""==trimString($("search_bar_keyword").value)){alert("검색어를 입력하세요.");e.stop();return false}}$("searchMenuForm").submit()},_eventBind:function(){var element=$Element("search");if(element){$Fn(this._focusSearchBar,this).attach($("search_bar_keyword"),"focus");$Fn(this._blurSearchBar,this).attach($("search_bar_keyword"),"blur");$Fn(this._validateSearchBarClick,this).attach($("search_bar_button"),"click")}}});var ExtraRemover=$Class({$init:function(){this._eventBind()},_doNothing:function(e){e.stop()},_keydownEvent:function(e){if(e.key().shift){if(e.element.type=="textarea"){return}if(e.element.name=="keyword"){return}e.stop();return false}},_mouseDownEvent:function(e){if(e.mouse().right){e.stop();return false}if((e.key().alt||e.key().ctrl||e.key().shift)&&(e.mouse().left)){e.stop();return false}},_eventBind:function(){$Fn(this._keydownEvent,this).attach(document,"keydown");$Fn(this._doNothing,this).attach(document,"dblclick");$Fn(this._mouseDownEvent,this).attach(document,"mousedown");document.oncontextmenu=new Function("return false");document.ondragstart=new Function("return false");document.ondragend=new Function("return false");document.onselectstart=new Function("return false")}});var RecommandRankLayer=$Class({$init:function(){this._eventBind()},_choiceRecommandGenreCorrect:function(e){$("recommandGenreCorrectTab").className="choice";$("recommandGenreManaTab").className="";$Element("recommandGenreCorrectTabPanel").css({display:"block"});$Element("recommandGenreManaTabPanel").css({display:"none"});e.stop();return false},_choiceRecommandGenreMana:function(e){$("recommandGenreCorrectTab").className="";$("recommandGenreManaTab").className="choice";$Element("recommandGenreManaTabPanel").css({display:"block"});$Element("recommandGenreCorrectTabPanel").css({display:"none"});e.stop();return false},_eventBind:function(){if($("recommandGenreManaTabTrigger")){$Fn(this._choiceRecommandGenreMana,this).attach($("recommandGenreManaTabTrigger"),"click")}if($("recommandGenreCorrectTabTrigger")){$Fn(this._choiceRecommandGenreCorrect,this).attach($("recommandGenreCorrectTabTrigger"),"click")}}});function resizePopup(id){var offsetWidth=0;var offsetHeight=0;if($Agent().navigator().ie){offsetWidth=0;offsetHeight=85}else{offsetWidth=window.outerWidth-window.innerWidth;offsetHeight=window.outerHeight-window.innerHeight+15}var targetId="page_content";if(id){targetId=id}var e=document.getElementById(targetId);var width=e.offsetWidth;var height=e.offsetHeight;try{window.resizeTo(width+offsetWidth,height+offsetHeight)}catch(e){setTimeout(resizePopup,10)}}function wopen_newtarget(url,width,height){window.open(url,"_blank","directories=yes, location=yes, menubar=yes, resizable=yes, scrollbars=yes, status=yes, titlebar=yes, toolbar=yes,left=0, top=0, outerWidth ="+width+", outerHeight ="+height)}function wopen_newpopup(url,width,height){window.open(url,"_blank","directories=yes, location=yes, menubar=yes, resizable=yes, scrollbars=yes, status=yes, titlebar=yes, toolbar=yes,left=0, top=0, width ="+width+", height ="+height)}function wopen(url,width,height){window.open(url,"","status=no, toolbar=no, width="+width+", height="+height)}function wnopen(url,name,width,height){window.open(url,name,"status=yes width="+width+" height="+height)}function wnopen_nostat(url,name,width,height){window.open(url,name,"status=no, left=0, top=0, resizable=no, scrollbars=no,toolbar=no, directories=no, width="+width+" height="+height)}function wnopen_o(url,name,width,height,option){window.open(url,name,"status=yes"+option+" width="+width+" height="+height)}function wopen_sy(url,width,height){window.open(url,"","status=yes, toolbar=no,directories=no width="+width+" height="+height)}function page_resize(page_content){try{if(this.window.name!=""){page_content=(page_content==null)?"page_content":page_content;var dataobj=document.getElementById(page_content);dataobj.style.top=0;dataobj.style.left=0;var iframe_main;if(iframe_main=parent.document.getElementById(this.window.name)){iframe_main.height=dataobj.offsetHeight}}}catch(e){}}function fitPopupSize(arg1,arg2,arg3){var toWidth=null;var toHeight=null;var objOut=null;var positionRequired=true;var typeArg1=typeof(arg1);var typeArg2=typeof(arg2);var typeArg3=typeof(arg3);if(typeArg1=="undefined"||typeArg1=="boolean"){objOut=document.getElementById("page_content");if(typeArg1=="boolean"){positionRequired=arg1}}if(typeArg1=="string"){objOut=document.getElementById(arg1);if(objOut==null){return}if(typeArg2=="boolean"){positionRequired=arg2}}if(typeArg1=="object"){objOut=arg1;if(typeArg2=="boolean"){positionRequired=arg2}}if(objOut!=null){toWidth=objOut.clientWidth;toHeight=objOut.clientHeight}if(typeArg1=="number"&&typeof(arg2)=="number"){toWidth=arg1;toHeight=arg2;if(typeArg3=="boolean"){positionRequired=arg3}}if(toWidth==null&&toHeight==null){return}if(positionRequired){fitPopupSize_adjustPosition(toWidth,toHeight)}fitPopupSize_resize(toWidth,toHeight)}function fitPopupSize_adjustPosition(toWidth,toHeight){var posLeft=(window.screenLeft)?window.screenLeft:window.screenX;var posTop=(window.screenTop)?window.screenTop:window.screenY;var adjustLeft=0;var marginWidth=50;var adjustTop=0;var marginHeight=50;var movingRequired=false;if(posTop+toHeight+marginHeight>screen.availHeight){adjustTop=-(posTop+toHeight+marginHeight-screen.availHeight);movingRequired=true}if(posLeft+toWidth+marginWidth>screen.availWidth){adjustLeft=-(posLeft+toWidth+marginWidth-screen.availWidth);movingRequired=true}if(adjustTop<0){adjustTop=0}if(movingRequired){window.moveBy(adjustLeft,adjustTop)}}function fitPopupSize_resize(toWidth,toHeight){var oBody=document.body;if(oBody==null){return}if(typeof(window.innerHeight)!="undefined"&&typeof(window.innerWidth)!="undefined"&&!isOpera&&!isSafari){window.innerHeight=toHeight;window.innerWidth=toWidth}else{var diffX=toWidth-oBody.clientWidth;var diffY=toHeight-oBody.clientHeight;window.resizeBy(diffX,diffY)}}function fitPopupSizeEx(){var oBody=document.body;if(oBody==null){return}var idPrefix="page_content";var objId="";var chkResult=false;var objChk=null;for(var i=65;i<=90;i++){objId=idPrefix+String.fromCharCode(i);objChk=document.getElementById(objId);if(objChk==null){break}}if(objChk!=null){return}var objOut=window.document.createElement("<div id='"+objId+"' style='position:absolute;left:0;top:0;'>");var existNodeList=window.document.body.childNodes;while(existNodeList.length>0){objOut.appendChild(existNodeList[0])}document.body.appendChild(objOut);var toWidth=objOut.clientWidth;var toHeight=objOut.clientHeight;if(toWidth==null&&toHeight==null){return}fitPopupSize_adjustPosition(toWidth,toHeight);fitPopupSize_resize(toWidth,toHeight)}function setClientSize(w,h){if(navigator.userAgent.indexOf("MSIE")!=-1){var divEl=document.createElement("div");divEl.style.position="absolute";divEl.style.left="0px";divEl.style.top="0px";divEl.style.width="100%";divEl.style.height="100%";document.body.appendChild(divEl);window.resizeBy(w-divEl.offsetWidth,h-divEl.offsetHeight);document.body.removeChild(divEl)}else{window.resizeBy(w-window.innerWidth,-(document.body.clientHeight-document.body.offsetHeight))}}function resizeClient(){winW=document.body.scrollWidth;winH=document.body.scrollHeight;setClientSize(winW,winH)}function resizepopup2(wid){var winW=wid,winH=200;winH=document.body.scrollHeight;if(winH>550){winH=550}window.resizeTo(winW,winH+40)}var LoginUtil=new Object();LoginUtil.Login=function(){};LoginUtil.Login.prototype={goLogin:function(nextUrl){var currentUrl=nextUrl;if(!currentUrl){currentUrl=location.href}location.href="http://nid.naver.com/nidlogin.login?mode=form&url="+encodeURIComponent(currentUrl)},alertAndLogin:function(message,nextUrl,enabled){if(enabled==false&&enabled!=undefined){return}alert(message);this.goLogin(nextUrl)},confirmAndLogin:function(message,nextUrl,enabled){if(enabled==false&&enabled!=undefined){return true}if(confirm(message)){this.goLogin(nextUrl)}else{return false}}};var ViewerUtil=new Object();ViewerUtil.Viewer=function(){};ViewerUtil.Viewer.prototype={viewFlash:function(url,width,height){var currentWidth=Math.min(width,622);var currentHeight=height;if(width==0){currentWidth=622}if(height==0){currentHeight=269}var _url_=url;var _object_="";_object_='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" width="'+currentWidth+'" height="'+currentHeight+'" id="icomic" align="middle"> ';_object_+='<param name="movie" value="'+_url_+'" /> ';_object_+='<param name="quality" value="high" /> ';_object_+='<param name="wmode" value="transparent"/> ';_object_+='<embed src="'+_url_+'" quality="high" width="'+currentWidth+'" height="'+currentHeight+'" name="icomic" allowScriptAccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" /> ';_object_+="</object> ";document.write(_object_)}};var RealtimeRankLayer=$Class({$init:function(){this._eventBind()},_choiceFavoriteRealtimeRank:function(e){$("realTimeRankChoiceTabFavorite").className="choice";$("realTimeRankChoiceTabUpdate").className="";$Element("realTimeRankFavorite").css({display:"block"});$Element("realTimeRankUpdate").css({display:"none"});e.stop();return false},_choiceUpdateRealtimeRank:function(e){$("realTimeRankChoiceTabFavorite").className="";$("realTimeRankChoiceTabUpdate").className="choice";$Element("realTimeRankUpdate").css({display:"block"});$Element("realTimeRankFavorite").css({display:"none"});e.stop();return false},_eventBind:function(){if($("realTimeRankChoiceTabFavoriteClick")){$Fn(this._choiceFavoriteRealtimeRank,this).attach($("realTimeRankChoiceTabFavoriteClick"),"click")}if($("realTimeRankChoiceTabUpdate")){$Fn(this._choiceUpdateRealtimeRank,this).attach($("realTimeRankChoiceTabUpdate"),"click")}}});var debugwindow;function popup(){debugwindow=window.open("debug.html","debug","width=800,height=650")}function debug(){var msg=[];for(var i=0;arguments.length>i;i++){msg.push(arguments[i])}debugwindow.document.getElementById("debug").value=debugwindow.document.getElementById("debug").value+"\n"+msg.join(",")}function isIE6HighOrOtherBrowser(){return(!$Agent().navigator().ie)||($Agent().navigator().ie&&$Agent().navigator().version>=7)}function returnPosition(){return(!$Agent().navigator().ie)||($Agent().navigator().ie&&$Agent().navigator().version>=7)?"fixed":"relative"}function extend(a,b){for(var i in b){a[i]=b[i]}return a}function insertAfter(newElement,targetElement){var parent=targetElement.parentNode;if(parent.lastChild==targetElement){parent.appendChild(newElement)}else{parent.insertBefore(newElement,targetElement.nextSibling)}}if($Agent().navigator().firefox){var _emptyTags={IMG:true,BR:true,INPUT:true,META:true,LINK:true,PARAM:true,HR:true};HTMLElement.prototype.__defineGetter__("outerHTML",function(){var attrs=this.attributes;var str="<"+this.tagName.toLowerCase();for(var i=0;i<attrs.length;i++){str+=" "+attrs[i].name+'="'+attrs[i].value+'"'}if(_emptyTags[this.tagName]){return str+">"}return str+">"+this.innerHTML+"</"+this.tagName.toLowerCase()+">"});HTMLElement.prototype.__defineSetter__("outerHTML",function(sHTML){var r=this.ownerDocument.createRange();r.setStartBefore(this);var df=r.createContextualFragment(sHTML);this.parentNode.replaceChild(df,this)})}function createCookie(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString()}else{var expires=""}document.cookie=name+"="+value+expires+"; path=/"}function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length)}}return null}function eraseCookie(name){createCookie(name,"",-1)}var JsMock=$Class({$init:function(finish){this.finish=finish},_initData:function(){return{leftend:false,rightend:false,list:[]}},getMockObject:function(num,type){var returnVal=this._initData();if(type=="right"){returnVal.rightend=this._isEnd(num);returnVal.list=this._getRightObject(num)}else{returnVal.leftend=this._isfirst(num);returnVal.list=this._getLeftObject(num)}return returnVal},_isfirst:function(num){return(num<=2)?true:false},_isEnd:function(num){return((this.finish-num)<=2)?true:false},_getLeftObject:function(num){var list=[];if(num>2){for(var i=0;2>i;i++){list.push({link:"#",thumbnail:(num-1)+".jpg",chapter:(num-1)+"화",title:(num-1)+"화다",id:(num-1)});num--}list.reverse()}else{if(num==2){list.push({link:"#",thumbnail:1+".jpg",chapter:1+"화",title:1+"화다",id:1})}}return list},_getRightObject:function(num){var list=[];if(this.finish-num>=2){for(var i=0;2>i;i++){list.push({link:"#",thumbnail:(num+1)+".jpg",chapter:(num+1)+"화",title:(num+1)+"화다",id:(num+1)});num++}}else{if(this.finish-num==1){list.push({link:"#",thumbnail:this.finish+".jpg",chapter:this.finish+"화",title:this.finish+"화다",id:this.finish})}}return list}});var RemoconComic=$Class({$init:function(id,cutLineTop){this._visibleRemcon=false;var visibleRemocon=readCookie("visibleRemocon");if(visibleRemocon==null||visibleRemocon=="true"){this._visibleRemcon=true}if(visibleRemocon=="false"){this._visibleRemcon=false}if(this._visibleRemcon==false){return}this.remoconbody=$(id);this.elViewArea=$("comic_view_area");this._setTop();if(readCookie("top")){this.cutLineTop=readCookie("top");this._setTop()}else{this.cutLineTop=this._getRemoconPos()[0]}this._eventBind()},_currentRemoconPosition:function(){var documentScrollTop=document.documentElement.scrollTop;var elementOffset=$Element(this.remoconbody).offset();return[elementOffset.top,documentScrollTop]},_scrollMove:function(){var position=this._currentRemoconPosition();if((position[0]-position[1])<=this.cutLineTop&&position[0]>this.cutLineTop){$Element(this.remoconbody).css({position:returnPosition(),top:this.cutLineTop+"px"})}},_getCssRemoconTop:function(){return parseInt($Element(this.remoconbody).css("top").replace("px",""))},_hideButton:function(){$Element("comicRemocon").hide();createCookie("visibleRemocon","false");this._visibleRemcon=false},_getRemoconPos:function(){var welViewArea=$Element(this.elViewArea);var nViewTop=welViewArea.offset().top;var nViewLeft=welViewArea.offset().left;var nViewWidth=welViewArea.width();var nRemoconTop=nViewTop;var nRemoconLeft=nViewLeft+nViewWidth-$Element(this.remoconbody).width();return[nRemoconTop,nRemoconLeft]},_setTop:function(){var nRemoconTop=this._getRemoconPos()[0];var nRemoconLeft=this._getRemoconPos()[1];$Element(this.remoconbody).css({position:returnPosition(),top:(readCookie("top")?readCookie("top"):nRemoconTop)+"px",left:(readCookie("left")?readCookie("left"):nRemoconLeft)+"px"})},setCutLineTop:function(top,left){createCookie("top",top);createCookie("left",left);this.cutLineTop=top},_eventBind:function(){$Fn(this._scrollMove,this).attach(window,"scroll");$Fn(this._hideButton,this).attach($("butt"),"click")}});var LowIE6RemoconComic=$Class({$init:function(id,cutLineTop){this._visibleRemcon=false;var visibleRemocon=readCookie("visibleRemocon");if(visibleRemocon==null||visibleRemocon=="true"){this._visibleRemcon=true}if(visibleRemocon=="false"){this._visibleRemcon=false}if(this._visibleRemcon==false){return}this.remoconbody=$(id);this.elViewArea=$("comic_view_area");this._setTop();if(readCookie("top")){this.cutLineTop=readCookie("top");this._setTop();this.firstTop=readCookie("top")}else{this.cutLineTop=this._getRemoconPos()[0];this.firstTop=$Element(this.remoconbody).offset()["top"]}this.firstTop=$Element(this.remoconbody).offset()["top"];this.moved=false;this._eventBind()},_currentRemoconPosition:function(){var documentScrollTop=[document.documentElement.scrollTop,document.documentElement.scrollLeft];var elementOffset=$Element(this.remoconbody).offset();return[elementOffset,documentScrollTop]},_scrollMove:function(){var position=this._currentRemoconPosition();var currentTop=this._getCssRemoconTop();var gap=(position[0]["top"]-position[1][0])-this.cutLineTop;if(gap<=0&&position[0]["top"]>=this.cutLineTop){$Element(this.remoconbody).css({position:returnPosition(),top:(currentTop-gap)+"px"});this.moved=true}if((gap>0||this.moved)&&(position[0]["top"]>this.firstTop||this.moved)){$Element(this.remoconbody).css({position:returnPosition(),top:(currentTop-gap)+"px"})}},_getCssRemoconTop:function(){var top=$Element(this.remoconbody).css("top").replace("px","");return parseInt(top=="auto"?"0":top)},_hideButton:function(){createCookie("visibleRemocon","false");this._visibleRemcon=false;$Element("comicRemocon").hide()},_getRemoconPos:function(){var welViewArea=$Element(this.elViewArea);var nViewTop=welViewArea.offset().top;var nViewLeft=welViewArea.offset().left;var nViewWidth=welViewArea.width();var nRemoconTop=nViewTop;var nRemoconLeft=nViewLeft+nViewWidth-$Element(this.remoconbody).width();return[nRemoconTop,nRemoconLeft]},_setTop:function(){var position=this._currentRemoconPosition();var nRemoconTop=this._getRemoconPos()[0];var nRemoconLeft=this._getRemoconPos()[1];$Element(this.remoconbody).css({position:returnPosition(),top:(((parseInt(readCookie("top"))?parseInt(readCookie("top")):nRemoconTop)+parseInt(position[1][0])-parseInt(position[0]["top"]))+"px"),left:(((parseInt(readCookie("left"))?parseInt(readCookie("left")):nRemoconLeft)+parseInt(position[1][1]))-parseInt(position[0]["left"])+"px")})},setCutLineTop:function(top,left){var position=this._currentRemoconPosition();createCookie("top",top);createCookie("left",position[0]["left"]-position[1][1]);this.cutLineTop=top},_eventBind:function(){$Fn(this._scrollMove,this).attach(window,"scroll");$Fn(this._hideButton,this).attach($("butt"),"click")}});var currentActiveDrag;var Drag=$Class({$init:function(id,dragObject,initLeft,initTop){this.element=$(id);this.richElement=$Element(this.element);this.navigator=$Agent().navigator();this.dragObject=dragObject;this.initLeft=initLeft;this.initTop=initTop;this.initBodyW=document.body.clientWidth;this.initBodyH=document.body.clientHeight;var defaultWidthLimit=this.element.offsetWidth;var defaultHeightLimit=this.element.offsetHeight;this.firstLeft=this._deletePx(this.richElement.css("left"))-this.richElement.offset().left;this.firstTop=this.element.offsetTop;var z_index=this.richElement.css("zIndex");this.options={isStop:false,dummy:function(){return false},realZindex:parseInt(z_index=="auto"?0:z_index)};this.richElement.css({cursor:"move"});this.functions={mouseup:$Fn(this.onUp,this),mousemove:$Fn(this.onMove,this),keypress:$Fn(this.options.dummy,this),dragstart:$Fn(this.options.dummy,this),selectstart:$Fn(this.options.dummy,this)};this.mouseCheck={mouseout:$Fn(this.__out,this)};$Fn(this.onDown,this).attach($(arguments[0]),"mousedown");$Fn(this.__out,this).attach(document,"mouseout");if(this.navigator.ie&&this.navigator.version==6){$Fn(this.__scroll,this).attach(window,"scroll")}},setStartPoint:function(){var ele=this.richElement;var left=ele.css("left");var top=ele.css("top");return[left=="auto"?0:this._deletePx(left),top=="auto"?0:this._deletePx(top)]},getRectangle:function(element){return[element.offsetWidth,element.offsetHeight]},_deletePx:function(size){size=size=="auto"?"0px":size+"";return parseInt(size.replace("px"))},menageCurrentActiveDrag:function(){currentActiveDrag=currentActiveDrag?"":this.element},setPosition:function(element,x,y){var minWidth=0;var minHeight=0;var welRemocon=$Element(this.element);if(this.navigator.ie&&this.navigator.version==6){var clientH=document.documentElement.offsetHeight;var clientW=document.documentElement.offsetWidth;minWidth=this.initBodyW-welRemocon.width();minHeight=this.initBodyH-welRemocon.height();if(welRemocon.offset().left<=0&&this.firstLeft>x){x=this.firstLeft}else{if(minWidth<=welRemocon.offset().left&&this._deletePx(this.element.style.left)<x){x=minWidth-this.initLeft}}if(welRemocon.offset().top<=0&&this._deletePx(this.element.style.top)>y){y=-this.initTop}else{if(minHeight<=welRemocon.offset().top&&this._deletePx(this.element.style.top)<y){y=minHeight-this.initTop}}}else{minWidth=document.documentElement.clientWidth-welRemocon.width();minHeight=document.documentElement.clientHeight-welRemocon.height();if(x<0){x=0}else{if(x>minWidth){x=minWidth}}if(y<0){y=0}else{if(y>minHeight){y=minHeight}}}this.richElement.css({left:x+"px",top:y+"px"})},menageCurrentActiveDrag:function(){currentActiveDrag=currentActiveDrag?"":this.element},__out:function(e){try{if(e.relatedElement.tagName=="HTML"){}}catch(eee){try{this.onUp()}catch(eeee){}}},__scroll:function(){if(this.element.offsetLeft>=(this.initBodyW-this.element.offsetWidth)){this.richElement.css({left:(this.initBodyW-this.element.offsetWidth)+"px"})}if(this.element.offsetTop>=(this.initBodyH-this.element.offsetHeight)){this.richElement.css({top:(this.initBodyH-this.element.offsetHeight-this.initTop)+"px"})}},onMove:function(){var ev=arguments[0].pos();var xPosition=this.startEdgePosition[0]+ev.pageX-this.eventStartPos[0];var yPosition=this.startEdgePosition[1]+ev.pageY-this.eventStartPos[1];this.setPosition(this.element,(this.startEdgePosition[0]+ev.pageX-this.eventStartPos[0]),(this.startEdgePosition[1]+ev.pageY-this.eventStartPos[1]))},onUp:function(e){this.richElement.css({zIndex:this.options.realZindex});this.eventManage("detach");this.menageCurrentActiveDrag();var nTop=0,nLeft=0;var oPos=e.pos(true);if(this.navigator.ie&&this.navigator.version=="6"){nTop=oPos.clientY-oPos.offsetY;nLeft=oPos.clientX-oPos.offsetX}else{nTop=parseInt(this.richElement.css("top"),10);nLeft=parseInt(this.richElement.css("left"),10)}this.dragObject.setCutLineTop(nTop,nLeft)},onDown:function(){var e=arguments[0];var targetElem=$Element(e.element);if(targetElem.hasClass("up")||targetElem.hasClass("down")){e.stop();return}if((this.navigator.ie&&this.navigator.version==6&&this.richElement.css("top")=="auto")){this.richElement.css({top:"0px",position:returnPosition()})}else{if(this.richElement.css("top")=="auto"){this.richElement.css({position:returnPosition(),top:(this.richElement.offset().top-document.documentElement.scrollTop)+"px"})}else{this.richElement.css({position:returnPosition()})}}var buttonKey=this.navigator.ie?e._event.button-1:e._event.button;if(buttonKey==0){var ev=e.pos();this.__onUpComplete=false;this.richElement.css({zIndex:"1000"});this.startEdgePosition=this.setStartPoint();this.eventStartPos=[ev.pageX,ev.pageY];this.eventManage("attach");e.stop()}},eventManage:function(eventType){for(var event in this.functions){this.functions[event][eventType](document,event)}}});var NavigationBar=$Class({$init:function(_initData,url){this._setTemplate();this._defalutSetting();this.positionLeft=-1;this.positionRight=725;this.width=121;this.contentLength=7;this.isEnd=navi_init.rightend;this.currentData=_initData;this.sendFirstNum=this._getNum(this.currentData.list[0].chapter);this.sendLastNum=this._getNum(_initData.list[_initData.list.length-1].chapter);this.hasLeftElement=this.sendFirstNum==1?(_initData.list.length-this.contentLength):0;this.hasRightElement=this.isEnd?(_initData.list.length-this.contentLength):0;this.speed=$Agent().navigator().ie?20:30;this.isFinishMove=true;this.ajaxURL=url;this.lastnum=this._getNum(this.currentData.list[this.currentData.list.length-1].chapter);this.firstnum=this.sendFirstNum==1?this.sendFirstNum-this.contentLength+this.currentData.list.length:this.sendFirstNum;this.mustHideLeftButtonNum=1;this.mustHideRightButtonNum=this.isEnd?this.lastnum:100000;this.lastGap=this.isEnd?(this.contentLength-_initData.list.length):0},_getNum:function(returnVal){return parseInt(returnVal.replace("E",""))},_defalutSetting:function(){$Element("comic_body").css("width","845px");this._buttonSet();this._eventBind()},_buttonSet:function(){this.beforeButton=$("comic_before");this.afterButton=$("comic_after");this.comicNavigation=$("comic_move")},_setTemplate:function(){this.template='<div class="item" style="left:{left}px;"><a href="{link}"><img onerror="this.src=\'http://static.comic.naver.net/staticImages/COMICWEB/NAVER/img/common/non70_42.gif\'" src="{thumbnail}" alt="{chapter}" width="70" height="42">{title}</a></div>'},_generateDiv:function(data,type){if(type=="right"){this.positionRight=this.positionRight+this.width;data.left=this.positionRight}else{this.positionLeft=this.positionLeft-this.width;data.left=this.positionLeft}return this.template.replace(/{([^{}]*)}/g,function(a,b){var r=data[b];return r})},_click:function(e){var type=arguments[0].element.id=="comic_before"?"left":"right";this._getData(type);e.stop()},_setNumber:function(type,rightVal){if(type=="right"){this.firstnum+=rightVal;this.lastnum+=rightVal}else{this.firstnum-=rightVal;this.lastnum-=(rightVal-this.lastGap);this.lastGap=0}},_realLeft:function(){var move=$Element($("comic_move"));var left=move.css("left").replace("px","");left=left=="auto"?0:left;return left},_animate:function(type,val){var left=this._realLeft();if(type=="right"){left=parseInt(left)-(this.width*val);this._mover=window.setInterval($Fn(this._move,this).bind(left,"right"),1)}else{val=this.firstnum==0?1:val;left=parseInt(left)+(this.width*val);this._mover=window.setInterval($Fn(this._move,this).bind(left,"left"),1)}},_move:function(left,type){var move=$Element($("comic_move"));var currentLeft=parseInt(this._realLeft());var isContinueMove=type=="right"?(left>=currentLeft):(left<=currentLeft);if(isContinueMove){move.css({left:left+"px"});this.isFinishMove=true;window.clearInterval(this._mover)}else{move.css({left:(currentLeft-(type=="right"?this.speed:-this.speed))+"px"})}},_addNode:function(type){var returnVal=0;var hasFreeElement=type=="right"?this.hasRightElement:this.hasLeftElement;if(hasFreeElement>0){returnVal=this._cacheOrAddElement(type,hasFreeElement)}else{returnVal=this._notCacheElement(type,hasFreeElement)}return returnVal},_cacheOrAddElement:function(type,hasFreeElement){var returnVal=0;if(hasFreeElement==1){if(type=="left"&&!(this.firstnum<=1)&&(this.firstnum-hasFreeElement>1)){returnVal=this._addElement(type)}else{if(type=="right"&&!(this.isEnd)){returnVal=this._addElement(type)}else{returnVal=this._howMoveElement(type)}}}else{returnVal=this._howMoveElement(type)}return returnVal},_notCacheElement:function(type,hasFreeElement){var returnVal=0;if(type=="left"&&!(this.firstnum<=0)&&(this.firstnum-hasFreeElement>1)){returnVal=this._addElement(type)}else{if(type=="right"&&!(this.isEnd)){returnVal=this._addElement(type)}}return returnVal},_howMoveElement:function(type){var returnVal=this[type=="right"?"hasRightElement":"hasLeftElement"]>=3?3:this[type=="right"?"hasRightElement":"hasLeftElement"];this[type=="right"?"hasRightElement":"hasLeftElement"]-=returnVal;this[type=="left"?"hasRightElement":"hasLeftElement"]+=returnVal;return returnVal},_addElement:function(type){var list=this.currentData.list;var newNodeString=[];if(type=="left"){list.reverse()}for(var i=0;list.length>i;i++){newNodeString.push(this._generateDiv(list[i],type))}var replacehtml=this._returnReg(type,this.comicNavigation.innerHTML,newNodeString);this.comicNavigation.innerHTML=replacehtml;this[type=="right"?"hasLeftElement":"hasRightElement"]+=list.length;if(type=="right"){this.sendLastNum+=list.length;this.isEnd=this.isEnd||this.currentData.rightend;if(this.isEnd){this.mustHideRightButtonNum=this._getNum(this.currentData.list[this.currentData.list.length-1].chapter)}}else{this.sendFirstNum-=list.length}return list.length},_getData:function(type){var _this=this;var no=this[type=="right"?"sendLastNum":"sendFirstNum"];$Ajax(this.ajaxURL,{type:"jsonp",onload:function(oResponse){var oRes=oResponse.json();_this.currentData=oRes;if(_this.isFinishMove){var rightVal=_this._addNode(type);_this.isFinishMove=false;_this._setNumber(type,rightVal);_this._buttonToggle();_this._animate(type,rightVal)}}}).request({type:type,id:no})},_returnReg:function(type,currentHTML,newNodeString){if(type=="right"){return currentHTML.replace(/<div[^>]*>((?!<\/div>).)*<\/div>[^<]*$/i,function(a,b){return a+newNodeString.join("")})}else{return currentHTML.replace(/(<div[^>]*>)/i,function(a,b){return newNodeString.join("")+a})}},_buttonToggle:function(){$Element(this.beforeButton).css({visibility:(this.firstnum<=this.mustHideLeftButtonNum)?"hidden":"visible"});if(this.isEnd){$Element(this.afterButton).css({visibility:(this.lastnum>=this.mustHideRightButtonNum)?"hidden":"visible"})}else{$Element(this.afterButton).css({visibility:"visible"})}},_eventBind:function(){$Fn(this._click,this).attach(this.beforeButton,"click","left");$Fn(this._click,this).attach(this.afterButton,"click","right")}});FreeComicEventDispatcher=$Class({$init:function(titleId,no,sequence,type,painterId,painterType,articleCount,genreName,typeName,isLogin){this.titleId=titleId;this.no=no;this.seq=sequence;this.type=type;this.typeName=typeName;this.articleCount=articleCount;this.painterId=painterId;this.genreName=genreName;this.painterType=painterType;this._isLogin=isLogin;this._eventBind()},_matchTitleByPainterIdClick:function(e){location.href="/paintersTitle.nhn?painterId="+encodeURIComponent(this.painterId);e.stop()},_addFavoritePainterClick:function(e){var loginUtil=new LoginUtil.Login();if(loginUtil.confirmAndLogin("로그인해야 이용할 수 있습니다. 로그인 하겠습니까?",location.href,!this._isLogin)){location.href="/mypage/favoritePainter.nhn?m=insert&painterId="+encodeURIComponent(this.painterId)+"&titleId="+this.titleId+"&nextUrl="+encodeURIComponent(location.href)}e.stop()},_deleteArticleButtonClick:function(e){var loginUtil=new LoginUtil.Login();if(loginUtil.confirmAndLogin("로그인해야 이용할 수 있습니다. 로그인 하겠습니까?",location.href,!this._isLogin)){if(this.articleCount==1){if(confirm("타이틀을 삭제하겠습니까?")){if(this.typeName!="webtoon"){location.href="/upload/delete.nhn?titleId="+this.titleId+"&no="+this.no+"&type=title&nextUrl="+encodeURIComponent("/genre/"+this.typeName+".nhn?m="+this.genreName)}else{location.href="/upload/delete.nhn?titleId="+this.titleId+"&no="+this.no+"&type=title&nextUrl="+encodeURIComponent("/weekday/"+this.typeName+".nhn")}}}else{if(confirm(this.seq+"회를 삭제하겠습니까?")){location.href="/upload/delete.nhn?titleId="+this.titleId+"&no="+this.no+"&nextUrl="+encodeURIComponent("/"+this.typeName+"/list.nhn?titleId="+this.titleId)}}}else{}e.stop()},_indictmentButtonClick:function(e){wnopen_nostat("/indictment.nhn?m=article&titleId="+this.titleId+"&no="+this.no+"&type="+this.type,"indict_inst",606,491);e.stop()},_eventBind:function(){if($("matchTitleByPainterId")){$Fn(this._matchTitleByPainterIdClick,this).attach($("matchTitleByPainterId"),"click")}if($("matchTitleByPainterIdBottom")){$Fn(this._matchTitleByPainterIdClick,this).attach($("matchTitleByPainterIdBottom"),"click")}if($("addFavoritePainterBottom")){$Fn(this._addFavoritePainterClick,this).attach($("addFavoritePainterBottom"),"click")}if($("addFavoritePainterTop")){$Fn(this._addFavoritePainterClick,this).attach($("addFavoritePainterTop"),"click")}if($("insertIndictment")){$Fn(this._indictmentButtonClick,this).attach($("insertIndictment"),"click")}if($("deleteArticleButton")){$Fn(this._deleteArticleButtonClick,this).attach($("deleteArticleButton"),"click")}if($("deleteArticleButtonBottom")){$Fn(this._deleteArticleButtonClick,this).attach($("deleteArticleButtonBottom"),"click")}}});FreeComicShowHideEventHandler=$Class({$init:function(eventObject){this._eventObject=eventObject;this._eventBind()},_showEvent:function(e){if($Element(this._eventObject.target).css("display")=="block"){var notPassAction=true;if(this._eventObject.hideHandler!=undefined&&this._eventObject.hideHandler!=null){notPassAction=this._eventObject.hideHandler()}if(notPassAction!=false){$Element(this._eventObject.target).css("display","none")}}else{hideAllLayer();var notPassAction=true;if(this._eventObject.showHandler!=undefined&&this._eventObject.showHandler!=null){notPassAction=this._eventObject.showHandler()}if(notPassAction!=false){$Element(this._eventObject.target).css("display","block")}}e.stop();return false},_hideEvent:function(e){var cssDisplayValue=$Element(this._eventObject.target).css("display");$Element(this._eventObject.target).css("display","none");if(this._eventObject.hideHandler!=undefined&&this._eventObject.hideHandler!=null){this._eventObject.hideHandler()}},_eventBind:function(){if($(this._eventObject.button)){$Fn(this._showEvent,this).attach($(this._eventObject.button),"click");$Fn(this._hideEvent,this).attach(document,"click")}}});FreeComicShowHideEventRegister=$Class({$init:function(eventObject){this._eventObject=eventObject;this._eventBind()},_eventBind:function(){for(i=0;i<this._eventObject.length;i++){var current=this._eventObject[i];new FreeComicShowHideEventHandler(current)}}});StarScoreItem=$Class({$init:function(id,point){this.id=id;this.point=point;this._eventBind()},changeStarScore:function(point){$Element("topTargetMask").css({width:point+"%"});$Element("bottomTargetMask").css({width:point+"%"});$Element("pointSelectOption").css({display:"none"});$Element("pointSelectOption_2").css({display:"none"})},_vote:function(e){this.changeStarScore(this.point);e.stop();return false},_eventBind:function(){if($(this.id)){$Fn(this._vote,this).attach($(this.id),"click")}}});StarScorePoll=$Class({$init:function(isLogin,oPageInfo){this._isLogin=isLogin;this._oPageInfo=oPageInfo||{};this._eventBind()},_vote:function(e){e.stop();var nScore=parseInt($("topTargetMask").style.width,10)/10;this._oPageInfo.score=nScore;this._oPageInfo.m="vote";var sUrl=this._oPageInfo.url;var welTopTotalStarPoint=$Element("topTotalStarPoint");var welBottomTotalStarPoint=$Element("bottomTotalStarPoint");var welTopTotalNumber=$Element("topPointTotalNumber");var welBottomTotalNumber=$Element("bottomPointTotalNumber");var welTopStarLabel=$Element("topStarLabel ");var welBottomStarLabel=$Element("bottomStarLabel");var welTopStarSelecbox=$Element("topStarSelectbox");var welBottomStarSelecbox=$Element("bottomStarSelectbox");new $Ajax(sUrl,{type:"jsonp",onload:$Fn(function(oResponse){var oRes=oResponse.json();var sMessage=oRes.message;var nAvg=oRes.avg;var nCount=oRes.count;if(nAvg!="-1"){welTopTotalStarPoint.first().first().css("width",(nAvg*10)+"%");welBottomTotalStarPoint.first().first().css("width",(nAvg*10)+"%");welTopTotalNumber.first().html(nAvg);welBottomTotalNumber.first().html(nAvg);welTopTotalNumber.next().html("(참여<em>"+nCount+"<em>)&nbsp;");welBottomTotalNumber.next().html("(참여<em>"+nCount+"<em>)&nbsp;");welTopStarSelecbox.hide();welBottomStarSelecbox.hide();welTopStarSelecbox.parent().appendHTML('<dd class="txt"><span>참여하셨습니다.</span></dd>');welBottomStarSelecbox.parent().appendHTML('<dd class="txt"><span>참여하셨습니다.</span></dd>')}alert(sMessage)},this).bind()}).request(this._oPageInfo)},changeStarScore:function(point){$Element("topTargetMask").css({width:point+"%"});$Element("bottomTargetMask").css({width:point+"%"});$("formStarScore").value=point/10;$Element("pointSelectOption").css({display:"none"});$Element("pointSelectOption_2").css({display:"none"});return false},_eventBind:function(){if($("topStarScoreSubmitButton")){$Fn(this._vote,this).attach($("topStarScoreSubmitButton"),"click")}if($("bottomStarScoreSubmitButton")){$Fn(this._vote,this).attach($("bottomStarScoreSubmitButton"),"click")}for(i=1;i<=10;i++){new StarScoreItem("topStar"+i+"Select",i*10);new StarScoreItem("bottomStar"+i+"Select",i*10)}}});function checkUploadCertain(e){e.stop();if("Y"!=loggedIn){if(!confirm("로그인해야 이용할 수 있습니다. 로그인 하겠습니까?")){return false}else{var currentUrl=location.href;location.href="http://nid.naver.com/nidlogin.login?mode=form&url="+encodeURIComponent("http://"+location.host+"/upload/upload.nhn");return}}location.href="/upload/upload.nhn";return true}function hideAllLayer(){for(var i=0;i<newButtonObject.length;i++){$Element(newButtonObject[i].target).css("display","none")}}var artistLayer;var artistAction;Artist=$Class({$init:function(){artistLayer=new nhn.ToolTip($("author_layer"))},viewArtist:function(titleId,element){var url="/artist/artistListAsync.nhn?titleId="+titleId;try{$Ajax(url,{onload:function(response){var jsonData=eval("("+response.text()+")");if(jsonData.error||jsonData.error==undefined||jsonData.count<1){alert("작가의 작품정보 조회에 실패했습니다.")}else{var artistList=jsonData.list;if(jsonData.count==1){location.href="/artistTitle.nhn?artistId="+artistList[0].artistId}else{$Element("author_layer_inner").html("");$Element("author_layer").css("border","");$Element("author_layer_inner").css("border","1px solid #b6b6b6");for(var i=0;i<jsonData.count;i++){var liElement=new $Element("<li>");var aElement=new $Element("<a>");aElement.attr("href","/artistTitle.nhn?artistId="+artistList[i].artistId);aElement.html("&lt;"+artistList[i].nickname+"&gt;의 다른작품");liElement.append(aElement);$Element("author_layer_inner").append(liElement);if(i==9){$Element("author_layer").css("border","1px solid #b6b6b6");$Element("author_layer_inner").css("border","0")}}artistLayer.show(element)}}}}).request()}catch(e){alert("조회에 실패했습니다.")}return false}});function moveArticleByTitleIdSeq(type,titleId,seq){var sequence=seq;if(isNaN(seq)){sequence=$(seq).value;if(isNaN(sequence)){alert("회차는 숫자만 입력 가능합니다.");return}}location.href="/"+type+"/detail.nhn?titleId="+titleId+"&seq="+sequence}function clickInputFocus(ev,element){var e=ev;if(!e){e=window.event}if(typeof e.preventDefault!="undefined"){e.preventDefault()}if(typeof e.stopPropagation!="undefined"){e.stopPropagation()}element.focus();return false}function moveArticleByEnterKey(ev,type,titleId,seq){var e=ev;if(!e){e=window.event}if(e.keyCode==13){moveArticleByTitleIdSeq(type,titleId,seq)}}function checkNaN(element){if(isNaN(element.value)){alert("회차는 숫자만 입력 가능합니다.");element.focus()}return false};Adpost=jindo.$Class({$init:function(elAdpost,wTemplate,sUrl,sChannel,nCnt,sKeyword,htOption){this.option({nBuffer:1000});this.option(htOption||{});this._wTemplate=wTemplate;this._welAdpost=jindo.$Element(elAdpost);this._nAdpostOffset=this._welAdpost.offset().top;this._wfScroll=jindo.$Fn(this._onScroll,this).attach(window,"scroll");this._sApiUrl=sUrl+"?deviceType=PC&ch="+sChannel+"&cnt="+nCnt+"&ref="+encodeURIComponent(document.referrer);if(sKeyword){this._sApiUrl+="&tag="+sKeyword}this._onScroll()},_onScroll:function(){var welDoc=jindo.$Document(document);if(welDoc.scrollPosition().top+welDoc.clientSize().height>this._nAdpostOffset-this.option("nBuffer")&&welDoc.scrollPosition().top<this._nAdpostOffset+this.option("nBuffer")){this._wfScroll.detach(window,"scroll");this._wfScroll=null;this._callAdpost()}},_callAdpost:function(){var self=this;var oAjax=new $Ajax(this._sApiUrl,{type:"jsonp",onload:function(res){var response=res.json();if(response.ads!=null){self._success(response.ads)}else{if(response.code==100||response.code==200){self._error()}}},ontimeout:function(){this._welAdpost.hide()},onerror:function(){this._welAdpost.hide()},timeout:3});oAjax.request()},_success:function(aAds){var aKwdAdpost=[];var whtKwdAdpost=jindo.$H();for(var i in aAds){var oAd=aAds[i];if(!oAd.kwd){continue}if(!whtKwdAdpost.$(oAd.kwd)){whtKwdAdpost.add(oAd.kwd,{kwd:oAd.kwd,ads:[]})}var oKwdAdpost=whtKwdAdpost.$(oAd.kwd);oKwdAdpost.ads.push(oAd)}whtKwdAdpost.forEach(function(v){aKwdAdpost.push(v)});this._welAdpost.html(this._wTemplate.process({length:aKwdAdpost.length,adpostList:aKwdAdpost}))},_error:function(){this._welAdpost.hide()}}).extend(jindo.Component);